2025-12-23 20:00:39.884  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 24901 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 20:00:39.886 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 20:00:39.886  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 20:00:40.123  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 20:00:40.146  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 6 JPA repository interfaces.
2025-12-23 20:00:40.303  WARN [main] [] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Unable to load cache item
2025-12-23 20:00:40.307  INFO [main] [] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-23 20:00:40.314 ERROR [main] [] o.s.boot.SpringApplication               : Application run failed

java.lang.IllegalStateException: Unable to load cache item
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:75)
	at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130)
	at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317)
	at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562)
	at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:156)
	at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:113)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:534)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:153)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:789)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:607)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at com.westwood.WestwoodBackendApplication.main(WestwoodBackendApplication.java:10)
Caused by: java.lang.NoClassDefFoundError: UserDetailsServiceImpl
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3373)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2555)
	at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:655)
	at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:35)
	at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:26)
	at org.springframework.cglib.core.ClassLoaderAwareGeneratorStrategy.generate(ClassLoaderAwareGeneratorStrategy.java:57)
	at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:366)
	at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575)
	at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107)
	at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57)
	... 20 common frames omitted
Caused by: java.lang.ClassNotFoundException: UserDetailsServiceImpl
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)
	... 33 common frames omitted

2025-12-23 20:03:11.641  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 25157 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 20:03:11.642 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 20:03:11.642  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 20:03:11.834  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 20:03:11.852  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 6 JPA repository interfaces.
2025-12-23 20:03:12.176  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 20:03:12.182  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 20:03:12.182  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 20:03:12.228  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 20:03:12.229  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 569 ms
2025-12-23 20:03:12.255  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 20:03:12.324  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 20:03:12.324  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 20:03:12.328  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 20:03:12.405  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 20:03:12.407  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 20:03:12.415  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 20:03:12.416  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.006s)
2025-12-23 20:03:12.418  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 20:03:12.430  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 20:03:12.433  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create clients table"
2025-12-23 20:03:12.441  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 20:03:12.447 ERROR [main] [] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2 - create payment transactions table" failed! Please restore backups and roll back database and code!
2025-12-23 20:03:12.449 ERROR [main] [] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userDetailsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-12-23 20:03:12.458  INFO [main] [] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-23 20:03:12.459  WARN [main] [] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [HikariPool-1 connection adder] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.10/java.lang.Thread.sleep(Native Method)
 app//com.zaxxer.hikari.util.UtilityElf.quietlySleep(UtilityElf.java:53)
 app//com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:729)
 app//com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:703)
 java.base@17.0.10/java.util.concurrent.FutureTask.run(FutureTask.java:264)
 java.base@17.0.10/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
 java.base@17.0.10/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
 java.base@17.0.10/java.lang.Thread.run(Thread.java:840)
2025-12-23 20:03:12.460  WARN [main] [] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-12-23 20:03:12.460  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 20:03:12.463  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 20:03:12.466  INFO [main] [] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-23 20:03:12.471 ERROR [main] [] o.s.boot.SpringApplication               : Application run failed

org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:165)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at com.westwood.WestwoodBackendApplication.main(WestwoodBackendApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:516)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:222)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userDetailsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1212)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:174)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:169)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:154)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:87)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1212)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 54 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1705)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1454)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 68 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaSharedEM_entityManagerFactory': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:682)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1185)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 82 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2__create_payment_transactions_table.sql failed
----------------------------------------------------------
SQL State  : 42S02
Error Code : 42102
Message    : Таблица "USERS" не найдена
Table "USERS" not found; SQL statement:
CREATE TABLE payment_transactions (
    id BIGSERIAL PRIMARY KEY,
    client_id BIGINT NOT NULL,
    entered_by_user_id BIGINT NOT NULL,
    amount DECIMAL(19, 2) NOT NULL,
    notes TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'COMPLETED',
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    version BIGINT,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (entered_by_user_id) REFERENCES users(id) ON DELETE RESTRICT
) [42102-224]
Location   : db/migration/V2__create_payment_transactions_table.sql (/Users/baglan/repo/westwood-backend/target/classes/db/migration/V2__create_payment_transactions_table.sql)
Line       : 1
Statement  : CREATE TABLE payment_transactions (
    id BIGSERIAL PRIMARY KEY,
    client_id BIGINT NOT NULL,
    entered_by_user_id BIGINT NOT NULL,
    amount DECIMAL(19, 2) NOT NULL,
    notes TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'COMPLETED',
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    version BIGINT,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (entered_by_user_id) REFERENCES users(id) ON DELETE RESTRICT
)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1806)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 94 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2__create_payment_transactions_table.sql failed
----------------------------------------------------------
SQL State  : 42S02
Error Code : 42102
Message    : Таблица "USERS" не найдена
Table "USERS" not found; SQL statement:
CREATE TABLE payment_transactions (
    id BIGSERIAL PRIMARY KEY,
    client_id BIGINT NOT NULL,
    entered_by_user_id BIGINT NOT NULL,
    amount DECIMAL(19, 2) NOT NULL,
    notes TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'COMPLETED',
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    version BIGINT,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (entered_by_user_id) REFERENCES users(id) ON DELETE RESTRICT
) [42102-224]
Location   : db/migration/V2__create_payment_transactions_table.sql (/Users/baglan/repo/westwood-backend/target/classes/db/migration/V2__create_payment_transactions_table.sql)
Line       : 1
Statement  : CREATE TABLE payment_transactions (
    id BIGSERIAL PRIMARY KEY,
    client_id BIGINT NOT NULL,
    entered_by_user_id BIGINT NOT NULL,
    amount DECIMAL(19, 2) NOT NULL,
    notes TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'COMPLETED',
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    version BIGINT,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (entered_by_user_id) REFERENCES users(id) ON DELETE RESTRICT
)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:145)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:202)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:205)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:147)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1853)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1802)
	... 103 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2__create_payment_transactions_table.sql failed
----------------------------------------------------------
SQL State  : 42S02
Error Code : 42102
Message    : Таблица "USERS" не найдена
Table "USERS" not found; SQL statement:
CREATE TABLE payment_transactions (
    id BIGSERIAL PRIMARY KEY,
    client_id BIGINT NOT NULL,
    entered_by_user_id BIGINT NOT NULL,
    amount DECIMAL(19, 2) NOT NULL,
    notes TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'COMPLETED',
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    version BIGINT,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (entered_by_user_id) REFERENCES users(id) ON DELETE RESTRICT
) [42102-224]
Location   : db/migration/V2__create_payment_transactions_table.sql (/Users/baglan/repo/westwood-backend/target/classes/db/migration/V2__create_payment_transactions_table.sql)
Line       : 1
Statement  : CREATE TABLE payment_transactions (
    id BIGSERIAL PRIMARY KEY,
    client_id BIGINT NOT NULL,
    entered_by_user_id BIGINT NOT NULL,
    amount DECIMAL(19, 2) NOT NULL,
    notes TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'COMPLETED',
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    version BIGINT,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (entered_by_user_id) REFERENCES users(id) ON DELETE RESTRICT
)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:252)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:214)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:133)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:65)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)
	... 121 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Таблица "USERS" не найдена
Table "USERS" not found; SQL statement:
CREATE TABLE payment_transactions (
    id BIGSERIAL PRIMARY KEY,
    client_id BIGINT NOT NULL,
    entered_by_user_id BIGINT NOT NULL,
    amount DECIMAL(19, 2) NOT NULL,
    notes TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'COMPLETED',
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    version BIGINT,
    FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
    FOREIGN KEY (entered_by_user_id) REFERENCES users(id) ON DELETE RESTRICT
) [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.AlterTableAddConstraint.tryUpdate(AlterTableAddConstraint.java:204)
	at org.h2.command.ddl.AlterTableAddConstraint.update(AlterTableAddConstraint.java:74)
	at org.h2.command.ddl.AlterTable.update(AlterTable.java:46)
	at org.h2.command.ddl.CommandWithColumns.createConstraints(CommandWithColumns.java:83)
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:134)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:210)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:89)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206)
	... 127 common frames omitted

2025-12-23 20:06:02.707  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 25450 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 20:06:02.708 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 20:06:02.708  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 20:06:02.903  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 20:06:02.921  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 6 JPA repository interfaces.
2025-12-23 20:06:03.237  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 20:06:03.242  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 20:06:03.242  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 20:06:03.262  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 20:06:03.263  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 538 ms
2025-12-23 20:06:03.289  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 20:06:03.360  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 20:06:03.360  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 20:06:03.364  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 20:06:03.449  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 20:06:03.451  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 20:06:03.459  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 20:06:03.460  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.005s)
2025-12-23 20:06:03.462  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 20:06:03.474  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 20:06:03.476  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 20:06:03.484  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 20:06:03.489  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 20:06:03.492  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 20:06:03.497  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 20:06:03.499  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 20:06:03.502  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 20:06:03.511  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.017s)
2025-12-23 20:06:03.543  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 20:06:03.568  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 20:06:03.585  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 20:06:03.689  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 20:06:03.706  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 20:06:03.767  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 20:06:03.862 ERROR [main] [] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'event_type' is duplicated in mapping for entity 'com.westwood.domain.BonusEvent' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
2025-12-23 20:06:03.862 ERROR [main] [] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userDetailsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-12-23 20:06:03.871  INFO [main] [] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-23 20:06:03.872  WARN [main] [] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-12-23 20:06:03.872  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 20:06:03.872  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 20:06:03.876  INFO [main] [] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-23 20:06:03.881 ERROR [main] [] o.s.boot.SpringApplication               : Application run failed

org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:165)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at com.westwood.WestwoodBackendApplication.main(WestwoodBackendApplication.java:10)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:516)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:222)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userDetailsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1212)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:211)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:174)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:169)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:154)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:87)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:266)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:240)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDetailsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/security/UserDetailsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1212)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 54 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository' defined in com.westwood.repository.UserRepository defined in @EnableJpaRepositories declared on JpaConfig: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1705)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1454)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 68 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaSharedEM_entityManagerFactory': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:682)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1185)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 82 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'event_type' is duplicated in mapping for entity 'com.westwood.domain.BonusEvent' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1806)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)
	... 94 common frames omitted
Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'event_type' is duplicated in mapping for entity 'com.westwood.domain.BonusEvent' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1853)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1802)
	... 101 common frames omitted
Caused by: org.hibernate.MappingException: Column 'event_type' is duplicated in mapping for entity 'com.westwood.domain.BonusEvent' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)
	at org.hibernate.mapping.Value.checkColumnDuplication(Value.java:196)
	at org.hibernate.mapping.MappingHelper.checkPropertyColumnDuplication(MappingHelper.java:251)
	at org.hibernate.mapping.PersistentClass.checkColumnDuplication(PersistentClass.java:939)
	at org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:694)
	at org.hibernate.mapping.RootClass.validate(RootClass.java:276)
	at org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:496)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:280)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:457)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	... 105 common frames omitted

2025-12-23 20:08:22.076  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 25659 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 20:08:22.077 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 20:08:22.078  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 20:08:22.269  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 20:08:22.285  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 6 JPA repository interfaces.
2025-12-23 20:08:22.606  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 20:08:22.611  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 20:08:22.611  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 20:08:22.632  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 20:08:22.632  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 538 ms
2025-12-23 20:08:22.649  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 20:08:22.723  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 20:08:22.724  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 20:08:22.729  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 20:08:22.805  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 20:08:22.807  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 20:08:22.815  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 20:08:22.816  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.005s)
2025-12-23 20:08:22.818  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 20:08:22.830  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 20:08:22.832  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 20:08:22.843  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 20:08:22.847  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 20:08:22.851  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 20:08:22.855  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 20:08:22.857  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 20:08:22.860  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 20:08:22.868  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.017s)
2025-12-23 20:08:22.903  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 20:08:22.926  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 20:08:22.940  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 20:08:23.041  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 20:08:23.057  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 20:08:23.114  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 20:08:23.457  INFO [main] [] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-23 20:08:23.470 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_configurations 
       alter column description set data type TEXT
2025-12-23 20:08:23.470 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_events 
       alter column event_type set data type varchar(31)
2025-12-23 20:08:23.471 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists client_tags 
       alter column tag set data type varchar(255)
2025-12-23 20:08:23.472 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       alter column notes set data type TEXT
2025-12-23 20:08:23.472 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column aggregate_type set data type varchar(255)
2025-12-23 20:08:23.472 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column event_data set data type TEXT
2025-12-23 20:08:23.472 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists payment_transactions 
       alter column notes set data type TEXT
2025-12-23 20:08:23.473 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       drop constraint if exists idx_client_uuid
2025-12-23 20:08:23.473 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       add constraint idx_client_uuid unique (uuid)
2025-12-23 20:08:23.473 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_aggregate_id 
       on event_store (aggregate_id)
2025-12-23 20:08:23.473 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_event_type 
       on event_store (event_type)
2025-12-23 20:08:23.474 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_timestamp 
       on event_store (timestamp)
2025-12-23 20:08:23.474 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       drop constraint if exists idx_user_uuid
2025-12-23 20:08:23.474 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       add constraint idx_user_uuid unique (uuid)
2025-12-23 20:08:23.477  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 20:08:23.608 DEBUG [main] [] c.w.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-23 20:08:23.609 DEBUG [main] [] com.westwood.config.RequestIdFilter      : Filter 'requestIdFilter' configured for use
2025-12-23 20:08:23.626  INFO [main] [] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-23 20:08:23.780  WARN [main] [] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'analyticsController' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/controller/AnalyticsController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'analyticsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/service/impl/AnalyticsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'bonusServiceImpl': Resolution of declared constructors on bean Class [com.westwood.service.impl.BonusServiceImpl] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@7aec35a] failed
2025-12-23 20:08:23.780  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 20:08:23.781  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 20:08:23.781  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 20:08:23.782  INFO [main] [] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-23 20:08:23.786  INFO [main] [] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-23 20:08:23.791 ERROR [main] [] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'analyticsController' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/controller/AnalyticsController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'analyticsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/service/impl/AnalyticsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'bonusServiceImpl': Resolution of declared constructors on bean Class [com.westwood.service.impl.BonusServiceImpl] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@7aec35a] failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1212)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:971)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:625)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at com.westwood.WestwoodBackendApplication.main(WestwoodBackendApplication.java:10)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'analyticsServiceImpl' defined in file [/Users/baglan/repo/westwood-backend/target/classes/com/westwood/service/impl/AnalyticsServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'bonusServiceImpl': Resolution of declared constructors on bean Class [com.westwood.service.impl.BonusServiceImpl] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@7aec35a] failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:795)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:237)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1212)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 19 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'bonusServiceImpl': Resolution of declared constructors on bean Class [com.westwood.service.impl.BonusServiceImpl] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@7aec35a] failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:384)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1314)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1209)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:904)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:782)
	... 33 common frames omitted
Caused by: java.lang.NoClassDefFoundError: PaymentMapper
	at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3373)
	at java.base/java.lang.Class.getDeclaredConstructors(Class.java:2555)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:379)
	... 46 common frames omitted
Caused by: java.lang.ClassNotFoundException: PaymentMapper
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)
	... 50 common frames omitted

2025-12-23 20:09:35.489  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication v1.0.0 using Java 17.0.10 with PID 25932 (/Users/baglan/repo/westwood-backend/target/westwood-backend-1.0.0.jar started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 20:09:35.490 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 20:09:35.490  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 20:09:35.833  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 20:09:35.856  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 6 JPA repository interfaces.
2025-12-23 20:09:36.282  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 20:09:36.289  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 20:09:36.289  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 20:09:36.305  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 20:09:36.305  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 782 ms
2025-12-23 20:09:36.362  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 20:09:36.502  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 20:09:36.503  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 20:09:36.508  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 20:09:36.648  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 20:09:36.651  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 20:09:36.662  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 20:09:36.663  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.007s)
2025-12-23 20:09:36.666  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 20:09:36.684  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 20:09:36.687  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 20:09:36.698  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 20:09:36.704  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 20:09:36.709  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 20:09:36.715  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 20:09:36.718  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 20:09:36.720  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 20:09:36.733  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.023s)
2025-12-23 20:09:36.770  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 20:09:36.805  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 20:09:36.823  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 20:09:36.971  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 20:09:36.994  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 20:09:37.040  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 20:09:37.488  INFO [main] [] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-23 20:09:37.501 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_configurations 
       alter column description set data type TEXT
2025-12-23 20:09:37.501 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_events 
       alter column event_type set data type varchar(31)
2025-12-23 20:09:37.501 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists client_tags 
       alter column tag set data type varchar(255)
2025-12-23 20:09:37.502 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       alter column notes set data type TEXT
2025-12-23 20:09:37.503 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column aggregate_type set data type varchar(255)
2025-12-23 20:09:37.503 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column event_data set data type TEXT
2025-12-23 20:09:37.503 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists payment_transactions 
       alter column notes set data type TEXT
2025-12-23 20:09:37.504 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       drop constraint if exists idx_client_uuid
2025-12-23 20:09:37.504 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       add constraint idx_client_uuid unique (uuid)
2025-12-23 20:09:37.504 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_aggregate_id 
       on event_store (aggregate_id)
2025-12-23 20:09:37.504 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_event_type 
       on event_store (event_type)
2025-12-23 20:09:37.505 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_timestamp 
       on event_store (timestamp)
2025-12-23 20:09:37.505 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       drop constraint if exists idx_user_uuid
2025-12-23 20:09:37.505 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       add constraint idx_user_uuid unique (uuid)
2025-12-23 20:09:37.509  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 20:09:37.692 DEBUG [main] [] c.w.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-23 20:09:37.693 DEBUG [main] [] com.westwood.config.RequestIdFilter      : Filter 'requestIdFilter' configured for use
2025-12-23 20:09:37.727  INFO [main] [] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-23 20:09:38.137  INFO [main] [] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-23 20:09:38.140  WARN [main] [] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-23 20:09:38.169  WARN [main] [] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-23 20:09:38.284 DEBUG [main] [] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23 20:09:38.404  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-12-23 20:09:38.414  INFO [main] [] c.westwood.WestwoodBackendApplication    : Started WestwoodBackendApplication in 3.264 seconds (process running for 5.011)
2025-12-23 20:10:06.609  INFO [SpringApplicationShutdownHook] [] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 20:10:06.618  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 20:10:06.620  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 20:10:18.936  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication v1.0.0 using Java 17.0.10 with PID 26015 (/Users/baglan/repo/westwood-backend/target/westwood-backend-1.0.0.jar started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 20:10:18.938 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 20:10:18.939  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 20:10:19.207  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 20:10:19.229  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 6 JPA repository interfaces.
2025-12-23 20:10:19.629  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 20:10:19.635  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 20:10:19.635  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 20:10:19.649  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 20:10:19.649  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 681 ms
2025-12-23 20:10:19.671  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 20:10:19.762  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 20:10:19.763  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 20:10:19.767  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 20:10:19.881  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 20:10:19.883  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 20:10:19.893  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 20:10:19.894  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.006s)
2025-12-23 20:10:19.897  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 20:10:19.913  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 20:10:19.915  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 20:10:19.930  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 20:10:19.935  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 20:10:19.939  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 20:10:19.945  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 20:10:19.947  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 20:10:19.950  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 20:10:19.962  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.023s)
2025-12-23 20:10:20.004  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 20:10:20.038  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 20:10:20.057  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 20:10:20.204  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 20:10:20.226  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 20:10:20.267  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 20:10:20.690  INFO [main] [] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-23 20:10:20.702 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_configurations 
       alter column description set data type TEXT
2025-12-23 20:10:20.702 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_events 
       alter column event_type set data type varchar(31)
2025-12-23 20:10:20.702 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists client_tags 
       alter column tag set data type varchar(255)
2025-12-23 20:10:20.704 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       alter column notes set data type TEXT
2025-12-23 20:10:20.704 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column aggregate_type set data type varchar(255)
2025-12-23 20:10:20.704 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column event_data set data type TEXT
2025-12-23 20:10:20.704 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists payment_transactions 
       alter column notes set data type TEXT
2025-12-23 20:10:20.705 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       drop constraint if exists idx_client_uuid
2025-12-23 20:10:20.705 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       add constraint idx_client_uuid unique (uuid)
2025-12-23 20:10:20.706 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_aggregate_id 
       on event_store (aggregate_id)
2025-12-23 20:10:20.706 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_event_type 
       on event_store (event_type)
2025-12-23 20:10:20.706 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_timestamp 
       on event_store (timestamp)
2025-12-23 20:10:20.706 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       drop constraint if exists idx_user_uuid
2025-12-23 20:10:20.706 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       add constraint idx_user_uuid unique (uuid)
2025-12-23 20:10:20.710  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 20:10:20.866 DEBUG [main] [] c.w.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-23 20:10:20.866 DEBUG [main] [] com.westwood.config.RequestIdFilter      : Filter 'requestIdFilter' configured for use
2025-12-23 20:10:20.886  INFO [main] [] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-23 20:10:21.224  INFO [main] [] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-23 20:10:21.225  WARN [main] [] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-23 20:10:21.251  WARN [main] [] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-23 20:10:21.359 DEBUG [main] [] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23 20:10:21.475  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-12-23 20:10:21.486  INFO [main] [] c.westwood.WestwoodBackendApplication    : Started WestwoodBackendApplication in 3.061 seconds (process running for 3.886)
2025-12-23 20:10:22.578  INFO [http-nio-8080-exec-1] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-23 20:10:22.578  INFO [http-nio-8080-exec-1] [] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-23 20:10:22.579  INFO [http-nio-8080-exec-1] [] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-12-23 20:10:22.585 DEBUG [http-nio-8080-exec-1] [b6d960b2-6848-4642-ba98-1195c37c53dd] o.s.security.web.FilterChainProxy        : Securing GET /actuator/health
2025-12-23 20:10:22.587 DEBUG [http-nio-8080-exec-1] [b6d960b2-6848-4642-ba98-1195c37c53dd] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 20:10:22.588 DEBUG [http-nio-8080-exec-1] [b6d960b2-6848-4642-ba98-1195c37c53dd] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-12-23 20:10:22.592 DEBUG [http-nio-8080-exec-1] [] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-12-23 20:10:22.592 DEBUG [http-nio-8080-exec-1] [] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 20:10:22.592 DEBUG [http-nio-8080-exec-1] [] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-12-23 20:28:11.324  INFO [SpringApplicationShutdownHook] [] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 20:28:11.328  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 20:28:11.330  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 21:57:02.821  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 29253 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 21:57:02.822 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 21:57:02.822  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 21:57:03.046  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 21:57:03.068  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 6 JPA repository interfaces.
2025-12-23 21:57:03.439  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 21:57:03.446  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 21:57:03.446  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 21:57:03.478  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 21:57:03.479  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 640 ms
2025-12-23 21:57:03.499  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 21:57:03.573  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 21:57:03.577  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 21:57:03.582  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 21:57:03.666  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 21:57:03.668  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 21:57:03.677  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 21:57:03.678  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.006s)
2025-12-23 21:57:03.681  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 21:57:03.695  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 21:57:03.699  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 21:57:03.709  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 21:57:03.715  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 21:57:03.720  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 21:57:03.726  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 21:57:03.728  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 21:57:03.732  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 21:57:03.746  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.024s)
2025-12-23 21:57:03.783  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 21:57:03.811  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 21:57:03.825  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 21:57:03.942  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 21:57:03.961  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 21:57:04.016  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 21:57:04.381  INFO [main] [] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-23 21:57:04.394 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_configurations 
       alter column description set data type TEXT
2025-12-23 21:57:04.395 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_events 
       alter column event_type set data type varchar(31)
2025-12-23 21:57:04.395 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists client_tags 
       alter column tag set data type varchar(255)
2025-12-23 21:57:04.397 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       alter column notes set data type TEXT
2025-12-23 21:57:04.397 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column aggregate_type set data type varchar(255)
2025-12-23 21:57:04.397 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column event_data set data type TEXT
2025-12-23 21:57:04.397 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists payment_transactions 
       alter column notes set data type TEXT
2025-12-23 21:57:04.398 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       drop constraint if exists idx_client_uuid
2025-12-23 21:57:04.398 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       add constraint idx_client_uuid unique (uuid)
2025-12-23 21:57:04.399 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_aggregate_id 
       on event_store (aggregate_id)
2025-12-23 21:57:04.399 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_event_type 
       on event_store (event_type)
2025-12-23 21:57:04.399 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_timestamp 
       on event_store (timestamp)
2025-12-23 21:57:04.399 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       drop constraint if exists idx_user_uuid
2025-12-23 21:57:04.400 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       add constraint idx_user_uuid unique (uuid)
2025-12-23 21:57:04.404  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 21:57:04.532 DEBUG [main] [] c.w.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-23 21:57:04.532 DEBUG [main] [] com.westwood.config.RequestIdFilter      : Filter 'requestIdFilter' configured for use
2025-12-23 21:57:04.552  INFO [main] [] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-23 21:57:04.874  INFO [main] [] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-23 21:57:04.875  WARN [main] [] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-23 21:57:04.918  WARN [main] [] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-23 21:57:05.021 DEBUG [main] [] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23 21:57:05.131  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-12-23 21:57:05.136  INFO [main] [] c.westwood.WestwoodBackendApplication    : Started WestwoodBackendApplication in 2.55 seconds (process running for 2.813)
2025-12-23 22:04:21.068 DEBUG [http-nio-8080-exec-1] [efd23c0e-34f2-4e32-af4e-76c95371a486] o.s.security.web.FilterChainProxy        : Securing GET /h2-console
2025-12-23 22:04:21.087 DEBUG [http-nio-8080-exec-1] [efd23c0e-34f2-4e32-af4e-76c95371a486] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:21.092 DEBUG [http-nio-8080-exec-1] [efd23c0e-34f2-4e32-af4e-76c95371a486] o.s.security.web.FilterChainProxy        : Secured GET /h2-console
2025-12-23 22:04:21.111 DEBUG [http-nio-8080-exec-2] [6ccec607-1b6f-436e-8d3f-1d79b8918c5c] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/
2025-12-23 22:04:21.113 DEBUG [http-nio-8080-exec-2] [6ccec607-1b6f-436e-8d3f-1d79b8918c5c] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:21.113 DEBUG [http-nio-8080-exec-2] [6ccec607-1b6f-436e-8d3f-1d79b8918c5c] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/
2025-12-23 22:04:21.504 DEBUG [http-nio-8080-exec-3] [dcb835b3-b64f-408d-bc3d-9afa448448fe] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:04:21.506 DEBUG [http-nio-8080-exec-3] [dcb835b3-b64f-408d-bc3d-9afa448448fe] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:21.506 DEBUG [http-nio-8080-exec-3] [dcb835b3-b64f-408d-bc3d-9afa448448fe] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:04:21.539 DEBUG [http-nio-8080-exec-4] [497fd9b3-86a2-4b34-80f0-0722362650c4] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/login.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:04:21.539 DEBUG [http-nio-8080-exec-4] [497fd9b3-86a2-4b34-80f0-0722362650c4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:21.539 DEBUG [http-nio-8080-exec-4] [497fd9b3-86a2-4b34-80f0-0722362650c4] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/login.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:04:21.999 DEBUG [http-nio-8080-exec-5] [bd11eb85-4b10-4e9b-8b6c-59d82c36d195] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/background.gif
2025-12-23 22:04:22.000 DEBUG [http-nio-8080-exec-5] [bd11eb85-4b10-4e9b-8b6c-59d82c36d195] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:22.000 DEBUG [http-nio-8080-exec-5] [bd11eb85-4b10-4e9b-8b6c-59d82c36d195] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/background.gif
2025-12-23 22:04:22.082  INFO [http-nio-8080-exec-6] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-23 22:04:22.083  INFO [http-nio-8080-exec-6] [] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-23 22:04:22.126  INFO [http-nio-8080-exec-6] [] o.s.web.servlet.DispatcherServlet        : Completed initialization in 43 ms
2025-12-23 22:04:22.126 DEBUG [http-nio-8080-exec-6] [45c9dd0a-e47b-4dbd-9208-c3697ad075e9] o.s.security.web.FilterChainProxy        : Securing GET /favicon.ico
2025-12-23 22:04:22.127 DEBUG [http-nio-8080-exec-6] [45c9dd0a-e47b-4dbd-9208-c3697ad075e9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:22.132 DEBUG [http-nio-8080-exec-6] [45c9dd0a-e47b-4dbd-9208-c3697ad075e9] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-12-23 22:04:22.142 DEBUG [http-nio-8080-exec-6] [] o.s.security.web.FilterChainProxy        : Securing GET /error
2025-12-23 22:04:22.143 DEBUG [http-nio-8080-exec-6] [] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:22.143 DEBUG [http-nio-8080-exec-6] [] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access
2025-12-23 22:04:24.297 DEBUG [http-nio-8080-exec-7] [a5cb6fed-444d-4ac8-91ba-302ffc0cc490] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/login.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:04:24.298 DEBUG [http-nio-8080-exec-7] [a5cb6fed-444d-4ac8-91ba-302ffc0cc490] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:04:24.303 DEBUG [http-nio-8080-exec-7] [a5cb6fed-444d-4ac8-91ba-302ffc0cc490] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/login.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.109 DEBUG [http-nio-8080-exec-9] [f538b818-685d-4019-b18a-0b8eb65c7f72] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/login.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.112 DEBUG [http-nio-8080-exec-9] [f538b818-685d-4019-b18a-0b8eb65c7f72] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.112 DEBUG [http-nio-8080-exec-9] [f538b818-685d-4019-b18a-0b8eb65c7f72] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/login.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.181 DEBUG [http-nio-8080-exec-10] [06612a0b-0e31-49cd-b3f3-e84460c9acf6] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:05:16.181 DEBUG [http-nio-8080-exec-10] [06612a0b-0e31-49cd-b3f3-e84460c9acf6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.181 DEBUG [http-nio-8080-exec-10] [06612a0b-0e31-49cd-b3f3-e84460c9acf6] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:05:16.225 DEBUG [http-nio-8080-exec-1] [686b7ea2-4e8a-4e2c-acd8-2a24e1a76a79] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/header.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.226 DEBUG [http-nio-8080-exec-2] [98685253-018d-43e5-9061-a7f47d3ca027] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/help.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.226 DEBUG [http-nio-8080-exec-1] [686b7ea2-4e8a-4e2c-acd8-2a24e1a76a79] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.227 DEBUG [http-nio-8080-exec-1] [686b7ea2-4e8a-4e2c-acd8-2a24e1a76a79] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/header.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.227 DEBUG [http-nio-8080-exec-2] [98685253-018d-43e5-9061-a7f47d3ca027] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.227 DEBUG [http-nio-8080-exec-2] [98685253-018d-43e5-9061-a7f47d3ca027] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/help.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.227 DEBUG [http-nio-8080-exec-3] [c4dfee4e-d7a1-4052-aa6c-3c387443f7d0] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/query.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.228 DEBUG [http-nio-8080-exec-3] [c4dfee4e-d7a1-4052-aa6c-3c387443f7d0] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.228 DEBUG [http-nio-8080-exec-3] [c4dfee4e-d7a1-4052-aa6c-3c387443f7d0] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/query.jsp?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.229 DEBUG [http-nio-8080-exec-4] [eb495e9b-8323-4a37-bb68-1131bf0e40f5] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tables.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.230 DEBUG [http-nio-8080-exec-4] [eb495e9b-8323-4a37-bb68-1131bf0e40f5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.230 DEBUG [http-nio-8080-exec-4] [eb495e9b-8323-4a37-bb68-1131bf0e40f5] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tables.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:16.256 DEBUG [http-nio-8080-exec-5] [e0cfff10-a462-486e-9165-5408de7c8867] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_disconnect.gif
2025-12-23 22:05:16.256 DEBUG [http-nio-8080-exec-5] [e0cfff10-a462-486e-9165-5408de7c8867] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.257 DEBUG [http-nio-8080-exec-5] [e0cfff10-a462-486e-9165-5408de7c8867] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_disconnect.gif
2025-12-23 22:05:16.260 DEBUG [http-nio-8080-exec-6] [54ae7c11-97aa-4680-ac50-9aa4822c7924] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_line.gif
2025-12-23 22:05:16.260 DEBUG [http-nio-8080-exec-6] [54ae7c11-97aa-4680-ac50-9aa4822c7924] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.260 DEBUG [http-nio-8080-exec-6] [54ae7c11-97aa-4680-ac50-9aa4822c7924] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_line.gif
2025-12-23 22:05:16.265 DEBUG [http-nio-8080-exec-7] [58622ac9-ff3f-43d4-8b25-91f0189ef81e] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_refresh.gif
2025-12-23 22:05:16.266 DEBUG [http-nio-8080-exec-7] [58622ac9-ff3f-43d4-8b25-91f0189ef81e] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.266 DEBUG [http-nio-8080-exec-7] [58622ac9-ff3f-43d4-8b25-91f0189ef81e] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_refresh.gif
2025-12-23 22:05:16.269 DEBUG [http-nio-8080-exec-8] [2dc77e17-8a0d-4d93-a664-3ac1fdb3be89] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_rollback.gif
2025-12-23 22:05:16.270 DEBUG [http-nio-8080-exec-8] [2dc77e17-8a0d-4d93-a664-3ac1fdb3be89] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.270 DEBUG [http-nio-8080-exec-8] [2dc77e17-8a0d-4d93-a664-3ac1fdb3be89] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_rollback.gif
2025-12-23 22:05:16.275 DEBUG [http-nio-8080-exec-9] [b1031dc2-6b22-4b24-9aaa-5dd6db253bc5] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_commit.gif
2025-12-23 22:05:16.275 DEBUG [http-nio-8080-exec-9] [b1031dc2-6b22-4b24-9aaa-5dd6db253bc5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.275 DEBUG [http-nio-8080-exec-9] [b1031dc2-6b22-4b24-9aaa-5dd6db253bc5] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_commit.gif
2025-12-23 22:05:16.319 DEBUG [http-nio-8080-exec-10] [9a7a0d79-1939-44e4-8cef-51b40c6755bc] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_run.gif
2025-12-23 22:05:16.319 DEBUG [http-nio-8080-exec-10] [9a7a0d79-1939-44e4-8cef-51b40c6755bc] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.319 DEBUG [http-nio-8080-exec-10] [9a7a0d79-1939-44e4-8cef-51b40c6755bc] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_run.gif
2025-12-23 22:05:16.323 DEBUG [http-nio-8080-exec-1] [e04a7a9a-23da-4c4a-b781-79fd805b7a2c] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_run_selected.gif
2025-12-23 22:05:16.323 DEBUG [http-nio-8080-exec-1] [e04a7a9a-23da-4c4a-b781-79fd805b7a2c] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.323 DEBUG [http-nio-8080-exec-1] [e04a7a9a-23da-4c4a-b781-79fd805b7a2c] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_run_selected.gif
2025-12-23 22:05:16.325 DEBUG [http-nio-8080-exec-2] [2f8e1845-8d12-4246-b634-3fcaf2b5ec42] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_stop.gif
2025-12-23 22:05:16.326 DEBUG [http-nio-8080-exec-2] [2f8e1845-8d12-4246-b634-3fcaf2b5ec42] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.326 DEBUG [http-nio-8080-exec-2] [2f8e1845-8d12-4246-b634-3fcaf2b5ec42] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_stop.gif
2025-12-23 22:05:16.329 DEBUG [http-nio-8080-exec-3] [14c79111-32b0-43dc-acca-5faf49259604] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_history.gif
2025-12-23 22:05:16.329 DEBUG [http-nio-8080-exec-3] [14c79111-32b0-43dc-acca-5faf49259604] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.329 DEBUG [http-nio-8080-exec-3] [14c79111-32b0-43dc-acca-5faf49259604] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_history.gif
2025-12-23 22:05:16.331 DEBUG [http-nio-8080-exec-5] [ddbaf997-cca9-43a5-8341-8de059967121] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_help.gif
2025-12-23 22:05:16.331 DEBUG [http-nio-8080-exec-5] [ddbaf997-cca9-43a5-8341-8de059967121] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.331 DEBUG [http-nio-8080-exec-5] [ddbaf997-cca9-43a5-8341-8de059967121] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_help.gif
2025-12-23 22:05:16.355 DEBUG [http-nio-8080-exec-6] [67522275-8f1b-4ba5-81e4-1ddd4c5de141] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree.js
2025-12-23 22:05:16.355 DEBUG [http-nio-8080-exec-6] [67522275-8f1b-4ba5-81e4-1ddd4c5de141] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.355 DEBUG [http-nio-8080-exec-6] [67522275-8f1b-4ba5-81e4-1ddd4c5de141] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree.js
2025-12-23 22:05:16.362 DEBUG [http-nio-8080-exec-7] [37a80b78-bdbf-4d02-912f-a223b9b0991b] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_minus.gif
2025-12-23 22:05:16.362 DEBUG [http-nio-8080-exec-8] [29b1287c-b7e5-4921-b55a-926211ec1750] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_plus.gif
2025-12-23 22:05:16.363 DEBUG [http-nio-8080-exec-7] [37a80b78-bdbf-4d02-912f-a223b9b0991b] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.363 DEBUG [http-nio-8080-exec-8] [29b1287c-b7e5-4921-b55a-926211ec1750] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.363 DEBUG [http-nio-8080-exec-8] [29b1287c-b7e5-4921-b55a-926211ec1750] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_plus.gif
2025-12-23 22:05:16.363 DEBUG [http-nio-8080-exec-7] [37a80b78-bdbf-4d02-912f-a223b9b0991b] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_minus.gif
2025-12-23 22:05:16.365 DEBUG [http-nio-8080-exec-9] [93cd49eb-98f2-408f-beb4-a4ff22b960ce] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_database.gif
2025-12-23 22:05:16.365 DEBUG [http-nio-8080-exec-9] [93cd49eb-98f2-408f-beb4-a4ff22b960ce] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.365 DEBUG [http-nio-8080-exec-9] [93cd49eb-98f2-408f-beb4-a4ff22b960ce] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_database.gif
2025-12-23 22:05:16.365 DEBUG [http-nio-8080-exec-10] [c6a20ba1-ba33-466d-856b-f37145f76b84] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_table.gif
2025-12-23 22:05:16.365 DEBUG [http-nio-8080-exec-10] [c6a20ba1-ba33-466d-856b-f37145f76b84] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.366 DEBUG [http-nio-8080-exec-10] [c6a20ba1-ba33-466d-856b-f37145f76b84] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_table.gif
2025-12-23 22:05:16.368 DEBUG [http-nio-8080-exec-1] [78be79e0-ecc0-429a-9dc2-eb94c215b39a] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_empty.gif
2025-12-23 22:05:16.368 DEBUG [http-nio-8080-exec-1] [78be79e0-ecc0-429a-9dc2-eb94c215b39a] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.368 DEBUG [http-nio-8080-exec-1] [78be79e0-ecc0-429a-9dc2-eb94c215b39a] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_empty.gif
2025-12-23 22:05:16.370 DEBUG [http-nio-8080-exec-2] [fb18a79c-5acb-4d8b-8d0b-b7a103dbf1fb] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_column.gif
2025-12-23 22:05:16.370 DEBUG [http-nio-8080-exec-2] [fb18a79c-5acb-4d8b-8d0b-b7a103dbf1fb] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.370 DEBUG [http-nio-8080-exec-2] [fb18a79c-5acb-4d8b-8d0b-b7a103dbf1fb] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_column.gif
2025-12-23 22:05:16.374 DEBUG [http-nio-8080-exec-3] [38123922-f66b-41cf-af34-7ff8cf5f44d2] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_type.gif
2025-12-23 22:05:16.374 DEBUG [http-nio-8080-exec-3] [38123922-f66b-41cf-af34-7ff8cf5f44d2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.375 DEBUG [http-nio-8080-exec-3] [38123922-f66b-41cf-af34-7ff8cf5f44d2] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_type.gif
2025-12-23 22:05:16.435 DEBUG [http-nio-8080-exec-5] [03593f66-f3c5-4733-9cd3-e6ca2d77f8bb] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_index_az.gif
2025-12-23 22:05:16.435 DEBUG [http-nio-8080-exec-5] [03593f66-f3c5-4733-9cd3-e6ca2d77f8bb] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.435 DEBUG [http-nio-8080-exec-5] [03593f66-f3c5-4733-9cd3-e6ca2d77f8bb] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_index_az.gif
2025-12-23 22:05:16.439 DEBUG [http-nio-8080-exec-4] [768e7fa7-ac55-46dc-9563-af6c743fe968] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_index.gif
2025-12-23 22:05:16.439 DEBUG [http-nio-8080-exec-4] [768e7fa7-ac55-46dc-9563-af6c743fe968] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:16.439 DEBUG [http-nio-8080-exec-4] [768e7fa7-ac55-46dc-9563-af6c743fe968] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_index.gif
2025-12-23 22:05:17.642 DEBUG [http-nio-8080-exec-6] [df485529-d860-4960-9349-8318d3b78286] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_folder.gif
2025-12-23 22:05:17.642 DEBUG [http-nio-8080-exec-6] [df485529-d860-4960-9349-8318d3b78286] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:17.643 DEBUG [http-nio-8080-exec-7] [d85ced02-daad-4c4d-a22a-a90c0c283821] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_view.gif
2025-12-23 22:05:17.643 DEBUG [http-nio-8080-exec-6] [df485529-d860-4960-9349-8318d3b78286] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_folder.gif
2025-12-23 22:05:17.643 DEBUG [http-nio-8080-exec-7] [d85ced02-daad-4c4d-a22a-a90c0c283821] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:17.643 DEBUG [http-nio-8080-exec-7] [d85ced02-daad-4c4d-a22a-a90c0c283821] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_view.gif
2025-12-23 22:05:17.722 DEBUG [http-nio-8080-exec-8] [82cbc5d1-5d80-471d-9371-9658c050143f] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_users.gif
2025-12-23 22:05:17.722 DEBUG [http-nio-8080-exec-8] [82cbc5d1-5d80-471d-9371-9658c050143f] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:17.722 DEBUG [http-nio-8080-exec-8] [82cbc5d1-5d80-471d-9371-9658c050143f] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_users.gif
2025-12-23 22:05:17.725 DEBUG [http-nio-8080-exec-10] [ba57c16f-e2ec-47f3-b389-f8048942aa1b] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_user.gif
2025-12-23 22:05:17.726 DEBUG [http-nio-8080-exec-10] [ba57c16f-e2ec-47f3-b389-f8048942aa1b] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:17.726 DEBUG [http-nio-8080-exec-10] [ba57c16f-e2ec-47f3-b389-f8048942aa1b] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_user.gif
2025-12-23 22:05:17.731 DEBUG [http-nio-8080-exec-9] [c56336c3-019b-40b1-af84-d5025b56d6cf] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_info.gif
2025-12-23 22:05:17.731 DEBUG [http-nio-8080-exec-9] [c56336c3-019b-40b1-af84-d5025b56d6cf] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:17.731 DEBUG [http-nio-8080-exec-9] [c56336c3-019b-40b1-af84-d5025b56d6cf] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_info.gif
2025-12-23 22:05:22.301 DEBUG [http-nio-8080-exec-1] [a46b1d1d-5fed-4e7d-acf5-501721119ed6] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:22.306 DEBUG [http-nio-8080-exec-1] [a46b1d1d-5fed-4e7d-acf5-501721119ed6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:22.307 DEBUG [http-nio-8080-exec-1] [a46b1d1d-5fed-4e7d-acf5-501721119ed6] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:05:22.345 DEBUG [http-nio-8080-exec-2] [cbeffc74-7159-4543-8a0e-f6589be6571b] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/table.js
2025-12-23 22:05:22.346 DEBUG [http-nio-8080-exec-2] [cbeffc74-7159-4543-8a0e-f6589be6571b] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:05:22.346 DEBUG [http-nio-8080-exec-2] [cbeffc74-7159-4543-8a0e-f6589be6571b] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/table.js
2025-12-23 22:06:46.805 DEBUG [http-nio-8080-exec-8] [532cd2af-a352-43b7-ade0-d5b3a84395c3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/auth/login
2025-12-23 22:06:46.807 DEBUG [http-nio-8080-exec-8] [532cd2af-a352-43b7-ade0-d5b3a84395c3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:06:46.810 DEBUG [http-nio-8080-exec-8] [532cd2af-a352-43b7-ade0-d5b3a84395c3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/auth/login
2025-12-23 22:06:47.137 DEBUG [http-nio-8080-exec-8] [532cd2af-a352-43b7-ade0-d5b3a84395c3] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:06:47.210 DEBUG [http-nio-8080-exec-8] [532cd2af-a352-43b7-ade0-d5b3a84395c3] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user 'bsagidul'
2025-12-23 22:08:09.092 DEBUG [http-nio-8080-exec-9] [5f33f513-e8a6-423d-8756-f94786e0a04e] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/auth/register
2025-12-23 22:08:09.096 DEBUG [http-nio-8080-exec-9] [5f33f513-e8a6-423d-8756-f94786e0a04e] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:08:09.098 DEBUG [http-nio-8080-exec-9] [5f33f513-e8a6-423d-8756-f94786e0a04e] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/auth/register
2025-12-23 22:08:16.709 DEBUG [http-nio-8080-exec-2] [7def186f-61f9-4dd8-bae9-a5925d4eccdb] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/auth/register
2025-12-23 22:08:16.713 DEBUG [http-nio-8080-exec-2] [7def186f-61f9-4dd8-bae9-a5925d4eccdb] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:08:16.714 DEBUG [http-nio-8080-exec-2] [7def186f-61f9-4dd8-bae9-a5925d4eccdb] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/auth/register
2025-12-23 22:08:16.744 DEBUG [http-nio-8080-exec-2] [7def186f-61f9-4dd8-bae9-a5925d4eccdb] org.hibernate.SQL                        : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2025-12-23 22:08:16.751 DEBUG [http-nio-8080-exec-2] [7def186f-61f9-4dd8-bae9-a5925d4eccdb] org.hibernate.SQL                        : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-12-23 22:08:16.869 DEBUG [http-nio-8080-exec-2] [7def186f-61f9-4dd8-bae9-a5925d4eccdb] org.hibernate.SQL                        : 
    insert 
    into
        users
        (active, created_at, email, first_name, last_name, password, updated_at, username, uuid, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:08:16.989 DEBUG [http-nio-8080-exec-2] [7def186f-61f9-4dd8-bae9-a5925d4eccdb] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-12-23 22:09:31.288 DEBUG [http-nio-8080-exec-4] [d07985d9-03ad-4918-a2dd-186a837b1943] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/clients
2025-12-23 22:09:31.358 DEBUG [http-nio-8080-exec-4] [d07985d9-03ad-4918-a2dd-186a837b1943] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:09:31.370 DEBUG [http-nio-8080-exec-4] [d07985d9-03ad-4918-a2dd-186a837b1943] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:09:31.374 DEBUG [http-nio-8080-exec-4] [d07985d9-03ad-4918-a2dd-186a837b1943] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/clients
2025-12-23 22:09:31.382 DEBUG [http-nio-8080-exec-4] [d07985d9-03ad-4918-a2dd-186a837b1943] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.getAllClients(java.lang.String,java.lang.String); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:09:31.402 DEBUG [http-nio-8080-exec-4] [d07985d9-03ad-4918-a2dd-186a837b1943] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.getAllClients(java.lang.String,java.lang.String); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:09:31.407 DEBUG [http-nio-8080-exec-4] [d07985d9-03ad-4918-a2dd-186a837b1943] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0
2025-12-23 22:10:13.727 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/clients
2025-12-23 22:10:13.740 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:10:13.743 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:10:13.747 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/clients
2025-12-23 22:10:13.765 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.createClient(com.westwood.common.dto.CreateClientRequest); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:10:13.766 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.createClient(com.westwood.common.dto.CreateClientRequest); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:10:13.767 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] org.hibernate.SQL                        : 
    select
        c1_0.id 
    from
        clients c1_0 
    where
        c1_0.phone=? 
    fetch
        first ? rows only
2025-12-23 22:10:13.770 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] org.hibernate.SQL                        : 
    insert 
    into
        clients
        (client_type, created_at, name, notes, phone, surname, updated_at, uuid, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:10:13.772 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] org.hibernate.SQL                        : 
    insert 
    into
        client_tags
        (client_id, tag) 
    values
        (?, ?)
2025-12-23 22:10:13.772 DEBUG [http-nio-8080-exec-6] [edc91d7c-c958-4672-a242-821bdc9a16c0] org.hibernate.SQL                        : 
    insert 
    into
        client_tags
        (client_id, tag) 
    values
        (?, ?)
2025-12-23 22:10:27.393 DEBUG [http-nio-8080-exec-7] [8f8f9130-489b-4a22-8090-3cfc3a627a43] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/bonus-configuration/current
2025-12-23 22:10:27.397 DEBUG [http-nio-8080-exec-7] [8f8f9130-489b-4a22-8090-3cfc3a627a43] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:10:27.398 DEBUG [http-nio-8080-exec-7] [8f8f9130-489b-4a22-8090-3cfc3a627a43] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:10:27.403 DEBUG [http-nio-8080-exec-7] [8f8f9130-489b-4a22-8090-3cfc3a627a43] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/bonus-configuration/current
2025-12-23 22:10:27.405 DEBUG [http-nio-8080-exec-7] [8f8f9130-489b-4a22-8090-3cfc3a627a43] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.getActiveConfiguration(); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:10:27.406 DEBUG [http-nio-8080-exec-7] [8f8f9130-489b-4a22-8090-3cfc3a627a43] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.getActiveConfiguration(); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:10:27.430 DEBUG [http-nio-8080-exec-7] [8f8f9130-489b-4a22-8090-3cfc3a627a43] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:11:16.353 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/bonus-configuration?bonusPercentage=10.0
2025-12-23 22:11:16.368 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:11:16.372 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:11:16.376 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/bonus-configuration?bonusPercentage=10.0
2025-12-23 22:11:16.383 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:16.384 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:16.388 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0
2025-12-23 22:11:16.393 DEBUG [http-nio-8080-exec-8] [c87f7bb0-88ae-4940-99ca-cc57f782fac8] org.hibernate.SQL                        : 
    insert 
    into
        bonus_configurations
        (active, bonus_percentage, created_at, description, effective_from, effective_to, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:11:21.295 DEBUG [http-nio-8080-exec-10] [b4a94d50-2798-4630-a0bc-84225393b4bd] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/bonus-configuration/current
2025-12-23 22:11:21.299 DEBUG [http-nio-8080-exec-10] [b4a94d50-2798-4630-a0bc-84225393b4bd] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:11:21.302 DEBUG [http-nio-8080-exec-10] [b4a94d50-2798-4630-a0bc-84225393b4bd] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:11:21.306 DEBUG [http-nio-8080-exec-10] [b4a94d50-2798-4630-a0bc-84225393b4bd] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/bonus-configuration/current
2025-12-23 22:11:21.307 DEBUG [http-nio-8080-exec-10] [b4a94d50-2798-4630-a0bc-84225393b4bd] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.getActiveConfiguration(); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:21.308 DEBUG [http-nio-8080-exec-10] [b4a94d50-2798-4630-a0bc-84225393b4bd] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.getActiveConfiguration(); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:21.312 DEBUG [http-nio-8080-exec-10] [b4a94d50-2798-4630-a0bc-84225393b4bd] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:11:28.842 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/bonus-configuration?bonusPercentage=5.0
2025-12-23 22:11:28.847 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:11:28.849 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:11:28.852 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/bonus-configuration?bonusPercentage=5.0
2025-12-23 22:11:28.855 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:28.856 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:28.860 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0
2025-12-23 22:11:28.865 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] org.hibernate.SQL                        : 
    insert 
    into
        bonus_configurations
        (active, bonus_percentage, created_at, description, effective_from, effective_to, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:11:28.874 DEBUG [http-nio-8080-exec-9] [df677bd6-e111-4a00-b22a-5449f76c047c] org.hibernate.SQL                        : 
    update
        bonus_configurations 
    set
        active=?,
        bonus_percentage=?,
        description=?,
        effective_from=?,
        effective_to=?,
        updated_at=?,
        version=? 
    where
        id=? 
        and version=?
2025-12-23 22:11:32.527 DEBUG [http-nio-8080-exec-1] [80518354-1eaf-4dab-959e-18feaab6fa80] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/bonus-configuration/current
2025-12-23 22:11:32.531 DEBUG [http-nio-8080-exec-1] [80518354-1eaf-4dab-959e-18feaab6fa80] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:11:32.533 DEBUG [http-nio-8080-exec-1] [80518354-1eaf-4dab-959e-18feaab6fa80] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:11:32.536 DEBUG [http-nio-8080-exec-1] [80518354-1eaf-4dab-959e-18feaab6fa80] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/bonus-configuration/current
2025-12-23 22:11:32.537 DEBUG [http-nio-8080-exec-1] [80518354-1eaf-4dab-959e-18feaab6fa80] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.getActiveConfiguration(); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:32.540 DEBUG [http-nio-8080-exec-1] [80518354-1eaf-4dab-959e-18feaab6fa80] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.getActiveConfiguration(); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:11:32.542 DEBUG [http-nio-8080-exec-1] [80518354-1eaf-4dab-959e-18feaab6fa80] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:11:52.934 DEBUG [http-nio-8080-exec-2] [957cb00c-e597-4e94-a63c-cd4a789b83d0] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:11:52.936 DEBUG [http-nio-8080-exec-2] [957cb00c-e597-4e94-a63c-cd4a789b83d0] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:11:52.936 DEBUG [http-nio-8080-exec-2] [957cb00c-e597-4e94-a63c-cd4a789b83d0] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:11:52.972 DEBUG [http-nio-8080-exec-3] [7c9f1632-d2ce-4ef7-8f2a-84d6a4f7ef8a] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:11:52.972 DEBUG [http-nio-8080-exec-3] [7c9f1632-d2ce-4ef7-8f2a-84d6a4f7ef8a] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:11:52.973 DEBUG [http-nio-8080-exec-3] [7c9f1632-d2ce-4ef7-8f2a-84d6a4f7ef8a] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:11:52.973 DEBUG [http-nio-8080-exec-5] [a645c2d1-dc7f-45bc-8ce4-228f09d6bfeb] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/table.js
2025-12-23 22:11:52.973 DEBUG [http-nio-8080-exec-5] [a645c2d1-dc7f-45bc-8ce4-228f09d6bfeb] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:11:52.973 DEBUG [http-nio-8080-exec-5] [a645c2d1-dc7f-45bc-8ce4-228f09d6bfeb] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/table.js
2025-12-23 22:12:35.703 DEBUG [http-nio-8080-exec-8] [d4a8fee6-36e3-4a81-b667-d9b46090e2d9] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:12:35.709 DEBUG [http-nio-8080-exec-8] [d4a8fee6-36e3-4a81-b667-d9b46090e2d9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:12:35.712 DEBUG [http-nio-8080-exec-8] [d4a8fee6-36e3-4a81-b667-d9b46090e2d9] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:12:35.730 DEBUG [http-nio-8080-exec-10] [9a407347-9127-4dfe-ac2c-a463c92efe68] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:12:35.731 DEBUG [http-nio-8080-exec-10] [9a407347-9127-4dfe-ac2c-a463c92efe68] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:12:35.732 DEBUG [http-nio-8080-exec-10] [9a407347-9127-4dfe-ac2c-a463c92efe68] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:12:35.733 DEBUG [http-nio-8080-exec-9] [0f881506-101c-43b6-9d07-325ecade8c08] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/table.js
2025-12-23 22:12:35.734 DEBUG [http-nio-8080-exec-9] [0f881506-101c-43b6-9d07-325ecade8c08] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:12:35.735 DEBUG [http-nio-8080-exec-9] [0f881506-101c-43b6-9d07-325ecade8c08] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/table.js
2025-12-23 22:13:00.046 DEBUG [http-nio-8080-exec-2] [16f4197a-fefe-4fcf-af42-cc11912b45d6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:13:00.065 DEBUG [http-nio-8080-exec-2] [16f4197a-fefe-4fcf-af42-cc11912b45d6] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:13:00.069 DEBUG [http-nio-8080-exec-2] [16f4197a-fefe-4fcf-af42-cc11912b45d6] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:13:00.073 DEBUG [http-nio-8080-exec-2] [16f4197a-fefe-4fcf-af42-cc11912b45d6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:13:27.708 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:13:27.737 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:13:27.743 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:13:27.748 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:13:27.766 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:13:27.768 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:13:27.771 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:13:27.773 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:13:27.783 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:13:27.787 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:13:27.792 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:13:27.795 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:13:27.801 DEBUG [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:13:27.802  WARN [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23502, SQLState: 23502
2025-12-23 22:13:27.802 ERROR [http-nio-8080-exec-6] [0958e481-c60b-416a-86c9-c2a2bb313f04] o.h.engine.jdbc.spi.SqlExceptionHelper   : Значение NULL не разрешено для поля "DTYPE"
NULL not allowed for column "DTYPE"; SQL statement:
insert into bonus_events (bonus_amount,client_id,created_at,event_id,updated_at,version,event_type,id) values (?,?,?,?,?,?,'GRANTED',default) [23502-224]
2025-12-23 22:17:07.517  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 30876 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 22:17:07.519 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 22:17:07.519  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 22:17:07.726  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 22:17:07.747  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 6 JPA repository interfaces.
2025-12-23 22:17:08.098  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 22:17:08.103  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 22:17:08.104  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 22:17:08.132  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 22:17:08.133  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 600 ms
2025-12-23 22:17:08.153  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 22:17:08.223  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 22:17:08.223  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 22:17:08.227  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 22:17:08.315  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 22:17:08.317  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 22:17:08.327  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 22:17:08.328  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.006s)
2025-12-23 22:17:08.330  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 22:17:08.346  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 22:17:08.349  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 22:17:08.361  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 22:17:08.367  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 22:17:08.373  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 22:17:08.379  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 22:17:08.382  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 22:17:08.385  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 22:17:08.397  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.025s)
2025-12-23 22:17:08.432  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 22:17:08.450  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 22:17:08.465  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 22:17:08.560  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 22:17:08.575  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 22:17:08.621  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 22:17:08.957  INFO [main] [] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-23 22:17:08.967 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_configurations 
       alter column description set data type TEXT
2025-12-23 22:17:08.968 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_events 
       alter column event_type set data type varchar(31)
2025-12-23 22:17:08.969 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists client_tags 
       alter column tag set data type varchar(255)
2025-12-23 22:17:08.970 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       alter column notes set data type TEXT
2025-12-23 22:17:08.970 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column aggregate_type set data type varchar(255)
2025-12-23 22:17:08.971 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column event_data set data type TEXT
2025-12-23 22:17:08.971 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists payment_transactions 
       alter column notes set data type TEXT
2025-12-23 22:17:08.972 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       drop constraint if exists idx_client_uuid
2025-12-23 22:17:08.973 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       add constraint idx_client_uuid unique (uuid)
2025-12-23 22:17:08.973 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_aggregate_id 
       on event_store (aggregate_id)
2025-12-23 22:17:08.974 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_event_type 
       on event_store (event_type)
2025-12-23 22:17:08.974 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_timestamp 
       on event_store (timestamp)
2025-12-23 22:17:08.974 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       drop constraint if exists idx_user_uuid
2025-12-23 22:17:08.974 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       add constraint idx_user_uuid unique (uuid)
2025-12-23 22:17:08.978  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 22:17:09.098 DEBUG [main] [] c.w.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-23 22:17:09.098 DEBUG [main] [] com.westwood.config.RequestIdFilter      : Filter 'requestIdFilter' configured for use
2025-12-23 22:17:09.116  INFO [main] [] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-23 22:17:09.429  INFO [main] [] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-23 22:17:09.429  WARN [main] [] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-23 22:17:09.686  WARN [main] [] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-23 22:17:09.853 DEBUG [main] [] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23 22:17:09.955  WARN [main] [] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-12-23 22:17:09.957  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 22:17:09.957  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 22:17:09.958  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 22:17:09.964  INFO [main] [] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-23 22:17:09.970 ERROR [main] [] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-12-23 22:17:19.096  INFO [SpringApplicationShutdownHook] [] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 22:17:19.104  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 22:17:19.107  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 22:17:28.835  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 31443 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 22:17:28.836 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 22:17:28.836  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 22:17:29.024  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 22:17:29.044  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 6 JPA repository interfaces.
2025-12-23 22:17:29.360  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 22:17:29.365  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 22:17:29.365  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 22:17:29.389  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 22:17:29.390  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 541 ms
2025-12-23 22:17:29.410  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 22:17:29.479  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 22:17:29.480  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 22:17:29.488  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 22:17:29.568  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 22:17:29.570  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 22:17:29.578  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 22:17:29.580  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.006s)
2025-12-23 22:17:29.582  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 22:17:29.597  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 22:17:29.600  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 22:17:29.611  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 22:17:29.616  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 22:17:29.623  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 22:17:29.629  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 22:17:29.632  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 22:17:29.635  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 22:17:29.649  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.027s)
2025-12-23 22:17:29.684  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 22:17:29.702  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 22:17:29.714  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 22:17:29.811  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 22:17:29.826  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 22:17:29.878  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 22:17:30.197  INFO [main] [] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-23 22:17:30.207 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_configurations 
       alter column description set data type TEXT
2025-12-23 22:17:30.207 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_events 
       alter column event_type set data type varchar(31)
2025-12-23 22:17:30.208 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists client_tags 
       alter column tag set data type varchar(255)
2025-12-23 22:17:30.209 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       alter column notes set data type TEXT
2025-12-23 22:17:30.209 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column aggregate_type set data type varchar(255)
2025-12-23 22:17:30.209 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column event_data set data type TEXT
2025-12-23 22:17:30.210 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists payment_transactions 
       alter column notes set data type TEXT
2025-12-23 22:17:30.210 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       drop constraint if exists idx_client_uuid
2025-12-23 22:17:30.211 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       add constraint idx_client_uuid unique (uuid)
2025-12-23 22:17:30.211 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_aggregate_id 
       on event_store (aggregate_id)
2025-12-23 22:17:30.211 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_event_type 
       on event_store (event_type)
2025-12-23 22:17:30.212 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_timestamp 
       on event_store (timestamp)
2025-12-23 22:17:30.212 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       drop constraint if exists idx_user_uuid
2025-12-23 22:17:30.212 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       add constraint idx_user_uuid unique (uuid)
2025-12-23 22:17:30.216  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 22:17:30.344 DEBUG [main] [] c.w.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-23 22:17:30.344 DEBUG [main] [] com.westwood.config.RequestIdFilter      : Filter 'requestIdFilter' configured for use
2025-12-23 22:17:30.364  INFO [main] [] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-23 22:17:30.928  INFO [main] [] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-23 22:17:30.928  WARN [main] [] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-23 22:17:30.971  WARN [main] [] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-23 22:17:31.064 DEBUG [main] [] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23 22:17:31.163  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-12-23 22:17:31.167  INFO [main] [] c.westwood.WestwoodBackendApplication    : Started WestwoodBackendApplication in 2.529 seconds (process running for 2.678)
2025-12-23 22:17:40.362 DEBUG [http-nio-8080-exec-1] [b9b8d38f-e8c9-4e7f-a525-e0984f988dd4] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/login.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:17:40.369 DEBUG [http-nio-8080-exec-1] [b9b8d38f-e8c9-4e7f-a525-e0984f988dd4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:40.372 DEBUG [http-nio-8080-exec-1] [b9b8d38f-e8c9-4e7f-a525-e0984f988dd4] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/login.do?jsessionid=c3c32e671bcc4929cd102d8211241194
2025-12-23 22:17:40.450 DEBUG [http-nio-8080-exec-2] [c5eabc2e-3d97-4101-865c-a5e1f8cd744c] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:17:40.450 DEBUG [http-nio-8080-exec-2] [c5eabc2e-3d97-4101-865c-a5e1f8cd744c] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:40.451 DEBUG [http-nio-8080-exec-2] [c5eabc2e-3d97-4101-865c-a5e1f8cd744c] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:17:40.486 DEBUG [http-nio-8080-exec-3] [ecce9f0d-d0ad-4be0-9078-19167df24255] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/login.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:40.487 DEBUG [http-nio-8080-exec-3] [ecce9f0d-d0ad-4be0-9078-19167df24255] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:40.487 DEBUG [http-nio-8080-exec-3] [ecce9f0d-d0ad-4be0-9078-19167df24255] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/login.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:40.799 DEBUG [http-nio-8080-exec-4] [d11ea45b-9567-42de-bc57-966e9fc26027] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/background.gif
2025-12-23 22:17:40.799 DEBUG [http-nio-8080-exec-4] [d11ea45b-9567-42de-bc57-966e9fc26027] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:40.800 DEBUG [http-nio-8080-exec-4] [d11ea45b-9567-42de-bc57-966e9fc26027] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/background.gif
2025-12-23 22:17:42.044 DEBUG [http-nio-8080-exec-5] [06930d8f-bc29-4ff0-ab66-9d13bb5473a7] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/login.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.046 DEBUG [http-nio-8080-exec-5] [06930d8f-bc29-4ff0-ab66-9d13bb5473a7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.046 DEBUG [http-nio-8080-exec-5] [06930d8f-bc29-4ff0-ab66-9d13bb5473a7] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/login.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.476 DEBUG [http-nio-8080-exec-6] [ffb0e867-e314-4829-8b97-7fc0b5df7d3b] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/header.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.478 DEBUG [http-nio-8080-exec-6] [ffb0e867-e314-4829-8b97-7fc0b5df7d3b] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.478 DEBUG [http-nio-8080-exec-7] [d4142516-172b-4f58-a166-7d6e5714129a] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tables.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.478 DEBUG [http-nio-8080-exec-6] [ffb0e867-e314-4829-8b97-7fc0b5df7d3b] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/header.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.478 DEBUG [http-nio-8080-exec-7] [d4142516-172b-4f58-a166-7d6e5714129a] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.478 DEBUG [http-nio-8080-exec-7] [d4142516-172b-4f58-a166-7d6e5714129a] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tables.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.479 DEBUG [http-nio-8080-exec-8] [a7abe66c-6142-4605-a024-656c3ed732e8] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/query.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.479 DEBUG [http-nio-8080-exec-8] [a7abe66c-6142-4605-a024-656c3ed732e8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.479 DEBUG [http-nio-8080-exec-8] [a7abe66c-6142-4605-a024-656c3ed732e8] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/query.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.480 DEBUG [http-nio-8080-exec-9] [e20d1dfe-f614-4dd3-b52a-ec72dbb0ebb9] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/help.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.482 DEBUG [http-nio-8080-exec-9] [e20d1dfe-f614-4dd3-b52a-ec72dbb0ebb9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.482 DEBUG [http-nio-8080-exec-9] [e20d1dfe-f614-4dd3-b52a-ec72dbb0ebb9] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/help.jsp?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:42.490 DEBUG [http-nio-8080-exec-10] [a632b1e5-b035-43f8-aabe-f9580658eacf] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_disconnect.gif
2025-12-23 22:17:42.490 DEBUG [http-nio-8080-exec-10] [a632b1e5-b035-43f8-aabe-f9580658eacf] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.490 DEBUG [http-nio-8080-exec-10] [a632b1e5-b035-43f8-aabe-f9580658eacf] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_disconnect.gif
2025-12-23 22:17:42.493 DEBUG [http-nio-8080-exec-2] [558d91bd-2e47-4d79-9f9c-a7c32e8d25c3] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_refresh.gif
2025-12-23 22:17:42.493 DEBUG [http-nio-8080-exec-1] [b0e1e11b-84ca-4228-94bd-0bce02ad53f7] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_line.gif
2025-12-23 22:17:42.494 DEBUG [http-nio-8080-exec-2] [558d91bd-2e47-4d79-9f9c-a7c32e8d25c3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.494 DEBUG [http-nio-8080-exec-2] [558d91bd-2e47-4d79-9f9c-a7c32e8d25c3] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_refresh.gif
2025-12-23 22:17:42.494 DEBUG [http-nio-8080-exec-1] [b0e1e11b-84ca-4228-94bd-0bce02ad53f7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.496 DEBUG [http-nio-8080-exec-3] [1080e85e-dd4a-494b-a820-bf75c5e5e7d8] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_rollback.gif
2025-12-23 22:17:42.498 DEBUG [http-nio-8080-exec-1] [b0e1e11b-84ca-4228-94bd-0bce02ad53f7] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_line.gif
2025-12-23 22:17:42.497 DEBUG [http-nio-8080-exec-4] [12a644a4-c867-4504-83ce-e02bd05c52d5] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_commit.gif
2025-12-23 22:17:42.498 DEBUG [http-nio-8080-exec-3] [1080e85e-dd4a-494b-a820-bf75c5e5e7d8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.498 DEBUG [http-nio-8080-exec-4] [12a644a4-c867-4504-83ce-e02bd05c52d5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.498 DEBUG [http-nio-8080-exec-3] [1080e85e-dd4a-494b-a820-bf75c5e5e7d8] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_rollback.gif
2025-12-23 22:17:42.498 DEBUG [http-nio-8080-exec-4] [12a644a4-c867-4504-83ce-e02bd05c52d5] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_commit.gif
2025-12-23 22:17:42.502 DEBUG [http-nio-8080-exec-5] [b83be271-6c6c-4395-acca-14661111c269] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_run.gif
2025-12-23 22:17:42.502 DEBUG [http-nio-8080-exec-6] [6f05dca9-8ff5-4e95-99b4-2ffa82e1110b] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_run_selected.gif
2025-12-23 22:17:42.503 DEBUG [http-nio-8080-exec-5] [b83be271-6c6c-4395-acca-14661111c269] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.503 DEBUG [http-nio-8080-exec-6] [6f05dca9-8ff5-4e95-99b4-2ffa82e1110b] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.503 DEBUG [http-nio-8080-exec-5] [b83be271-6c6c-4395-acca-14661111c269] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_run.gif
2025-12-23 22:17:42.503 DEBUG [http-nio-8080-exec-6] [6f05dca9-8ff5-4e95-99b4-2ffa82e1110b] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_run_selected.gif
2025-12-23 22:17:42.503 DEBUG [http-nio-8080-exec-8] [523b878b-4c52-47ee-a96b-d87086e0caca] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_stop.gif
2025-12-23 22:17:42.503 DEBUG [http-nio-8080-exec-8] [523b878b-4c52-47ee-a96b-d87086e0caca] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.503 DEBUG [http-nio-8080-exec-8] [523b878b-4c52-47ee-a96b-d87086e0caca] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_stop.gif
2025-12-23 22:17:42.506 DEBUG [http-nio-8080-exec-9] [cdd2bf32-31ad-430e-b564-81afc784bb26] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_history.gif
2025-12-23 22:17:42.507 DEBUG [http-nio-8080-exec-9] [cdd2bf32-31ad-430e-b564-81afc784bb26] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.507 DEBUG [http-nio-8080-exec-9] [cdd2bf32-31ad-430e-b564-81afc784bb26] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_history.gif
2025-12-23 22:17:42.509 DEBUG [http-nio-8080-exec-10] [8f617fe3-1a21-432e-9a18-cedd93060e35] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/icon_help.gif
2025-12-23 22:17:42.510 DEBUG [http-nio-8080-exec-10] [8f617fe3-1a21-432e-9a18-cedd93060e35] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.510 DEBUG [http-nio-8080-exec-10] [8f617fe3-1a21-432e-9a18-cedd93060e35] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/icon_help.gif
2025-12-23 22:17:42.560 DEBUG [http-nio-8080-exec-2] [14a97c05-c585-4a9d-870d-3985057cb5d8] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree.js
2025-12-23 22:17:42.560 DEBUG [http-nio-8080-exec-2] [14a97c05-c585-4a9d-870d-3985057cb5d8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.560 DEBUG [http-nio-8080-exec-2] [14a97c05-c585-4a9d-870d-3985057cb5d8] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree.js
2025-12-23 22:17:42.568 DEBUG [http-nio-8080-exec-4] [d6d3898c-5019-4b08-a6c3-12f9788b99c2] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_minus.gif
2025-12-23 22:17:42.568 DEBUG [http-nio-8080-exec-4] [d6d3898c-5019-4b08-a6c3-12f9788b99c2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.568 DEBUG [http-nio-8080-exec-4] [d6d3898c-5019-4b08-a6c3-12f9788b99c2] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_minus.gif
2025-12-23 22:17:42.568 DEBUG [http-nio-8080-exec-3] [5bbe9442-0910-40aa-98c5-dc082d296b58] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_plus.gif
2025-12-23 22:17:42.569 DEBUG [http-nio-8080-exec-3] [5bbe9442-0910-40aa-98c5-dc082d296b58] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.569 DEBUG [http-nio-8080-exec-3] [5bbe9442-0910-40aa-98c5-dc082d296b58] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_plus.gif
2025-12-23 22:17:42.569 DEBUG [http-nio-8080-exec-1] [842787d8-6202-49d1-a759-a4cfdfc34c64] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_database.gif
2025-12-23 22:17:42.569 DEBUG [http-nio-8080-exec-1] [842787d8-6202-49d1-a759-a4cfdfc34c64] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.570 DEBUG [http-nio-8080-exec-1] [842787d8-6202-49d1-a759-a4cfdfc34c64] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_database.gif
2025-12-23 22:17:42.572 DEBUG [http-nio-8080-exec-6] [9e19c89b-da29-4df7-bedb-12f7f13c600c] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_table.gif
2025-12-23 22:17:42.573 DEBUG [http-nio-8080-exec-6] [9e19c89b-da29-4df7-bedb-12f7f13c600c] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.573 DEBUG [http-nio-8080-exec-6] [9e19c89b-da29-4df7-bedb-12f7f13c600c] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_table.gif
2025-12-23 22:17:42.573 DEBUG [http-nio-8080-exec-5] [fe25637d-94ea-41b3-b4ae-7a0d77739ed7] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_empty.gif
2025-12-23 22:17:42.574 DEBUG [http-nio-8080-exec-5] [fe25637d-94ea-41b3-b4ae-7a0d77739ed7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.574 DEBUG [http-nio-8080-exec-5] [fe25637d-94ea-41b3-b4ae-7a0d77739ed7] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_empty.gif
2025-12-23 22:17:42.577 DEBUG [http-nio-8080-exec-8] [72cfb042-54da-4306-8b2d-e6e0a93ff115] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_column.gif
2025-12-23 22:17:42.577 DEBUG [http-nio-8080-exec-8] [72cfb042-54da-4306-8b2d-e6e0a93ff115] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.578 DEBUG [http-nio-8080-exec-8] [72cfb042-54da-4306-8b2d-e6e0a93ff115] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_column.gif
2025-12-23 22:17:42.580 DEBUG [http-nio-8080-exec-9] [b3e25691-c155-45c6-83fc-557541392e38] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_type.gif
2025-12-23 22:17:42.580 DEBUG [http-nio-8080-exec-9] [b3e25691-c155-45c6-83fc-557541392e38] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.581 DEBUG [http-nio-8080-exec-9] [b3e25691-c155-45c6-83fc-557541392e38] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_type.gif
2025-12-23 22:17:42.640 DEBUG [http-nio-8080-exec-10] [24830c05-fdf5-4d28-94f4-fd0273a09395] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_index_az.gif
2025-12-23 22:17:42.640 DEBUG [http-nio-8080-exec-10] [24830c05-fdf5-4d28-94f4-fd0273a09395] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.640 DEBUG [http-nio-8080-exec-10] [24830c05-fdf5-4d28-94f4-fd0273a09395] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_index_az.gif
2025-12-23 22:17:42.645 DEBUG [http-nio-8080-exec-7] [7501daee-4eed-48df-aaab-eb94b3e1d602] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_index.gif
2025-12-23 22:17:42.645 DEBUG [http-nio-8080-exec-7] [7501daee-4eed-48df-aaab-eb94b3e1d602] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:42.645 DEBUG [http-nio-8080-exec-7] [7501daee-4eed-48df-aaab-eb94b3e1d602] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_index.gif
2025-12-23 22:17:43.817 DEBUG [http-nio-8080-exec-2] [359ad552-e5e2-443e-a83b-ec08d8d026b8] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_folder.gif
2025-12-23 22:17:43.817 DEBUG [http-nio-8080-exec-4] [0f010fc9-f73c-454e-8ef8-0e33be2678c1] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_view.gif
2025-12-23 22:17:43.818 DEBUG [http-nio-8080-exec-2] [359ad552-e5e2-443e-a83b-ec08d8d026b8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:43.818 DEBUG [http-nio-8080-exec-4] [0f010fc9-f73c-454e-8ef8-0e33be2678c1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:43.818 DEBUG [http-nio-8080-exec-2] [359ad552-e5e2-443e-a83b-ec08d8d026b8] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_folder.gif
2025-12-23 22:17:43.818 DEBUG [http-nio-8080-exec-4] [0f010fc9-f73c-454e-8ef8-0e33be2678c1] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_view.gif
2025-12-23 22:17:43.897 DEBUG [http-nio-8080-exec-3] [60f5ac58-9a1b-4e23-886e-ce71a9b2a65a] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_users.gif
2025-12-23 22:17:43.897 DEBUG [http-nio-8080-exec-3] [60f5ac58-9a1b-4e23-886e-ce71a9b2a65a] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:43.898 DEBUG [http-nio-8080-exec-3] [60f5ac58-9a1b-4e23-886e-ce71a9b2a65a] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_users.gif
2025-12-23 22:17:43.899 DEBUG [http-nio-8080-exec-1] [96163638-f0e9-4c25-a8d3-fd098d72dfb1] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_user.gif
2025-12-23 22:17:43.900 DEBUG [http-nio-8080-exec-1] [96163638-f0e9-4c25-a8d3-fd098d72dfb1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:43.900 DEBUG [http-nio-8080-exec-1] [96163638-f0e9-4c25-a8d3-fd098d72dfb1] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_user.gif
2025-12-23 22:17:43.904 DEBUG [http-nio-8080-exec-6] [8f6825eb-715b-4b89-a1d0-1a6a30c251f5] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/tree_info.gif
2025-12-23 22:17:43.904 DEBUG [http-nio-8080-exec-6] [8f6825eb-715b-4b89-a1d0-1a6a30c251f5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:43.904 DEBUG [http-nio-8080-exec-6] [8f6825eb-715b-4b89-a1d0-1a6a30c251f5] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/tree_info.gif
2025-12-23 22:17:55.491 DEBUG [http-nio-8080-exec-5] [d4198213-fc8c-41d4-a063-789e4c0470d5] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:55.493 DEBUG [http-nio-8080-exec-5] [d4198213-fc8c-41d4-a063-789e4c0470d5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:55.493 DEBUG [http-nio-8080-exec-5] [d4198213-fc8c-41d4-a063-789e4c0470d5] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:17:55.510 DEBUG [http-nio-8080-exec-8] [461a4a23-847d-4bbc-8ff1-dc7700d8c86c] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:17:55.511 DEBUG [http-nio-8080-exec-8] [461a4a23-847d-4bbc-8ff1-dc7700d8c86c] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:55.511 DEBUG [http-nio-8080-exec-8] [461a4a23-847d-4bbc-8ff1-dc7700d8c86c] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:17:55.511 DEBUG [http-nio-8080-exec-9] [f21be9cc-5c1d-4187-bf6e-c18e1bda2d67] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/table.js
2025-12-23 22:17:55.511 DEBUG [http-nio-8080-exec-9] [f21be9cc-5c1d-4187-bf6e-c18e1bda2d67] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:55.512 DEBUG [http-nio-8080-exec-9] [f21be9cc-5c1d-4187-bf6e-c18e1bda2d67] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/table.js
2025-12-23 22:17:58.820  INFO [http-nio-8080-exec-7] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-23 22:17:58.821  INFO [http-nio-8080-exec-7] [] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-23 22:17:58.826  INFO [http-nio-8080-exec-7] [] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2025-12-23 22:17:58.837 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/auth/register
2025-12-23 22:17:58.940 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:17:58.945 ERROR [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] c.w.security.JwtAuthenticationFilter     : Cannot set user authentication: {}

org.springframework.security.core.userdetails.UsernameNotFoundException: User not found with username: bsagidul
	at com.westwood.security.UserDetailsServiceImpl.lambda$loadUserByUsername$0(UserDetailsServiceImpl.java:23)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.westwood.security.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.westwood.security.UserDetailsServiceImpl$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at com.westwood.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:45)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.westwood.config.RequestIdFilter.doFilterInternal(RequestIdFilter.java:47)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)

2025-12-23 22:17:58.947 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:17:58.947 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/auth/register
2025-12-23 22:17:58.996 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] org.hibernate.SQL                        : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2025-12-23 22:17:58.997 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] org.hibernate.SQL                        : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-12-23 22:17:59.090 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] org.hibernate.SQL                        : 
    insert 
    into
        users
        (active, created_at, email, first_name, last_name, password, updated_at, username, uuid, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:17:59.130 DEBUG [http-nio-8080-exec-7] [73cd93ba-b64c-460b-abef-4eb56c8c2bd8] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-12-23 22:18:07.205 DEBUG [http-nio-8080-exec-2] [9c8d305d-b2a7-47e0-811e-4c07b4b61678] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/clients
2025-12-23 22:18:07.229 DEBUG [http-nio-8080-exec-2] [9c8d305d-b2a7-47e0-811e-4c07b4b61678] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:18:07.258 DEBUG [http-nio-8080-exec-2] [9c8d305d-b2a7-47e0-811e-4c07b4b61678] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:18:07.261 DEBUG [http-nio-8080-exec-2] [9c8d305d-b2a7-47e0-811e-4c07b4b61678] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/clients
2025-12-23 22:18:07.272 DEBUG [http-nio-8080-exec-2] [9c8d305d-b2a7-47e0-811e-4c07b4b61678] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.getAllClients(java.lang.String,java.lang.String); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:18:07.290 DEBUG [http-nio-8080-exec-2] [9c8d305d-b2a7-47e0-811e-4c07b4b61678] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.getAllClients(java.lang.String,java.lang.String); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:18:07.300 DEBUG [http-nio-8080-exec-2] [9c8d305d-b2a7-47e0-811e-4c07b4b61678] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0
2025-12-23 22:18:15.688 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/clients
2025-12-23 22:18:15.692 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:18:15.693 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:18:15.697 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/clients
2025-12-23 22:18:15.709 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.createClient(com.westwood.common.dto.CreateClientRequest); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:18:15.711 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.createClient(com.westwood.common.dto.CreateClientRequest); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:18:15.713 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] org.hibernate.SQL                        : 
    select
        c1_0.id 
    from
        clients c1_0 
    where
        c1_0.phone=? 
    fetch
        first ? rows only
2025-12-23 22:18:15.715 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] org.hibernate.SQL                        : 
    insert 
    into
        clients
        (client_type, created_at, name, notes, phone, surname, updated_at, uuid, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:18:15.717 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] org.hibernate.SQL                        : 
    insert 
    into
        client_tags
        (client_id, tag) 
    values
        (?, ?)
2025-12-23 22:18:15.717 DEBUG [http-nio-8080-exec-6] [50627561-e2fb-49f1-b921-6eb433e10e88] org.hibernate.SQL                        : 
    insert 
    into
        client_tags
        (client_id, tag) 
    values
        (?, ?)
2025-12-23 22:18:36.086 DEBUG [http-nio-8080-exec-10] [b66b4d53-cae9-48e7-8716-060a2a757eb1] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:18:36.088 DEBUG [http-nio-8080-exec-10] [b66b4d53-cae9-48e7-8716-060a2a757eb1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:18:36.089 DEBUG [http-nio-8080-exec-10] [b66b4d53-cae9-48e7-8716-060a2a757eb1] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:18:36.122 DEBUG [http-nio-8080-exec-7] [0ad45f2a-431e-4e5f-99f9-ed650018e36f] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:18:36.125 DEBUG [http-nio-8080-exec-7] [0ad45f2a-431e-4e5f-99f9-ed650018e36f] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:18:36.125 DEBUG [http-nio-8080-exec-7] [0ad45f2a-431e-4e5f-99f9-ed650018e36f] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:18:36.125 DEBUG [http-nio-8080-exec-2] [04b02794-13a4-48c4-82ab-448a6bda8345] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/table.js
2025-12-23 22:18:36.125 DEBUG [http-nio-8080-exec-2] [04b02794-13a4-48c4-82ab-448a6bda8345] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:18:36.125 DEBUG [http-nio-8080-exec-2] [04b02794-13a4-48c4-82ab-448a6bda8345] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/table.js
2025-12-23 22:18:50.479 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:18:50.502 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:18:50.507 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:18:50.513 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:18:50.550 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:18:50.552 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:18:50.556 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:18:50.559 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:18:50.573 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:18:50.577 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:18:50.588 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:18:50.599 DEBUG [http-nio-8080-exec-4] [115144a3-7569-45cb-b9eb-6b9155df5bdb] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:18:55.560 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/bonus-configuration?bonusPercentage=5.0
2025-12-23 22:18:55.569 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:18:55.574 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:18:55.580 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/bonus-configuration?bonusPercentage=5.0
2025-12-23 22:18:55.583 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:18:55.584 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:18:55.586 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0
2025-12-23 22:18:55.588 DEBUG [http-nio-8080-exec-3] [ba38730f-7246-40a4-9b5a-842a8f527f3a] org.hibernate.SQL                        : 
    insert 
    into
        bonus_configurations
        (active, bonus_percentage, created_at, description, effective_from, effective_to, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:02.266 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:19:02.270 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:19:02.272 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:19:02.276 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:19:02.278 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:19:02.279 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:19:02.282 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:19:02.284 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:19:02.284 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:19:02.286 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:02.288 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:02.291 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:19:02.298 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:19:02.300 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:19:02.302 DEBUG [http-nio-8080-exec-1] [1345f64e-a387-4f1e-aa00-d8a11ec3d974] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:22.768 DEBUG [http-nio-8080-exec-8] [b1d9fefc-ee30-46c9-9ef6-f764e3a22fe9] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:19:22.772 DEBUG [http-nio-8080-exec-8] [b1d9fefc-ee30-46c9-9ef6-f764e3a22fe9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:19:22.772 DEBUG [http-nio-8080-exec-8] [b1d9fefc-ee30-46c9-9ef6-f764e3a22fe9] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:19:22.827 DEBUG [http-nio-8080-exec-9] [eb3c75ca-19d2-473b-a223-dbaa6fabab0b] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:19:22.828 DEBUG [http-nio-8080-exec-9] [eb3c75ca-19d2-473b-a223-dbaa6fabab0b] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:19:22.828 DEBUG [http-nio-8080-exec-10] [18636022-33b7-47ec-ae54-3e1407e1c908] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/table.js
2025-12-23 22:19:22.828 DEBUG [http-nio-8080-exec-10] [18636022-33b7-47ec-ae54-3e1407e1c908] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:19:22.828 DEBUG [http-nio-8080-exec-10] [18636022-33b7-47ec-ae54-3e1407e1c908] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/table.js
2025-12-23 22:19:22.828 DEBUG [http-nio-8080-exec-9] [eb3c75ca-19d2-473b-a223-dbaa6fabab0b] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:19:52.541 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:19:52.560 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:19:52.566 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:19:52.571 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:19:52.576 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:19:52.577 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:19:52.578 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:19:52.579 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:19:52.580 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:19:52.581 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:52.584 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:52.585 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:19:52.588 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:19:52.588 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:19:52.589 DEBUG [http-nio-8080-exec-4] [e6491696-07f3-46c3-a0ff-166554e7b726] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:56.677 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:19:56.680 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:19:56.683 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:19:56.688 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:19:56.689 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:19:56.690 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:19:56.693 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:19:56.694 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:19:56.695 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:19:56.696 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:56.699 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:19:56.701 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:19:56.703 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:19:56.703 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:19:56.704 DEBUG [http-nio-8080-exec-3] [0601e8b8-cb4d-43ba-92a1-b4e38bafbb9f] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:20:03.831 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:20:03.835 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:20:03.839 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:20:03.846 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:20:03.848 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:20:03.848 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:20:03.850 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:20:03.851 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:20:03.852 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:20:03.854 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:20:03.856 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:20:03.857 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:20:03.863 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:20:03.864 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:20:03.864 DEBUG [http-nio-8080-exec-1] [9de2d5bf-5bf7-4ee8-aa69-2dd00ee44673] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:20:20.716 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/payments/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61
2025-12-23 22:20:20.736 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:20:20.739 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:20:20.745 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/payments/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61
2025-12-23 22:20:20.753 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.getPaymentsByClientId(java.util.UUID); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:20:20.759 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.getPaymentsByClientId(java.util.UUID); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:20:20.761 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:20:20.762 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:20:20.773 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] org.hibernate.SQL                        : 
    select
        pt1_0.id,
        pt1_0.amount,
        pt1_0.client_id,
        pt1_0.created_at,
        pt1_0.entered_by_user_id,
        pt1_0.notes,
        pt1_0.status,
        pt1_0.updated_at,
        pt1_0.version 
    from
        payment_transactions pt1_0 
    where
        pt1_0.client_id=? 
    order by
        pt1_0.created_at desc
2025-12-23 22:20:20.778 DEBUG [http-nio-8080-exec-6] [3375b327-0f09-4acf-a0ff-ac255d88976c] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:20:50.453 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/payments/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61/total?from=2024-01-01T00:00:00&to=2026-12-31T23:59:59
2025-12-23 22:20:50.467 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:20:50.470 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:20:50.472 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/payments/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61/total?from=2024-01-01T00:00:00&to=2026-12-31T23:59:59
2025-12-23 22:20:50.487 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.getTotalByClientAndTimeRange(java.util.UUID,java.time.LocalDateTime,java.time.LocalDateTime); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:20:50.488 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.getTotalByClientAndTimeRange(java.util.UUID,java.time.LocalDateTime,java.time.LocalDateTime); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:20:50.490 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:20:50.491 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:20:50.497 DEBUG [http-nio-8080-exec-5] [66eee6be-30cd-4ce8-a22f-29bc9c75de96] org.hibernate.SQL                        : 
    select
        sum(pt1_0.amount) 
    from
        payment_transactions pt1_0 
    where
        pt1_0.client_id=? 
        and pt1_0.created_at between ? and ?
2025-12-23 22:22:15.662 DEBUG [http-nio-8080-exec-10] [06199ac6-ee34-4185-85a9-72354aac30e6] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:22:15.666 DEBUG [http-nio-8080-exec-10] [06199ac6-ee34-4185-85a9-72354aac30e6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:22:15.667 DEBUG [http-nio-8080-exec-10] [06199ac6-ee34-4185-85a9-72354aac30e6] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:22:15.710 DEBUG [http-nio-8080-exec-9] [687cc043-7239-4f78-8134-c5211802b299] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/stylesheet.css
2025-12-23 22:22:15.711 DEBUG [http-nio-8080-exec-9] [687cc043-7239-4f78-8134-c5211802b299] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:22:15.712 DEBUG [http-nio-8080-exec-7] [ddb5ebbb-0419-48af-b797-3df7a8e3eefd] o.s.security.web.FilterChainProxy        : Securing GET /h2-console/table.js
2025-12-23 22:22:15.713 DEBUG [http-nio-8080-exec-9] [687cc043-7239-4f78-8134-c5211802b299] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/stylesheet.css
2025-12-23 22:22:15.713 DEBUG [http-nio-8080-exec-7] [ddb5ebbb-0419-48af-b797-3df7a8e3eefd] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:22:15.713 DEBUG [http-nio-8080-exec-7] [ddb5ebbb-0419-48af-b797-3df7a8e3eefd] o.s.security.web.FilterChainProxy        : Secured GET /h2-console/table.js
2025-12-23 22:22:15.905 DEBUG [http-nio-8080-exec-2] [f76d80ec-19a2-4d8d-8c53-8c4bfa8f10c0] o.s.security.web.FilterChainProxy        : Securing POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:22:15.906 DEBUG [http-nio-8080-exec-2] [f76d80ec-19a2-4d8d-8c53-8c4bfa8f10c0] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:22:15.907 DEBUG [http-nio-8080-exec-2] [f76d80ec-19a2-4d8d-8c53-8c4bfa8f10c0] o.s.security.web.FilterChainProxy        : Secured POST /h2-console/query.do?jsessionid=6bc84c8cc461953bb5f73274fb7a39f6
2025-12-23 22:22:59.227 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/bonuses/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61/balance
2025-12-23 22:22:59.245 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:22:59.252 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:22:59.255 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/bonuses/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61/balance
2025-12-23 22:22:59.260 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusBalance(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:22:59.263 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusBalance(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:22:59.267 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:22:59.268 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:22:59.287 DEBUG [http-nio-8080-exec-6] [43dcc094-ffe1-4e29-9390-1bcc5313f146] org.hibernate.SQL                        : 
    select
        be1_0.id,
        be1_0.event_type,
        be1_0.bonus_amount,
        be1_0.client_id,
        be1_0.created_at,
        be1_0.event_id,
        be1_0.updated_at,
        be1_0.version,
        be1_1.bonus_percentage,
        be1_1.payment_amount,
        be1_1.payment_transaction_id,
        be1_2.final_payment_amount,
        be1_2.original_payment_amount,
        be1_2.payment_transaction_id 
    from
        bonus_events be1_0 
    left join
        bonus_granted be1_1 
            on be1_0.id=be1_1.id 
    left join
        bonus_used be1_2 
            on be1_0.id=be1_2.id 
    where
        be1_0.client_id=? 
    order by
        be1_0.created_at
2025-12-23 22:23:13.851 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/bonuses/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61/history
2025-12-23 22:23:13.870 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:23:13.876 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:23:13.881 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/bonuses/client/9c0e4d7e-9b8f-4367-bff8-ebf4a1b61f61/history
2025-12-23 22:23:13.887 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusHistory(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:23:13.890 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusHistory(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:23:13.895 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:23:13.896 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:23:13.904 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] org.hibernate.SQL                        : 
    select
        be1_0.id,
        be1_0.event_type,
        be1_0.bonus_amount,
        be1_0.client_id,
        be1_0.created_at,
        be1_0.event_id,
        be1_0.updated_at,
        be1_0.version,
        be1_1.bonus_percentage,
        be1_1.payment_amount,
        be1_1.payment_transaction_id,
        be1_2.final_payment_amount,
        be1_2.original_payment_amount,
        be1_2.payment_transaction_id 
    from
        bonus_events be1_0 
    left join
        bonus_granted be1_1 
            on be1_0.id=be1_1.id 
    left join
        bonus_used be1_2 
            on be1_0.id=be1_2.id 
    where
        be1_0.client_id=? 
    order by
        be1_0.created_at desc
2025-12-23 22:23:13.915 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] org.hibernate.SQL                        : 
    select
        pt1_0.id,
        pt1_0.amount,
        pt1_0.client_id,
        pt1_0.created_at,
        pt1_0.entered_by_user_id,
        pt1_0.notes,
        pt1_0.status,
        pt1_0.updated_at,
        pt1_0.version 
    from
        payment_transactions pt1_0 
    where
        pt1_0.id=?
2025-12-23 22:23:13.917 DEBUG [http-nio-8080-exec-5] [a0aa6fdc-b93a-4e6c-9ecf-e0d54690b3c2] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:31:02.874  INFO [SpringApplicationShutdownHook] [] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 22:31:02.901  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-23 22:31:02.909  INFO [SpringApplicationShutdownHook] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-23 22:31:03.483  INFO [main] [] c.westwood.WestwoodBackendApplication    : Starting WestwoodBackendApplication using Java 17.0.10 with PID 32588 (/Users/baglan/repo/westwood-backend/target/classes started by baglan in /Users/baglan/repo/westwood-backend)
2025-12-23 22:31:03.484 DEBUG [main] [] c.westwood.WestwoodBackendApplication    : Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-23 22:31:03.484  INFO [main] [] c.westwood.WestwoodBackendApplication    : The following 1 profile is active: "dev"
2025-12-23 22:31:03.705  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-23 22:31:03.724  INFO [main] [] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 6 JPA repository interfaces.
2025-12-23 22:31:04.151  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-12-23 22:31:04.159  INFO [main] [] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-23 22:31:04.159  INFO [main] [] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-23 22:31:04.191  INFO [main] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-23 22:31:04.192  INFO [main] [] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 691 ms
2025-12-23 22:31:04.213  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-23 22:31:04.295  INFO [main] [] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:devdb user=SA
2025-12-23 22:31:04.295  INFO [main] [] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-23 22:31:04.300  INFO [main] [] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:devdb'
2025-12-23 22:31:04.392  INFO [main] [] org.flywaydb.core.FlywayExecutor         : Database: jdbc:h2:mem:devdb (H2 2.2)
2025-12-23 22:31:04.394  WARN [main] [] o.f.c.internal.database.base.Database    : Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-12-23 22:31:04.403  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-12-23 22:31:04.404  INFO [main] [] o.f.core.internal.command.DbValidate     : Successfully validated 7 migrations (execution time 00:00.006s)
2025-12-23 22:31:04.407  INFO [main] [] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-12-23 22:31:04.421  INFO [main] [] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2025-12-23 22:31:04.425  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "0 - create clients table"
2025-12-23 22:31:04.438  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1 - create users table"
2025-12-23 22:31:04.444  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2 - create payment transactions table"
2025-12-23 22:31:04.449  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "3 - create bonus events table"
2025-12-23 22:31:04.454  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "4 - create bonus configuration table"
2025-12-23 22:31:04.457  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "5 - create event store table"
2025-12-23 22:31:04.461  INFO [main] [] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "6 - add uuid to clients and users"
2025-12-23 22:31:04.472  INFO [main] [] o.f.core.internal.command.DbMigrate      : Successfully applied 7 migrations to schema "PUBLIC", now at version v6 (execution time 00:00.022s)
2025-12-23 22:31:04.506  INFO [main] [] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-23 22:31:04.530  INFO [main] [] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-23 22:31:04.544  INFO [main] [] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-23 22:31:04.657  INFO [main] [] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-23 22:31:04.693  WARN [main] [] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-23 22:31:04.828  WARN [main] [] o.h.boot.model.internal.EntityBinder     : HHH000457: Joined inheritance hierarchy [com.westwood.domain.BonusEvent] defined explicit @DiscriminatorColumn.  Legacy Hibernate behavior was to ignore the @DiscriminatorColumn.  However, as part of issue HHH-6911 we now apply the explicit @DiscriminatorColumn.  If you would prefer the legacy behavior, enable the `hibernate.discriminator.ignore_explicit_for_joined` setting (hibernate.discriminator.ignore_explicit_for_joined=true)
2025-12-23 22:31:05.241  INFO [main] [] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-23 22:31:05.251 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_configurations 
       alter column description set data type TEXT
2025-12-23 22:31:05.251 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists bonus_events 
       alter column event_type set data type varchar(31)
2025-12-23 22:31:05.252 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists client_tags 
       alter column tag set data type varchar(255)
2025-12-23 22:31:05.253 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       alter column notes set data type TEXT
2025-12-23 22:31:05.253 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column aggregate_type set data type varchar(255)
2025-12-23 22:31:05.254 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists event_store 
       alter column event_data set data type TEXT
2025-12-23 22:31:05.254 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists payment_transactions 
       alter column notes set data type TEXT
2025-12-23 22:31:05.255 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       drop constraint if exists idx_client_uuid
2025-12-23 22:31:05.255 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists clients 
       add constraint idx_client_uuid unique (uuid)
2025-12-23 22:31:05.256 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_aggregate_id 
       on event_store (aggregate_id)
2025-12-23 22:31:05.257 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_event_type 
       on event_store (event_type)
2025-12-23 22:31:05.257 DEBUG [main] [] org.hibernate.SQL                        : 
    create index idx_timestamp 
       on event_store (timestamp)
2025-12-23 22:31:05.258 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       drop constraint if exists idx_user_uuid
2025-12-23 22:31:05.258 DEBUG [main] [] org.hibernate.SQL                        : 
    alter table if exists users 
       add constraint idx_user_uuid unique (uuid)
2025-12-23 22:31:05.261  INFO [main] [] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-23 22:31:05.399 DEBUG [main] [] c.w.security.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-12-23 22:31:05.400 DEBUG [main] [] com.westwood.config.RequestIdFilter      : Filter 'requestIdFilter' configured for use
2025-12-23 22:31:05.417  INFO [main] [] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-23 22:31:05.709  INFO [main] [] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-23 22:31:05.709  WARN [main] [] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-23 22:31:05.746  WARN [main] [] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-23 22:31:05.847 DEBUG [main] [] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-23 22:31:05.946  INFO [main] [] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-12-23 22:31:05.951  INFO [main] [] c.westwood.WestwoodBackendApplication    : Started WestwoodBackendApplication in 2.698 seconds (process running for 2.874)
2025-12-23 22:31:54.802  INFO [http-nio-8080-exec-2] [] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-23 22:31:54.803  INFO [http-nio-8080-exec-2] [] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-23 22:31:54.806  INFO [http-nio-8080-exec-2] [] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-12-23 22:31:54.822 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/auth/register
2025-12-23 22:31:54.926 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:31:54.935 ERROR [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] c.w.security.JwtAuthenticationFilter     : Cannot set user authentication: {}

org.springframework.security.core.userdetails.UsernameNotFoundException: User not found with username: bsagidul
	at com.westwood.security.UserDetailsServiceImpl.lambda$loadUserByUsername$0(UserDetailsServiceImpl.java:23)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.westwood.security.UserDetailsServiceImpl.loadUserByUsername(UserDetailsServiceImpl.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.westwood.security.UserDetailsServiceImpl$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at com.westwood.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:45)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.westwood.config.RequestIdFilter.doFilterInternal(RequestIdFilter.java:47)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)

2025-12-23 22:31:54.938 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2025-12-23 22:31:54.940 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/auth/register
2025-12-23 22:31:54.985 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] org.hibernate.SQL                        : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    fetch
        first ? rows only
2025-12-23 22:31:54.986 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] org.hibernate.SQL                        : 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-12-23 22:31:55.075 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] org.hibernate.SQL                        : 
    insert 
    into
        users
        (active, created_at, email, first_name, last_name, password, updated_at, username, uuid, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:31:55.099 DEBUG [http-nio-8080-exec-2] [f5704c92-e0b1-40e9-9149-32874bd4e7d6] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-12-23 22:32:29.458 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/clients
2025-12-23 22:32:29.475 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:32:29.528 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:32:29.538 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/clients
2025-12-23 22:32:29.604 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.createClient(com.westwood.common.dto.CreateClientRequest); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:32:29.631 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.ClientController.createClient(com.westwood.common.dto.CreateClientRequest); target is of class [com.westwood.controller.ClientController]
2025-12-23 22:32:29.633 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] org.hibernate.SQL                        : 
    select
        c1_0.id 
    from
        clients c1_0 
    where
        c1_0.phone=? 
    fetch
        first ? rows only
2025-12-23 22:32:29.636 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] org.hibernate.SQL                        : 
    insert 
    into
        clients
        (client_type, created_at, name, notes, phone, surname, updated_at, uuid, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:32:29.638 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] org.hibernate.SQL                        : 
    insert 
    into
        client_tags
        (client_id, tag) 
    values
        (?, ?)
2025-12-23 22:32:29.639 DEBUG [http-nio-8080-exec-3] [df7d4986-b821-4380-acea-f5572a0fdd64] org.hibernate.SQL                        : 
    insert 
    into
        client_tags
        (client_id, tag) 
    values
        (?, ?)
2025-12-23 22:33:02.286 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:02.299 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:02.301 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:02.305 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:02.322 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:02.323 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:02.325 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:02.327 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:02.338 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:02.341 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:02.353 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:02.365 DEBUG [http-nio-8080-exec-4] [5e92e94c-eac5-4121-966c-6de10ceb0e99] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:05.953 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/bonus-configuration?bonusPercentage=5.0
2025-12-23 22:33:05.958 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:05.960 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:05.964 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/bonus-configuration?bonusPercentage=5.0
2025-12-23 22:33:05.968 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:33:05.969 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusConfigurationController.createConfiguration(java.math.BigDecimal,java.lang.String); target is of class [com.westwood.controller.BonusConfigurationController]
2025-12-23 22:33:05.972 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0
2025-12-23 22:33:05.974 DEBUG [http-nio-8080-exec-5] [5de835a4-6baf-4426-a5c8-2271541b3065] org.hibernate.SQL                        : 
    insert 
    into
        bonus_configurations
        (active, bonus_percentage, created_at, description, effective_from, effective_to, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:08.625 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:08.629 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:08.631 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:08.635 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:08.636 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:08.637 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:08.639 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:08.640 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:08.641 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:08.642 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:08.643 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:08.646 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:08.650 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:08.651 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:08.653 DEBUG [http-nio-8080-exec-6] [ebdca700-50fd-490e-8797-a83e031d5055] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:11.868 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:11.871 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:11.873 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:11.878 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:11.880 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:11.880 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:11.883 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:11.884 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:11.885 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:11.886 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:11.889 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:11.891 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:11.892 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:11.892 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:11.893 DEBUG [http-nio-8080-exec-7] [333ac58f-34b6-4c1d-9ff7-9f6e69a97126] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:12.658 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:12.661 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:12.662 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:12.665 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:12.667 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:12.667 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:12.669 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:12.671 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:12.672 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:12.674 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:12.675 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:12.676 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:12.680 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:12.680 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:12.681 DEBUG [http-nio-8080-exec-8] [ea49859d-fa22-4d66-8bf8-e12eae22c074] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:12.953 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:12.957 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:12.958 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:12.961 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:12.964 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:12.964 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:12.966 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:12.967 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:12.968 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:12.972 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:12.973 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:12.974 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:12.975 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:12.975 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:12.976 DEBUG [http-nio-8080-exec-9] [31a4bcab-c6d8-414f-9fff-75b8a3065ba9] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:13.379 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:13.381 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:13.381 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:13.382 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:13.383 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:13.383 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:13.383 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:13.384 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:13.384 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:13.385 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:13.386 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:13.386 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:13.387 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:13.388 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:13.388 DEBUG [http-nio-8080-exec-10] [607aa3cd-41cc-49d5-81bd-e729c826425a] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:13.690 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:13.693 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:13.695 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:13.698 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:13.700 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:13.700 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:13.703 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:13.705 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:13.706 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:13.708 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:13.709 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:13.712 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:13.713 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:13.714 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:13.714 DEBUG [http-nio-8080-exec-1] [7a53cf8b-3a86-41f2-b2b5-c3e43beb21bc] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.112 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:16.115 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:16.116 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:16.120 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:16.122 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:16.122 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:16.124 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:16.126 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:16.127 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:16.129 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.131 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.132 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:16.133 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:16.135 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:16.136 DEBUG [http-nio-8080-exec-2] [10e2c2d0-2112-4127-9f7f-e3ef8c23ffbc] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.402 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:16.405 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:16.407 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:16.410 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:16.411 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:16.412 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:16.413 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:16.415 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:16.417 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:16.420 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.423 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.424 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:16.425 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:16.426 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:16.426 DEBUG [http-nio-8080-exec-3] [8a0b62c9-dda8-49f9-b580-a9bbb081beaa] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.739 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:16.742 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:16.744 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:16.747 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:16.748 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:16.748 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:16.749 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:16.750 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:16.751 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:16.752 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.753 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:16.754 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:16.756 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:16.756 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:16.757 DEBUG [http-nio-8080-exec-4] [0f8c07b6-7c0f-47df-9c7e-5de5d8f36e39] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:17.054 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/payments
2025-12-23 22:33:17.057 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:17.059 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:17.062 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/payments
2025-12-23 22:33:17.064 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:17.064 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.PaymentController.createPayment(com.westwood.common.dto.CreatePaymentRequest); target is of class [com.westwood.controller.PaymentController]
2025-12-23 22:33:17.067 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:17.069 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:17.071 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_0.role,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    left join
        user_roles r1_0 
            on u1_0.id=r1_0.user_id 
    where
        u1_0.id=?
2025-12-23 22:33:17.072 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    insert 
    into
        payment_transactions
        (amount, client_id, created_at, entered_by_user_id, notes, status, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:17.074 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:17.076 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    select
        bc1_0.id,
        bc1_0.active,
        bc1_0.bonus_percentage,
        bc1_0.created_at,
        bc1_0.description,
        bc1_0.effective_from,
        bc1_0.effective_to,
        bc1_0.updated_at,
        bc1_0.version 
    from
        bonus_configurations bc1_0 
    where
        bc1_0.active=true 
        and (
            bc1_0.effective_to is null 
            or bc1_0.effective_to>?
        ) 
    order by
        bc1_0.effective_from desc
2025-12-23 22:33:17.078 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    insert 
    into
        bonus_events
        (bonus_amount, client_id, created_at, event_id, updated_at, version, event_type, id) 
    values
        (?, ?, ?, ?, ?, ?, 'GRANTED', default)
2025-12-23 22:33:17.078 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    insert 
    into
        bonus_granted
        (bonus_percentage, payment_amount, payment_transaction_id, id) 
    values
        (?, ?, ?, ?)
2025-12-23 22:33:17.079 DEBUG [http-nio-8080-exec-5] [d37dd17a-2fd0-4d2e-9feb-4950648ad356] org.hibernate.SQL                        : 
    insert 
    into
        event_store
        (aggregate_id, aggregate_type, created_at, event_data, event_id, event_type, timestamp, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-12-23 22:33:28.282 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/bonuses/client/1260f14c-292d-4d35-b391-bab6f71992d9/balance
2025-12-23 22:33:28.285 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:28.285 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:28.287 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/bonuses/client/1260f14c-292d-4d35-b391-bab6f71992d9/balance
2025-12-23 22:33:28.288 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusBalance(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:33:28.289 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusBalance(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:33:28.291 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:28.292 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:28.302 DEBUG [http-nio-8080-exec-6] [ab5fe74b-c369-473c-a44b-149a0e0eddfd] org.hibernate.SQL                        : 
    select
        be1_0.id,
        be1_0.event_type,
        be1_0.bonus_amount,
        be1_0.client_id,
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version,
        be1_0.created_at,
        be1_0.event_id,
        be1_0.updated_at,
        be1_0.version,
        be1_1.bonus_percentage,
        be1_1.payment_amount,
        be1_1.payment_transaction_id,
        be1_2.final_payment_amount,
        be1_2.original_payment_amount,
        be1_2.payment_transaction_id 
    from
        bonus_events be1_0 
    left join
        bonus_granted be1_1 
            on be1_0.id=be1_1.id 
    left join
        bonus_used be1_2 
            on be1_0.id=be1_2.id 
    left join
        clients c1_0 
            on c1_0.id=be1_0.client_id 
    where
        be1_0.client_id=? 
    order by
        be1_0.created_at
2025-12-23 22:33:33.058 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/bonuses/client/1260f14c-292d-4d35-b391-bab6f71992d9/history
2025-12-23 22:33:33.062 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:33:33.063 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:33:33.065 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/bonuses/client/1260f14c-292d-4d35-b391-bab6f71992d9/history
2025-12-23 22:33:33.066 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusHistory(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:33:33.067 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.getClientBonusHistory(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:33:33.069 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:33:33.070 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
2025-12-23 22:33:33.074 DEBUG [http-nio-8080-exec-7] [eab83da7-a89c-4fc2-9291-3ccc6d95a352] org.hibernate.SQL                        : 
    select
        be1_0.id,
        be1_0.event_type,
        be1_0.bonus_amount,
        be1_0.client_id,
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version,
        be1_0.created_at,
        be1_0.event_id,
        be1_0.updated_at,
        be1_0.version,
        be1_1.bonus_percentage,
        be1_1.payment_amount,
        be1_1.payment_transaction_id,
        be1_2.final_payment_amount,
        be1_2.original_payment_amount,
        be1_2.payment_transaction_id 
    from
        bonus_events be1_0 
    left join
        bonus_granted be1_1 
            on be1_0.id=be1_1.id 
    left join
        bonus_used be1_2 
            on be1_0.id=be1_2.id 
    left join
        clients c1_0 
            on c1_0.id=be1_0.client_id 
    where
        be1_0.client_id=? 
    order by
        be1_0.created_at desc
2025-12-23 22:34:06.837 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/bonuses/recalculate/1260f14c-292d-4d35-b391-bab6f71992d9
2025-12-23 22:34:06.850 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        u1_0.updated_at,
        u1_0.username,
        u1_0.uuid,
        u1_0.version 
    from
        users u1_0 
    where
        u1_0.username=?
2025-12-23 22:34:06.852 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-12-23 22:34:06.855 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/bonuses/recalculate/1260f14c-292d-4d35-b391-bab6f71992d9
2025-12-23 22:34:06.859 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.recalculateBonusBalance(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:34:06.862 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.westwood.controller.BonusController.recalculateBonusBalance(java.util.UUID); target is of class [com.westwood.controller.BonusController]
2025-12-23 22:34:06.863 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.client_type,
        c1_0.created_at,
        c1_0.name,
        c1_0.notes,
        c1_0.phone,
        c1_0.surname,
        c1_0.updated_at,
        c1_0.uuid,
        c1_0.version 
    from
        clients c1_0 
    where
        c1_0.uuid=?
2025-12-23 22:34:06.864 DEBUG [http-nio-8080-exec-8] [77babad6-497e-41b1-a854-0375dad20494] org.hibernate.SQL                        : 
    select
        t1_0.client_id,
        t1_0.tag 
    from
        client_tags t1_0 
    where
        t1_0.client_id=?
