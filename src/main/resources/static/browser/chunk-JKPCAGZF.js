import{a as Q}from"./chunk-BPJ66XKC.js";import{a as W}from"./chunk-IHJH7P6L.js";import{a as H}from"./chunk-24QZQ7A5.js";import{a as J}from"./chunk-54FLRY4W.js";import{a as q}from"./chunk-4W763UB3.js";import{a as K}from"./chunk-PXRPPFZK.js";import{a as j}from"./chunk-JQSPPBHG.js";import"./chunk-GJSZY4YS.js";import{a as G}from"./chunk-QA7ABRFW.js";import"./chunk-3B24VZJ2.js";import{a as R}from"./chunk-T6AS2VJX.js";import"./chunk-3DDQSAFX.js";import"./chunk-OGICRJHM.js";import{$ as _,Aa as b,Ab as N,Ca as t,Da as i,Db as A,Ea as g,Gb as L,Hb as V,Ia as M,Ja as y,K as k,Ka as d,Lb as $,Sa as o,T as x,Ta as m,Ua as c,Va as T,Z as P,_ as C,aa as h,ab as S,bb as B,cb as U,d as E,ma as a,mb as D,nb as F,pa as I,ua as f,ub as z,ya as l}from"./chunk-SDVY3Z22.js";var X=r=>["/clients",r];function Y(r,s){r&1&&(t(0,"div",6),g(1,"app-loader",7),i()),r&2&&(a(),l("visible",!0)("overlay",!1))}function Z(r,s){r&1&&g(0,"app-not-found-state",8)}function ee(r,s){if(r&1&&(t(0,"p",54),o(1),B(2,"phoneFormat"),i()),r&2){let e=d(2);a(),m(U(2,1,e.user.phoneNumber))}}function te(r,s){if(r&1&&(t(0,"div",34)(1,"span",35),o(2,"\u0421\u0442\u0430\u0442\u0443\u0441:"),i(),t(3,"span",36)(4,"span",55),g(5,"span",56),o(6),i()()()),r&2){let e=d(2);a(4),b("online",e.userStatus.isOnline)("offline",!e.userStatus.isOnline),a(2),c(" ",e.userStatus.isOnline?"\u041E\u043D\u043B\u0430\u0439\u043D":"\u041E\u0444\u043B\u0430\u0439\u043D"," ")}}function ne(r,s){if(r&1&&(t(0,"div",34)(1,"span",35),o(2,"\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439 \u0440\u0430\u0437 \u043E\u043D\u043B\u0430\u0439\u043D:"),i(),t(3,"span",36),o(4),i()()),r&2){let e=d(2);a(4),m(e.formatLastSeen((e.userStatus==null?null:e.userStatus.lastSeenAt)||null))}}function ie(r,s){if(r&1&&(t(0,"app-badge",82),o(1),i()),r&2){let e=d().$implicit,n=d(2);a(),c(" +",n.formatAmount(n.getBonusGranted(e))," ")}}function ae(r,s){if(r&1&&(t(0,"app-badge",83),o(1),i()),r&2){let e=d().$implicit,n=d(2);a(),c(" -",n.formatAmount(n.getBonusUsed(e))," ")}}function oe(r,s){r&1&&(t(0,"span",84),o(1,"\u2014"),i())}function re(r,s){if(r&1){let e=M();t(0,"tr",57)(1,"td",58)(2,"span",59),y("click",function(){let u=P(e).$implicit,p=d(2);return C(p.openPaymentView(u.txId||u.id))}),o(3),i()(),t(4,"td",60)(5,"div",61)(6,"div",62),o(7),i(),t(8,"div",63)(9,"a",64)(10,"span",65),o(11),i()(),t(12,"span",66),o(13),i()()()(),t(14,"td",67)(15,"span",68),o(16),i()(),t(17,"td",69)(18,"div",70),f(19,ie,2,1,"app-badge",71)(20,ae,2,1,"app-badge",72)(21,oe,2,0,"span",73),i()(),t(22,"td",74),g(23,"app-badge",75),i(),t(24,"td",76)(25,"app-badge",77),o(26),i()(),t(27,"td",78)(28,"div",79)(29,"span",80),o(30),i(),t(31,"span",81),o(32),i()()()()}if(r&2){let e=s.$implicit,n=d(2);a(3),c("#",e.txId||e.id,""),a(4),c(" ",n.getInitials(e.clientName)," "),a(2),l("routerLink",S(15,X,e.clientId)),a(2),m(e.clientName),a(2),m(e.clientPhone),a(3),c("",n.formatAmount(e.amount)," \u20B8"),a(3),l("ngIf",n.getBonusGranted(e)>0),a(),l("ngIf",n.getBonusUsed(e)>0),a(),l("ngIf",n.getBonusGranted(e)===0&&n.getBonusUsed(e)===0),a(2),l("paymentMethod",n.getPaymentMethodForBadge(n.getPaymentMethod(e))),a(2),l("badgeType",n.isRefunded(e)?"refund":"payment")("icon",n.isRefunded(e)?"refund":"payment"),a(),c(" ",n.isRefunded(e)?"\u0412\u043E\u0437\u0432\u0440\u0430\u0442":"\u041E\u043F\u043B\u0430\u0447\u0435\u043D\u043E"," "),a(4),m(n.getFormattedDate(e)),a(2),m(n.getFormattedTime(e))}}function ue(r,s){r&1&&(t(0,"div",85),_(),t(1,"svg",22),g(2,"path",86)(3,"rect",87)(4,"path",88),i(),h(),t(5,"span"),o(6,"\u041D\u0435\u0442 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439"),i()())}function le(r,s){if(r&1&&(t(0,"app-badge",107),o(1),i()),r&2){let e=d().$implicit,n=d(2);a(),c("+",n.formatAmount(n.getBonusGranted(e)),"")}}function de(r,s){if(r&1&&(t(0,"app-badge",108),o(1),i()),r&2){let e=d().$implicit,n=d(2);a(),c("-",n.formatAmount(n.getBonusUsed(e)),"")}}function se(r,s){r&1&&(t(0,"span"),o(1,"\u2014"),i())}function me(r,s){if(r&1){let e=M();t(0,"div",89)(1,"div",90),y("click",function(){let u=P(e).$implicit,p=d(2);return C(p.toggleMobilePaymentCard(u.txId||u.id))}),t(2,"div",91)(3,"div")(4,"div",92),y("click",function(u){let p=P(e).$implicit;return d(2).openPaymentView(p.txId||p.id),C(u.stopPropagation())}),o(5),i(),t(6,"div",93),o(7),i()()(),t(8,"div",94),_(),t(9,"svg",95),g(10,"path",96),i()()(),h(),t(11,"div",97)(12,"div",98)(13,"span",99),o(14,"\u041A\u043B\u0438\u0435\u043D\u0442:"),i(),t(15,"a",100),o(16),i()(),t(17,"div",98)(18,"span",99),o(19,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D:"),i(),t(20,"span",101),o(21),i()(),t(22,"div",98)(23,"span",99),o(24,"\u0411\u043E\u043D\u0443\u0441\u044B:"),i(),t(25,"div",102),f(26,le,2,1,"app-badge",103)(27,de,2,1,"app-badge",104)(28,se,2,0,"span",105),i()(),t(29,"div",98)(30,"span",99),o(31,"\u0421\u043F\u043E\u0441\u043E\u0431 \u043E\u043F\u043B\u0430\u0442\u044B:"),i(),t(32,"span",101),g(33,"app-badge",106),i()(),t(34,"div",98)(35,"span",99),o(36,"\u0414\u0430\u0442\u0430:"),i(),t(37,"span",101),o(38),i()()()()}if(r&2){let e=s.$implicit,n=d(2);a(5),c("#",e.txId||e.id,""),a(2),c("",n.formatAmount(e.amount)," \u20B8"),a(),b("expanded",n.isMobilePaymentExpanded(e.txId||e.id)),a(3),b("expanded",n.isMobilePaymentExpanded(e.txId||e.id)),a(4),l("routerLink",S(15,X,e.clientId)),a(),c(" ",e.clientName," "),a(5),m(e.clientPhone),a(5),l("ngIf",n.getBonusGranted(e)>0),a(),l("ngIf",n.getBonusUsed(e)>0),a(),l("ngIf",n.getBonusGranted(e)===0&&n.getBonusUsed(e)===0),a(5),l("paymentMethod",n.getPaymentMethodForBadge(n.getPaymentMethod(e))),a(5),T("",n.getFormattedDate(e)," ",n.getFormattedTime(e),"")}}function ce(r,s){r&1&&(t(0,"div",109),_(),t(1,"svg",22),g(2,"path",86)(3,"rect",87)(4,"path",88),i(),h(),t(5,"span"),o(6,"\u041D\u0435\u0442 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439"),i()())}function pe(r,s){if(r&1&&(t(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),o(5),i(),g(6,"div",14),i(),t(7,"div",15)(8,"div",16)(9,"h1",17),o(10),i(),t(11,"app-badge",18),o(12),i()(),t(13,"p",19),o(14),i(),f(15,ee,3,3,"p",20),t(16,"div",21),_(),t(17,"svg",22),g(18,"path",23)(19,"path",24)(20,"path",25),i(),h(),t(21,"span"),o(22),i()()()()(),t(23,"div",26)(24,"div",27)(25,"div",28)(26,"div",29),_(),t(27,"svg",22),g(28,"path",30)(29,"circle",31),i()(),h(),t(30,"h3",32),o(31,"\u041B\u0438\u0447\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"),i()()(),t(32,"div",33)(33,"div",34)(34,"span",35),o(35,"\u0418\u043C\u044F:"),i(),t(36,"span",36),o(37),i()(),t(38,"div",34)(39,"span",35),o(40,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F:"),i(),t(41,"span",36),o(42),i()(),t(43,"div",34)(44,"span",35),o(45,"Email:"),i(),t(46,"span",36),o(47),i()(),t(48,"div",34)(49,"span",35),o(50,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D:"),i(),t(51,"span",36),o(52),i()(),t(53,"div",34)(54,"span",35),o(55,"\u0420\u043E\u043B\u044C:"),i(),t(56,"span",36),o(57),i()(),t(58,"div",34)(59,"span",35),o(60,"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:"),i(),t(61,"span",36),o(62),i()(),f(63,te,7,5,"div",37)(64,ne,5,1,"div",37),i()(),t(65,"div",38)(66,"div",27)(67,"div",28)(68,"div",29),_(),t(69,"svg",22),g(70,"path",39),i()(),h(),t(71,"h3",32),o(72,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439"),i()()(),t(73,"div",40)(74,"table",41)(75,"thead")(76,"tr")(77,"th",42),o(78,"ID \u043F\u043B\u0430\u0442\u0435\u0436\u0430"),i(),t(79,"th",43),o(80,"\u041A\u043B\u0438\u0435\u043D\u0442"),i(),t(81,"th",44),o(82,"\u0421\u0443\u043C\u043C\u0430"),i(),t(83,"th",45),o(84,"\u0411\u043E\u043D\u0443\u0441\u044B"),i(),t(85,"th",46),o(86,"\u0421\u043F\u043E\u0441\u043E\u0431 \u043E\u043F\u043B\u0430\u0442\u044B"),i(),t(87,"th",47),o(88,"\u0421\u0442\u0430\u0442\u0443\u0441"),i(),t(89,"th",48),o(90,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F"),i()()(),t(91,"tbody"),f(92,re,33,17,"tr",49),i()(),f(93,ue,7,0,"div",50),i(),t(94,"div",51),f(95,me,39,17,"div",52)(96,ce,7,0,"div",53),i()()()),r&2){let e=d();a(5),c(" ",e.getInitials()," "),a(),b("online",e.userStatus==null?null:e.userStatus.isOnline)("offline",!(e.userStatus!=null&&e.userStatus.isOnline)),a(4),m(e.getFullName()),a(),l("badgeType",e.getStatusBadgeType(e.user.status)),a(),c(" ",e.getStatusLabel(e.user.status)," "),a(2),m(e.user.email),a(),l("ngIf",e.user.phoneNumber),a(7),m(e.user.role),a(15),m(e.user.firstName),a(5),m(e.user.lastName),a(5),m(e.user.email),a(5),m(e.user.phoneNumber||"\u2014"),a(5),m(e.user.role),a(5),m(e.formatDate(e.user.createdAt)),a(),l("ngIf",e.userStatus),a(),l("ngIf",e.userStatus==null?null:e.userStatus.lastSeenAt),a(28),l("ngForOf",e.userPayments),a(),l("ngIf",e.userPayments.length===0),a(2),l("ngForOf",e.userPayments),a(),l("ngIf",e.userPayments.length===0)}}var Be=(()=>{class r{pageHeaderService=x(G);route=x(A);router=x(L);titleService=x(N);usersService=x(W);toastService=x(R);transactionModalService=x(j);destroy$=new E;user=null;userPayments=[];isLoading=!0;userNotFound=!1;userStatus=null;expandedMobilePaymentCards=new Set;ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.pageHeaderService.setPageHeader("\u041F\u0440\u043E\u0444\u0438\u043B\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",route:"/home"},{label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438",route:"/users"},{label:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"}]),this.loadUser(e),this.loadTransactions(e),this.loadUserStatus(e)):(this.isLoading=!1,this.toastService.error("ID \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D")),this.transactionModalService.transactionComplete$.pipe(k(this.destroy$)).subscribe(()=>{let n=this.router.url,u=this.route.snapshot.paramMap.get("id");n.startsWith("/users/")&&u&&this.loadTransactions(u)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUser(e){this.usersService.getUserById(e).subscribe({next:n=>{this.user=this.mapApiUserToUser(n);let u=`${this.user.firstName}${this.user.lastName?" "+this.user.lastName:""}`.trim();this.titleService.setTitle(`Westwood - User - ${u}`),this.isLoading=!1},error:n=>{if(n.status===404){this.userNotFound=!0,this.isLoading=!1;return}let u=n.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F";this.toastService.error(u),this.isLoading=!1}})}loadTransactions(e){this.usersService.getUserTransactions(e).subscribe({next:n=>{this.userPayments=n.map(u=>this.mapTransactionToPayment(u))},error:n=>{let u=n.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439";this.toastService.error(u)}})}loadUserStatus(e){this.usersService.getUserStatus(e).subscribe({next:n=>{this.userStatus={isOnline:n.isOnline,lastSeenAt:n.lastSeenAt}},error:n=>{console.error("Error loading user status:",n)}})}formatLastSeen(e){if(!e)return"\u041D\u0438\u043A\u043E\u0433\u0434\u0430";let n=new Date(e),p=new Date().getTime()-n.getTime(),v=Math.floor(p/6e4),w=Math.floor(p/36e5),O=Math.floor(p/864e5);return v<1?"\u0422\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E":v<60?`${v} \u043C\u0438\u043D \u043D\u0430\u0437\u0430\u0434`:w<24?`${w} \u0447 \u043D\u0430\u0437\u0430\u0434`:O<7?`${O} \u0434\u043D \u043D\u0430\u0437\u0430\u0434`:n.toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"})}mapApiUserToUser(e){return{id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,phoneNumber:e.phone||"\u2014",role:this.getRoleLabel(e.roles),status:this.mapAccountStatusToStatus(e.accountStatus,e.active),createdAt:e.createdAt||""}}mapAccountStatusToStatus(e,n){return e==="PENDING_ACTIVATION"?"invited":n===!1?"closed":"active"}getRoleLabel(e){return e.includes("SUDO")?"\u0421\u0443\u043F\u0435\u0440 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":e.includes("ADMIN")?"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":e.includes("MANAGER")?"\u041C\u0435\u043D\u0435\u0434\u0436\u0435\u0440":e.join(", ")}mapTransactionToPayment(e){let n=new Date(e.createdAt);return{id:e.txId,clientId:e.clientId,clientName:e.clientName,clientPhone:e.clientPhone,amount:e.amount,bonusEarned:e.bonusGranted,bonusUsed:e.bonusUsed,paymentMethod:e.paymentMethod||"unknown",isRefund:e.status==="REFUNDED",date:n.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),time:n.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}}getBonusGranted(e){return e.bonusEarned||0}getBonusUsed(e){return e.bonusUsed||0}getPaymentMethod(e){return e.paymentMethod||"unknown"}isRefunded(e){return e.isRefund||!1}getFormattedDate(e){return e.date||""}getFormattedTime(e){return e.time||""}ngAfterViewInit(){let e=document.querySelector(".sidebar-content");e&&(e.scrollTop=0),window.scrollTo(0,0)}getFullName(){return this.user?`${this.user.firstName} ${this.user.lastName}`:""}getInitials(e){return e?e.split(" ").map(u=>u.charAt(0)).join("").toUpperCase().slice(0,2):this.user?`${this.user.firstName.charAt(0)}${this.user.lastName.charAt(0)}`.toUpperCase():""}getStatusBadgeType(e){switch(e){case"active":return"success";case"invited":return"warning";case"closed":return"danger";default:return"secondary"}}getStatusLabel(e){switch(e){case"invited":return"\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D";case"active":return"\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439";case"closed":return"\u0417\u0430\u043A\u0440\u044B\u0442\u044B\u0439";default:return e}}formatDate(e){return new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}formatAmount(e){return e.toLocaleString("ru-RU")}getPaymentMethodForBadge(e){if(!e)return null;let n=e.toUpperCase();return n==="CASH"||n==="CARD"||n==="TRANSFER"?n:null}getPaymentMethodLabel(e){switch(e){case"cash":return"\u041D\u0430\u043B\u0438\u0447\u043D\u044B\u0435";case"card":return"\u041A\u0430\u0440\u0442\u0430";case"transfer":return"\u041F\u0435\u0440\u0435\u0432\u043E\u0434";default:return e}}toggleMobilePaymentCard(e){this.expandedMobilePaymentCards.has(e)?this.expandedMobilePaymentCards.delete(e):this.expandedMobilePaymentCards.add(e)}isMobilePaymentExpanded(e){return this.expandedMobilePaymentCards.has(e)}showPaymentViewModal=!1;selectedPaymentTxId=null;openPaymentView(e){this.selectedPaymentTxId=e,this.showPaymentViewModal=!0}closePaymentView(){this.showPaymentViewModal=!1,this.selectedPaymentTxId=null}onPaymentUpdated(){let e=this.route.snapshot.paramMap.get("id");e&&this.loadTransactions(e)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=I({type:r,selectors:[["app-user-profile-page"]],decls:6,vars:5,consts:[[1,"page-wrapper"],[1,"profile-container-wrapper"],["class","page-loading-container",4,"ngIf"],["title","\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D","description","\u041A \u0441\u043E\u0436\u0430\u043B\u0435\u043D\u0438\u044E, \u0437\u0430\u043F\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043B\u0438 \u0431\u044B\u043B \u0443\u0434\u0430\u043B\u0435\u043D.","backLink","/users","backText","\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043A \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C",4,"ngIf"],["class","profile-container",4,"ngIf"],[3,"visibleChange","paymentUpdated","refundedPaymentClick","visible","paymentTxId"],[1,"page-loading-container"],["type","logo","size","large",3,"visible","overlay"],["title","\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D","description","\u041A \u0441\u043E\u0436\u0430\u043B\u0435\u043D\u0438\u044E, \u0437\u0430\u043F\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043D\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043B\u0438 \u0431\u044B\u043B \u0443\u0434\u0430\u043B\u0435\u043D.","backLink","/users","backText","\u0412\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u043A \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C"],[1,"profile-container"],[1,"profile-header-card"],[1,"profile-header-content"],[1,"avatar-wrapper"],[1,"avatar-large"],[1,"status-indicator"],[1,"profile-main-info"],[1,"name-row"],[1,"profile-name"],["size","medium",3,"badgeType"],[1,"profile-email"],["class","profile-phone",4,"ngIf"],[1,"role-badge"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none"],["d","M12 2L2 7l10 5 10-5-10-5z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M2 17l10 5 10-5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M2 12l10 5 10-5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"info-card"],[1,"card-header"],[1,"card-header-left"],[1,"card-icon"],["d","M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","7","r","4","stroke","currentColor","stroke-width","1.5"],[1,"card-title"],[1,"info-content"],[1,"info-row"],[1,"info-label"],[1,"info-value"],["class","info-row",4,"ngIf"],[1,"activity-card"],["d","M22 12h-4l-3 9L9 3l-3 9H2","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"payments-table-container","desktop-view"],[1,"payments-table"],[1,"th-id"],[1,"th-client"],[1,"th-amount"],[1,"th-bonuses"],[1,"th-method"],[1,"th-status"],[1,"th-date"],["class","payment-row",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"mobile-payments-cards","mobile-view"],["class","mobile-payment-card",4,"ngFor","ngForOf"],["class","empty-state mobile-view",4,"ngIf"],[1,"profile-phone"],[1,"status-badge"],[1,"status-dot"],[1,"payment-row"],[1,"td-id"],[1,"payment-id","clickable",3,"click"],[1,"td-client"],[1,"client-cell"],[1,"client-avatar"],[1,"client-info"],[1,"client-name-link",3,"routerLink"],[1,"client-name"],[1,"client-phone"],[1,"td-amount"],[1,"amount-value"],[1,"td-bonuses"],[1,"bonus-info"],["badgeType","bonusGranted","size","medium","icon","star","class","bonus-badge",4,"ngIf"],["badgeType","bonusUsed","size","medium","icon","check","class","bonus-badge",4,"ngIf"],["class","bonus-none",4,"ngIf"],[1,"td-method"],["badgeType","paymentMethod","size","medium",3,"paymentMethod"],[1,"td-status"],["size","medium",3,"badgeType","icon"],[1,"td-date"],[1,"date-info"],[1,"date-text"],[1,"time-text"],["badgeType","bonusGranted","size","medium","icon","star",1,"bonus-badge"],["badgeType","bonusUsed","size","medium","icon","check",1,"bonus-badge"],[1,"bonus-none"],[1,"empty-state"],["d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2","stroke","currentColor","stroke-width","1.5"],["x","9","y","3","width","6","height","4","rx","1","stroke","currentColor","stroke-width","1.5"],["d","M9 12h6M9 16h6","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],[1,"mobile-payment-card"],[1,"mobile-payment-card-header",3,"click"],[1,"mobile-payment-card-main"],[1,"mobile-payment-id","clickable",3,"click"],[1,"mobile-payment-amount"],[1,"mobile-payment-expand"],["viewBox","0 0 24 24","fill","none"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"mobile-payment-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value","link",3,"routerLink"],[1,"detail-value"],[1,"detail-value","bonus-info"],["badgeType","bonusGranted","size","small",4,"ngIf"],["badgeType","bonusUsed","size","small",4,"ngIf"],[4,"ngIf"],["badgeType","paymentMethod","size","small",3,"paymentMethod"],["badgeType","bonusGranted","size","small"],["badgeType","bonusUsed","size","small"],[1,"empty-state","mobile-view"]],template:function(n,u){n&1&&(t(0,"div",0)(1,"div",1),f(2,Y,2,2,"div",2)(3,Z,1,0,"app-not-found-state",3)(4,pe,97,23,"div",4),i()(),t(5,"app-payment-view-modal",5),y("visibleChange",function(){return u.closePaymentView()})("paymentUpdated",function(){return u.onPaymentUpdated()})("refundedPaymentClick",function(v){return u.openPaymentView(v)}),i()),n&2&&(a(2),l("ngIf",u.isLoading),a(),l("ngIf",!u.isLoading&&u.userNotFound),a(),l("ngIf",!u.isLoading&&u.user&&!u.userNotFound),a(),l("visible",u.showPaymentViewModal)("paymentTxId",u.selectedPaymentTxId))},dependencies:[z,D,F,$,V,q,K,Q,J,H],styles:[".page-wrapper[_ngcontent-%COMP%]{min-height:100%;margin:-2rem;padding:2rem;background:linear-gradient(180deg,#f0fdf4,#f8fafc 50% 100%)}.profile-container-wrapper[_ngcontent-%COMP%]{position:relative;min-height:400px}.page-loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:60vh;width:100%}.profile-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:1.5rem}.profile-header-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 1px 3px #0000000d}.profile-header-content[_ngcontent-%COMP%]{display:flex;gap:2rem;align-items:flex-start}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.avatar-large[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:20px;background:linear-gradient(135deg,#16a34a,#22c55e);display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;color:#fff}.status-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;width:24px;height:24px;border-radius:50%;background:#94a3b8;border:3px solid white}.status-indicator.online[_ngcontent-%COMP%]{background:#22c55e}.status-indicator.offline[_ngcontent-%COMP%]{background:#94a3b8}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.375rem .75rem;border-radius:8px;font-size:.875rem;font-weight:500}.status-badge.online[_ngcontent-%COMP%]{background:#f0fdf4;color:#16a34a}.status-badge.offline[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.status-badge[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.status-badge.online[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#16a34a;box-shadow:0 0 0 2px #16a34a33}.status-badge.offline[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#94a3b8}.profile-main-info[_ngcontent-%COMP%]{flex:1}.name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem}.profile-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin:0}.profile-email[_ngcontent-%COMP%], .profile-phone[_ngcontent-%COMP%]{font-size:1rem;color:#64748b;margin:.5rem 0}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:#f0fdf4;color:#16a34a;padding:.5rem 1rem;border-radius:12px;font-weight:600;font-size:.9375rem;margin-top:.75rem}.role-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 1px 3px #0000000d}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.card-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.card-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,#f0fdf4,#dcfce7);display:flex;align-items:center;justify-content:center;color:#16a34a}.card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0}.info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 0;border-bottom:1px solid #f1f5f9}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{font-weight:600;color:#64748b;min-width:150px;font-size:.9375rem}.info-value[_ngcontent-%COMP%]{color:#1f2937;font-size:.9375rem}.activity-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 1px 3px #0000000d}.payments-table-container[_ngcontent-%COMP%]{overflow-x:auto}.payments-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.payments-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-size:.875rem;font-weight:600;color:#64748b;border-bottom:1px solid #e2e8f0}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f5f9}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.payment-id[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;color:#64748b;font-size:.875rem}.payment-id.clickable[_ngcontent-%COMP%]{color:#64748b;cursor:pointer;text-decoration:underline;transition:color .2s}.payment-id.clickable[_ngcontent-%COMP%]:hover{color:#475569}.mobile-payment-id.clickable[_ngcontent-%COMP%]{color:#64748b;cursor:pointer;text-decoration:underline}.client-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.client-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#f0fdf4,#dcfce7);display:flex;align-items:center;justify-content:center;font-weight:600;color:#16a34a;font-size:.875rem;flex-shrink:0}.client-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.client-name-link[_ngcontent-%COMP%]{text-decoration:none;color:#1f2937;font-weight:600;font-size:.9375rem;transition:color .2s;cursor:pointer;display:inline-block}.client-name-link[_ngcontent-%COMP%]:hover{color:#16a34a}.client-name-link[_ngcontent-%COMP%]   .client-name[_ngcontent-%COMP%]{cursor:pointer}.client-phone[_ngcontent-%COMP%]{font-size:.8125rem;color:#64748b}.amount-value[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:.9375rem}.bonus-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.bonus-badge[_ngcontent-%COMP%]{display:inline-block}.bonus-none[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem}.date-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.date-text[_ngcontent-%COMP%]{font-size:.875rem;color:#1f2937;font-weight:500}.time-text[_ngcontent-%COMP%]{font-size:.8125rem;color:#64748b}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;color:#94a3b8;gap:1rem}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9375rem}.mobile-payments-cards[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:1rem}.mobile-payment-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 1px 3px #0000000d;border:1px solid #e5e7eb}.mobile-payment-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer}.mobile-payment-card-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.mobile-payment-id[_ngcontent-%COMP%]{font-family:monospace;font-size:.875rem;font-weight:600;color:#64748b}.mobile-payment-amount[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#16a34a}.mobile-payment-expand[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;color:#64748b;transition:transform .2s}.mobile-payment-expand.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.mobile-payment-details[_ngcontent-%COMP%]{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #e5e7eb;display:none;flex-direction:column;gap:.75rem}.mobile-payment-details.expanded[_ngcontent-%COMP%]{display:flex}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.detail-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;font-weight:500;flex-shrink:0}.detail-value[_ngcontent-%COMP%]{font-size:.875rem;color:#1f2937;font-weight:500;text-align:right;flex:1}.detail-value.link[_ngcontent-%COMP%]{color:#16a34a;text-decoration:none}.detail-value.link[_ngcontent-%COMP%]:hover{text-decoration:underline}.detail-value.bonus-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;justify-content:flex-end;flex-wrap:wrap}@media (max-width: 768px){.page-wrapper[_ngcontent-%COMP%]{margin:-1rem;padding:1rem}.profile-header-card[_ngcontent-%COMP%]{border-radius:12px;margin-bottom:1rem}.profile-header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;padding:1.5rem 1rem}.avatar-large[_ngcontent-%COMP%]{width:80px;height:80px;font-size:1.5rem}.profile-main-info[_ngcontent-%COMP%]{width:100%;text-align:center}.name-row[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.profile-name[_ngcontent-%COMP%]{font-size:1.25rem}.info-card[_ngcontent-%COMP%], .activity-card[_ngcontent-%COMP%]{border-radius:12px;padding:1.25rem 1rem}.card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.card-title[_ngcontent-%COMP%]{font-size:1.125rem}.info-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem;padding:.75rem 0}.info-label[_ngcontent-%COMP%]{min-width:auto;font-size:.875rem}.info-value[_ngcontent-%COMP%]{font-size:.875rem}.desktop-view[_ngcontent-%COMP%]{display:none!important}.mobile-view[_ngcontent-%COMP%]{display:flex!important}.payments-table-container[_ngcontent-%COMP%]{padding:0}}@media (min-width: 769px){.mobile-view[_ngcontent-%COMP%]{display:none!important}.desktop-view[_ngcontent-%COMP%]{display:block!important}}"]})}return r})();export{Be as UserProfilePageComponent};
