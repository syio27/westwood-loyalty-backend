import{a as H}from"./chunk-IELD7KOU.js";import{e as K,g as k,m as B,n as L,o as U,t as G}from"./chunk-2HM6BEQO.js";import{Aa as l,Db as $,Fa as v,Ga as I,Ha as u,Ia as D,Ja as E,O,Oa as x,Pa as T,R as y,S as f,Sa as F,Ta as N,Ua as W,Va as R,X as w,Y as m,Z as P,a as b,da as _,hb as V,ib as j,ka as p,na as M,ob as q,ra as S,va as d,wb as A,yb as z,za as c}from"./chunk-7F5AWDR7.js";var J=(()=>{class i{router;defaultPageSize=15;pageSizeOptions=[2,5,10,15,25];constructor(e){this.router=e}getPageSizeOptions(){return this.pageSizeOptions}getDefaultPageSize(){return this.defaultPageSize}initFromRoute(e,t="default"){let a=t==="default"?"page":`${t}Page`,n=t==="default"?"pageSize":`${t}PageSize`,o=parseInt(e.snapshot.queryParams[a]||"1",10),r=parseInt(e.snapshot.queryParams[n]||String(this.defaultPageSize),10);return{page:isNaN(o)||o<1?1:o,pageSize:this.pageSizeOptions.includes(r)?r:this.defaultPageSize}}updateRoute(e,t,a,n="default"){let o=b({},e.snapshot.queryParams),r=n==="default"?"page":`${n}Page`,g=n==="default"?"pageSize":`${n}PageSize`,s={};Object.keys(o).forEach(h=>{h!==r&&h!==g&&(s[h]=o[h])}),t>1&&(s[r]=t),a!==this.defaultPageSize&&(s[g]=a),this.router.navigate([],{relativeTo:e,queryParams:s,replaceUrl:!0})}getPaginatedData(e,t,a){let n=e.length,o=Math.ceil(n/a),r=(t-1)*a,g=Math.min(r+a,n);return{paginatedData:e.slice(r,g),totalPages:o||1,totalItems:n,startIndex:r+1,endIndex:g}}static \u0275fac=function(t){return new(t||i)(y(z))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var X=["*"];function Y(i,C){if(i&1&&(c(0,"option",10),x(1),l()),i&2){let e=C.$implicit;d("value",e),p(),T(e)}}function Z(i,C){if(i&1){let e=v();c(0,"div",11)(1,"app-pagination",12),I("pageChange",function(a){m(e);let n=u(2);return P(n.onPageChange(a))}),l()()}if(i&2){let e=u(2);p(),d("currentPage",e.currentPage)("totalPages",e.totalPages)}}function ee(i,C){if(i&1){let e=v();c(0,"div",2)(1,"div",3)(2,"div",4)(3,"span"),x(4),l()(),c(5,"div",5)(6,"label",6),x(7,"\u0421\u0442\u0440\u043E\u043A \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435:"),l(),c(8,"select",7),R("ngModelChange",function(a){m(e);let n=u();return W(n.pageSize,a)||(n.pageSize=a),P(a)}),I("change",function(){m(e);let a=u();return P(a.onPageSizeChange())}),S(9,Y,2,2,"option",8),l()()(),S(10,Z,2,2,"div",9),l()}if(i&2){let e=u();p(4),F("\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E ",e.startIndex,"-",e.endIndex," \u0438\u0437 ",e.totalItems,""),p(4),N("ngModel",e.pageSize),p(),d("ngForOf",e.pageSizeOptions),p(),d("ngIf",e.totalPages>1)}}var fe=(()=>{class i{paginationEnabled=!0;data=[];defaultPageSize=15;paginationKey="default";paginatedDataChange=new _;paginationInfoChange=new _;currentPage=1;pageSize=15;totalPages=1;totalItems=0;startIndex=0;endIndex=0;pageSizeOptions=[];paginatedData=[];route=f(A);router=f(z);paginationService=f(J);ngOnInit(){if(this.pageSize=this.defaultPageSize,this.pageSizeOptions=this.paginationService.getPageSizeOptions(),this.paginationEnabled){let e=this.paginationService.initFromRoute(this.route,this.paginationKey);this.currentPage=e.page,this.pageSize=e.pageSize,this.route.queryParams.subscribe(t=>{let a=this.paginationKey==="default"?"page":`${this.paginationKey}Page`,n=this.paginationKey==="default"?"pageSize":`${this.paginationKey}PageSize`,o=t[a]?parseInt(t[a],10):1,r=t[n]?parseInt(t[n],10):this.paginationService.getDefaultPageSize(),g=isNaN(o)||o<1?1:o,s=this.pageSizeOptions.includes(r)?r:this.paginationService.getDefaultPageSize();(g!==this.currentPage||s!==this.pageSize)&&(this.currentPage=g,this.pageSize=s,this.updatePagination())})}this.updatePagination()}ngOnChanges(e){(e.data||e.paginationEnabled)&&this.updatePagination()}updatePagination(){if(this.paginationEnabled&&this.data){let e=this.paginationService.getPaginatedData(this.data,this.currentPage,this.pageSize);this.paginatedData=e.paginatedData,this.totalPages=e.totalPages,this.totalItems=e.totalItems,this.startIndex=e.startIndex,this.endIndex=e.endIndex,this.paginatedDataChange.emit(this.paginatedData),this.paginationInfoChange.emit({currentPage:this.currentPage,pageSize:this.pageSize,totalPages:this.totalPages,totalItems:this.totalItems,startIndex:this.startIndex,endIndex:this.endIndex})}else this.paginatedData=this.data||[],this.totalItems=this.data?.length||0,this.paginatedDataChange.emit(this.paginatedData)}onPageChange(e){this.currentPage=e,this.paginationEnabled&&this.paginationService.updateRoute(this.route,this.currentPage,this.pageSize,this.paginationKey),this.updatePagination();let t=document.querySelector(".table-container");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}onPageSizeChange(){this.currentPage=1,this.paginationEnabled&&this.paginationService.updateRoute(this.route,this.currentPage,this.pageSize,this.paginationKey),this.updatePagination()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=M({type:i,selectors:[["app-paginated-table-wrapper"]],inputs:{paginationEnabled:"paginationEnabled",data:"data",defaultPageSize:"defaultPageSize",paginationKey:"paginationKey"},outputs:{paginatedDataChange:"paginatedDataChange",paginationInfoChange:"paginationInfoChange"},exportAs:["paginatedTable"],features:[w],ngContentSelectors:X,decls:3,vars:1,consts:[[1,"paginated-wrapper"],["class","pagination-container",4,"ngIf"],[1,"pagination-container"],[1,"pagination-left"],[1,"pagination-info"],[1,"page-size-filter-section"],[1,"page-size-label"],[1,"page-size-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","pagination-right",4,"ngIf"],[3,"value"],[1,"pagination-right"],[3,"pageChange","currentPage","totalPages"]],template:function(t,a){t&1&&(D(),c(0,"div",0),E(1),S(2,ee,11,6,"div",1),l()),t&2&&(p(2),d("ngIf",a.paginationEnabled&&a.totalItems>0))},dependencies:[q,V,j,G,L,U,B,K,k,$,H],styles:[".paginated-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000000d;gap:1rem}.pagination-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex-wrap:wrap}.pagination-right[_ngcontent-%COMP%]{display:flex;align-items:center}.pagination-info[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;font-weight:500}.page-size-filter-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.page-size-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#475569}.page-size-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #cbd5e1;border-radius:8px;font-size:.875rem;background:#fff;color:#1f2937;cursor:pointer;outline:none;transition:all .2s}.page-size-select[_ngcontent-%COMP%]:hover{border-color:#94a3b8}.page-size-select[_ngcontent-%COMP%]:focus{border-color:#16a34a;box-shadow:0 0 0 3px #16a34a1a}@media (max-width: 768px){.pagination-container[_ngcontent-%COMP%], .pagination-left[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.pagination-info[_ngcontent-%COMP%]{text-align:center}.page-size-filter-section[_ngcontent-%COMP%], .pagination-right[_ngcontent-%COMP%]{justify-content:center}}"]})}return i})();export{fe as a};
