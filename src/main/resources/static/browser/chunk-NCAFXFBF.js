import{a as A}from"./chunk-CC5X2QUY.js";import{a as I,b as N}from"./chunk-2XHR7GV7.js";import{q as Y,u as q}from"./chunk-BQNRS24D.js";import{a as U}from"./chunk-NWGGWLRD.js";import{d,e as F,f as z,h as S,k as T,l as B,r as D,s as R,u as V}from"./chunk-AMJKQWOL.js";import{n as y,t as k,v as E}from"./chunk-KCUNWQN4.js";import"./chunk-LMI7DRHQ.js";import{Ba as a,Ca as i,Da as h,Ha as b,Hb as v,Ia as l,Ja as p,K as g,Qa as m,Sa as _,T as u,Z as c,_ as f,d as M,kb as w,la as n,oa as P,qb as x,ta as C,xa as s,zb as O}from"./chunk-SR6TZKDI.js";function $(o,L){if(o&1){let t=b();a(0,"app-alert",14),l("dismissed",function(){c(t);let e=p();return f(e.errorMessage="")}),m(1),i()}if(o&2){let t=p();s("title","\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043C\u0435\u043D\u044B \u043F\u0430\u0440\u043E\u043B\u044F")("dismissible",!0),n(),_(" ",t.errorMessage," ")}}function G(o,L){if(o&1){let t=b();a(0,"app-alert",15),l("dismissed",function(){c(t);let e=p();return f(e.successMessage="")}),m(1),i()}if(o&2){let t=p();s("title","\u0423\u0441\u043F\u0435\u0448\u043D\u043E")("dismissible",!0),n(),_(" ",t.successMessage," ")}}var dt=(()=>{class o{fb=u(R);route=u(O);store=u(y);destroy$=new M;resetPasswordForm;isLoading=!1;errorMessage="";successMessage="";resetToken=null;constructor(){this.resetPasswordForm=this.fb.group({password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator})}ngOnInit(){this.store.dispatch(Y()),this.resetToken=this.route.snapshot.queryParams.token,this.resetToken||(this.errorMessage="\u0422\u043E\u043A\u0435\u043D \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u0438\u0437 \u043F\u0438\u0441\u044C\u043C\u0430."),this.store.select(k).pipe(g(this.destroy$)).subscribe(t=>{this.isLoading=t}),this.store.select(E).pipe(g(this.destroy$)).subscribe(t=>{t&&(this.errorMessage=t,this.successMessage="")})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}passwordMatchValidator(t){let r=t.get("password"),e=t.get("confirmPassword");return r&&e&&r.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(e&&e.errors&&e.errors.passwordMismatch&&r&&r.value===e.value&&e.setErrors(null),null)}onSubmit(){if(this.resetPasswordForm.valid&&this.resetToken){this.errorMessage="",this.successMessage="";let t=this.resetPasswordForm.value,r={token:this.resetToken,password:t.password};console.log("[ResetPasswordPage] Resetting password with token:",this.resetToken),this.store.dispatch(q({data:r}))}else this.resetToken||(this.errorMessage="\u0422\u043E\u043A\u0435\u043D \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u0438\u0437 \u043F\u0438\u0441\u044C\u043C\u0430.")}getErrorMessage(t){let r=this.resetPasswordForm.get(t);if(r?.errors&&r.touched){if(r.errors.required)return"\u042D\u0442\u043E \u043F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F";if(r.errors.minlength)return`\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0434\u043B\u0438\u043D\u0430: ${r.errors.minlength.requiredLength} \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432`;if(r.errors.passwordMismatch)return"\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442"}return""}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=P({type:o,selectors:[["app-reset-password-page"]],decls:19,vars:11,consts:[[1,"reset-password-page","auth-page"],[1,"promo-panel-desktop"],[1,"form-panel"],[1,"form-content"],[1,"form-header"],[1,"brand-name"],[1,"welcome-title"],["type","error","class","error-alert",3,"title","dismissible","dismissed",4,"ngIf"],["type","success","class","success-alert",3,"title","dismissible","dismissed",4,"ngIf"],[1,"reset-password-form","auth-form",3,"ngSubmit","formGroup"],["id","password","label","\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","type","password","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","formControlName","password",3,"errorMessage","required","showPasswordToggle"],["id","confirmPassword","label","\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C","type","password","placeholder","\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","formControlName","confirmPassword",3,"errorMessage","required","showPasswordToggle"],["buttonType","primary","type","submit",1,"submit-button",3,"disabled","loading"],[1,"form-footer"],["type","error",1,"error-alert",3,"dismissed","title","dismissible"],["type","success",1,"success-alert",3,"dismissed","title","dismissible"]],template:function(r,e){r&1&&(a(0,"div",0),h(1,"app-auth-promo-panel",1),a(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),m(6,"WestWood"),i(),a(7,"h3",6),m(8,"\u0421\u043C\u0435\u043D\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"),i()(),C(9,$,2,3,"app-alert",7)(10,G,2,3,"app-alert",8),a(11,"form",9),l("ngSubmit",function(){return e.onSubmit()}),h(12,"app-input",10)(13,"app-input",11),a(14,"app-button",12),m(15," \u0421\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C "),i()(),a(16,"div",13)(17,"span"),m(18,"\xA9 2026 WestWood. \u0412\u0441\u0435 \u043F\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043D\u044B."),i()()()()()),r&2&&(n(9),s("ngIf",e.errorMessage),n(),s("ngIf",e.successMessage),n(),s("formGroup",e.resetPasswordForm),n(),s("errorMessage",e.getErrorMessage("password"))("required",!0)("showPasswordToggle",!0),n(),s("errorMessage",e.getErrorMessage("confirmPassword"))("required",!0)("showPasswordToggle",!0),n(),s("disabled",e.resetPasswordForm.invalid)("loading",e.isLoading))},dependencies:[x,w,V,S,F,z,D,T,B,v,I,N,U,A],styles:['.reset-password-page[_ngcontent-%COMP%]{display:flex;min-height:100vh;height:100vh;background:#f5f6f8}.form-panel[_ngcontent-%COMP%]{flex:0 0 45%;display:flex;align-items:center;justify-content:center;padding:3rem;background:#fff}.form-content[_ngcontent-%COMP%]{width:100%;max-width:360px;animation:_ngcontent-%COMP%_slideUp .5s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{margin-bottom:2rem}.brand-name[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1a202c;margin:0 0 .75rem;letter-spacing:-.02em}.welcome-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1a202c;margin:0}.error-alert[_ngcontent-%COMP%], .success-alert[_ngcontent-%COMP%]{margin-bottom:1.5rem;animation:_ngcontent-%COMP%_shake .5s ease-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.reset-password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.submit-button[_ngcontent-%COMP%]{width:100%;margin-top:.25rem}[_nghost-%COMP%]     .submit-button button{width:100%;padding:.875rem 1.5rem!important;font-size:1rem!important;font-weight:600!important;border-radius:4px!important;background-color:#0f0f10!important;color:#fff!important;transition:all .2s ease!important}.form-footer[_ngcontent-%COMP%]{display:none}@media (max-width: 1024px){.auth-page[_ngcontent-%COMP%]{flex-direction:column;min-height:100vh;height:auto;background:linear-gradient(135deg,#f8fafc,#f1f5f9,#e2e8f0);position:relative;overflow-x:hidden;overflow-y:auto}.auth-page[_ngcontent-%COMP%]:before{content:"";position:absolute;width:200%;height:200%;top:-50%;left:-50%;background:radial-gradient(circle at 20% 30%,rgba(22,163,74,.08) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(15,15,16,.06) 0%,transparent 50%);animation:float 20s ease-in-out infinite;z-index:0;pointer-events:none}@keyframes float{0%,to{transform:translate(0) rotate(0)}33%{transform:translate(30px,-30px) rotate(120deg)}66%{transform:translate(-20px,20px) rotate(240deg)}}.promo-panel-desktop[_ngcontent-%COMP%]{display:block}.form-panel[_ngcontent-%COMP%]{flex:1;padding:2.5rem 2rem 3rem;margin-top:-50px;position:relative;z-index:3;background:#fff;box-shadow:0 -8px 32px #0000001f;border-radius:30px 30px 0 0;min-height:auto}.form-content[_ngcontent-%COMP%]{max-width:480px;margin:0 auto;animation:slideUpMobile .6s cubic-bezier(.16,1,.3,1);position:relative;z-index:2}@keyframes slideUpMobile{0%{opacity:0;transform:translateY(40px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;position:relative}.brand-name[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem;background:linear-gradient(135deg,#16a34a,#15803d,#0f0f10);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.03em}.welcome-title[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:1rem;color:#1a202c;font-weight:700}.register-prompt[_ngcontent-%COMP%], .login-prompt[_ngcontent-%COMP%], .back-to-login-prompt[_ngcontent-%COMP%]{font-size:.9375rem;margin-top:.5rem}.auth-form[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%], .activation-form[_ngcontent-%COMP%], .reset-password-form[_ngcontent-%COMP%], .forgot-password-form[_ngcontent-%COMP%]{gap:1.25rem;margin-top:1rem}.submit-button[_ngcontent-%COMP%]{margin-top:.5rem}[_nghost-%COMP%]     .submit-button button{box-shadow:0 4px 12px #0f0f1033;transform:translateY(0);transition:all .3s cubic-bezier(.4,0,.2,1)}[_nghost-%COMP%]     .submit-button button:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0f0f104d}[_nghost-%COMP%]     .submit-button button:active{transform:translateY(0)}.forgot-password-link[_ngcontent-%COMP%]{margin-top:.75rem}.warning-alert[_ngcontent-%COMP%], .error-alert[_ngcontent-%COMP%], .success-alert[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #0000001a}}@media (max-width: 640px){.auth-page[_ngcontent-%COMP%]{flex-direction:column;min-height:100vh;height:auto;background:linear-gradient(135deg,#f8fafc,#f1f5f9,#e2e8f0);position:relative;overflow-x:hidden}.auth-page[_ngcontent-%COMP%]:before{content:"";position:absolute;width:200%;height:200%;top:-50%;left:-50%;background:radial-gradient(circle at 20% 30%,rgba(22,163,74,.08) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(15,15,16,.06) 0%,transparent 50%);animation:float 20s ease-in-out infinite;z-index:0;pointer-events:none}@keyframes float{0%,to{transform:translate(0) rotate(0)}33%{transform:translate(30px,-30px) rotate(120deg)}66%{transform:translate(-20px,20px) rotate(240deg)}}.promo-panel-desktop[_ngcontent-%COMP%]{display:block}.form-panel[_ngcontent-%COMP%]{flex:1;padding:2rem 1.5rem 3rem;margin-top:-40px;position:relative;z-index:3;background:#fff;box-shadow:0 -8px 32px #0000001f;border-radius:30px 30px 0 0;min-height:auto}.form-content[_ngcontent-%COMP%]{max-width:100%;animation:slideUpMobile .6s cubic-bezier(.16,1,.3,1);position:relative;z-index:2}@keyframes slideUpMobile{0%{opacity:0;transform:translateY(40px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;position:relative}.brand-name[_ngcontent-%COMP%]{font-size:1.875rem;margin-bottom:.5rem;background:linear-gradient(135deg,#16a34a,#15803d,#0f0f10);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.03em}.welcome-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;color:#1a202c;font-weight:700}.register-prompt[_ngcontent-%COMP%], .login-prompt[_ngcontent-%COMP%], .back-to-login-prompt[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.5rem}.auth-form[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%], .activation-form[_ngcontent-%COMP%], .reset-password-form[_ngcontent-%COMP%], .forgot-password-form[_ngcontent-%COMP%]{gap:1.25rem;margin-top:1rem}.submit-button[_ngcontent-%COMP%]{margin-top:.5rem}[_nghost-%COMP%]     .submit-button button{box-shadow:0 4px 12px #0f0f1033;transform:translateY(0);transition:all .3s cubic-bezier(.4,0,.2,1)}[_nghost-%COMP%]     .submit-button button:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0f0f104d}[_nghost-%COMP%]     .submit-button button:active{transform:translateY(0)}.forgot-password-link[_ngcontent-%COMP%]{margin-top:.75rem}.warning-alert[_ngcontent-%COMP%], .error-alert[_ngcontent-%COMP%], .success-alert[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #0000001a}.form-footer[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;padding-top:1.5rem;border-top:1px solid rgba(0,0,0,.05)}.form-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;opacity:.8}}@media (max-width: 480px){.form-panel[_ngcontent-%COMP%]{padding:1.5rem 1.25rem;border-top-left-radius:20px;border-top-right-radius:20px}.brand-name[_ngcontent-%COMP%]{font-size:1.625rem}.welcome-title[_ngcontent-%COMP%]{font-size:1.375rem}.form-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.auth-form[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%], .activation-form[_ngcontent-%COMP%], .reset-password-form[_ngcontent-%COMP%], .forgot-password-form[_ngcontent-%COMP%]{gap:1rem}}']})}return o})();export{dt as ResetPasswordPageComponent};
