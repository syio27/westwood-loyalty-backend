{
  "version": 3,
  "sources": ["src/app/shared/components/card/card.component.ts", "src/app/shared/components/typography/typography.component.ts", "src/app/shared/components/divider/divider.component.ts", "src/app/shared/components/whatsapp-preview/whatsapp-preview.component.ts", "src/app/shared/components/email-preview/email-preview.component.ts", "src/app/shared/components/invitation-form/invitation-form.component.ts", "src/app/shared/components/message-details-modal/message-details-modal.component.ts", "src/app/features/invitation/pages/invitation-page/invitation-page.component.ts"],
  "sourcesContent": ["import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@Component({\n  selector: 'app-card',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"card\" [class.hoverable]=\"hoverable\" [class.shadow]=\"shadow\" [class.bordered]=\"bordered\">\n      <div class=\"card-header\" *ngIf=\"header || showHeader\">\n        <ng-container *ngTemplateOutlet=\"headerTemplate\"></ng-container>\n        <h3 *ngIf=\"!header\">{{ headerText }}</h3>\n      </div>\n      <div class=\"card-body\">\n        <ng-content></ng-content>\n      </div>\n      <div class=\"card-footer\" *ngIf=\"footer || showFooter\">\n        <ng-container *ngTemplateOutlet=\"footerTemplate\"></ng-container>\n      </div>\n    </div>\n    <ng-template #headerTemplate>\n      <ng-content select=\"[cardHeader]\"></ng-content>\n    </ng-template>\n    <ng-template #footerTemplate>\n      <ng-content select=\"[cardFooter]\"></ng-content>\n    </ng-template>\n  `,\n  styles: [`\n    .card {\n      background: #ffffff;\n      border-radius: 8px;\n      overflow: hidden;\n      transition: all 0.3s ease;\n    }\n\n    .card.shadow {\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    }\n\n    .card.bordered {\n      border: 1px solid #e2e8f0;\n    }\n\n    .card.hoverable {\n      cursor: pointer;\n    }\n\n    .card.hoverable:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    }\n\n    .card-header {\n      padding: 1rem 1.5rem;\n      border-bottom: 1px solid #e2e8f0;\n      background-color: #f8f9fa;\n    }\n\n    .card-header h3 {\n      margin: 0;\n      font-size: 1.25rem;\n      font-weight: 600;\n      color: #1a202c;\n    }\n\n    .card-body {\n      padding: 1.5rem;\n    }\n\n    .card-footer {\n      padding: 1rem 1.5rem;\n      border-top: 1px solid #e2e8f0;\n      background-color: #f8f9fa;\n    }\n\n    :host ::ng-deep [cardHeader] {\n      display: block;\n    }\n\n    :host ::ng-deep [cardFooter] {\n      display: block;\n    }\n  `]\n})\nexport class CardComponent {\n  @Input() headerText = '';\n  @Input() showHeader = false;\n  @Input() footer = false;\n  @Input() showFooter = false;\n  @Input() hoverable = false;\n  @Input() shadow = true;\n  @Input() bordered = false;\n  \n  header = false;\n}\n\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nexport type TypographyVariant = 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' | 'body1' | 'body2' | 'caption' | 'overline';\n\n@Component({\n  selector: 'app-typography',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <ng-container [ngSwitch]=\"variant\">\n      <h1 *ngSwitchCase=\"'h1'\" [class]=\"getClasses()\"><ng-content></ng-content></h1>\n      <h2 *ngSwitchCase=\"'h2'\" [class]=\"getClasses()\"><ng-content></ng-content></h2>\n      <h3 *ngSwitchCase=\"'h3'\" [class]=\"getClasses()\"><ng-content></ng-content></h3>\n      <h4 *ngSwitchCase=\"'h4'\" [class]=\"getClasses()\"><ng-content></ng-content></h4>\n      <h5 *ngSwitchCase=\"'h5'\" [class]=\"getClasses()\"><ng-content></ng-content></h5>\n      <h6 *ngSwitchCase=\"'h6'\" [class]=\"getClasses()\"><ng-content></ng-content></h6>\n      <p *ngSwitchCase=\"'body1'\" [class]=\"getClasses()\"><ng-content></ng-content></p>\n      <p *ngSwitchCase=\"'body2'\" [class]=\"getClasses()\"><ng-content></ng-content></p>\n      <span *ngSwitchCase=\"'caption'\" [class]=\"getClasses()\"><ng-content></ng-content></span>\n      <span *ngSwitchCase=\"'overline'\" [class]=\"getClasses()\"><ng-content></ng-content></span>\n    </ng-container>\n  `,\n  styles: [`\n    h1, h2, h3, h4, h5, h6, p, span {\n      margin: 0;\n      padding: 0;\n    }\n\n    :host h1 {\n      font-size: 2.5rem;\n      font-weight: 700;\n      line-height: 1.2;\n    }\n\n    :host h2 {\n      font-size: 2rem;\n      font-weight: 700;\n      line-height: 1.3;\n    }\n\n    :host h3 {\n      font-size: 1.75rem;\n      font-weight: 600;\n      line-height: 1.4;\n    }\n\n    :host h4 {\n      font-size: 1.5rem;\n      font-weight: 600;\n      line-height: 1.4;\n    }\n\n    :host h5 {\n      font-size: 1.25rem;\n      font-weight: 600;\n      line-height: 1.5;\n    }\n\n    :host h6 {\n      font-size: 1.125rem;\n      font-weight: 600;\n      line-height: 1.5;\n    }\n\n    :host p.body1 {\n      font-size: 1rem;\n      font-weight: 400;\n      line-height: 1.6;\n    }\n\n    :host p.body2 {\n      font-size: 0.875rem;\n      font-weight: 400;\n      line-height: 1.6;\n    }\n\n    :host span.caption {\n      font-size: 0.75rem;\n      font-weight: 400;\n      line-height: 1.5;\n    }\n\n    :host span.overline {\n      font-size: 0.75rem;\n      font-weight: 600;\n      line-height: 1.5;\n      text-transform: uppercase;\n      letter-spacing: 0.1em;\n    }\n\n    .no-wrap {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .bold {\n      font-weight: 700;\n    }\n\n    .medium {\n      font-weight: 500;\n    }\n\n    .muted {\n      color: #64748b;\n    }\n  `]\n})\nexport class TypographyComponent {\n  @Input() variant: TypographyVariant = 'body1';\n  @Input() noWrap = false;\n  @Input() bold = false;\n  @Input() medium = false;\n  @Input() muted = false;\n\n  getClasses(): string {\n    const classes: string[] = [this.variant];\n    if (this.noWrap) classes.push('no-wrap');\n    if (this.bold) classes.push('bold');\n    if (this.medium) classes.push('medium');\n    if (this.muted) classes.push('muted');\n    return classes.join(' ');\n  }\n}\n\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@Component({\n  selector: 'app-divider',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"divider\" [class]=\"orientation\" [class.spaced]=\"spaced\"></div>\n  `,\n  styles: [`\n    .divider {\n      background-color: #e2e8f0;\n    }\n\n    .divider.horizontal {\n      width: 100%;\n      height: 1px;\n    }\n\n    .divider.vertical {\n      height: 100%;\n      width: 1px;\n    }\n\n    .divider.spaced.horizontal {\n      margin: 1rem 0;\n    }\n\n    .divider.spaced.vertical {\n      margin: 0 1rem;\n    }\n  `]\n})\nexport class DividerComponent {\n  @Input() orientation: 'horizontal' | 'vertical' = 'horizontal';\n  @Input() spaced = false;\n}\n\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@Component({\n  selector: 'app-whatsapp-preview',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"phone-frame\" [class.dark-frame]=\"darkFrame\" [class.no-shadow]=\"noShadow\">\n      <div class=\"phone-notch\"></div>\n      <div class=\"phone-screen\">\n        <!-- WhatsApp Header -->\n        <div class=\"wa-header\">\n          <div class=\"wa-back\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M15 19l-7-7 7-7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <div class=\"wa-contact\">\n            <div class=\"wa-avatar\">{{ getAvatarLetter() }}</div>\n            <div class=\"wa-info\">\n              <span class=\"wa-name\">{{ contactName || '–ü–æ–ª—É—á–∞—Ç–µ–ª—å' }}</span>\n              <span class=\"wa-status\">{{ status }}</span>\n            </div>\n          </div>\n          <div class=\"wa-actions\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n        </div>\n        \n        <!-- Chat Area -->\n        <div class=\"wa-chat\">\n          <div class=\"wa-date\">{{ dateLabel }}</div>\n          <div class=\"wa-bubble\" [class.incoming]=\"!outgoing\">\n            <p>{{ message || '–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...' }}</p>\n            <div class=\"wa-meta\">\n              <span class=\"wa-time\">{{ time || getCurrentTime() }}</span>\n              <svg *ngIf=\"outgoing && showCheckmarks\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"wa-check\" [class.read]=\"isRead\">\n                <path d=\"M5 13l4 4L19 7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>\n              <svg *ngIf=\"outgoing && showCheckmarks && delivered\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"wa-check wa-check-second\" [class.read]=\"isRead\">\n                <path d=\"M5 13l4 4L19 7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n\n        <!-- Input Bar -->\n        <div class=\"wa-input-bar\" *ngIf=\"showInputBar\">\n          <div class=\"wa-emoji\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <div class=\"wa-input-field\">–°–æ–æ–±—â–µ–Ω–∏–µ</div>\n          <div class=\"wa-attach\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <div class=\"wa-mic\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M19 10v2a7 7 0 01-14 0v-2M12 19v4m-4 0h8M12 1a3 3 0 00-3 3v6a3 3 0 006 0V4a3 3 0 00-3-3z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .phone-frame {\n      background: #1f2937;\n      border-radius: 32px;\n      padding: 8px;\n      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n      display: flex;\n      flex-direction: column;\n      min-height: 400px;\n    }\n\n    .phone-frame.dark-frame {\n      background: #0f172a;\n    }\n\n    .phone-frame.no-shadow {\n      box-shadow: none;\n    }\n\n    .phone-notch {\n      width: 120px;\n      height: 24px;\n      background: inherit;\n      margin: 0 auto 8px;\n      border-radius: 0 0 16px 16px;\n    }\n\n    .phone-screen {\n      flex: 1;\n      background: #e5ddd5;\n      border-radius: 24px;\n      overflow: hidden;\n      display: flex;\n      flex-direction: column;\n    }\n\n    /* WhatsApp Header */\n    .wa-header {\n      background: #075e54;\n      padding: 0.625rem 0.75rem;\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n    }\n\n    .wa-back svg {\n      width: 20px;\n      height: 20px;\n      color: white;\n    }\n\n    .wa-contact {\n      display: flex;\n      align-items: center;\n      gap: 0.625rem;\n      flex: 1;\n    }\n\n    .wa-avatar {\n      width: 36px;\n      height: 36px;\n      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: white;\n      font-weight: 600;\n      font-size: 0.875rem;\n    }\n\n    .wa-info {\n      display: flex;\n      flex-direction: column;\n    }\n\n    .wa-name {\n      color: white;\n      font-weight: 500;\n      font-size: 0.9375rem;\n      line-height: 1.2;\n    }\n\n    .wa-status {\n      color: rgba(255, 255, 255, 0.7);\n      font-size: 0.75rem;\n    }\n\n    .wa-actions {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n    }\n\n    .wa-actions svg {\n      width: 20px;\n      height: 20px;\n      color: white;\n    }\n\n    /* Chat Area */\n    .wa-chat {\n      flex: 1;\n      padding: 0.75rem;\n      display: flex;\n      flex-direction: column;\n      overflow-y: auto;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23c5c5c5' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    }\n\n    .wa-date {\n      text-align: center;\n      font-size: 0.6875rem;\n      color: #667781;\n      background: rgba(255, 255, 255, 0.9);\n      padding: 0.25rem 0.75rem;\n      border-radius: 8px;\n      margin: 0 auto 0.75rem;\n      box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.1);\n    }\n\n    .wa-bubble {\n      background: #dcf8c6;\n      padding: 0.5rem 0.625rem;\n      border-radius: 8px 8px 0 8px;\n      max-width: 85%;\n      margin-left: auto;\n      box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.1);\n      position: relative;\n    }\n\n    .wa-bubble.incoming {\n      background: white;\n      margin-left: 0;\n      margin-right: auto;\n      border-radius: 8px 8px 8px 0;\n    }\n\n    .wa-bubble p {\n      margin: 0;\n      font-size: 0.875rem;\n      line-height: 1.4;\n      color: #111b21;\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n\n    .wa-meta {\n      display: flex;\n      align-items: center;\n      justify-content: flex-end;\n      gap: 0.125rem;\n      margin-top: 0.125rem;\n    }\n\n    .wa-time {\n      font-size: 0.6875rem;\n      color: #667781;\n    }\n\n    .wa-check {\n      width: 16px;\n      height: 16px;\n      color: #667781;\n      margin-left: -4px;\n    }\n\n    .wa-check.read {\n      color: #53bdeb;\n    }\n\n    .wa-check-second {\n      margin-left: -12px;\n    }\n\n    /* Input Bar */\n    .wa-input-bar {\n      background: #f0f2f5;\n      padding: 0.5rem 0.625rem;\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n    }\n\n    .wa-emoji, .wa-attach {\n      color: #54656f;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .wa-emoji svg, .wa-attach svg {\n      width: 24px;\n      height: 24px;\n    }\n\n    .wa-input-field {\n      flex: 1;\n      background: white;\n      padding: 0.5rem 0.875rem;\n      border-radius: 8px;\n      font-size: 0.875rem;\n      color: #667781;\n    }\n\n    .wa-mic {\n      width: 40px;\n      height: 40px;\n      background: #00a884;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n\n    .wa-mic svg {\n      width: 20px;\n      height: 20px;\n      color: white;\n    }\n  `]\n})\nexport class WhatsappPreviewComponent {\n  /** –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ */\n  @Input() contactName: string = '';\n  \n  /** –ü–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –±–µ—Ä—ë—Ç—Å—è –∏–∑ contactName) */\n  @Input() avatarLetter: string = '';\n  \n  /** –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è */\n  @Input() message: string = '';\n  \n  /** –í—Ä–µ–º—è —Å–æ–æ–±—â–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –±–µ—Ä—ë—Ç—Å—è —Ç–µ–∫—É—â–µ–µ) */\n  @Input() time: string = '';\n  \n  /** –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞ */\n  @Input() status: string = '–æ–Ω–ª–∞–π–Ω';\n  \n  /** –ü–æ–¥–ø–∏—Å—å –¥–∞—Ç—ã */\n  @Input() dateLabel: string = '–°–µ–≥–æ–¥–Ω—è';\n  \n  /** –ò—Å—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å–ø—Ä–∞–≤–∞) –∏–ª–∏ –≤—Ö–æ–¥—è—â–µ–µ (—Å–ª–µ–≤–∞) */\n  @Input() outgoing: boolean = true;\n  \n  /** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≥–∞–ª–æ—á–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ */\n  @Input() showCheckmarks: boolean = true;\n  \n  /** –°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ (–¥–≤–µ –≥–∞–ª–æ—á–∫–∏) */\n  @Input() delivered: boolean = true;\n  \n  /** –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ (—Å–∏–Ω–∏–µ –≥–∞–ª–æ—á–∫–∏) */\n  @Input() isRead: boolean = true;\n  \n  /** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ –≤–Ω–∏–∑—É */\n  @Input() showInputBar: boolean = true;\n  \n  /** –¢—ë–º–Ω–∞—è —Ä–∞–º–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */\n  @Input() darkFrame: boolean = false;\n\n  /** –£–±—Ä–∞—Ç—å —Ç–µ–Ω—å */\n  @Input() noShadow: boolean = false;\n\n  getAvatarLetter(): string {\n    if (this.avatarLetter) return this.avatarLetter;\n    if (this.contactName) return this.contactName[0].toUpperCase();\n    return '?';\n  }\n\n  getCurrentTime(): string {\n    return new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\n  }\n}\n\n", "import { Component, Input } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@Component({\n  selector: 'app-email-preview',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"email-frame\">\n      <!-- Browser Chrome -->\n      <div class=\"browser-header\">\n        <div class=\"browser-controls\">\n          <span class=\"control close\"></span>\n          <span class=\"control minimize\"></span>\n          <span class=\"control maximize\"></span>\n        </div>\n        <div class=\"browser-tabs\">\n          <div class=\"tab active\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n            <span>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ Westwood - WestWood Team</span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Email Client -->\n      <div class=\"email-client\">\n        <!-- Email Content -->\n        <div class=\"email-content\">\n          <!-- Sender Info -->\n          <div class=\"sender-section\">\n            <div class=\"sender-avatar\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                <circle cx=\"12\" cy=\"8\" r=\"4\" fill=\"currentColor\"/>\n                <path d=\"M4 20c0-4 4-6 8-6s8 2 8 6\" fill=\"currentColor\"/>\n              </svg>\n            </div>\n            <div class=\"sender-details\">\n              <div class=\"sender-row\">\n                <span class=\"sender-name\">{{ senderName }}</span>\n                <span class=\"sender-email\">&lt;{{ senderEmail }}&gt;</span>\n              </div>\n              <div class=\"recipient-row\">\n                <span class=\"to-label\">–∫–æ–º—É:</span>\n                <span class=\"to-value\">–º–Ω–µ</span>\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" class=\"dropdown-icon\">\n                  <path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <!-- Email Body - Westwood Template -->\n          <div class=\"email-body-wrapper\">\n            <div class=\"email-template\">\n              <!-- Green Banner Header -->\n              <div class=\"email-banner\">\n                <h1 class=\"banner-title\">Welcome to Westwood!</h1>\n              </div>\n\n              <!-- Email Body Content -->\n              <div class=\"email-body-content\">\n                <div class=\"intro-text\">{{ message || 'You have been invited to join Westwood as a Manager. To get started, please activate your account by clicking the button below:' }}</div>\n\n                <!-- CTA Button -->\n                <div class=\"cta-container\">\n                  <a class=\"cta-button\" [href]=\"activationLink\">\n                    {{ buttonText || 'Activate Account' }}\n                  </a>\n                </div>\n\n                <!-- Alternative Link -->\n                <p class=\"alt-text\">Or copy and paste this link into your browser:</p>\n                \n                <div class=\"link-box\">\n                  <a class=\"activation-link\" [href]=\"activationLink\">\n                    {{ activationLink || 'https://westwood.app/activate?token=...' }}\n                  </a>\n                </div>\n\n                <!-- Important Notice -->\n                <p class=\"notice\">\n                  <strong>Important:</strong> This activation link will expire in {{ expirationDays || 7 }} days. \n                  If you didn't request this invitation, please ignore this email.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .email-frame {\n      background: #1f2937;\n      border-radius: 12px;\n      overflow: hidden;\n      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n      display: flex;\n      flex-direction: column;\n      min-height: 500px;\n    }\n\n    /* Browser Chrome */\n    .browser-header {\n      background: #374151;\n      padding: 0.5rem 0.75rem;\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n    }\n\n    .browser-controls {\n      display: flex;\n      gap: 0.5rem;\n    }\n\n    .control {\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n    }\n\n    .control.close { background: #ef4444; }\n    .control.minimize { background: #fbbf24; }\n    .control.maximize { background: #22c55e; }\n\n    .browser-tabs {\n      flex: 1;\n    }\n\n    .tab {\n      display: inline-flex;\n      align-items: center;\n      gap: 0.5rem;\n      background: #4b5563;\n      padding: 0.375rem 0.75rem;\n      border-radius: 6px 6px 0 0;\n      font-size: 0.75rem;\n      color: #e5e7eb;\n      max-width: 280px;\n    }\n\n    .tab svg {\n      width: 14px;\n      height: 14px;\n      flex-shrink: 0;\n    }\n\n    .tab span {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    /* Email Client */\n    .email-client {\n      flex: 1;\n      display: flex;\n      background: #ffffff;\n    }\n\n    /* Email Content */\n    .email-content {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      min-width: 0;\n    }\n\n    /* Sender Section */\n    .sender-section {\n      display: flex;\n      align-items: flex-start;\n      gap: 0.875rem;\n      padding: 1rem;\n      border-bottom: 1px solid #e5e7eb;\n      background: #fff;\n    }\n\n    .sender-avatar {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n\n    .sender-avatar svg {\n      width: 24px;\n      height: 24px;\n      color: white;\n    }\n\n    .sender-details {\n      flex: 1;\n      min-width: 0;\n    }\n\n    .sender-row {\n      display: flex;\n      align-items: center;\n      gap: 0.375rem;\n      flex-wrap: wrap;\n      margin-bottom: 0.25rem;\n    }\n\n    .sender-name {\n      font-size: 0.9375rem;\n      font-weight: 600;\n      color: #1f2937;\n    }\n\n    .sender-email {\n      font-size: 0.8125rem;\n      color: #6b7280;\n    }\n\n    .recipient-row {\n      display: flex;\n      align-items: center;\n      gap: 0.25rem;\n      font-size: 0.8125rem;\n      color: #6b7280;\n    }\n\n    .to-label {\n      color: #9ca3af;\n    }\n\n    .to-value {\n      color: #6b7280;\n    }\n\n    .dropdown-icon {\n      width: 14px;\n      height: 14px;\n      color: #9ca3af;\n    }\n\n    /* Email Body Wrapper */\n    .email-body-wrapper {\n      flex: 1;\n      overflow-y: auto;\n      background: #f5f5f5;\n      padding: 0.5rem;\n    }\n\n    /* Email Template (Westwood Style) */\n    .email-template {\n      background: #f5f5f5;\n      border-radius: 8px;\n      overflow: hidden;\n    }\n\n    .email-banner {\n      background: #4CAF50;\n      padding: 1.75rem 1.5rem;\n      text-align: center;\n    }\n\n    .banner-title {\n      color: white;\n      font-size: 1.375rem;\n      font-weight: 700;\n      margin: 0;\n      letter-spacing: -0.02em;\n    }\n\n    .email-body-content {\n      background: white;\n      padding: 1.5rem 1.25rem;\n    }\n\n    .intro-text {\n      font-size: 0.875rem;\n      color: #333;\n      line-height: 1.6;\n      margin: 0 0 1.5rem;\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n\n    .cta-container {\n      text-align: center;\n      margin: 1.5rem 0;\n    }\n\n    .cta-button {\n      display: inline-block;\n      background: #4CAF50;\n      color: white;\n      font-size: 0.875rem;\n      font-weight: 600;\n      padding: 0.75rem 1.5rem;\n      border-radius: 6px;\n      text-decoration: none;\n      transition: all 0.2s ease;\n      box-shadow: 0 2px 6px rgba(76, 175, 80, 0.3);\n    }\n\n    .cta-button:hover {\n      background: #43A047;\n    }\n\n    .alt-text {\n      font-size: 0.875rem;\n      color: #333;\n      margin: 1.5rem 0 0.75rem;\n    }\n\n    .link-box {\n      background: #E8F5E9;\n      border-radius: 6px;\n      padding: 0.75rem;\n      margin-bottom: 1.25rem;\n      word-break: break-all;\n    }\n\n    .activation-link {\n      color: #1565C0;\n      font-size: 0.8125rem;\n      text-decoration: underline;\n      line-height: 1.5;\n    }\n\n    .notice {\n      font-size: 0.875rem;\n      color: #333;\n      line-height: 1.6;\n      margin: 0;\n    }\n\n    .notice strong {\n      color: #111;\n    }\n\n    `]\n})\nexport class EmailPreviewComponent {\n  /** Email –ø–æ–ª—É—á–∞—Ç–µ–ª—è */\n  @Input() recipientEmail: string = '';\n\n  /** –¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ */\n  @Input() message: string = '';\n\n  /** –°—Å—ã–ª–∫–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ */\n  @Input() activationLink: string = 'https://westwood.app/activate?token=...';\n\n  /** –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ */\n  @Input() buttonText: string = 'Activate Account';\n\n  /** –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å—Å—ã–ª–∫–∏ (–¥–Ω–µ–π) */\n  @Input() expirationDays: number = 7;\n\n  /** –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è */\n  @Input() senderName: string = 'Westwood Team';\n\n  /** Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è */\n  @Input() senderEmail: string = 'noreply@westwood.app';\n}\n\n", "import { Component, Input, Output, EventEmitter, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormGroup, ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { CardComponent } from '../card/card.component';\nimport { InputComponent } from '../input/input.component';\nimport { ButtonComponent } from '../button/button.component';\nimport { TypographyComponent } from '../typography/typography.component';\nimport { AlertComponent } from '../alert/alert.component';\nimport { BadgeComponent } from '../badge/badge.component';\nimport { IconButtonComponent } from '../icon-button/icon-button.component';\nimport { DividerComponent } from '../divider/divider.component';\nimport { ModalComponent } from '../modal/modal.component';\nimport { WhatsappPreviewComponent } from '../whatsapp-preview/whatsapp-preview.component';\nimport { EmailPreviewComponent } from '../email-preview/email-preview.component';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\nexport interface MessageTemplate {\n  id: string;\n  name: string;\n  type: string; // Can be any string from API (e.g., 'BASIC_CASHBACK_BONUS_GRANT', etc.)\n  content: string;\n  subject?: string; // For email\n  createdAt: Date;\n}\n\n@Component({\n  selector: 'app-invitation-form',\n  standalone: true,\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    CardComponent,\n    InputComponent,\n    ButtonComponent,\n    TypographyComponent,\n    AlertComponent,\n    BadgeComponent,\n    IconButtonComponent,\n    DividerComponent,\n    ModalComponent,\n    WhatsappPreviewComponent,\n    EmailPreviewComponent\n  ],\n  template: `\n    <div class=\"invitation-form-wrapper\">\n      <!-- Templates Section -->\n      <div class=\"templates-section\">\n        <div class=\"templates-header\">\n          <h3 class=\"templates-title\">–®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π</h3>\n          <app-button\n            buttonType=\"primary\"\n            size=\"medium\"\n            (onClick)=\"openCreateTemplateModal()\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" class=\"btn-icon\">\n              <path d=\"M12 5v14M5 12h14\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n            –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –≤–∏–¥ —Å–æ–æ–±—â–µ–Ω–∏—è\n          </app-button>\n        </div>\n\n        <div class=\"templates-grid\">\n          <div \n            class=\"template-card\" \n            *ngFor=\"let template of messageTemplates\"\n            (click)=\"selectTemplate(template)\">\n            <div class=\"template-header\">\n              <span class=\"template-name\">{{ template.name }}</span>\n            </div>\n            <p class=\"template-preview\">{{ getTemplatePreview(template.content) }}</p>\n            <div class=\"template-actions\">\n              <button \n                *ngIf=\"invitationType === 'whatsapp'\"\n                class=\"template-action-btn preview-btn\" \n                (click)=\"openPreview(template, $event)\" \n                title=\"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                  <path d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </svg>\n              </button>\n              <button class=\"template-action-btn\" (click)=\"editTemplate(template, $event)\" title=\"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                  <path d=\"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </svg>\n              </button>\n              <button class=\"template-action-btn\" (click)=\"deleteTemplate(template, $event)\" title=\"–£–¥–∞–ª–∏—Ç—å\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                  <path d=\"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"template-card empty\" *ngIf=\"messageTemplates.length === 0\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" class=\"empty-icon\">\n              <path d=\"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n              <path d=\"M14 2v6h6M16 13H8M16 17H8M10 9H8\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n            </svg>\n            <p class=\"empty-text\">–ù–µ—Ç —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π</p>\n            <p class=\"empty-hint\">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- Collapsible Form Section -->\n      <div class=\"collapsible-section\" *ngIf=\"!hideForm\">\n        <div class=\"collapsed-view\" *ngIf=\"isFormCollapsed\" (click)=\"toggleFormCollapse()\">\n          <div class=\"collapsed-content\">\n            <div class=\"collapsed-icon\" [innerHTML]=\"getSafeIconSvg()\" [style.background]=\"getIconGradient()\"></div>\n            <div class=\"collapsed-info\">\n              <span class=\"collapsed-title\">{{ title }}</span>\n              <span class=\"collapsed-preview\">{{ getCollapsedPreview() }}</span>\n            </div>\n            <button class=\"expand-btn\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" [class.rotated]=\"!isFormCollapsed\">\n                <path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div class=\"expanded-view\" *ngIf=\"!isFormCollapsed\">\n          <div class=\"view-header\" (click)=\"toggleFormCollapse()\">\n            <div class=\"view-header-content\">\n              <div class=\"icon-wrapper\" [innerHTML]=\"getSafeIconSvg()\" [style.background]=\"getIconGradient()\"></div>\n              <div class=\"header-text\">\n                <h2 class=\"panel-title\">{{ title }}</h2>\n                <p class=\"panel-subtitle\">{{ subtitle }}</p>\n              </div>\n            </div>\n            <button class=\"collapse-btn\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>\n            </button>\n          </div>\n\n          <div class=\"expanded-content\">\n            <app-card [shadow]=\"true\" class=\"left-panel\">\n              <!-- Alerts -->\n              <app-alert\n                *ngIf=\"successMessage\"\n                type=\"success\"\n                [title]=\"'–£—Å–ø–µ—à–Ω–æ'\"\n                [dismissible]=\"true\"\n                (dismissed)=\"successMessage = ''\"\n                class=\"alert-spacing\">\n                {{ successMessage }}\n              </app-alert>\n\n              <app-alert\n                *ngIf=\"errorMessage\"\n                type=\"error\"\n                [title]=\"'–û—à–∏–±–∫–∞'\"\n                [dismissible]=\"true\"\n                (dismissed)=\"errorMessage = ''\"\n                class=\"alert-spacing\">\n                {{ errorMessage }}\n              </app-alert>\n\n              <form [formGroup]=\"form\" (ngSubmit)=\"onFormSubmit()\" class=\"form-content\">\n                <!-- Subject Input (only for email) -->\n                <app-input\n                  *ngIf=\"invitationType === 'email'\"\n                  id=\"subject\"\n                  label=\"–¢–µ–º–∞ –ø–∏—Å—å–º–∞\"\n                  type=\"text\"\n                  placeholder=\"–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ Westwood\"\n                  formControlName=\"subject\"\n                  prefix=\"üìã\">\n                </app-input>\n\n                <!-- Message Textarea -->\n                <div class=\"textarea-group\">\n                  <div class=\"label-row\">\n                    <app-typography variant=\"body2\" [medium]=\"true\">\n                      {{ invitationType === 'email' ? '–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞' : '–¢–µ–∫—Å—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è' }}\n                    </app-typography>\n                    <app-typography variant=\"caption\" [muted]=\"true\">\n                      {{ getMessageLength() }}/{{ invitationType === 'email' ? '1000' : '500' }}\n                    </app-typography>\n                  </div>\n                  <div class=\"textarea-wrapper\" [attr.data-type]=\"invitationType\">\n                    <div \n                      #messageContentEditable\n                      class=\"message-textarea-editable\"\n                      contenteditable=\"true\"\n                      (input)=\"onMessageInput($event)\"\n                      (keydown)=\"onMessageKeydown($event)\"\n                      (click)=\"onMessageClick()\"\n                      (blur)=\"onMessageBlur($event)\"\n                      [attr.data-type]=\"invitationType\"\n                      [attr.placeholder]=\"invitationType === 'email' ? '–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ...' : '–ù–∞–ø–∏—à–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ...'\">\n                    </div>\n                    <div class=\"variables-dropdown\" *ngIf=\"showMessageVariablesDropdown\" [style.top.px]=\"messageDropdownPosition.top\" [style.left.px]=\"messageDropdownPosition.left\">\n                      <div class=\"variables-dropdown-header\">\n                        <span>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</span>\n                        <button type=\"button\" class=\"variables-dropdown-close\" (click)=\"closeMessageVariablesDropdown()\">√ó</button>\n                      </div>\n                      <div class=\"variables-dropdown-list\">\n                        <button \n                          type=\"button\"\n                          class=\"variable-option\" \n                          *ngFor=\"let variable of filteredMessageVariables\"\n                          (click)=\"selectMessageVariable(variable)\"\n                          [class.highlighted]=\"highlightedMessageVariableIndex === filteredMessageVariables.indexOf(variable)\">\n                          <span class=\"variable-name\">{{ getVariableDisplayName(variable.name) }}</span>\n                          <span class=\"variable-desc\">{{ variable.description }}</span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <app-divider [spaced]=\"true\"></app-divider>\n\n                <!-- Submit Button -->\n                <app-button\n                  [buttonType]=\"invitationType === 'email' ? 'primary' : 'success'\"\n                  type=\"submit\"\n                  [disabled]=\"form.invalid || isSending\"\n                  [loading]=\"isSending\"\n                  size=\"large\"\n                  class=\"submit-btn\">\n                  <span class=\"btn-content\">\n                    <ng-container [ngSwitch]=\"invitationType\">\n                      <svg *ngSwitchCase=\"'whatsapp'\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"wa-icon\">\n                        <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z\" fill=\"currentColor\"/>\n                        <path d=\"M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2 22l4.832-1.438A9.955 9.955 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2z\" fill=\"currentColor\"/>\n                      </svg>\n                      <svg *ngSwitchDefault viewBox=\"0 0 24 24\" fill=\"none\" class=\"email-icon\">\n                        <path d=\"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                      </svg>\n                    </ng-container>\n                    {{ isSending ? (invitationType === 'email' ? '–û—Ç–ø—Ä–∞–≤–∫–∞...' : '–û—Ç–∫—Ä—ã–≤–∞–µ–º WhatsApp...') : (invitationType === 'email' ? '–û—Ç–ø—Ä–∞–≤–∏—Ç—å Email' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp') }}\n                  </span>\n                </app-button>\n              </form>\n            </app-card>\n\n            <!-- Preview Section -->\n            <div class=\"preview-section\">\n              <div class=\"section-title\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" class=\"title-icon\" [style.color]=\"iconColor\">\n                  <path d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </svg>\n                <h3 class=\"section-heading\">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>\n              </div>\n              <p class=\"section-description\">{{ previewDescription }}</p>\n\n              <ng-container [ngSwitch]=\"invitationType\">\n                <app-whatsapp-preview\n                  *ngSwitchCase=\"'whatsapp'\"\n                  [contactName]=\"getPreviewContactName()\"\n                  [avatarLetter]=\"getPreviewAvatarLetter()\"\n                  [message]=\"getPreviewMessage()\"\n                  [showInputBar]=\"true\"\n                  [noShadow]=\"true\"\n                  class=\"preview-component\">\n                </app-whatsapp-preview>\n                <app-email-preview\n                  *ngSwitchDefault\n                  [recipientEmail]=\"getPreviewEmail()\"\n                  [message]=\"getPreviewMessage()\"\n                  [activationLink]=\"'https://westwood.app/activate?token=xxx'\"\n                  [buttonText]=\"'Activate Account'\"\n                  [expirationDays]=\"7\"\n                  [senderEmail]=\"'noreply@westwood.app'\"\n                  class=\"preview-component\">\n                </app-email-preview>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Create Template Modal -->\n    <app-modal\n      [visible]=\"showCreateTemplateModal\"\n      title=\"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –≤–∏–¥ —Å–æ–æ–±—â–µ–Ω–∏—è\"\n      [showCloseButton]=\"true\"\n      [showFooter]=\"true\"\n      (closed)=\"closeCreateTemplateModal()\"\n      (visibleChange)=\"showCreateTemplateModal = $event\"\n      size=\"large\">\n      \n      <div class=\"template-form\">\n        <div class=\"form-group\">\n          <label class=\"form-label\" [attr.data-type]=\"invitationType\">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</label>\n            <input \n            type=\"text\" \n            [(ngModel)]=\"newTemplate.name\"\n            placeholder=\"–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\"\n            class=\"form-input\"\n            [attr.data-type]=\"invitationType\">\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\" [attr.data-type]=\"invitationType\">–¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è</label>\n          <div class=\"type-dropdown-wrapper\">\n            <select \n              [(ngModel)]=\"newTemplate.type\"\n              class=\"type-dropdown\"\n              [attr.data-type]=\"invitationType\"\n              [disabled]=\"templateTypes.length === 0\">\n              <option *ngIf=\"templateTypes.length === 0\" value=\"\">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–ø–æ–≤...</option>\n              <option *ngFor=\"let templateType of templateTypes\" [value]=\"templateType.type\">\n                {{ templateType.displayName }}\n              </option>\n            </select>\n            <svg class=\"dropdown-arrow\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n        </div>\n\n        <div class=\"form-group\" *ngIf=\"invitationType === 'email'\">\n          <label class=\"form-label\" [attr.data-type]=\"invitationType\">–¢–µ–º–∞ –ø–∏—Å—å–º–∞</label>\n            <input \n            type=\"text\" \n            [(ngModel)]=\"newTemplate.subject\"\n            placeholder=\"–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ Westwood\"\n            class=\"form-input\"\n            [attr.data-type]=\"invitationType\">\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\" [attr.data-type]=\"invitationType\">–ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</label>\n          <div class=\"textarea-wrapper\" [attr.data-type]=\"invitationType\">\n            <div \n              #contentEditable\n              class=\"form-textarea-editable\"\n              contenteditable=\"true\"\n              (input)=\"onContentInput($event)\"\n              (keydown)=\"onContentKeydown($event)\"\n              (click)=\"onContentClick()\"\n              (blur)=\"onContentBlur($event)\"\n              [attr.data-type]=\"invitationType\"\n              [attr.placeholder]=\"'–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...'\">\n            </div>\n            <div class=\"variables-dropdown\" *ngIf=\"showVariablesDropdown\" [style.top.px]=\"dropdownPosition.top\" [style.left.px]=\"dropdownPosition.left\">\n              <div class=\"variables-dropdown-header\">\n                <span>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</span>\n                <button type=\"button\" class=\"variables-dropdown-close\" (click)=\"closeVariablesDropdown()\">√ó</button>\n              </div>\n              <div class=\"variables-dropdown-list\">\n                <button \n                  type=\"button\"\n                  class=\"variable-option\" \n                  *ngFor=\"let variable of filteredVariables\"\n                  (click)=\"selectVariable(variable)\"\n                  [class.highlighted]=\"highlightedVariableIndex === filteredVariables.indexOf(variable)\">\n                  <span class=\"variable-name\">{{ getVariableDisplayName(variable.name) }}</span>\n                  <span class=\"variable-desc\">{{ variable.description }}</span>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div class=\"char-count\">{{ getPlainTextContent().length }}/{{ invitationType === 'email' ? '1000' : '500' }}</div>\n        </div>\n\n        <div class=\"form-group\">\n          <label class=\"form-label\" [attr.data-type]=\"invitationType\">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</label>\n          <div class=\"preview-box\" [attr.data-type]=\"invitationType\">\n            <ng-container [ngSwitch]=\"invitationType\">\n              <app-whatsapp-preview\n                *ngSwitchCase=\"'whatsapp'\"\n                [contactName]=\"'–ü–æ–ª—É—á–∞—Ç–µ–ª—å'\"\n                [avatarLetter]=\"'–ü'\"\n                [message]=\"newTemplate.content || '–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...'\"\n                [showInputBar]=\"true\"\n                [noShadow]=\"true\">\n              </app-whatsapp-preview>\n              <app-email-preview\n                *ngSwitchDefault\n                [recipientEmail]=\"'email@example.com'\"\n                [message]=\"newTemplate.content || '–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞...'\"\n                [activationLink]=\"'https://westwood.app/activate?token=xxx'\"\n                [buttonText]=\"'Activate Account'\"\n                [expirationDays]=\"7\"\n                [senderEmail]=\"'noreply@westwood.app'\">\n              </app-email-preview>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n\n      <ng-container modalFooter>\n        <div class=\"modal-footer\">\n          <app-button\n            buttonType=\"secondary\"\n            size=\"medium\"\n            (onClick)=\"closeCreateTemplateModal()\">\n            –û—Ç–º–µ–Ω–∞\n          </app-button>\n          <app-button\n            [buttonType]=\"invitationType === 'email' ? 'primary' : 'success'\"\n            size=\"medium\"\n            [disabled]=\"!newTemplate.name || !newTemplate.content || (invitationType === 'email' && !newTemplate.subject)\"\n            (onClick)=\"saveTemplate()\">\n            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω\n          </app-button>\n        </div>\n      </ng-container>\n    </app-modal>\n\n    <!-- Preview Template Modal -->\n    <app-modal\n      [visible]=\"showPreviewModal\"\n      title=\"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏—è\"\n      [showCloseButton]=\"true\"\n      (closed)=\"closePreview()\">\n      <div class=\"preview-content\">\n        <p class=\"preview-description\">–¢–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ WhatsApp</p>\n        <app-whatsapp-preview\n          *ngIf=\"previewTemplate\"\n          [contactName]=\"'–ü–æ–ª—É—á–∞—Ç–µ–ª—å'\"\n          [avatarLetter]=\"'–ü'\"\n          [message]=\"previewTemplate.content\"\n          [showInputBar]=\"true\"\n          [noShadow]=\"true\">\n        </app-whatsapp-preview>\n      </div>\n    </app-modal>\n\n    <!-- Delete Template Confirmation Modal -->\n    <div class=\"delete-modal-overlay\" *ngIf=\"showDeleteTemplateModal\" (click)=\"closeDeleteTemplateModal()\">\n      <div class=\"delete-modal\" (click)=\"$event.stopPropagation()\">\n        <!-- Step 1: Initial confirmation -->\n        <div class=\"delete-modal-content\" *ngIf=\"deleteTemplateStep === 1\">\n          <div class=\"delete-modal-icon warning\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <h3 class=\"delete-modal-title\">–£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω?</h3>\n          <p class=\"delete-modal-description\">\n            –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω <strong>{{ templateToDelete?.name }}</strong>?<br>\n            –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.\n          </p>\n          <div class=\"delete-modal-actions\">\n            <button class=\"delete-modal-btn cancel\" (click)=\"closeDeleteTemplateModal()\">–û—Ç–º–µ–Ω–∞</button>\n            <button class=\"delete-modal-btn confirm\" (click)=\"proceedToDeleteTemplateStep2()\">–î–∞, —É–¥–∞–ª–∏—Ç—å</button>\n          </div>\n        </div>\n\n        <!-- Step 2: Type confirmation word -->\n        <div class=\"delete-modal-content\" *ngIf=\"deleteTemplateStep === 2\">\n          <div class=\"delete-modal-icon danger\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14zM10 11v6M14 11v6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <h3 class=\"delete-modal-title\">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ</h3>\n          <p class=\"delete-modal-description\">\n            –î–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≤–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ <strong class=\"confirm-word\">—É–¥–∞–ª–∏—Ç—å</strong>\n          </p>\n          <input \n            type=\"text\" \n            class=\"delete-confirm-input\"\n            [(ngModel)]=\"deleteTemplateConfirmationText\"\n            placeholder=\"–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è\"\n            (input)=\"checkDeleteTemplateConfirmation()\"\n            (keydown.enter)=\"confirmDeleteTemplate()\">\n          <div class=\"delete-modal-actions\">\n            <button class=\"delete-modal-btn cancel\" (click)=\"closeDeleteTemplateModal()\">–û—Ç–º–µ–Ω–∞</button>\n            <button \n              class=\"delete-modal-btn delete\" \n              [disabled]=\"!isDeleteTemplateConfirmed\"\n              (click)=\"confirmDeleteTemplate()\">\n              –£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      width: 100%;\n    }\n\n    /* Collapsible Section */\n    .collapsible-section {\n      background: white;\n      border-radius: 24px;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n      overflow: hidden;\n      transition: all 0.3s ease;\n    }\n\n    .collapsed-view {\n      padding: 1.25rem 1.5rem;\n      cursor: pointer;\n      transition: background 0.2s;\n    }\n\n    .collapsed-view:hover {\n      background: #f8fafc;\n    }\n\n    .collapsed-content {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n    }\n\n    .collapsed-icon {\n      width: 40px;\n      height: 40px;\n      border-radius: 12px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n\n    .collapsed-icon ::ng-deep svg {\n      width: 20px;\n      height: 20px;\n      color: white;\n    }\n\n    .collapsed-icon ::ng-deep svg path {\n      fill: white;\n    }\n\n    .collapsed-info {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      gap: 0.25rem;\n      min-width: 0;\n    }\n\n    .collapsed-title {\n      font-size: 1rem;\n      font-weight: 600;\n      color: #1f2937;\n    }\n\n    .collapsed-preview {\n      font-size: 0.875rem;\n      color: #64748b;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .expand-btn {\n      background: none;\n      border: none;\n      padding: 0.5rem;\n      cursor: pointer;\n      color: #64748b;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: transform 0.2s;\n    }\n\n    .expand-btn svg {\n      width: 20px;\n      height: 20px;\n      transition: transform 0.2s;\n    }\n\n    .expand-btn svg.rotated {\n      transform: rotate(180deg);\n    }\n\n    .view-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 1.25rem 1.5rem;\n      border-bottom: 1px solid #f1f5f9;\n      cursor: pointer;\n      transition: background 0.2s;\n    }\n\n    .view-header:hover {\n      background: #f8fafc;\n    }\n\n    .view-header-content {\n      display: flex;\n      align-items: flex-start;\n      gap: 1.25rem;\n    }\n\n    .collapse-btn {\n      background: none;\n      border: none;\n      padding: 0.5rem;\n      cursor: pointer;\n      color: #64748b;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    .collapse-btn svg {\n      width: 20px;\n      height: 20px;\n    }\n\n    .expanded-content {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 2rem;\n      padding: 2rem;\n    }\n\n    .icon-wrapper {\n      width: 40px;\n      height: 40px;\n      border-radius: 16px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n\n    .icon-wrapper ::ng-deep svg {\n      width: 28px;\n      height: 28px;\n      color: white;\n    }\n\n    .icon-wrapper ::ng-deep svg path {\n      fill: white;\n    }\n\n    .header-text {\n      display: flex;\n      flex-direction: column;\n      gap: 0.25rem;\n    }\n\n    .panel-title {\n      font-size: 1.5rem;\n      font-weight: 700;\n      color: #0f172a;\n      margin: 0;\n    }\n\n    .panel-subtitle {\n      font-size: 0.9375rem;\n      color: #64748b;\n      margin: 0;\n    }\n\n    .alert-spacing {\n      margin-bottom: 1.5rem;\n    }\n\n    /* Left Panel */\n    .left-panel {\n      display: flex;\n      flex-direction: column;\n      border-radius: 24px !important;\n    }\n\n    :host ::ng-deep .left-panel .card-body {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n      padding: 2rem !important;\n    }\n\n    /* Form */\n    .form-content {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      gap: 1.25rem;\n    }\n\n    .textarea-group {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n    }\n\n    .label-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 0.5rem;\n    }\n\n    .message-textarea {\n      flex: 1;\n      width: 100%;\n      min-height: 120px;\n      padding: 0.875rem;\n      border: 1px solid #cbd5e1;\n      border-radius: 8px;\n      font-size: 0.9375rem;\n      font-family: inherit;\n      resize: none;\n      transition: all 0.2s ease;\n      background-color: #ffffff;\n      color: #1a202c;\n      line-height: 1.6;\n    }\n\n    .message-textarea:focus {\n      outline: none;\n    }\n\n    .message-textarea[data-type=\"whatsapp\"]:focus {\n      border-color: #25D366;\n      box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.15);\n    }\n\n    .message-textarea[data-type=\"email\"]:focus {\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);\n    }\n\n    .message-textarea::placeholder {\n      color: #94a3b8;\n    }\n\n    .message-textarea-editable {\n      flex: 1;\n      width: 100%;\n      min-height: 120px;\n      padding: 0.875rem;\n      border: 1px solid #cbd5e1;\n      border-radius: 8px;\n      font-size: 0.9375rem;\n      font-family: inherit;\n      background-color: #ffffff;\n      color: #1a202c;\n      line-height: 1.6;\n      outline: none;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n    }\n\n    .message-textarea-editable:empty:before {\n      content: attr(placeholder);\n      color: #94a3b8;\n      pointer-events: none;\n    }\n\n    .message-textarea-editable:focus {\n      outline: none;\n    }\n\n    .message-textarea-editable[data-type=\"whatsapp\"]:focus {\n      border-color: #25D366;\n      box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.15);\n    }\n\n    .message-textarea-editable[data-type=\"email\"]:focus {\n      border-color: #3b82f6;\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);\n    }\n\n    /* Submit Button */\n    .submit-btn {\n      width: 100%;\n    }\n\n    :host ::ng-deep .submit-btn button {\n      width: 100%;\n      border-radius: 12px !important;\n      padding: 1rem 1.5rem !important;\n    }\n\n    :host ::ng-deep .submit-btn button:hover:not(:disabled) {\n      transform: translateY(-2px);\n    }\n\n    .btn-icon {\n      width: 18px;\n      height: 18px;\n      flex-shrink: 0;\n      display: block;\n    }\n\n    .wa-icon, .email-icon {\n      width: 22px;\n      height: 22px;\n    }\n\n    /* Preview Section */\n    .preview-section {\n      background: white;\n      border-radius: 24px;\n      padding: 1.5rem;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n      display: flex;\n      flex-direction: column;\n    }\n\n    .section-title {\n      display: flex;\n      align-items: center;\n      gap: 0.625rem;\n      margin-bottom: 0.25rem;\n    }\n\n    .title-icon {\n      width: 22px;\n      height: 22px;\n    }\n\n    .section-heading {\n      font-size: 1.125rem;\n      font-weight: 600;\n      color: #1f2937;\n      margin: 0;\n    }\n\n    .section-description {\n      font-size: 0.875rem;\n      color: #9ca3af;\n      margin: 0 0 1.25rem 0;\n    }\n\n    .preview-component {\n      flex: 1;\n      display: block;\n    }\n\n    /* Templates Section */\n    .templates-section {\n      background: white;\n      border-radius: 24px;\n      padding: 1.5rem;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n      margin-bottom: 2rem;\n    }\n\n    .templates-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 1.5rem;\n    }\n\n    .templates-title {\n      font-size: 1.25rem;\n      font-weight: 600;\n      color: #1f2937;\n      margin: 0;\n    }\n\n    .templates-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n      gap: 1rem;\n    }\n\n    .template-card {\n      background: #f8fafc;\n      border: 1.5px solid #e2e8f0;\n      border-radius: 16px;\n      padding: 1.25rem;\n      cursor: pointer;\n      transition: all 0.2s;\n      position: relative;\n    }\n\n    .template-card:hover {\n      background: #f1f5f9;\n      border-color: #25D366;\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.15);\n    }\n\n    .template-card.empty {\n      text-align: center;\n      padding: 3rem 1.5rem;\n      cursor: default;\n      border-style: dashed;\n    }\n\n    .template-card.empty:hover {\n      transform: none;\n      border-color: #e2e8f0;\n    }\n\n    .template-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 0.75rem;\n    }\n\n    .template-name {\n      font-size: 1rem;\n      font-weight: 600;\n      color: #1f2937;\n    }\n\n    .template-preview {\n      font-size: 0.875rem;\n      color: #64748b;\n      line-height: 1.5;\n      margin: 0 0 0.75rem 0;\n      display: -webkit-box;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n    }\n\n    .template-actions {\n      display: flex;\n      gap: 0.5rem;\n      opacity: 0;\n      transition: opacity 0.2s;\n    }\n\n    .template-card:hover .template-actions {\n      opacity: 1;\n    }\n\n    .template-action-btn {\n      background: white;\n      border: 1px solid #e2e8f0;\n      border-radius: 8px;\n      padding: 0.4rem;\n      cursor: pointer;\n      color: #64748b;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: all 0.15s;\n    }\n\n    .template-action-btn:hover {\n      background: #f1f5f9;\n      border-color: #cbd5e1;\n      color: #1f2937;\n    }\n\n    .template-action-btn svg {\n      width: 16px;\n      height: 16px;\n    }\n\n    .empty-icon {\n      width: 48px;\n      height: 48px;\n      color: #d1d5db;\n      margin: 0 auto 1rem;\n    }\n\n    .empty-text {\n      font-size: 0.9375rem;\n      color: #64748b;\n      margin: 0 0 0.25rem 0;\n      font-weight: 500;\n    }\n\n    .empty-hint {\n      font-size: 0.8125rem;\n      color: #94a3b8;\n      margin: 0;\n    }\n\n    /* Modal Styles */\n    .template-form {\n      display: flex;\n      flex-direction: column;\n      gap: 2rem;\n      padding: 0.5rem 0;\n    }\n\n    .form-group {\n      display: flex;\n      flex-direction: column;\n      gap: 0.75rem;\n    }\n\n    .form-label {\n      font-size: 0.9375rem;\n      font-weight: 600;\n      color: #1f2937;\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n    }\n\n    .form-label::before {\n      content: '';\n      width: 3px;\n      height: 16px;\n      border-radius: 2px;\n    }\n\n    .form-label[data-type=\"whatsapp\"]::before {\n      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);\n    }\n\n    .form-label[data-type=\"email\"]::before {\n      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\n    }\n\n    .form-input {\n      padding: 0.875rem 1.125rem;\n      border: 2px solid #e2e8f0;\n      border-radius: 12px;\n      font-size: 0.9375rem;\n      background: #ffffff;\n      color: #1f2937;\n      transition: all 0.2s;\n      font-family: inherit;\n    }\n\n    .form-input::placeholder {\n      color: #94a3b8;\n    }\n\n    .form-input:focus {\n      outline: none;\n      background: #f0fdf4;\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .form-input[data-type=\"whatsapp\"]:focus {\n      border-color: #25D366;\n      background: #f0fdf4;\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .form-input[data-type=\"email\"]:focus {\n      border-color: #3b82f6;\n      background: #eff6ff;\n      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);\n    }\n\n    .type-dropdown-wrapper {\n      position: relative;\n    }\n\n    .type-dropdown {\n      width: 100%;\n      padding: 0.875rem 3rem 0.875rem 1.125rem;\n      border: 2px solid #e2e8f0;\n      border-radius: 12px;\n      font-size: 0.9375rem;\n      background: #ffffff;\n      color: #1f2937;\n      transition: all 0.2s;\n      font-family: inherit;\n      appearance: none;\n      cursor: pointer;\n    }\n\n    .type-dropdown:focus {\n      outline: none;\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .type-dropdown[data-type=\"whatsapp\"]:focus {\n      border-color: #25D366;\n      background: #f0fdf4;\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .type-dropdown[data-type=\"email\"]:focus {\n      border-color: #3b82f6;\n      background: #eff6ff;\n      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);\n    }\n\n    .type-dropdown:hover {\n      border-color: #cbd5e1;\n    }\n\n    .dropdown-arrow {\n      position: absolute;\n      right: 1rem;\n      top: 50%;\n      transform: translateY(-50%);\n      width: 20px;\n      height: 20px;\n      color: #64748b;\n      pointer-events: none;\n      transition: transform 0.2s;\n    }\n\n    .type-dropdown[data-type=\"whatsapp\"]:focus + .dropdown-arrow {\n      color: #25D366;\n    }\n\n    .type-dropdown[data-type=\"email\"]:focus + .dropdown-arrow {\n      color: #3b82f6;\n    }\n\n    .textarea-wrapper {\n      position: relative;\n      width: 100%;\n    }\n\n    .form-textarea {\n      width: 100%;\n      padding: 1rem 1.125rem;\n      border: 2px solid #e2e8f0;\n      border-radius: 12px;\n      font-size: 0.9375rem;\n      font-family: inherit;\n      resize: vertical;\n      background: #ffffff;\n      color: #1f2937;\n      line-height: 1.6;\n      transition: all 0.2s;\n      min-height: 150px;\n    }\n\n    .form-textarea:focus {\n      outline: none;\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .form-textarea[data-type=\"whatsapp\"]:focus {\n      border-color: #25D366;\n      background: #f0fdf4;\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .form-textarea[data-type=\"email\"]:focus {\n      border-color: #3b82f6;\n      background: #eff6ff;\n      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);\n    }\n\n    .form-textarea-editable {\n      width: 100%;\n      padding: 1rem 1.125rem;\n      border: 2px solid #e2e8f0;\n      border-radius: 12px;\n      font-size: 0.9375rem;\n      font-family: inherit;\n      background: #ffffff;\n      color: #1f2937;\n      line-height: 1.6;\n      transition: all 0.2s;\n      min-height: 150px;\n      outline: none;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n    }\n\n    .form-textarea-editable:empty:before {\n      content: attr(placeholder);\n      color: #94a3b8;\n      pointer-events: none;\n    }\n\n    .form-textarea-editable:focus {\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .form-textarea-editable[data-type=\"whatsapp\"]:focus {\n      border-color: #25D366;\n      background: #f0fdf4;\n      box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);\n    }\n\n    .form-textarea-editable[data-type=\"email\"]:focus {\n      border-color: #3b82f6;\n      background: #eff6ff;\n      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);\n    }\n\n    .variable-tag {\n      color: #16a34a !important;\n      font-style: italic !important;\n      font-weight: 500 !important;\n      font-family: 'Courier New', 'Monaco', 'Menlo', 'Consolas', monospace !important;\n      background: rgba(34, 197, 94, 0.08) !important;\n      padding: 2px 6px !important;\n      border-radius: 4px !important;\n      border: 1px solid rgba(34, 197, 94, 0.2) !important;\n      display: inline !important;\n    }\n\n    :host ::ng-deep .variable-tag {\n      color:rgb(22, 158, 163) !important;\n      font-style: italic !important;\n      font-weight: 500 !important;\n      font-family: 'Courier New', 'Monaco', 'Menlo', 'Consolas', monospace !important;\n      background: rgba(22, 158, 163, 0.2) !important;\n      padding: 2px 6px !important;\n      border-radius: 4px !important;\n      border: 1px solid rgba(34, 197, 94, 0.2) !important;\n      display: inline !important;\n    }\n\n    .variables-dropdown {\n      position: absolute;\n      background: white;\n      border: 1px solid #e2e8f0;\n      border-radius: 12px;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      z-index: 1000;\n      min-width: 280px;\n      max-width: 400px;\n      max-height: 300px;\n      overflow: hidden;\n      margin-top: 4px;\n    }\n\n    .variables-dropdown-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 10px 14px;\n      background: #f8fafc;\n      border-bottom: 1px solid #e2e8f0;\n      font-size: 0.8rem;\n      font-weight: 600;\n      color: #64748b;\n    }\n\n    .variables-dropdown-close {\n      background: none;\n      border: none;\n      font-size: 1.25rem;\n      color: #94a3b8;\n      cursor: pointer;\n      padding: 0;\n      line-height: 1;\n      transition: color 0.15s;\n    }\n\n    .variables-dropdown-close:hover {\n      color: #64748b;\n    }\n\n    .variables-dropdown-list {\n      max-height: 250px;\n      overflow-y: auto;\n      padding: 4px;\n    }\n\n    .variable-option {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n      width: 100%;\n      padding: 10px 14px;\n      background: transparent;\n      border: none;\n      text-align: left;\n      cursor: pointer;\n      transition: all 0.15s;\n      border-radius: 8px;\n    }\n\n    .variable-option:hover,\n    .variable-option.highlighted {\n      background: #f0fdf4;\n    }\n\n    .variable-name {\n      font-size: 0.875rem;\n      font-weight: 600;\n      color: #16a34a;\n      font-family: 'Courier New', monospace;\n    }\n\n    .variable-desc {\n      font-size: 0.75rem;\n      color: #64748b;\n    }\n\n    .char-count {\n      font-size: 0.75rem;\n      color: #94a3b8;\n      text-align: right;\n      margin-top: 0.25rem;\n    }\n\n    .preview-box {\n      border-radius: 16px;\n      padding: 1.5rem;\n      max-height: 450px;\n      overflow-y: auto;\n    }\n\n    .preview-box[data-type=\"whatsapp\"] {\n      background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);\n      border: 2px solid #dcfce7;\n      box-shadow: 0 2px 8px rgba(37, 211, 102, 0.08);\n    }\n\n    .preview-box[data-type=\"email\"] {\n      background: linear-gradient(135deg, #eff6ff 0%, #ffffff 100%);\n      border: 2px solid #dbeafe;\n      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.08);\n    }\n\n    .modal-footer {\n      display: flex;\n      justify-content: flex-end;\n      gap: 0.875rem;\n      padding: 1.25rem 0 0 0;\n      border-top: 2px solid #f1f5f9;\n      margin-top: 0.5rem;\n    }\n\n    /* Preview Modal */\n    .preview-content {\n      padding: 0.5rem 0;\n    }\n\n    .preview-description {\n      font-size: 0.875rem;\n      color: #64748b;\n      margin: 0 0 1.5rem 0;\n    }\n\n    :host ::ng-deep .modal-footer app-button button {\n      padding: 0.75rem 1.5rem !important;\n      font-weight: 600 !important;\n      border-radius: 10px !important;\n    }\n\n    /* Responsive */\n    @media (max-width: 1024px) {\n      .expanded-content {\n        grid-template-columns: 1fr;\n      }\n\n      .templates-grid {\n        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));\n      }\n    }\n\n    @media (max-width: 768px) {\n      .expanded-content {\n        padding: 1rem;\n      }\n\n      .templates-header {\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 1rem;\n      }\n\n      .templates-grid {\n        grid-template-columns: 1fr;\n      }\n\n    :host ::ng-deep .left-panel .card-body {\n      padding: 1.5rem !important;\n    }\n  }\n\n    /* Preview Modal */\n    .preview-content {\n      padding: 0.5rem 0;\n    }\n\n    .preview-description {\n      font-size: 0.875rem;\n      color: #64748b;\n      margin: 0 0 1.5rem 0;\n    }\n\n    /* Delete Confirmation Modal */\n    .delete-modal-overlay {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n      animation: fadeIn 0.2s ease;\n    }\n\n    @keyframes fadeIn {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n\n    .delete-modal {\n      background: white;\n      border-radius: 16px;\n      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n      max-width: 420px;\n      width: 90%;\n      animation: slideUp 0.3s ease;\n    }\n\n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .delete-modal-content {\n      padding: 2rem;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      text-align: center;\n    }\n\n    .delete-modal-icon {\n      width: 64px;\n      height: 64px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin-bottom: 1.25rem;\n    }\n\n    .delete-modal-icon.warning {\n      background: #fef3c7;\n      color: #d97706;\n    }\n\n    .delete-modal-icon.danger {\n      background: #fee2e2;\n      color: #dc2626;\n    }\n\n    .delete-modal-icon svg {\n      width: 32px;\n      height: 32px;\n    }\n\n    .delete-modal-title {\n      font-size: 1.25rem;\n      font-weight: 600;\n      color: #1f2937;\n      margin: 0 0 0.75rem;\n    }\n\n    .delete-modal-description {\n      font-size: 0.9rem;\n      color: #6b7280;\n      line-height: 1.6;\n      margin: 0 0 1.5rem;\n    }\n\n    .delete-modal-description strong {\n      color: #1f2937;\n    }\n\n    .confirm-word {\n      color: #dc2626;\n      background: #fee2e2;\n      padding: 0.125rem 0.5rem;\n      border-radius: 4px;\n      font-family: monospace;\n      font-size: 0.95rem;\n    }\n\n    .delete-confirm-input {\n      width: 100%;\n      padding: 0.875rem 1rem;\n      border: 2px solid #e5e7eb;\n      border-radius: 10px;\n      font-size: 1rem;\n      font-family: inherit;\n      text-align: center;\n      margin-bottom: 1.5rem;\n      transition: all 0.2s ease;\n    }\n\n    .delete-confirm-input:focus {\n      outline: none;\n      border-color: #dc2626;\n      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);\n    }\n\n    .delete-confirm-input::placeholder {\n      color: #9ca3af;\n    }\n\n    .delete-modal-actions {\n      display: flex;\n      gap: 0.75rem;\n      width: 100%;\n    }\n\n    .delete-modal-btn {\n      flex: 1;\n      padding: 0.875rem 1.5rem;\n      border-radius: 10px;\n      font-size: 0.9rem;\n      font-weight: 600;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      border: none;\n    }\n\n    .delete-modal-btn.cancel {\n      background: #f3f4f6;\n      color: #6b7280;\n    }\n\n    .delete-modal-btn.cancel:hover {\n      background: #e5e7eb;\n      color: #374151;\n    }\n\n    .delete-modal-btn.confirm {\n      background: #fef3c7;\n      color: #d97706;\n    }\n\n    .delete-modal-btn.confirm:hover {\n      background: #fde68a;\n      color: #b45309;\n    }\n\n    .delete-modal-btn.delete {\n      background: #dc2626;\n      color: white;\n    }\n\n    .delete-modal-btn.delete:hover:not(:disabled) {\n      background: #b91c1c;\n    }\n\n    .delete-modal-btn.delete:disabled {\n      background: #fca5a5;\n      cursor: not-allowed;\n    }\n  `]\n})\nexport class InvitationFormComponent implements AfterViewInit {\n  @ViewChild('contentEditable', { static: false }) contentEditableRef!: ElementRef<HTMLElement>;\n  @ViewChild('messageContentEditable', { static: false }) messageContentEditableRef!: ElementRef<HTMLElement>;\n  @Input() invitationType: 'whatsapp' | 'email' = 'whatsapp';\n  @Input() form!: FormGroup;\n  @Input() title = '–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞';\n  @Input() subtitle = '';\n  @Input() iconSvg: string | SafeHtml = '';\n  @Input() iconColor = '#25D366';\n  @Input() previewDescription = '';\n  @Input() messageTemplates: MessageTemplate[] = [];\n  @Input() isSending = false;\n  @Input() successMessage = '';\n  @Input() errorMessage = '';\n  @Input() hideForm = false;\n  @Input() templateTypes: Array<{ type: string; displayName: string }> = [];\n  @Input() templateVariables: Array<{ name: string; description: string }> = [];\n  @Output() formSubmit = new EventEmitter<void>();\n  @Output() templateSelected = new EventEmitter<MessageTemplate>();\n  @Output() templateCreated = new EventEmitter<MessageTemplate>();\n  @Output() templateUpdated = new EventEmitter<MessageTemplate>();\n  @Output() templateDeleted = new EventEmitter<string>();\n\n  isFormCollapsed = false;\n  showCreateTemplateModal = false;\n  showPreviewModal = false;\n  previewTemplate: MessageTemplate | null = null;\n  editingTemplateId: string | null = null;\n\n  // Delete template modal state\n  showDeleteTemplateModal = false;\n  deleteTemplateStep = 1;\n  deleteTemplateConfirmationText = '';\n  isDeleteTemplateConfirmed = false;\n  templateToDelete: MessageTemplate | null = null;\n\n  newTemplate: MessageTemplate = {\n    id: '',\n    name: '',\n    type: 'bonus_accrued',\n    content: '',\n    createdAt: new Date()\n  };\n\n  // Variables dropdown for template modal\n  showVariablesDropdown = false;\n  highlightedVariableIndex = 0;\n  dropdownPosition = { top: 0, left: 0 };\n  currentBracePosition = -1;\n\n  // Variables dropdown for message textarea\n  showMessageVariablesDropdown = false;\n  highlightedMessageVariableIndex = 0;\n  messageDropdownPosition = { top: 0, left: 0 };\n  currentMessageBracePosition = -1;\n\n  // Use API-provided variables, fallback to empty array if not provided\n  get availableVariables(): Array<{ name: string; description: string }> {\n    return this.templateVariables.length > 0 ? this.templateVariables : [];\n  }\n\n  filteredVariables: Array<{ name: string; description: string }> = [];\n  filteredMessageVariables: Array<{ name: string; description: string }> = [];\n\n  constructor(private sanitizer: DomSanitizer) {}\n\n  ngAfterViewInit(): void {\n    // Initialize contenteditable when view is ready\n    if (this.contentEditableRef) {\n      this.updateContentEditable();\n    }\n  }\n\n  getSafeIconSvg(): SafeHtml {\n    if (typeof this.iconSvg === 'string') {\n      return this.sanitizer.bypassSecurityTrustHtml(this.iconSvg);\n    }\n    return this.iconSvg || this.sanitizer.bypassSecurityTrustHtml('');\n  }\n\n  toggleFormCollapse(): void {\n    this.isFormCollapsed = !this.isFormCollapsed;\n  }\n\n  getCollapsedPreview(): string {\n    const message = this.form.get('message')?.value || '';\n    if (!message) return '–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –≤–≤–µ–¥—ë–Ω';\n    const words = message.split(/\\s+/).slice(0, 8).join(' ');\n    return words + (message.split(/\\s+/).length > 8 ? '...' : '');\n  }\n\n  onFormSubmit(): void {\n    this.formSubmit.emit();\n  }\n\n  getVariableDisplayName(variableName: string): string {\n    // Remove curly braces if present\n    return variableName.replace(/[{}]/g, '');\n  }\n\n  getTemplateTypeLabel(type: string): string {\n    // Convert API type format to readable label\n    // Example: BASIC_CASHBACK_BONUS_GRANT -> \"Basic Cashback Bonus Grant\"\n    if (!type || typeof type !== 'string') {\n      return type || '';\n    }\n    return type\n      .split('_')\n      .map(word => word.charAt(0) + word.slice(1).toLowerCase())\n      .join(' ');\n  }\n\n  getTemplatePreview(content: string): string {\n    const words = content.split(/\\s+/).slice(0, 10).join(' ');\n    return words + (content.split(/\\s+/).length > 10 ? '...' : '');\n  }\n\n  selectTemplate(template: MessageTemplate): void {\n    this.form.patchValue({\n      message: template.content\n    });\n    if (this.invitationType === 'email' && template.subject) {\n      this.form.patchValue({\n        subject: template.subject\n      });\n    }\n    this.templateSelected.emit(template);\n    this.isFormCollapsed = false;\n    \n    // Update message contenteditable\n    setTimeout(() => {\n      this.updateMessageContentEditable();\n    }, 100);\n  }\n\n  openCreateTemplateModal(): void {\n    // Use first available template type from API, or empty string if none available\n    const defaultType = this.templateTypes.length > 0 ? this.templateTypes[0].type : '';\n    \n    this.newTemplate = {\n      id: '',\n      name: '',\n      type: defaultType,\n      content: '',\n      subject: this.invitationType === 'email' ? '' : undefined,\n      createdAt: new Date()\n    };\n    this.editingTemplateId = null;\n    this.closeVariablesDropdown();\n    \n    // Set modal visibility - use setTimeout to ensure change detection runs\n    setTimeout(() => {\n      this.showCreateTemplateModal = true;\n      // Update contenteditable after modal opens\n      setTimeout(() => {\n        this.updateContentEditable();\n      }, 100);\n    }, 0);\n  }\n\n  closeCreateTemplateModal(): void {\n    this.showCreateTemplateModal = false;\n    this.editingTemplateId = null;\n    this.closeVariablesDropdown();\n  }\n\n  saveTemplate(): void {\n    // Sync content from contenteditable before saving\n    if (this.contentEditableRef) {\n      const element = this.contentEditableRef.nativeElement;\n      this.newTemplate.content = this.getPlainTextFromElement(element);\n    }\n    \n    if (!this.newTemplate.name || !this.newTemplate.content) return;\n    if (this.invitationType === 'email' && !this.newTemplate.subject) return;\n\n    if (this.editingTemplateId) {\n      const template: MessageTemplate = {\n        ...this.newTemplate,\n        id: this.editingTemplateId\n      };\n      this.templateUpdated.emit(template);\n    } else {\n      const template: MessageTemplate = {\n        ...this.newTemplate,\n        id: Date.now().toString(),\n        createdAt: new Date()\n      };\n      this.templateCreated.emit(template);\n    }\n\n    this.closeCreateTemplateModal();\n  }\n\n  editTemplate(template: MessageTemplate, event: Event): void {\n    event.stopPropagation();\n    this.newTemplate = { ...template };\n    this.editingTemplateId = template.id;\n    this.showCreateTemplateModal = true;\n    this.closeVariablesDropdown();\n    \n    // Update contenteditable after modal opens\n    setTimeout(() => {\n      this.updateContentEditable();\n    }, 100);\n  }\n\n  deleteTemplate(template: MessageTemplate, event: Event): void {\n    event.stopPropagation();\n    this.openDeleteTemplateModal(template);\n  }\n\n  openDeleteTemplateModal(template: MessageTemplate): void {\n    this.templateToDelete = template;\n    this.deleteTemplateStep = 1;\n    this.deleteTemplateConfirmationText = '';\n    this.isDeleteTemplateConfirmed = false;\n    this.showDeleteTemplateModal = true;\n  }\n\n  closeDeleteTemplateModal(): void {\n    this.showDeleteTemplateModal = false;\n    this.deleteTemplateStep = 1;\n    this.deleteTemplateConfirmationText = '';\n    this.isDeleteTemplateConfirmed = false;\n    this.templateToDelete = null;\n  }\n\n  proceedToDeleteTemplateStep2(): void {\n    this.deleteTemplateStep = 2;\n  }\n\n  checkDeleteTemplateConfirmation(): void {\n    this.isDeleteTemplateConfirmed = this.deleteTemplateConfirmationText.toLowerCase().trim() === '—É–¥–∞–ª–∏—Ç—å';\n  }\n\n  confirmDeleteTemplate(): void {\n    if (this.templateToDelete && this.isDeleteTemplateConfirmed) {\n      this.templateDeleted.emit(this.templateToDelete.id);\n      this.closeDeleteTemplateModal();\n    }\n  }\n\n  openPreview(template: MessageTemplate, event: Event): void {\n    event.stopPropagation();\n    this.previewTemplate = template;\n    this.showPreviewModal = true;\n  }\n\n  closePreview(): void {\n    this.showPreviewModal = false;\n    this.previewTemplate = null;\n  }\n\n  getPreviewMessage(): string {\n    return this.form.get('message')?.value || '–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...';\n  }\n\n  getPreviewContactName(): string {\n    return '–ü–æ–ª—É—á–∞—Ç–µ–ª—å';\n  }\n\n  getPreviewAvatarLetter(): string {\n    return '–ü';\n  }\n\n  getPreviewEmail(): string {\n    return 'email@example.com';\n  }\n\n  getIconGradient(): string {\n    if (this.invitationType === 'email') {\n      return 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)';\n    }\n    return 'linear-gradient(135deg, #25D366 0%, #128C7E 100%)';\n  }\n\n  // Variables dropdown methods\n  private formatTimeout: any = null;\n  private isFormatting = false;\n  private lastFormattedContent = '';\n  private messageFormatTimeout: any = null;\n  private isMessageFormatting = false;\n  private lastFormattedMessageContent = '';\n\n  onContentInput(event: Event): void {\n    const target = event.target as HTMLElement;\n    const text = this.getPlainTextFromElement(target);\n    this.newTemplate.content = text;\n    \n    // Don't format if we're currently formatting to avoid cursor issues\n    if (this.isFormatting) {\n      return;\n    }\n    \n    // Clear any pending format operation\n    if (this.formatTimeout) {\n      clearTimeout(this.formatTimeout);\n    }\n    \n    // Check if '{{' was just typed or user is typing after '{{'\n    const selection = window.getSelection();\n    if (selection && selection.rangeCount > 0) {\n      const range = selection.getRangeAt(0);\n      const textBeforeCursor = this.getTextBeforeCursor(target, range);\n      \n      // Find the last '{{' that doesn't have a matching '}}'\n      const lastDoubleBraceIndex = textBeforeCursor.lastIndexOf('{{');\n      if (lastDoubleBraceIndex !== -1) {\n        const textAfterBrace = textBeforeCursor.substring(lastDoubleBraceIndex + 2);\n        if (!textAfterBrace.includes('}}')) {\n          // Show dropdown\n          this.currentBracePosition = lastDoubleBraceIndex;\n          this.showVariablesDropdown = true;\n          \n          // Filter variables based on typed text after '{{'\n          const searchText = textAfterBrace.toLowerCase();\n          this.filteredVariables = this.availableVariables.filter(v => \n            v.name.toLowerCase().includes(searchText) || \n            v.description.toLowerCase().includes(searchText)\n          );\n          \n          // If no matches, show all\n          if (this.filteredVariables.length === 0) {\n            this.filteredVariables = [...this.availableVariables];\n          }\n          \n          this.highlightedVariableIndex = 0;\n          this.updateDropdownPosition(target, range);\n          // Format content to show variables styled (with delay to avoid cursor issues)\n          this.formatTimeout = setTimeout(() => this.formatContentWithVariables(target), 150);\n          return;\n        }\n      }\n    }\n    \n    // Hide dropdown if '}}' is typed or no '{{' found\n    const hasOpenDoubleBrace = text.includes('{{') && !text.match(/\\{\\{[^}]*$/);\n    if (!hasOpenDoubleBrace) {\n      this.closeVariablesDropdown();\n    }\n    \n    // Format content to show variables styled (with delay to avoid cursor issues during fast typing)\n    // Only format if content actually changed\n    if (text !== this.lastFormattedContent) {\n      this.formatTimeout = setTimeout(() => this.formatContentWithVariables(target), 200);\n    }\n  }\n\n  onContentKeydown(event: KeyboardEvent): void {\n    if (this.showVariablesDropdown) {\n      if (event.key === 'ArrowDown') {\n        event.preventDefault();\n        this.highlightedVariableIndex = Math.min(\n          this.highlightedVariableIndex + 1,\n          this.filteredVariables.length - 1\n        );\n        // Scroll to highlighted item\n        this.scrollToHighlightedVariable();\n      } else if (event.key === 'ArrowUp') {\n        event.preventDefault();\n        this.highlightedVariableIndex = Math.max(this.highlightedVariableIndex - 1, 0);\n        // Scroll to highlighted item\n        this.scrollToHighlightedVariable();\n      } else if (event.key === 'Enter') {\n        event.preventDefault();\n        if (this.filteredVariables[this.highlightedVariableIndex]) {\n          this.selectVariable(this.filteredVariables[this.highlightedVariableIndex]);\n        }\n      } else if (event.key === 'Escape') {\n        event.preventDefault();\n        this.closeVariablesDropdown();\n      } else if (event.key === '}') {\n        // Close dropdown when '}' is typed (second closing brace)\n        const target = event.target as HTMLElement;\n        const text = this.getPlainTextFromElement(target);\n        const selection = window.getSelection();\n        if (selection && selection.rangeCount > 0) {\n          const range = selection.getRangeAt(0);\n          const textBeforeCursor = this.getTextBeforeCursor(target, range);\n          // Check if we already have one '}' before cursor\n          if (textBeforeCursor.endsWith('}')) {\n            // This is the second '}', close dropdown\n            event.preventDefault();\n            this.closeVariablesDropdown();\n          }\n        }\n      }\n    }\n  }\n\n  scrollToHighlightedVariable(): void {\n    // Scroll dropdown to show highlighted item\n    setTimeout(() => {\n      const dropdown = document.querySelector('.variables-dropdown-list');\n      const highlighted = document.querySelector('.variable-option.highlighted');\n      if (dropdown && highlighted) {\n        highlighted.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }, 0);\n  }\n\n  updateMessageContentEditable(): void {\n    if (this.messageContentEditableRef) {\n      const element = this.messageContentEditableRef.nativeElement;\n      const messageValue = this.form.get('message')?.value || '';\n      if (messageValue) {\n        // Reset formatting state\n        this.isMessageFormatting = false;\n        this.lastFormattedMessageContent = '';\n        // Use formatMessageWithVariables which handles HTML properly\n        this.formatMessageWithVariables(element);\n      } else {\n        element.innerHTML = '';\n        this.lastFormattedMessageContent = '';\n      }\n    }\n  }\n\n  onContentClick(): void {\n    // Keep dropdown open if clicking in contenteditable\n    // It will be closed by other handlers if needed\n  }\n\n  onContentBlur(event: FocusEvent): void {\n    // Close dropdown when losing focus, but only if not clicking on dropdown\n    const relatedTarget = event.relatedTarget as HTMLElement;\n    if (relatedTarget && !relatedTarget.closest('.variables-dropdown')) {\n      setTimeout(() => {\n        if (document.activeElement !== this.contentEditableRef?.nativeElement) {\n          this.closeVariablesDropdown();\n        }\n      }, 200);\n    }\n  }\n\n  updateDropdownPosition(element: HTMLElement, range: Range): void {\n    const rect = range.getBoundingClientRect();\n    const parentRect = element.getBoundingClientRect();\n    const scrollTop = element.scrollTop || 0;\n    const scrollLeft = element.scrollLeft || 0;\n    \n    this.dropdownPosition = {\n      top: rect.bottom - parentRect.top + scrollTop + 5,\n      left: rect.left - parentRect.left + scrollLeft\n    };\n  }\n\n  selectVariable(variable: typeof this.availableVariables[0]): void {\n    const target = this.contentEditableRef?.nativeElement || document.querySelector('.form-textarea-editable') as HTMLElement;\n    if (!target) return;\n\n    const selection = window.getSelection();\n    if (!selection || selection.rangeCount === 0) return;\n    \n    const range = selection.getRangeAt(0);\n    const text = this.getPlainTextFromElement(target);\n    \n    // Find the position of the last '{{'\n    const textBeforeCursor = this.getTextBeforeCursor(target, range);\n    const lastDoubleBraceIndex = textBeforeCursor.lastIndexOf('{{');\n    \n    if (lastDoubleBraceIndex === -1) {\n      this.closeVariablesDropdown();\n      return;\n    }\n    \n    // Get cursor position in plain text\n    const cursorPos = this.getCursorPosition(target, range);\n    \n    // Find what's between '{{' and cursor - this is what user typed\n    const textAfterBrace = textBeforeCursor.substring(lastDoubleBraceIndex + 2);\n    \n    // Build new content: everything before '{{' + '{{' + variable name + '}}' + everything after cursor\n    // Extract variable name without braces (variable.name might already include {{}})\n    const variableName = variable.name.replace(/[{}]/g, '');\n    const beforeBrace = text.substring(0, lastDoubleBraceIndex + 2);\n    const afterCursor = text.substring(cursorPos);\n    const newContent = beforeBrace + variableName + '}}' + afterCursor;\n    \n    // Update content model\n    this.newTemplate.content = newContent;\n    \n    // Format and update element - this will apply styling to variables\n    this.formatContentWithVariables(target);\n    \n    // Move cursor after the inserted variable (after the closing '}}')\n    setTimeout(() => {\n      const newCursorPos = lastDoubleBraceIndex + 2 + variable.name.length + 2; // position after '}}'\n      this.setCursorPosition(target, newCursorPos);\n    }, 20);\n    \n    this.closeVariablesDropdown();\n  }\n\n  closeVariablesDropdown(): void {\n    this.showVariablesDropdown = false;\n    this.highlightedVariableIndex = 0;\n    this.currentBracePosition = -1;\n  }\n\n  getFormattedContent(): string {\n    if (!this.newTemplate.content) return '';\n    \n    // Replace {variable} with styled spans\n    return this.newTemplate.content.replace(\n      /\\{(\\w+)\\}/g,\n      '<span class=\"variable-tag\">{$1}</span>'\n    );\n  }\n\n  formatContentWithVariables(element: HTMLElement): void {\n    // Prevent recursive formatting\n    if (this.isFormatting) {\n      return;\n    }\n    \n    this.isFormatting = true;\n    \n    const text = this.newTemplate.content || this.getPlainTextFromElement(element);\n    if (!text) {\n      element.innerHTML = '';\n      this.lastFormattedContent = '';\n      this.isFormatting = false;\n      return;\n    }\n    \n    // Don't format if content hasn't changed\n    if (text === this.lastFormattedContent) {\n      this.isFormatting = false;\n      return;\n    }\n    \n    // Save cursor position and selection state before formatting\n    const selection = window.getSelection();\n    let cursorPosition = 0;\n    let isFocused = document.activeElement === element;\n    \n    if (selection && selection.rangeCount > 0 && isFocused) {\n      try {\n        const range = selection.getRangeAt(0);\n        cursorPosition = this.getCursorPosition(element, range);\n      } catch (e) {\n        // If we can't get cursor position, use text length as fallback\n        cursorPosition = text.length;\n      }\n    }\n    \n    // Replace complete {{variable}} patterns with styled spans\n    // Use a more robust regex that handles edge cases\n    // Split text by variables, escape non-variable parts, then reassemble\n    const parts: string[] = [];\n    let lastIndex = 0;\n    const variableRegex = /\\{\\{([a-zA-Z_][a-zA-Z0-9_]*)\\}\\}/g;\n    let match;\n    \n    while ((match = variableRegex.exec(text)) !== null) {\n      // Add text before variable (escaped)\n      if (match.index > lastIndex) {\n        const beforeText = text.substring(lastIndex, match.index);\n        parts.push(this.escapeHtml(beforeText));\n      }\n      \n      // Add variable as styled span (with both opening and closing double braces)\n      parts.push(`<span class=\"variable-tag\">{{${match[1]}}}</span>`);\n      lastIndex = variableRegex.lastIndex;\n    }\n    \n    // Add remaining text (escaped)\n    if (lastIndex < text.length) {\n      parts.push(this.escapeHtml(text.substring(lastIndex)));\n    }\n    \n    const html = parts.length > 0 ? parts.join('') : this.escapeHtml(text);\n    \n    // Only update if HTML actually changed to avoid unnecessary DOM manipulation\n    if (element.innerHTML !== html) {\n      // Update HTML\n      element.innerHTML = html;\n      this.lastFormattedContent = text;\n      \n      // Restore cursor position after formatting (only if element was focused)\n      if (selection && isFocused && cursorPosition >= 0) {\n        // Use requestAnimationFrame for better performance and to ensure DOM is updated\n        requestAnimationFrame(() => {\n          // Double-check element is still focused and cursor position is valid\n          if (document.activeElement === element && cursorPosition <= text.length) {\n            this.setCursorPosition(element, cursorPosition);\n          }\n          this.isFormatting = false;\n        });\n      } else {\n        this.isFormatting = false;\n      }\n    } else {\n      this.lastFormattedContent = text;\n      this.isFormatting = false;\n    }\n  }\n\n  getPlainTextFromElement(element: HTMLElement): string {\n    // Get plain text, ignoring HTML tags\n    return element.innerText || element.textContent || '';\n  }\n\n  getTextBeforeCursor(element: HTMLElement, range: Range): string {\n    const text = this.getPlainTextFromElement(element);\n    const cursorPos = this.getCursorPosition(element, range);\n    return text.substring(0, cursorPos);\n  }\n\n  getTextAfterCursor(element: HTMLElement, range: Range): string {\n    const text = this.getPlainTextFromElement(element);\n    const cursorPos = this.getCursorPosition(element, range);\n    return text.substring(cursorPos);\n  }\n\n  getCursorPosition(element: HTMLElement, range: Range): number {\n    // Create a range from start of element to cursor\n    const preCaretRange = range.cloneRange();\n    preCaretRange.selectNodeContents(element);\n    preCaretRange.setEnd(range.endContainer, range.endOffset);\n    \n    // Get the text content up to cursor (this handles HTML correctly)\n    const tempDiv = document.createElement('div');\n    tempDiv.appendChild(preCaretRange.cloneContents());\n    return tempDiv.textContent?.length || 0;\n  }\n\n  setCursorPosition(element: HTMLElement, position: number): void {\n    const selection = window.getSelection();\n    if (!selection) return;\n    \n    // Make sure element is focused\n    if (document.activeElement !== element) {\n      element.focus();\n    }\n    \n    // Get all text nodes in the element\n    const walker = document.createTreeWalker(\n      element,\n      NodeFilter.SHOW_TEXT,\n      null\n    );\n    \n    let currentPos = 0;\n    let targetNode: Text | null = null;\n    let targetOffset = 0;\n    \n    let node: Node | null;\n    while (node = walker.nextNode()) {\n      const textLength = node.textContent?.length || 0;\n      if (currentPos + textLength >= position) {\n        targetNode = node as Text;\n        targetOffset = position - currentPos;\n        break;\n      }\n      currentPos += textLength;\n    }\n    \n    // If we didn't find a node, place at the end\n    if (!targetNode) {\n      const lastNode = this.getLastTextNode(element);\n      if (lastNode) {\n        targetNode = lastNode;\n        targetOffset = lastNode.textContent?.length || 0;\n      } else {\n        // No text nodes, create one\n        const textNode = document.createTextNode('');\n        element.appendChild(textNode);\n        targetNode = textNode;\n        targetOffset = 0;\n      }\n    }\n    \n    if (targetNode) {\n      try {\n        const newRange = document.createRange();\n        const maxOffset = targetNode.textContent?.length || 0;\n        const offset = Math.max(0, Math.min(targetOffset, maxOffset));\n        newRange.setStart(targetNode, offset);\n        newRange.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(newRange);\n        \n        // Scroll into view if needed\n        const rect = newRange.getBoundingClientRect();\n        if (rect.top < 0 || rect.bottom > window.innerHeight) {\n          targetNode.parentElement?.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n        }\n      } catch (e) {\n        // If setting cursor fails, just focus the element\n        console.warn('Failed to set cursor position:', e);\n        element.focus();\n      }\n    }\n  }\n\n  getLastTextNode(element: HTMLElement): Text | null {\n    const walker = document.createTreeWalker(\n      element,\n      NodeFilter.SHOW_TEXT,\n      null\n    );\n    \n    let lastNode: Text | null = null;\n    let node: Node | null;\n    while (node = walker.nextNode()) {\n      lastNode = node as Text;\n    }\n    \n    return lastNode;\n  }\n\n  escapeHtml(text: string): string {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  findTextNodeAtPosition(element: HTMLElement, position: number): Text | null {\n    let currentPos = 0;\n    const walker = document.createTreeWalker(\n      element,\n      NodeFilter.SHOW_TEXT,\n      null\n    );\n    \n    let node;\n    while (node = walker.nextNode()) {\n      const textLength = node.textContent?.length || 0;\n      if (currentPos + textLength >= position) {\n        return node as Text;\n      }\n      currentPos += textLength;\n    }\n    \n    return null;\n  }\n\n  getPlainTextContent(): string {\n    return this.newTemplate.content || '';\n  }\n\n  getPlainTextFromHtml(html: string): string {\n    const div = document.createElement('div');\n    div.innerHTML = html;\n    return div.innerText || div.textContent || '';\n  }\n\n  updateContentEditable(): void {\n    if (this.contentEditableRef) {\n      const element = this.contentEditableRef.nativeElement;\n      if (this.newTemplate.content) {\n        // Reset formatting state\n        this.isFormatting = false;\n        this.lastFormattedContent = '';\n        // Use formatContentWithVariables which handles HTML properly\n        this.formatContentWithVariables(element);\n      } else {\n        element.innerHTML = '';\n        this.lastFormattedContent = '';\n      }\n    }\n  }\n\n  // Message textarea methods\n  getMessageLength(): number {\n    if (this.messageContentEditableRef) {\n      return this.getPlainTextFromElement(this.messageContentEditableRef.nativeElement).length;\n    }\n    return this.form.get('message')?.value?.length || 0;\n  }\n\n  onMessageInput(event: Event): void {\n    const target = event.target as HTMLElement;\n    const text = this.getPlainTextFromElement(target);\n    this.form.patchValue({ message: text });\n    \n    // Don't format if we're currently formatting to avoid cursor issues\n    if (this.isMessageFormatting) {\n      return;\n    }\n    \n    // Clear any pending format operation\n    if (this.messageFormatTimeout) {\n      clearTimeout(this.messageFormatTimeout);\n    }\n    \n    // Check if '{{' was just typed or user is typing after '{{'\n    const selection = window.getSelection();\n    if (selection && selection.rangeCount > 0) {\n      const range = selection.getRangeAt(0);\n      const textBeforeCursor = this.getTextBeforeCursor(target, range);\n      \n      // Find the last '{{' that doesn't have a matching '}}'\n      const lastDoubleBraceIndex = textBeforeCursor.lastIndexOf('{{');\n      if (lastDoubleBraceIndex !== -1) {\n        const textAfterBrace = textBeforeCursor.substring(lastDoubleBraceIndex + 2);\n        if (!textAfterBrace.includes('}}')) {\n          // Show dropdown\n          this.currentMessageBracePosition = lastDoubleBraceIndex;\n          this.showMessageVariablesDropdown = true;\n          \n          // Filter variables based on typed text after '{{'\n          const searchText = textAfterBrace.toLowerCase();\n          this.filteredMessageVariables = this.availableVariables.filter(v => \n            v.name.toLowerCase().includes(searchText) || \n            v.description.toLowerCase().includes(searchText)\n          );\n          \n          // If no matches, show all\n          if (this.filteredMessageVariables.length === 0) {\n            this.filteredMessageVariables = [...this.availableVariables];\n          }\n          \n          this.highlightedMessageVariableIndex = 0;\n          this.updateMessageDropdownPosition(target, range);\n          // Format content to show variables styled (with delay to avoid cursor issues)\n          this.messageFormatTimeout = setTimeout(() => this.formatMessageWithVariables(target), 150);\n          return;\n        }\n      }\n    }\n    \n    // Hide dropdown if '}}' is typed or no '{{' found\n    const hasOpenDoubleBrace = text.includes('{{') && !text.match(/\\{\\{[^}]*$/);\n    if (!hasOpenDoubleBrace) {\n      this.closeMessageVariablesDropdown();\n    }\n    \n    // Format content to show variables styled (with delay to avoid cursor issues during fast typing)\n    // Only format if content actually changed\n    if (text !== this.lastFormattedMessageContent) {\n      this.messageFormatTimeout = setTimeout(() => this.formatMessageWithVariables(target), 200);\n    }\n  }\n\n  onMessageKeydown(event: KeyboardEvent): void {\n    if (this.showMessageVariablesDropdown) {\n      if (event.key === 'ArrowDown') {\n        event.preventDefault();\n        this.highlightedMessageVariableIndex = Math.min(\n          this.highlightedMessageVariableIndex + 1,\n          this.filteredMessageVariables.length - 1\n        );\n        this.scrollToHighlightedMessageVariable();\n      } else if (event.key === 'ArrowUp') {\n        event.preventDefault();\n        this.highlightedMessageVariableIndex = Math.max(this.highlightedMessageVariableIndex - 1, 0);\n        this.scrollToHighlightedMessageVariable();\n      } else if (event.key === 'Enter') {\n        event.preventDefault();\n        if (this.filteredMessageVariables[this.highlightedMessageVariableIndex]) {\n          this.selectMessageVariable(this.filteredMessageVariables[this.highlightedMessageVariableIndex]);\n        }\n      } else if (event.key === 'Escape') {\n        event.preventDefault();\n        this.closeMessageVariablesDropdown();\n      } else if (event.key === '}') {\n        // Close dropdown when '}' is typed (second closing brace)\n        const target = event.target as HTMLElement;\n        const selection = window.getSelection();\n        if (selection && selection.rangeCount > 0) {\n          const range = selection.getRangeAt(0);\n          const textBeforeCursor = this.getTextBeforeCursor(target, range);\n          // Check if we already have one '}' before cursor\n          if (textBeforeCursor.endsWith('}')) {\n            // This is the second '}', close dropdown\n            event.preventDefault();\n            this.closeMessageVariablesDropdown();\n          }\n        }\n      }\n    }\n  }\n\n  onMessageClick(): void {\n    // Keep dropdown open if clicking in contenteditable\n  }\n\n  onMessageBlur(event: FocusEvent): void {\n    const relatedTarget = event.relatedTarget as HTMLElement;\n    if (relatedTarget && !relatedTarget.closest('.variables-dropdown')) {\n      setTimeout(() => {\n        if (document.activeElement !== this.messageContentEditableRef?.nativeElement) {\n          this.closeMessageVariablesDropdown();\n        }\n      }, 200);\n    }\n  }\n\n  updateMessageDropdownPosition(element: HTMLElement, range: Range): void {\n    const rect = range.getBoundingClientRect();\n    const parentRect = element.getBoundingClientRect();\n    const scrollTop = element.scrollTop || 0;\n    const scrollLeft = element.scrollLeft || 0;\n    \n    this.messageDropdownPosition = {\n      top: rect.bottom - parentRect.top + scrollTop + 5,\n      left: rect.left - parentRect.left + scrollLeft\n    };\n  }\n\n  selectMessageVariable(variable: typeof this.availableVariables[0]): void {\n    const target = this.messageContentEditableRef?.nativeElement;\n    if (!target) return;\n\n    const selection = window.getSelection();\n    if (!selection || selection.rangeCount === 0) return;\n    \n    const range = selection.getRangeAt(0);\n    const text = this.getPlainTextFromElement(target);\n    \n    // Find the position of the last '{{'\n    const textBeforeCursor = this.getTextBeforeCursor(target, range);\n    const lastDoubleBraceIndex = textBeforeCursor.lastIndexOf('{{');\n    \n    if (lastDoubleBraceIndex === -1) {\n      this.closeMessageVariablesDropdown();\n      return;\n    }\n    \n    // Get cursor position in plain text\n    const cursorPos = this.getCursorPosition(target, range);\n    \n    // Build new content: everything before '{{' + '{{' + variable name + '}}' + everything after cursor\n    // Extract variable name without braces (variable.name might already include {{}})\n    const variableName = variable.name.replace(/[{}]/g, '');\n    const beforeBrace = text.substring(0, lastDoubleBraceIndex + 2);\n    const afterCursor = text.substring(cursorPos);\n    const newContent = beforeBrace + variableName + '}}' + afterCursor;\n    \n    // Update form\n    this.form.patchValue({ message: newContent });\n    \n    // Format and update element\n    this.formatMessageWithVariables(target);\n    \n    // Move cursor after the inserted variable (after the closing '}}')\n    setTimeout(() => {\n      const newCursorPos = lastDoubleBraceIndex + 2 + variable.name.length + 2;\n      this.setCursorPosition(target, newCursorPos);\n    }, 20);\n    \n    this.closeMessageVariablesDropdown();\n  }\n\n  closeMessageVariablesDropdown(): void {\n    this.showMessageVariablesDropdown = false;\n    this.highlightedMessageVariableIndex = 0;\n    this.currentMessageBracePosition = -1;\n  }\n\n  formatMessageWithVariables(element: HTMLElement): void {\n    if (this.isMessageFormatting) {\n      return;\n    }\n    \n    this.isMessageFormatting = true;\n    \n    const text = this.form.get('message')?.value || this.getPlainTextFromElement(element);\n    if (!text) {\n      element.innerHTML = '';\n      this.lastFormattedMessageContent = '';\n      this.isMessageFormatting = false;\n      return;\n    }\n    \n    if (text === this.lastFormattedMessageContent) {\n      this.isMessageFormatting = false;\n      return;\n    }\n    \n    const selection = window.getSelection();\n    let cursorPosition = 0;\n    let isFocused = document.activeElement === element;\n    \n    if (selection && selection.rangeCount > 0 && isFocused) {\n      try {\n        const range = selection.getRangeAt(0);\n        cursorPosition = this.getCursorPosition(element, range);\n      } catch (e) {\n        cursorPosition = text.length;\n      }\n    }\n    \n    // Replace complete {{variable}} patterns with styled spans\n    const parts: string[] = [];\n    let lastIndex = 0;\n    const variableRegex = /\\{\\{([a-zA-Z_][a-zA-Z0-9_]*)\\}\\}/g;\n    let match;\n    \n    while ((match = variableRegex.exec(text)) !== null) {\n      if (match.index > lastIndex) {\n        const beforeText = text.substring(lastIndex, match.index);\n        parts.push(this.escapeHtml(beforeText));\n      }\n      parts.push(`<span class=\"variable-tag\">{{${match[1]}}}</span>`);\n      lastIndex = variableRegex.lastIndex;\n    }\n    \n    if (lastIndex < text.length) {\n      parts.push(this.escapeHtml(text.substring(lastIndex)));\n    }\n    \n    const html = parts.length > 0 ? parts.join('') : this.escapeHtml(text);\n    \n    if (element.innerHTML !== html) {\n      element.innerHTML = html;\n      this.lastFormattedMessageContent = text;\n      \n      if (selection && isFocused && cursorPosition >= 0) {\n        requestAnimationFrame(() => {\n          if (document.activeElement === element && cursorPosition <= text.length) {\n            this.setCursorPosition(element, cursorPosition);\n          }\n          this.isMessageFormatting = false;\n        });\n      } else {\n        this.isMessageFormatting = false;\n      }\n    } else {\n      this.lastFormattedMessageContent = text;\n      this.isMessageFormatting = false;\n    }\n  }\n\n  scrollToHighlightedMessageVariable(): void {\n    setTimeout(() => {\n      const dropdown = document.querySelector('.variables-dropdown');\n      const highlighted = document.querySelector('.variable-option.highlighted');\n      if (dropdown && highlighted) {\n        highlighted.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }, 0);\n  }\n}\n\n", "import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ModalComponent } from '../modal/modal.component';\nimport { BadgeComponent } from '../badge/badge.component';\n\nexport type MessageType = 'whatsapp' | 'email';\n\nexport interface MessageDetails {\n  id: string;\n  type: MessageType;\n  recipient: string; // phone –¥–ª—è WhatsApp, email –¥–ª—è Email\n  subject?: string; // —Ç–æ–ª—å–∫–æ –¥–ª—è Email\n  message: string;\n  sentAt: Date;\n  status: 'sent' | 'pending' | 'failed';\n  templateName?: string;\n  initiatedByUsername?: string;\n}\n\n@Component({\n  selector: 'app-message-details-modal',\n  standalone: true,\n  imports: [CommonModule, ModalComponent, BadgeComponent],\n  template: `\n    <app-modal\n      [visible]=\"visible\"\n      [title]=\"getModalTitle()\"\n      [showCloseButton]=\"true\"\n      (visibleChange)=\"onClose()\">\n      <div class=\"message-details-content\" *ngIf=\"message\">\n        <!-- Recipient Info -->\n        <div class=\"detail-section\">\n          <div class=\"detail-label\">–ü–æ–ª—É—á–∞—Ç–µ–ª—å</div>\n          <div class=\"detail-value recipient-value\">\n            <div class=\"recipient-icon\" [class.whatsapp]=\"message.type === 'whatsapp'\" [class.email]=\"message.type === 'email'\">\n              <svg *ngIf=\"message.type === 'whatsapp'\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z\" fill=\"currentColor\"/>\n                <path d=\"M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2 22l4.832-1.438A9.955 9.955 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2z\" fill=\"currentColor\"/>\n              </svg>\n              <svg *ngIf=\"message.type === 'email'\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M22 6l-10 7L2 6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>\n            </div>\n            <span>{{ message.recipient || '–ù–µ —É–∫–∞–∑–∞–Ω' }}</span>\n          </div>\n        </div>\n\n        <!-- Subject (only for Email) -->\n        <div class=\"detail-section\" *ngIf=\"message.type === 'email' && message.subject\">\n          <div class=\"detail-label\">–¢–µ–º–∞ –ø–∏—Å—å–º–∞</div>\n          <div class=\"detail-value\">{{ message.subject }}</div>\n        </div>\n\n        <!-- Sent Time -->\n        <div class=\"detail-section\">\n          <div class=\"detail-label\">–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏</div>\n          <div class=\"detail-value\">\n            <div class=\"time-info\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                <path d=\"M12 6v6l4 2\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n              </svg>\n              <span>{{ formatDateTime(message.sentAt) }}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Status -->\n        <div class=\"detail-section\">\n          <div class=\"detail-label\">–°—Ç–∞—Ç—É—Å</div>\n          <div class=\"detail-value\">\n            <app-badge \n              [badgeType]=\"getStatusBadgeType(message.status)\" \n              size=\"medium\">\n              {{ getStatusLabel(message.status) }}\n            </app-badge>\n          </div>\n        </div>\n\n        <!-- Template (if used) -->\n        <div class=\"detail-section\" *ngIf=\"message.templateName\">\n          <div class=\"detail-label\">–®–∞–±–ª–æ–Ω</div>\n          <div class=\"detail-value\">\n            <span class=\"template-badge\">{{ message.templateName }}</span>\n          </div>\n        </div>\n\n        <!-- Initiated By -->\n        <div class=\"detail-section\" *ngIf=\"message.initiatedByUsername\">\n          <div class=\"detail-label\">–û—Ç–ø—Ä–∞–≤–∏–ª</div>\n          <div class=\"detail-value\">\n            <div class=\"sender-info\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <circle cx=\"12\" cy=\"7\" r=\"4\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>\n              <span>{{ message.initiatedByUsername }}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Message Content -->\n        <div class=\"detail-section message-section\">\n          <div class=\"detail-label\">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>\n          <div class=\"message-content\">\n            <pre class=\"message-text\">{{ message.message }}</pre>\n          </div>\n        </div>\n      </div>\n    </app-modal>\n  `,\n  styles: [`\n    .message-details-content {\n      display: flex;\n      flex-direction: column;\n      gap: 1.5rem;\n      padding: 0.5rem 0;\n    }\n\n    .detail-section {\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n\n    .detail-label {\n      font-size: 0.875rem;\n      font-weight: 600;\n      color: #64748b;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .detail-value {\n      font-size: 0.9375rem;\n      color: #1f2937;\n      font-weight: 500;\n    }\n\n    .recipient-value {\n      display: flex;\n      align-items: center;\n      gap: 0.75rem;\n    }\n\n    .recipient-icon {\n      width: 32px;\n      height: 32px;\n      border-radius: 8px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n\n    .recipient-icon.whatsapp {\n      background: linear-gradient(135deg, #dcfce7, #bbf7d0);\n      color: #25D366;\n    }\n\n    .recipient-icon.email {\n      background: linear-gradient(135deg, #dbeafe, #bfdbfe);\n      color: #3b82f6;\n    }\n\n    .recipient-icon svg {\n      width: 18px;\n      height: 18px;\n    }\n\n    .time-info {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n    }\n\n    .time-info svg {\n      width: 18px;\n      height: 18px;\n      color: #64748b;\n    }\n\n    .template-badge {\n      display: inline-block;\n      padding: 0.375rem 0.75rem;\n      background: #f0fdf4;\n      color: #16A34A;\n      border-radius: 8px;\n      font-size: 0.875rem;\n      font-weight: 500;\n    }\n\n    .sender-info {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n    }\n\n    .sender-info svg {\n      width: 18px;\n      height: 18px;\n      color: #64748b;\n      flex-shrink: 0;\n    }\n\n    .message-section {\n      margin-top: 0.5rem;\n    }\n\n    .message-content {\n      background: #f8fafc;\n      border: 1px solid #e2e8f0;\n      border-radius: 12px;\n      padding: 1rem;\n      max-height: 400px;\n      overflow-y: auto;\n    }\n\n    .message-text {\n      margin: 0;\n      font-size: 0.9375rem;\n      line-height: 1.6;\n      color: #1f2937;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      font-family: inherit;\n    }\n\n    /* Scrollbar styling */\n    .message-content::-webkit-scrollbar {\n      width: 6px;\n    }\n\n    .message-content::-webkit-scrollbar-track {\n      background: #f1f5f9;\n      border-radius: 3px;\n    }\n\n    .message-content::-webkit-scrollbar-thumb {\n      background: #cbd5e1;\n      border-radius: 3px;\n    }\n\n    .message-content::-webkit-scrollbar-thumb:hover {\n      background: #94a3b8;\n    }\n  `]\n})\nexport class MessageDetailsModalComponent {\n  @Input() visible = false;\n  @Input() message: MessageDetails | null = null;\n\n  @Output() visibleChange = new EventEmitter<boolean>();\n\n  getModalTitle(): string {\n    if (!this.message) return '–î–µ—Ç–∞–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è';\n    return this.message.type === 'whatsapp' ? '–î–µ—Ç–∞–ª–∏ WhatsApp —Å–æ–æ–±—â–µ–Ω–∏—è' : '–î–µ—Ç–∞–ª–∏ Email —Å–æ–æ–±—â–µ–Ω–∏—è';\n  }\n\n  formatDateTime(date: Date): string {\n    const d = new Date(date);\n    const dateStr = d.toLocaleDateString('ru-RU', { \n      day: '2-digit', \n      month: 'long', \n      year: 'numeric' \n    });\n    const timeStr = d.toLocaleTimeString('ru-RU', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n    return `${dateStr} –≤ ${timeStr}`;\n  }\n\n  getStatusBadgeType(status: string): 'success' | 'warning' | 'danger' {\n    switch (status) {\n      case 'sent': return 'success';\n      case 'pending': return 'warning';\n      case 'failed': return 'danger';\n      default: return 'success';\n    }\n  }\n\n  getStatusLabel(status: string): string {\n    switch (status) {\n      case 'sent': return '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ';\n      case 'pending': return '–û–∂–∏–¥–∞–µ—Ç';\n      case 'failed': return '–û—à–∏–±–∫–∞';\n      default: return status;\n    }\n  }\n\n  onClose(): void {\n    this.visibleChange.emit(false);\n  }\n}\n", "import { Component, OnInit, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { AppState } from '../../../../core/store/app.state';\nimport { selectUser } from '../../../../core/store/auth/auth.selectors';\nimport { AuthUser } from '../../../../core/models/user.model';\nimport { PageHeaderService } from '../../../../core/services/page-header.service';\nimport { MessageTemplatesService, MessageTemplate as ApiMessageTemplate } from '../../../../core/services/message-templates.service';\nimport { MessagesService, MessageRecord } from '../../../../core/services/messages.service';\nimport { ToastService } from '../../../../core/services/toast.service';\n\n// Shared Components\nimport { BadgeComponent } from '../../../../shared/components/badge/badge.component';\nimport { IconButtonComponent } from '../../../../shared/components/icon-button/icon-button.component';\nimport { InvitationFormComponent, MessageTemplate } from '../../../../shared/components/invitation-form/invitation-form.component';\nimport { MessageDetailsModalComponent, MessageDetails } from '../../../../shared/components/message-details-modal/message-details-modal.component';\nimport { PaginatedTableWrapperComponent } from '../../../../shared/components/paginated-table-wrapper/paginated-table-wrapper.component';\n\ninterface InvitationHistory {\n  id: string;\n  phone: string;\n  clientName?: string;\n  message: string;\n  sentAt: Date;\n  createdAt?: Date;\n  status: 'sent' | 'pending' | 'failed';\n  templateId?: string;\n  templateName?: string;\n  templateType?: string; // Can be any string from API\n  type: 'whatsapp';\n  initiatedByUsername?: string;\n}\n\n@Component({\n  selector: 'app-invitation-page',\n  standalone: true,\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    BadgeComponent,\n    IconButtonComponent,\n    InvitationFormComponent,\n    MessageDetailsModalComponent,\n    PaginatedTableWrapperComponent\n  ],\n  template: `\n    <div class=\"invitation-page\">\n      <app-invitation-form\n        [invitationType]=\"'whatsapp'\"\n        [form]=\"invitationForm\"\n        [title]=\"'–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞'\"\n        [subtitle]=\"'–û—Ç–ø—Ä–∞–≤—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WhatsApp'\"\n        [iconSvg]=\"whatsappIconSvg\"\n        [iconColor]=\"'#25D366'\"\n        [previewDescription]=\"'–¢–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ WhatsApp'\"\n        [messageTemplates]=\"messageTemplates\"\n        [isSending]=\"isSending\"\n        [successMessage]=\"successMessage\"\n        [errorMessage]=\"errorMessage\"\n        [hideForm]=\"true\"\n        [templateTypes]=\"templateTypes\"\n        [templateVariables]=\"templateVariables\"\n        (formSubmit)=\"onSubmit()\"\n        (templateSelected)=\"onTemplateSelected($event)\"\n        (templateCreated)=\"onTemplateCreated($event)\"\n        (templateUpdated)=\"onTemplateUpdated($event)\"\n        (templateDeleted)=\"onTemplateDeleted($event)\">\n      </app-invitation-form>\n\n      <!-- History Section -->\n      <div class=\"section-block history-block\">\n        <div class=\"section-title\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" class=\"title-icon\">\n            <path d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n          <h3 class=\"section-heading\">–ò—Å—Ç–æ—Ä–∏—è</h3>\n          <app-badge \n            *ngIf=\"invitationHistory.length\" \n            badgeType=\"secondary\" \n            size=\"small\"\n            class=\"history-badge\">\n            {{ invitationHistory.length }}\n          </app-badge>\n        </div>\n        <p class=\"section-description\">–ò—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</p>\n\n        <div class=\"history-empty\" *ngIf=\"invitationHistory.length === 0\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" class=\"empty-icon\">\n            <path d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n          <p class=\"empty-text\">–í—ã –µ—â—ë –Ω–∏–∫–æ–≥–æ –Ω–µ –ø—Ä–∏–≥–ª–∞—à–∞–ª–∏</p>\n        </div>\n\n        <app-paginated-table-wrapper\n          *ngIf=\"invitationHistory.length > 0\"\n          [paginationEnabled]=\"true\"\n          [data]=\"invitationHistory\"\n          [defaultPageSize]=\"15\"\n          #paginatedTable>\n          \n          <div class=\"table-container\">\n            <table class=\"history-table\">\n              <thead>\n                <tr>\n                  <th>–ü–æ–ª—É—á–∞—Ç–µ–ª—å</th>\n                  <th>–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏</th>\n                  <th>–®–∞–±–ª–æ–Ω</th>\n                  <th>–û—Ç–ø—Ä–∞–≤–∏–ª</th>\n                  <th>–°—Ç–∞—Ç—É—Å</th>\n                  <th>–î–µ–π—Å—Ç–≤–∏—è</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"let item of paginatedTable.paginatedData\">\n                  <td>\n                    <div class=\"recipient-cell\">\n                      <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                        <path d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                      </svg>\n                      <span class=\"recipient-value\">{{ getSafeClientName(item) }}</span>\n                    </div>\n                  </td>\n                  <td>\n                    <span class=\"time-value\">{{ formatDate(item.createdAt || item.sentAt) }}</span>\n                  </td>\n                  <td>\n                    <span class=\"template-name\" *ngIf=\"item.templateName\">\n                      {{ item.templateName }}\n                    </span>\n                    <span class=\"no-template\" *ngIf=\"!item.templateName\">‚Äî</span>\n                  </td>\n                  <td>\n                    <span class=\"sender-value\">{{ item.initiatedByUsername || '‚Äî' }}</span>\n                  </td>\n                  <td>\n                    <app-badge \n                      [badgeType]=\"getStatusBadgeType(item.status)\" \n                      size=\"small\">\n                      {{ getStatusLabel(item.status) }}\n                    </app-badge>\n                  </td>\n                  <td>\n                    <div class=\"actions-cell\">\n                      <app-icon-button\n                        iconButtonType=\"ghost\"\n                        size=\"small\"\n                        tooltip=\"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏\"\n                        (onClick)=\"openMessageDetails(item)\">\n                        <svg viewBox=\"0 0 24 24\" fill=\"none\">\n                          <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                          <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                        </svg>\n                      </app-icon-button>\n                    </div>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </app-paginated-table-wrapper>\n      </div>\n\n      <!-- Message Details Modal -->\n      <app-message-details-modal\n        [visible]=\"showMessageDetailsModal\"\n        [message]=\"selectedMessage\"\n        (visibleChange)=\"showMessageDetailsModal = $event\">\n      </app-message-details-modal>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      height: 100%;\n      margin: -2rem;\n    }\n\n    .invitation-page {\n      display: flex;\n      flex-direction: column;\n      gap: 1.5rem;\n      min-height: calc(100vh - 64px - 4rem);\n      padding: 2rem;\n      background: linear-gradient(180deg, #f0fdf4 0%, #f8fafc 50%, #f8fafc 100%);\n    }\n\n    /* History Section */\n    .section-block {\n      background: white;\n      border-radius: 24px;\n      padding: 1.5rem;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n    }\n\n    .section-title {\n      display: flex;\n      align-items: center;\n      gap: 0.625rem;\n      margin-bottom: 0.25rem;\n    }\n\n    .title-icon {\n      width: 22px;\n      height: 22px;\n      color: #25D366;\n    }\n\n    .section-heading {\n      font-size: 1.125rem;\n      font-weight: 600;\n      color: #1f2937;\n      margin: 0;\n    }\n\n    .section-description {\n      font-size: 0.875rem;\n      color: #9ca3af;\n      margin: 0 0 1.25rem 0;\n    }\n\n    .history-badge {\n      margin-left: auto;\n    }\n\n    .history-empty {\n      text-align: center;\n      padding: 2.5rem 1rem;\n    }\n\n    .empty-icon {\n      width: 56px;\n      height: 56px;\n      color: #d1d5db;\n      margin: 0 auto 1rem;\n      display: block;\n    }\n\n    .empty-text {\n      font-size: 0.875rem;\n      color: #9ca3af;\n      margin: 0;\n    }\n\n    .table-container {\n      background: white;\n      border-radius: 12px;\n      overflow: hidden;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n    }\n\n    .history-table {\n      width: 100%;\n      border-collapse: collapse;\n    }\n\n    .history-table thead {\n      background: #f8fafc;\n    }\n\n    .history-table th {\n      padding: 1rem 1.5rem;\n      text-align: left;\n      font-size: 0.875rem;\n      font-weight: 600;\n      color: #64748b;\n      border-bottom: 1px solid #e2e8f0;\n    }\n\n    .history-table td {\n      padding: 1rem 1.5rem;\n      border-bottom: 1px solid #f1f5f9;\n    }\n\n    .history-table tbody tr:hover {\n      background: #f8fafc;\n    }\n\n    .history-table tbody tr:last-child td {\n      border-bottom: none;\n    }\n\n    .recipient-cell {\n      display: flex;\n      align-items: center;\n      gap: 0.75rem;\n    }\n\n    .recipient-cell svg {\n      width: 20px;\n      height: 20px;\n      color: #16a34a;\n      flex-shrink: 0;\n    }\n\n    .recipient-value {\n      font-size: 0.9375rem;\n      font-weight: 600;\n      color: #1f2937;\n    }\n\n    .time-value {\n      font-size: 0.875rem;\n      color: #64748b;\n    }\n\n    .template-type-badge {\n      display: inline-block;\n      padding: 0.375rem 0.75rem;\n      background: #f0fdf4;\n      color: #16A34A;\n      border-radius: 8px;\n      font-size: 0.875rem;\n      font-weight: 500;\n    }\n\n    .template-name {\n      font-size: 0.875rem;\n      color: #475569;\n      font-weight: 500;\n    }\n\n    .no-template {\n      font-size: 0.875rem;\n      color: #94a3b8;\n      font-style: italic;\n    }\n\n    .sender-value {\n      font-size: 0.875rem;\n      color: #475569;\n      font-weight: 500;\n    }\n\n    .actions-cell {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n    }\n\n    /* Responsive */\n    @media (max-width: 768px) {\n      :host {\n        margin: -1rem;\n      }\n\n      .invitation-page {\n        padding: 1rem;\n      }\n    }\n  `]\n})\nexport class InvitationPageComponent implements OnInit {\n  user$: Observable<AuthUser | null>;\n  invitationForm: FormGroup;\n  \n  isSending = false;\n  successMessage = '';\n  errorMessage = '';\n  \n  invitationHistory: InvitationHistory[] = [];\n  messageTemplates: MessageTemplate[] = [];\n  selectedTemplateId: string | null = null;\n\n  showMessageDetailsModal = false;\n  selectedMessage: MessageDetails | null = null;\n\n  isLoading = false;\n  isLoadingTemplates = false;\n  templateTypes: Array<{ type: string; displayName: string }> = [];\n  templateVariables: Array<{ name: string; description: string }> = [];\n\n  whatsappIconSvg: string;\n\n  private pageHeaderService = inject(PageHeaderService);\n  private messageTemplatesService = inject(MessageTemplatesService);\n  private messagesService = inject(MessagesService);\n  private toastService = inject(ToastService);\n\n  private defaultMessage = `–ü—Ä–∏–≤–µ—Ç! üëã\n\n–ü—Ä–∏–≥–ª–∞—à–∞—é —Ç–µ–±—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ Westwood ‚Äî —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è.\n\n–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –ø–æ —Å—Å—ã–ª–∫–µ:\nhttps://westwood.app/register`;\n\n  constructor(\n    private fb: FormBuilder,\n    private store: Store<AppState>\n  ) {\n    this.user$ = this.store.select(selectUser);\n    \n    this.invitationForm = this.fb.group({\n      message: [this.defaultMessage, [Validators.required]]\n    });\n\n    this.whatsappIconSvg = `\n      <svg viewBox=\"0 0 24 24\" fill=\"none\">\n        <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z\" fill=\"currentColor\"/>\n        <path d=\"M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2 22l4.832-1.438A9.955 9.955 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2z\" fill=\"currentColor\"/>\n      </svg>\n    `;\n  }\n\n  ngOnInit(): void {\n    this.pageHeaderService.setPageHeader('WhatsApp –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è', [\n      { label: '–ì–ª–∞–≤–Ω–∞—è', route: '/home' },\n      { label: '–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è' },\n      { label: 'WhatsApp' }\n    ]);\n    this.loadHistory();\n    this.loadTemplates();\n    this.loadTemplateTypes();\n    this.loadTemplateVariables();\n  }\n\n  onSubmit(): void {\n    if (this.invitationForm.valid) {\n      this.isSending = true;\n      this.errorMessage = '';\n      this.successMessage = '';\n\n      const message = this.invitationForm.get('message')?.value || '';\n\n      // –î–ª—è WhatsApp –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞\n      // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ\n      setTimeout(() => {\n        try {\n          const selectedTemplate = this.selectedTemplateId \n            ? this.messageTemplates.find(t => t.id === this.selectedTemplateId)\n            : null;\n          \n          // Note: Actual message sending should be handled by the /send endpoint in another part of the app\n          // Here we just show success message\n          this.successMessage = '–°–æ–æ–±—â–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ';\n          \n          // Reload history to get latest messages from backend\n          this.loadHistory();\n          this.invitationForm.patchValue({ message: this.defaultMessage });\n          this.selectedTemplateId = null;\n        } catch (error) {\n          this.errorMessage = '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞';\n        }\n        this.isSending = false;\n      }, 600);\n    }\n  }\n\n  onTemplateSelected(template: MessageTemplate): void {\n    this.selectedTemplateId = template.id;\n  }\n\n  onTemplateCreated(template: MessageTemplate): void {\n    // Map frontend template to API format\n    const apiTemplate: ApiMessageTemplate = {\n      id: template.id,\n      name: template.name,\n      type: template.type,\n      content: template.content,\n      createdAt: template.createdAt?.toISOString()\n    };\n\n    this.messageTemplatesService.createTemplate({\n      name: apiTemplate.name,\n      type: apiTemplate.type,\n      content: apiTemplate.content\n    }).subscribe({\n      next: (createdTemplate) => {\n        const frontendTemplate = this.mapApiTemplateToFrontend(createdTemplate);\n        this.messageTemplates.push(frontendTemplate);\n        this.toastService.success('–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω');\n      },\n      error: (err) => {\n        const errorMessage = err.error?.message || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞';\n        this.toastService.error(errorMessage);\n      }\n    });\n  }\n\n  onTemplateUpdated(template: MessageTemplate): void {\n    // Map frontend template to API format\n    const apiTemplate: ApiMessageTemplate = {\n      id: template.id,\n      name: template.name,\n      type: template.type,\n      content: template.content\n    };\n\n    this.messageTemplatesService.updateTemplate(template.id, {\n      name: apiTemplate.name,\n      type: apiTemplate.type,\n      content: apiTemplate.content\n    }).subscribe({\n      next: (updatedTemplate) => {\n        const frontendTemplate = this.mapApiTemplateToFrontend(updatedTemplate);\n        const index = this.messageTemplates.findIndex(t => t.id === template.id);\n        if (index !== -1) {\n          this.messageTemplates[index] = frontendTemplate;\n        }\n        this.toastService.success('–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω');\n      },\n      error: (err) => {\n        const errorMessage = err.error?.message || '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞';\n        this.toastService.error(errorMessage);\n      }\n    });\n  }\n\n  onTemplateDeleted(templateId: string): void {\n    this.messageTemplatesService.deleteTemplate(templateId).subscribe({\n      next: () => {\n        this.messageTemplates = this.messageTemplates.filter(t => t.id !== templateId);\n        this.toastService.success('–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω');\n      },\n      error: (err) => {\n        const errorMessage = err.error?.message || '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞';\n        this.toastService.error(errorMessage);\n      }\n    });\n  }\n\n  formatPhone(phone: string): string {\n    if (!phone) return '–ù–µ —É–∫–∞–∑–∞–Ω';\n    const cleaned = phone.replace(/[^\\d]/g, '');\n    if (cleaned.length === 11 && cleaned.startsWith('7')) {\n      return `+7 ${cleaned.slice(1, 4)} ${cleaned.slice(4, 7)}-${cleaned.slice(7, 9)}-${cleaned.slice(9)}`;\n    }\n    return phone;\n  }\n\n  formatDate(date: Date | undefined | null): string {\n    if (!date) return '‚Äî';\n    const d = date instanceof Date ? date : new Date(date);\n    if (isNaN(d.getTime())) return '‚Äî';\n    \n    const now = new Date();\n    const diffMs = now.getTime() - d.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    const diffHours = Math.floor(diffMs / 3600000);\n\n    if (diffMins < 1) return '–¢–æ–ª—å–∫–æ —á—Ç–æ';\n    if (diffMins < 60) return `${diffMins} –º–∏–Ω –Ω–∞–∑–∞–¥`;\n    if (diffHours < 24) return `${diffHours} —á –Ω–∞–∑–∞–¥`;\n    \n    return d.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' });\n  }\n\n  getStatusBadgeType(status: string): 'success' | 'warning' | 'danger' {\n    switch (status) {\n      case 'sent': return 'success';\n      case 'pending': return 'warning';\n      case 'failed': return 'danger';\n      default: return 'success';\n    }\n  }\n\n  getStatusLabel(status: string): string {\n    switch (status) {\n      case 'sent': return '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ';\n      case 'pending': return '–û–∂–∏–¥–∞–µ—Ç';\n      case 'failed': return '–û—à–∏–±–∫–∞';\n      default: return status;\n    }\n  }\n\n  getTemplateTypeLabel(type: 'bonus_accrued' | 'bonus_expiration'): string {\n    switch (type) {\n      case 'bonus_accrued': return '–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤';\n      case 'bonus_expiration': return '–ò—Å—Ç–µ—á–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤';\n      default: return type;\n    }\n  }\n\n  openMessageDetails(item: InvitationHistory): void {\n    const recipient = this.getSafeClientName(item);\n    this.selectedMessage = {\n      id: item.id,\n      type: 'whatsapp',\n      recipient,\n      message: item.message,\n      sentAt: item.createdAt || item.sentAt,\n      status: item.status,\n      templateName: item.templateName,\n      initiatedByUsername: item.initiatedByUsername\n    };\n    this.showMessageDetailsModal = true;\n  }\n\n  resendInvitation(item: InvitationHistory, event?: Event): void {\n    if (event) {\n      event.stopPropagation();\n    }\n    this.invitationForm.patchValue({\n      message: item.message\n    });\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n\n  private loadHistory(): void {\n    this.isLoading = true;\n    this.messagesService.getMessagesByChannel('WHATSAPP').subscribe({\n      next: (messages) => {\n        this.invitationHistory = messages.map(msg => this.mapMessageRecordToHistory(msg));\n        this.isLoading = false;\n      },\n      error: (err) => {\n        const errorMessage = err.error?.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π';\n        this.toastService.error(errorMessage);\n        this.isLoading = false;\n        this.invitationHistory = [];\n      }\n    });\n  }\n\n  private loadTemplates(): void {\n    this.isLoadingTemplates = true;\n    this.messageTemplatesService.getAllTemplates().subscribe({\n      next: (templates) => {\n        this.messageTemplates = templates.map(t => this.mapApiTemplateToFrontend(t));\n        this.isLoadingTemplates = false;\n      },\n      error: (err) => {\n        const errorMessage = err.error?.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤';\n        this.toastService.error(errorMessage);\n        this.isLoadingTemplates = false;\n        this.messageTemplates = [];\n      }\n    });\n  }\n\n  private mapMessageRecordToHistory(record: MessageRecord): InvitationHistory {\n    return {\n      id: record.id,\n      phone: '', // Phone number might need to be fetched from client data\n      clientName: record.clientName,\n      message: record.messageContent,\n      sentAt: record.sentAt ? new Date(record.sentAt) : new Date(),\n      createdAt: record.createdAt ? new Date(record.createdAt) : undefined,\n      status: this.mapMessageStatus(record.status),\n      templateId: undefined, // May need to extract from message content or add to API response\n      templateName: undefined,\n      templateType: undefined,\n      type: 'whatsapp',\n      initiatedByUsername: record.initiatedByUsername\n    };\n  }\n\n  private mapApiTemplateToFrontend(template: ApiMessageTemplate): MessageTemplate {\n    return {\n      id: template.id,\n      name: template.name,\n      type: template.type, // Use API type directly\n      content: template.content,\n      createdAt: template.createdAt ? new Date(template.createdAt) : new Date()\n    };\n  }\n\n  private mapMessageStatus(status: string): 'sent' | 'pending' | 'failed' {\n    const statusLower = status.toLowerCase();\n    if (statusLower === 'sent' || statusLower === 'delivered') {\n      return 'sent';\n    }\n    if (statusLower === 'pending' || statusLower === 'sending') {\n      return 'pending';\n    }\n    if (statusLower === 'failed' || statusLower === 'error') {\n      return 'failed';\n    }\n    return 'sent'; // Default\n  }\n\n  private loadTemplateTypes(): void {\n    this.messageTemplatesService.getTemplateTypes().subscribe({\n      next: (types) => {\n        this.templateTypes = types;\n      },\n      error: (err) => {\n        const errorMessage = err.error?.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤';\n        this.toastService.error(errorMessage);\n        this.templateTypes = [];\n      }\n    });\n  }\n\n  private loadTemplateVariables(): void {\n    this.messageTemplatesService.getTemplateVariables().subscribe({\n      next: (variables) => {\n        // Map API variables to format expected by form component\n        this.templateVariables = variables.map(v => ({\n          name: `{{${v.name}}}`,\n          description: v.description\n        }));\n      },\n      error: (err) => {\n        const errorMessage = err.error?.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤';\n        this.toastService.error(errorMessage);\n        this.templateVariables = [];\n      }\n    });\n  }\n\n  getSafeClientName(item: InvitationHistory): string {\n    const rawName = item.clientName ?? '';\n    // Remove literal \"null\" parts and extra spaces\n    let cleanedName = rawName.replace(/null/gi, '').replace(/\\s+/g, ' ').trim();\n\n    if (!cleanedName) {\n      // Fallback to formatted phone if name is empty or only contained \"null\"\n      return this.formatPhone(item.phone);\n    }\n\n    return cleanedName;\n  }\n}\n"],
  "mappings": "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",
  "names": ["_c0"]
}
