{
  "version": 3,
  "sources": ["src/app/shared/components/refund-confirmation-modal/refund-confirmation-modal.component.ts"],
  "sourcesContent": ["import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ModalComponent } from '../modal/modal.component';\nimport { ButtonComponent } from '../button/button.component';\n\nexport interface Payment {\n  id: string;\n  clientId: string;\n  clientName: string;\n  clientPhone: string;\n  amount: number;\n  bonusEarned: number;\n  bonusUsed: number;\n  bonusRevoked: number;\n  paymentMethod: 'cash' | 'card' | 'transfer';\n  isRefund: boolean;\n  date: string;\n  time: string;\n  comment?: string;\n  refundReason?: string;\n}\n\n@Component({\n  selector: 'app-refund-confirmation-modal',\n  standalone: true,\n  imports: [CommonModule, FormsModule, ModalComponent, ButtonComponent],\n  template: `\n    <app-modal\n      [visible]=\"visible\"\n      [title]=\"'Подтверждение возврата'\"\n      [showCloseButton]=\"true\"\n      (visibleChange)=\"onClose()\">\n      <div class=\"refund-modal-content\" *ngIf=\"payment\">\n        <p class=\"refund-question\">\n          Вы уверены, что хотите вернуть платеж?\n        </p>\n        <div class=\"refund-info\">\n          <div class=\"refund-info-item\">\n            <span class=\"refund-label\">ID Платежа:</span>\n            <span class=\"refund-value payment-id\">{{ formatPaymentId(payment.id) }}</span>\n          </div>\n          <div class=\"refund-info-item\">\n            <span class=\"refund-label\">Клиент:</span>\n            <span class=\"refund-value\">{{ payment.clientName }}</span>\n          </div>\n          <div class=\"refund-info-item\">\n            <span class=\"refund-label\">Сумма платежа:</span>\n            <span class=\"refund-value\">{{ formatAmount(payment.amount) }} ₸</span>\n          </div>\n          <div class=\"refund-warning\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" class=\"warning-icon\">\n              <path d=\"M12 9v4M12 17h.01\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n              <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"2\"/>\n            </svg>\n            <div class=\"warning-text\">\n              <strong>Внимание!</strong> Бонусы, выданные за этот платеж, также будут откачены.\n            </div>\n          </div>\n          <div class=\"refund-info-item bonus-info\">\n            <span class=\"refund-label\">Бонусы к откату:</span>\n            <span class=\"refund-value bonus-amount\">{{ formatAmount(payment.bonusEarned) }} ₸</span>\n          </div>\n        </div>\n        <div class=\"refund-reason-section\">\n          <label class=\"refund-reason-label\">Причина возврата (необязательно)</label>\n          <textarea\n            [(ngModel)]=\"refundReason\"\n            class=\"refund-reason-input\"\n            placeholder=\"Укажите причину возврата...\"\n            rows=\"3\"></textarea>\n        </div>\n        <div modalFooter class=\"refund-modal-footer\">\n          <app-button\n            buttonType=\"ghost\"\n            (onClick)=\"onClose()\">\n            Отмена\n          </app-button>\n          <app-button\n            buttonType=\"danger\"\n            [disabled]=\"isProcessing\"\n            [loading]=\"isProcessing\"\n            (onClick)=\"onConfirm()\">\n            Подтвердить возврат\n          </app-button>\n        </div>\n      </div>\n    </app-modal>\n  `,\n  styles: [`\n    .refund-modal-content {\n      padding: 1rem 0;\n    }\n\n    .refund-question {\n      font-size: 1.125rem;\n      font-weight: 600;\n      color: #1f2937;\n      margin-bottom: 1.5rem;\n    }\n\n    .refund-info {\n      display: flex;\n      flex-direction: column;\n      gap: 1rem;\n      margin-bottom: 1.5rem;\n    }\n\n    .refund-info-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 0.75rem;\n      background: #f8fafc;\n      border-radius: 8px;\n    }\n\n    .refund-info-item.bonus-info {\n      background: #fef2f2;\n      border: 1px solid #fecaca;\n    }\n\n    .refund-label {\n      font-size: 0.875rem;\n      color: #64748b;\n      font-weight: 500;\n    }\n\n    .refund-value {\n      font-size: 0.875rem;\n      color: #1f2937;\n      font-weight: 600;\n    }\n\n    .refund-value.payment-id {\n      font-family: 'Courier New', monospace;\n      font-size: 0.9rem;\n    }\n\n    .refund-value.bonus-amount {\n      color: #dc2626;\n      font-size: 1rem;\n    }\n\n    .refund-warning {\n      display: flex;\n      gap: 0.75rem;\n      padding: 1rem;\n      background: #fef3c7;\n      border: 1px solid #fde68a;\n      border-radius: 8px;\n      align-items: flex-start;\n    }\n\n    .warning-icon {\n      width: 20px;\n      height: 20px;\n      color: #d97706;\n      flex-shrink: 0;\n      margin-top: 2px;\n    }\n\n    .warning-text {\n      font-size: 0.875rem;\n      color: #92400e;\n      line-height: 1.5;\n    }\n\n    .warning-text strong {\n      font-weight: 600;\n    }\n\n    .refund-reason-section {\n      margin-bottom: 1.5rem;\n    }\n\n    .refund-reason-label {\n      display: block;\n      font-size: 0.875rem;\n      font-weight: 600;\n      color: #475569;\n      margin-bottom: 0.5rem;\n    }\n\n    .refund-reason-input {\n      width: 100%;\n      padding: 0.75rem;\n      border: 1.5px solid #e2e8f0;\n      border-radius: 8px;\n      font-size: 0.875rem;\n      font-family: inherit;\n      resize: vertical;\n      min-height: 80px;\n      background: #ffffff;\n      color: #1f2937;\n      line-height: 1.5;\n      transition: all 0.2s ease;\n    }\n\n    .refund-reason-input:hover {\n      border-color: #cbd5e1;\n    }\n\n    .refund-reason-input:focus {\n      outline: none;\n      border-color: #dc2626;\n      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);\n    }\n\n    .refund-reason-input::placeholder {\n      color: #94a3b8;\n    }\n\n    .refund-modal-footer {\n      display: flex;\n      gap: 0.75rem;\n      justify-content: flex-end;\n      margin-top: 1.5rem;\n    }\n  `]\n})\nexport class RefundConfirmationModalComponent {\n  @Input() visible = false;\n  @Input() payment: Payment | null = null;\n  @Input() isProcessing = false;\n  @Output() visibleChange = new EventEmitter<boolean>();\n  @Output() confirm = new EventEmitter<Payment>();\n\n  refundReason = '';\n\n  onClose(): void {\n    if (!this.isProcessing) {\n      this.refundReason = '';\n      this.visibleChange.emit(false);\n    }\n  }\n\n  onConfirm(): void {\n    if (this.payment && !this.isProcessing) {\n      const paymentWithReason = {\n        ...this.payment,\n        refundReason: this.refundReason.trim() || undefined\n      };\n      this.confirm.emit(paymentWithReason);\n      // Don't clear refundReason here - let parent handle it after successful refund\n    }\n  }\n\n  formatAmount(amount: number): string {\n    return amount.toLocaleString('ru-RU');\n  }\n\n  formatPaymentId(id: string): string {\n    return `#PAY-${id.padStart(3, '0')}`;\n  }\n}\n\n"],
  "mappings": "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",
  "names": []
}
