import{a as w,b as qe,c as O,d as ti}from"./chunk-O4FTPXIA.js";import{a as q,b as It,c as xt,d as Ct,e as G,f as Tt,g as wt,h as st,i as Ot,j as Et,k as nt,l as Pt,m as bt,n as rt,o as at,p as H,q as ii,r as Mt,s as ct,t as _t,u as kt,v as ut,w as $t,x as oi}from"./chunk-BQNRS24D.js";import{a as tt}from"./chunk-3B24VZJ2.js";import{a as vt}from"./chunk-BQSGCHPY.js";import{a as We,d as Zt,e as St,f as Ve,i as Ze,j as Ke,k as Kt,l as Xe,m as Je,n as B,o as Ye,p as f,q as Qe,s as yt,u as Q}from"./chunk-KCUNWQN4.js";import{a as ei}from"./chunk-LMI7DRHQ.js";import{$ as mt,Aa as be,Ab as Be,Ba as F,Bb as At,C as z,Ca as D,Cb as Y,Da as X,Fb as Ge,G as ge,Gb as He,H as Ae,Ha as Me,I as Se,Ia as gt,J as it,Ja as _e,K as dt,L,M as ve,P as M,Qa as ke,R as ot,Ra as $e,S as C,T as v,V as ye,Z as Ie,_ as xe,a as l,b as h,ba as Ce,c as Gt,cb as Re,ea as Te,f as ue,fa as we,g as pe,ga as Oe,h as le,i as he,jb as je,k,kb as Le,l as Ht,la as V,m as de,n as I,o as ht,oa as Z,qb as J,rb as Fe,s as Wt,t as b,ta as ft,tb as De,u as P,ub as Ne,v as me,va as Ee,vb as Ue,w as fe,wb as ze,x as U,xa as K,z as Vt,za as Pe}from"./chunk-SR6TZKDI.js";var lt="PERFORM_ACTION",Ui="REFRESH",ui="RESET",pi="ROLLBACK",li="COMMIT",hi="SWEEP",di="TOGGLE_ACTION",zi="SET_ACTIONS_ACTIVE",mi="JUMP_TO_STATE",fi="JUMP_TO_ACTION",ae="IMPORT_STATE",gi="LOCK_CHANGES",Ai="PAUSE_RECORDING",et=class{constructor(o,e){if(this.action=o,this.timestamp=e,this.type=lt,typeof o.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Xt=class{constructor(){this.type=Ui}},Jt=class{constructor(o){this.timestamp=o,this.type=ui}},Yt=class{constructor(o){this.timestamp=o,this.type=pi}},Qt=class{constructor(o){this.timestamp=o,this.type=li}},qt=class{constructor(){this.type=hi}},te=class{constructor(o){this.id=o,this.type=di}};var ee=class{constructor(o){this.index=o,this.type=mi}},ie=class{constructor(o){this.actionId=o,this.type=fi}},oe=class{constructor(o){this.nextLiftedState=o,this.type=ae}},se=class{constructor(o){this.status=o,this.type=gi}},ne=class{constructor(o){this.status=o,this.type=Ai}};var Ft=new ot("@ngrx/store-devtools Options"),si=new ot("@ngrx/store-devtools Initial Config");function Si(){return null}var Bi="NgRx Store DevTools";function Gi(t){let o={maxAge:!1,monitor:Si,actionSanitizer:void 0,stateSanitizer:void 0,name:Bi,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,i=e.logOnly?{pause:!0,export:!0,test:!0}:!1,s=e.features||i||o.features;s.import===!0&&(s.import="custom");let a=Object.assign({},o,{features:s},e);if(a.maxAge&&a.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${a.maxAge}`);return a}function ni(t,o){return t.filter(e=>o.indexOf(e)<0)}function vi(t){let{computedStates:o,currentStateIndex:e}=t;if(e>=o.length){let{state:s}=o[o.length-1];return s}let{state:i}=o[e];return i}function pt(t){return new et(t,+Date.now())}function Hi(t,o){return Object.keys(o).reduce((e,i)=>{let s=Number(i);return e[s]=yi(t,o[s],s),e},{})}function yi(t,o,e){return h(l({},o),{action:t(o.action,e)})}function Wi(t,o){return o.map((e,i)=>({state:Ii(t,e.state,i),error:e.error}))}function Ii(t,o,e){return t(o,e)}function xi(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function Vi(t,o,e,i){let s=[],a={},d=[];return t.stagedActionIds.forEach((c,g)=>{let n=t.actionsById[c];n&&(g&&ce(t.computedStates[g],n,o,e,i)||(a[c]=n,s.push(c),d.push(t.computedStates[g])))}),h(l({},t),{stagedActionIds:s,actionsById:a,computedStates:d})}function ce(t,o,e,i,s){let a=e&&!e(t,o.action),d=i&&!o.action.type.match(i.map(g=>ri(g)).join("|")),c=s&&o.action.type.match(s.map(g=>ri(g)).join("|"));return a||d||c}function ri(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ci(t){return{ngZone:t?v(we):null,connectInZone:t}}var Dt=(()=>{class t extends St{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Ce(t)))(s||t)}})()}static{this.\u0275prov=M({token:t,factory:t.\u0275fac})}}return t})(),Rt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},re=new ot("@ngrx/store-devtools Redux Devtools Extension"),Ti=(()=>{class t{constructor(e,i,s){this.config=i,this.dispatcher=s,this.zoneConfig=Ci(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,i){if(this.devtoolsExtension)if(e.type===lt){if(i.isLocked||i.isPaused)return;let s=vi(i);if(xi(this.config)&&ce(s,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?Ii(this.config.stateSanitizer,s,i.currentStateIndex):s,d=this.config.actionSanitizer?yi(this.config.actionSanitizer,e,i.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(d,a))}else{let s=h(l({},i),{stagedActionIds:i.stagedActionIds,actionsById:this.config.actionSanitizer?Hi(this.config.actionSanitizer,i.actionsById):i.actionsById,computedStates:this.config.stateSanitizer?Wi(this.config.stateSanitizer,i.computedStates):i.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,s,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Gt(e=>{let i=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=i,i.init(),i.subscribe(s=>e.next(s)),i.unsubscribe}):le}createActionStreams(){let e=this.createChangesObservable().pipe(Ae()),i=e.pipe(b(n=>n.type===Rt.START)),s=e.pipe(b(n=>n.type===Rt.STOP)),a=e.pipe(b(n=>n.type===Rt.DISPATCH),I(n=>this.unwrapAction(n.payload)),me(n=>n.type===ae?this.dispatcher.pipe(b(x=>x.type===Kt),de(1e3),fe(1e3),I(()=>n),P(()=>k(n)),U(1)):k(n))),c=e.pipe(b(n=>n.type===Rt.ACTION),I(n=>this.unwrapAction(n.payload))).pipe(dt(s)),g=a.pipe(dt(s));this.start$=i.pipe(dt(s)),this.actions$=this.start$.pipe(it(()=>c)),this.liftedActions$=this.start$.pipe(it(()=>g))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let i={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(i.maxAge=e.maxAge),i}sendToReduxDevtools(e){try{e()}catch(i){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",i)}}static{this.\u0275fac=function(i){return new(i||t)(C(re),C(Ft),C(Dt))}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac})}}return t})(),Lt={type:Zt},Zi="@ngrx/store-devtools/recompute",Ki={type:Zi};function wi(t,o,e,i,s){if(i)return{state:e,error:"Interrupted by an error up the chain"};let a=e,d;try{a=t(e,o)}catch(c){d=c.toString(),s.handleError(c)}return{state:a,error:d}}function jt(t,o,e,i,s,a,d,c,g){if(o>=t.length&&t.length===a.length)return t;let n=t.slice(0,o),x=a.length-(g?1:0);for(let r=o;r<x;r++){let m=a[r],E=s[m].action,p=n[r-1],u=p?p.state:i,$=p?p.error:void 0,R=d.indexOf(m)>-1?p:wi(e,E,u,$,c);n.push(R)}return g&&n.push(t[t.length-1]),n}function Xi(t,o){return{monitorState:o(void 0,{}),nextActionId:1,actionsById:{0:pt(Lt)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Ji(t,o,e,i,s={}){return a=>(d,c)=>{let{monitorState:g,actionsById:n,nextActionId:x,stagedActionIds:r,skippedActionIds:m,committedState:E,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:T}=d||o;d||(n=Object.create(n));function R(y){let S=y,N=r.slice(1,S+1);for(let _=0;_<N.length;_++)if(u[_+1].error){S=_,N=r.slice(1,S+1);break}else delete n[N[_]];m=m.filter(_=>N.indexOf(_)===-1),r=[0,...r.slice(S+1)],E=u[S].state,u=u.slice(S),p=p>S?p-S:0}function j(){n={0:pt(Lt)},x=1,r=[0],m=[],E=u[p].state,p=0,u=[]}let A=0;switch(c.type){case gi:{$=c.status,A=1/0;break}case Ai:{T=c.status,T?(r=[...r,x],n[x]=new et({type:"@ngrx/devtools/pause"},+Date.now()),x++,A=r.length-1,u=u.concat(u[u.length-1]),p===r.length-2&&p++,A=1/0):j();break}case ui:{n={0:pt(Lt)},x=1,r=[0],m=[],E=t,p=0,u=[];break}case li:{j();break}case pi:{n={0:pt(Lt)},x=1,r=[0],m=[],p=0,u=[];break}case di:{let{id:y}=c;m.indexOf(y)===-1?m=[y,...m]:m=m.filter(N=>N!==y),A=r.indexOf(y);break}case zi:{let{start:y,end:S,active:N}=c,_=[];for(let Bt=y;Bt<S;Bt++)_.push(Bt);N?m=ni(m,_):m=[...m,..._],A=r.indexOf(y);break}case mi:{p=c.index,A=1/0;break}case fi:{let y=r.indexOf(c.actionId);y!==-1&&(p=y),A=1/0;break}case hi:{r=ni(r,m),m=[],p=Math.min(p,r.length-1);break}case lt:{if($)return d||o;if(T||d&&ce(d.computedStates[p],c,s.predicate,s.actionsSafelist,s.actionsBlocklist)){let S=u[u.length-1];u=[...u.slice(0,-1),wi(a,c.action,S.state,S.error,e)],A=1/0;break}s.maxAge&&r.length===s.maxAge&&R(1),p===r.length-1&&p++;let y=x++;n[y]=c,r=[...r,y],A=r.length-1;break}case ae:{({monitorState:g,actionsById:n,nextActionId:x,stagedActionIds:r,skippedActionIds:m,committedState:E,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:T}=c.nextLiftedState);break}case Zt:{A=0,s.maxAge&&r.length>s.maxAge&&(u=jt(u,A,a,E,n,r,m,e,T),R(r.length-s.maxAge),A=1/0);break}case Kt:{if(u.filter(S=>S.error).length>0)A=0,s.maxAge&&r.length>s.maxAge&&(u=jt(u,A,a,E,n,r,m,e,T),R(r.length-s.maxAge),A=1/0);else{if(!T&&!$){p===r.length-1&&p++;let S=x++;n[S]=new et(c,+Date.now()),r=[...r,S],A=r.length-1,u=jt(u,A,a,E,n,r,m,e,T)}u=u.map(S=>h(l({},S),{state:a(S.state,Ki)})),p=r.length-1,s.maxAge&&r.length>s.maxAge&&R(r.length-s.maxAge),A=1/0}break}default:{A=1/0;break}}return u=jt(u,A,a,E,n,r,m,e,T),g=i(g,c),{monitorState:g,actionsById:n,nextActionId:x,stagedActionIds:r,skippedActionIds:m,committedState:E,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:T}}}var ai=(()=>{class t{constructor(e,i,s,a,d,c,g,n){let x=Xi(g,n.monitor),r=Ji(g,x,c,n.monitor,n),m=Wt(Wt(i.asObservable().pipe(Se(1)),a.actions$).pipe(I(pt)),e,a.liftedActions$).pipe(he(pe)),E=s.pipe(I(r)),p=Ci(n.connectInZone),u=new ue(1);this.liftedStateSubscription=m.pipe(ve(E),ci(p),ge(({state:R},[j,A])=>{let y=A(R,j);return j.type!==lt&&xi(n)&&(y=Vi(y,n.predicate,n.actionsSafelist,n.actionsBlocklist)),a.notify(j,y),{state:y,action:j}},{state:x,action:null})).subscribe(({state:R,action:j})=>{if(u.next(R),j.type===lt){let A=j.action;d.next(A)}}),this.extensionStartSubscription=a.start$.pipe(ci(p)).subscribe(()=>{this.refresh()});let $=u.asObservable(),T=$.pipe(I(vi));Object.defineProperty(T,"state",{value:We(T,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=$,this.state=T}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new et(e,+Date.now()))}refresh(){this.dispatch(new Xt)}reset(){this.dispatch(new Jt(+Date.now()))}rollback(){this.dispatch(new Yt(+Date.now()))}commit(){this.dispatch(new Qt(+Date.now()))}sweep(){this.dispatch(new qt)}toggleAction(e){this.dispatch(new te(e))}jumpToAction(e){this.dispatch(new ie(e))}jumpToState(e){this.dispatch(new ee(e))}importState(e){this.dispatch(new oe(e))}lockChanges(e){this.dispatch(new se(e))}pauseRecording(e){this.dispatch(new ne(e))}static{this.\u0275fac=function(i){return new(i||t)(C(Dt),C(St),C(Ze),C(Ti),C(Xe),C(Oe),C(Ve),C(Ft))}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac})}}return t})();function ci({ngZone:t,connectInZone:o}){return e=>o?new Gt(i=>e.subscribe({next:s=>t.run(()=>i.next(s)),error:s=>t.run(()=>i.error(s)),complete:()=>t.run(()=>i.complete())})):e}var Yi=new ot("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Qi(t,o){return!!t||o.monitor!==Si}function qi(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function to(t){return t.state}function Oi(t={}){return ye([Ti,Dt,ai,{provide:si,useValue:t},{provide:Yi,deps:[re,Ft],useFactory:Qi},{provide:re,useFactory:qi},{provide:Ft,deps:[si],useFactory:Gi},{provide:Je,deps:[ai],useFactory:to},{provide:Ke,useExisting:Dt}])}function io(t,o){t&1&&(mt(),F(0,"svg",6),X(1,"circle",8)(2,"path",9),D())}function oo(t,o){t&1&&(mt(),F(0,"svg",6),X(1,"circle",8)(2,"path",10),D())}var Ei=(()=>{class t{message="";type="success";duration=3e3;closed=new Te;visible=!1;hiding=!1;timeoutId;ngOnInit(){setTimeout(()=>{this.visible=!0},10),this.duration>0&&(this.timeoutId=window.setTimeout(()=>{this.close()},this.duration))}ngOnDestroy(){this.timeoutId&&clearTimeout(this.timeoutId)}onClose(){this.close()}close(){this.hiding=!0,setTimeout(()=>{this.closed.emit()},300)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Z({type:t,selectors:[["app-toast"]],inputs:{message:"message",type:"type",duration:"duration"},outputs:{closed:"closed"},decls:10,vars:9,consts:[[1,"toast"],[1,"toast-content"],[1,"toast-icon"],["viewBox","0 0 24 24","fill","none",4,"ngIf"],[1,"toast-message"],["iconButtonType","ghost","size","small",3,"onClick"],["viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M9 12l2 2 4-4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 9l-6 6M9 9l6 6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(i,s){i&1&&(F(0,"div",0)(1,"div",1)(2,"div",2),ft(3,io,3,0,"svg",3)(4,oo,3,0,"svg",3),D(),F(5,"div",4),ke(6),D(),F(7,"app-icon-button",5),gt("onClick",function(){return s.onClose()}),mt(),F(8,"svg",6),X(9,"path",7),D()()()()),i&2&&(be(s.type),Pe("show",s.visible)("hiding",s.hiding),V(3),K("ngIf",s.type==="success"),V(),K("ngIf",s.type==="error"),V(2),$e(s.message))},dependencies:[J,Le,ei],styles:[".toast[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:300px;max-width:400px;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #00000026;margin-bottom:.75rem;opacity:0;transform:translate(100%);transition:all .3s cubic-bezier(.4,0,.2,1);border-left:4px solid}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.hiding[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.toast.success[_ngcontent-%COMP%]{border-left-color:#16a34a}.toast.error[_ngcontent-%COMP%]{border-left-color:#dc2626}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.toast-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.toast.success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#16a34a}.toast.error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#dc2626}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:.9375rem;line-height:1.5;color:#1f2937;font-weight:500}[_nghost-%COMP%]     app-icon-button{flex-shrink:0}[_nghost-%COMP%]     app-icon-button svg{width:16px;height:16px;color:#64748b}"]})}return t})();function so(t,o){if(t&1){let e=Me();F(0,"app-toast",2),gt("closed",function(){let s=Ie(e).$implicit,a=_e();return xe(a.removeToast(s.id))}),D()}if(t&2){let e=o.$implicit;K("message",e.message)("type",e.type)("duration",e.duration)}}var Pi=(()=>{class t{toastService=v(vt);toasts=[];subscription;ngOnInit(){this.subscription=this.toastService.toasts$.subscribe(e=>{this.toasts=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}removeToast(e){this.toastService.remove(e)}trackByToastId(e,i){return i.id}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Z({type:t,selectors:[["app-toast-container"]],decls:2,vars:2,consts:[[1,"toast-container"],[3,"message","type","duration","closed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"closed","message","type","duration"]],template:function(i,s){i&1&&(F(0,"div",0),ft(1,so,1,3,"app-toast",1),D()),i&2&&(V(),K("ngForOf",s.toasts)("ngForTrackBy",s.trackByToastId))},dependencies:[J,je,Ei],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:1.5rem;right:1.5rem;z-index:10000;display:flex;flex-direction:column;align-items:flex-end;pointer-events:none}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 768px){.toast-container[_ngcontent-%COMP%]{top:1rem;right:1rem;left:1rem;align-items:stretch}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{max-width:100%}}"]})}return t})();var bi=(()=>{class t{title="westwood-frontend";static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Z({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(i,s){i&1&&X(0,"router-outlet")(1,"app-toast-container")},dependencies:[J,Be,Pi],encapsulation:2})}return t})();var Mi=(t,o)=>{let e=v(Y),i=v(B);return ht([i.select(Q),i.select(yt)]).pipe(b(([s])=>s),U(1),I(([,s])=>s?!0:(e.navigate(["/auth/login"],{queryParams:{returnUrl:o.url}}),!1)))};var _i=()=>{let t=v(Y),o=v(B);return ht([o.select(Q),o.select(yt)]).pipe(b(([e])=>e),U(1),I(([,e])=>e?(t.navigate(["/home"]),!1):!0))};var ki=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"auth",loadChildren:()=>import("./chunk-GEZXSLYX.js").then(t=>t.AUTH_ROUTES),canActivate:[_i]},{path:"",loadComponent:()=>import("./chunk-FKZYQ2XM.js").then(t=>t.MainLayoutWrapperComponent),canActivate:[Mi],children:[{path:"home",loadComponent:()=>import("./chunk-OWMIHB7F.js").then(t=>t.HomePageComponent),title:"Home"},{path:"communications",title:"Communications",children:[{path:"",redirectTo:"whatsapp",pathMatch:"full"},{path:"whatsapp",loadComponent:()=>import("./chunk-VWEO7X4S.js").then(t=>t.InvitationPageComponent),title:"WhatsApp"}]},{path:"bonus-program",loadComponent:()=>import("./chunk-N6PFV6RE.js").then(t=>t.BonusProgramPageComponent),title:"Bonus Program"},{path:"clients",loadComponent:()=>import("./chunk-KVMQE3C7.js").then(t=>t.ClientsPageComponent),title:"Clients"},{path:"clients/:id",loadComponent:()=>import("./chunk-TMJSRYLE.js").then(t=>t.ProfilePageComponent),title:"Client"},{path:"payments",loadComponent:()=>import("./chunk-BSKZKFTJ.js").then(t=>t.PaymentsPageComponent),title:"Payments"},{path:"users",loadComponent:()=>import("./chunk-V2GW7XJ4.js").then(t=>t.UsersPageComponent),title:"Users"},{path:"users/:id",loadComponent:()=>import("./chunk-47O7OQ7Q.js").then(t=>t.UserProfilePageComponent),title:"User"},{path:"profile",loadComponent:()=>import("./chunk-7LGICAK7.js").then(t=>t.AccountPageComponent),title:"Profile"}]},{path:"**",redirectTo:"/home"}];var Nt={user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,error:null},Ri=Qe(Nt,f(q,t=>h(l({},t),{isLoading:!0,error:null})),f(It,(t,{user:o})=>h(l({},t),{user:o,isAuthenticated:!0,isLoading:!1,isInitialized:!0,error:null})),f(xt,t=>h(l({},t),{user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0,error:null})),f(Ct,t=>h(l({},t),{isLoading:!0,error:null})),f(G,(t,{user:o})=>h(l({},t),{user:o,isAuthenticated:!0,isLoading:!1,error:null})),f(Tt,(t,{error:o})=>h(l({},t),{isLoading:!1,error:o,isAuthenticated:!1,user:null})),f(wt,t=>h(l({},t),{isLoading:!0,error:null})),f(st,(t,{user:o})=>h(l({},t),{user:o,isAuthenticated:!0,isLoading:!1,error:null})),f(Ot,(t,{error:o})=>h(l({},t),{isLoading:!1,error:o})),f(Et,t=>h(l({},t),{isLoading:!0,error:null})),f(nt,(t,{user:o})=>h(l({},t),{user:o,isAuthenticated:!0,isLoading:!1,error:null})),f(Pt,(t,{error:o})=>h(l({},t),{isLoading:!1,error:o})),f(bt,t=>h(l({},t),{isLoading:!0})),f(rt,t=>h(l({},Nt),{isInitialized:!0})),f(at,t=>h(l({},Nt),{isInitialized:!0})),f(H,t=>h(l({},Nt),{isInitialized:!0})),f(ii,t=>h(l({},t),{error:null})),f(Mt,t=>h(l({},t),{isLoading:!0,error:null})),f(ct,t=>h(l({},t),{isLoading:!1,error:null})),f(_t,(t,{error:o})=>h(l({},t),{isLoading:!1,error:o})),f(kt,t=>h(l({},t),{isLoading:!0,error:null})),f(ut,(t,{user:o})=>h(l({},t),{user:o,isAuthenticated:!0,isLoading:!1,error:null})),f($t,(t,{error:o})=>h(l({},t),{isLoading:!1,error:o})),f(oi,(t,{user:o})=>h(l({},t),{user:o})));var ji={auth:Ri};var Ut=(()=>{class t{http;apiUrl=`${tt.apiUrl}/auth`;constructor(e){this.http=e}login(e){return console.log("[AuthService] POST /auth/login",e),this.http.post(`${this.apiUrl}/login`,e)}register(e){return console.log("[AuthService] POST /auth/register",e),this.http.post(`${this.apiUrl}/register`,e)}activate(e){return this.http.post(`${this.apiUrl}/activate`,e)}me(){return this.http.get(`${this.apiUrl}/me`)}refresh(){return this.http.post(`${this.apiUrl}/refresh`,{})}logout(){return this.http.post(`${this.apiUrl}/logout`,{})}forgotPassword(e){return console.log("[AuthService] POST /auth/forgot-password",e),this.http.post(`${this.apiUrl}/forgot-password`,e)}resetPassword(e){return console.log("[AuthService] POST /auth/reset-password",{token:e.token,password:"***"}),this.http.post(`${this.apiUrl}/reset-password`,e)}static \u0275fac=function(i){return new(i||t)(C(De))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Li=(()=>{class t{actions$=v(qe);authService=v(Ut);router=v(Y);toastService=v(vt);initAuth$=w(()=>this.actions$.pipe(O(q),z(()=>this.authService.me().pipe(I(e=>It({user:e})),P(()=>k(xt()))))));login$=w(()=>this.actions$.pipe(O(Ct),z(({credentials:e})=>this.authService.login(e).pipe(I(i=>G({user:i})),P(i=>k(Tt({error:i.error?.message||i.message||"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C"})))))));loginSuccess$=w(()=>this.actions$.pipe(O(G),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});register$=w(()=>this.actions$.pipe(O(wt),z(({data:e})=>this.authService.register(e).pipe(I(i=>st({user:i})),P(i=>k(Ot({error:i.error?.message||i.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})))))));registerSuccess$=w(()=>this.actions$.pipe(O(st),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});activateAccount$=w(()=>this.actions$.pipe(O(Et),z(({data:e})=>this.authService.activate(e).pipe(I(i=>nt({user:i})),P(i=>k(Pt({error:i.error?.message||i.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438"})))))));activateAccountSuccess$=w(()=>this.actions$.pipe(O(nt),L(()=>{this.toastService.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D!")}),Vt(500),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});logout$=w(()=>this.actions$.pipe(O(bt),z(()=>this.authService.logout().pipe(I(()=>rt()),P(e=>k(at({error:e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u044B\u0445\u043E\u0434\u0430"})))))));logoutSuccess$=w(()=>this.actions$.pipe(O(rt,at),L(()=>{this.router.navigate(["/auth/login"])})),{dispatch:!1});forgotPassword$=w(()=>this.actions$.pipe(O(Mt),z(({data:e})=>this.authService.forgotPassword(e).pipe(I(()=>ct()),P(i=>{let s=i.error?.message||i.message||(i.status===404?"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0441 \u0442\u0430\u043A\u0438\u043C email \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D":null)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u043D\u0430 \u0441\u0431\u0440\u043E\u0441 \u043F\u0430\u0440\u043E\u043B\u044F";return k(_t({error:s}))})))));forgotPasswordSuccess$=w(()=>this.actions$.pipe(O(ct),L(()=>{this.toastService.success("\u041F\u0438\u0441\u044C\u043C\u043E \u0434\u043B\u044F \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u0432\u0430\u0448\u0443 \u043F\u043E\u0447\u0442\u0443")})),{dispatch:!1});resetPassword$=w(()=>this.actions$.pipe(O(kt),z(({data:e})=>this.authService.resetPassword(e).pipe(I(i=>ut({user:i})),P(i=>k($t({error:i.error?.message||i.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"})))))));resetPasswordSuccess$=w(()=>this.actions$.pipe(O(ut),L(()=>{this.toastService.success("\u041F\u0430\u0440\u043E\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D!")}),Vt(500),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});sessionExpired$=w(()=>this.actions$.pipe(O(H),L(()=>{this.router.navigate(["/auth/login"],{queryParams:{sessionExpired:!0}})})),{dispatch:!1});static \u0275fac=function(i){return new(i||t)};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();var zt=!1,Fi=(t,o)=>{let e=v(B),i=v(Ut),s=!1;try{if(t.url.startsWith(tt.apiUrl)&&(s=!0),t.url.includes("/api/v1/")&&(s=!0),t.url.startsWith("http")){let d=new URL(t.url).origin;if(tt.apiUrl.startsWith("http"))try{let c=new URL(tt.apiUrl).origin;d===c&&(s=!0)}catch{}}}catch{(t.url.includes("herokuapp.com")||t.url.includes("westwood"))&&(s=!0)}let a=s?t.clone({withCredentials:!0}):t;return o(a).pipe(P(d=>{if(d.status===401&&s){let c=t.url.includes("/auth/login")||t.url.includes("/auth/register")||t.url.includes("/auth/me")||t.url.includes("/auth/forgot-password")||t.url.includes("/auth/reset-password")||t.url.includes("/auth/activate")||t.url.includes("/auth/refresh");if(!c&&!zt)return zt=!0,console.log("[AuthInterceptor] Access token expired, attempting refresh..."),i.refresh().pipe(it(g=>(zt=!1,console.log("[AuthInterceptor] Token refreshed successfully, retrying request"),e.dispatch(G({user:g})),o(a))),P(g=>(zt=!1,console.log("[AuthInterceptor] Token refresh failed, session expired"),e.dispatch(H()),Ht(()=>g))));c||e.dispatch(H())}return Ht(()=>d)}))};var Di=(()=>{class t{store=v(B);initializeApp(){return new Promise(e=>{this.store.dispatch(q()),this.store.select(Q).pipe(b(i=>i),U(1)).subscribe(()=>{e()})})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ni=(()=>{class t extends At{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);if(i!==void 0)this.title.setTitle(`Westwood - ${i}`);else{let s=e.root,a=this.getTitleFromRoute(s);this.title.setTitle(`Westwood - ${a}`)}}getTitleFromRoute(e){for(;e.firstChild;)e=e.firstChild;let i=e.routeConfig?.path||"",s={home:"Home",clients:"Clients",payments:"Payments",users:"Users",profile:"Profile","bonus-program":"Bonus Program",communications:"Communications",whatsapp:"WhatsApp",login:"Login",activation:"Activation","forgot-password":"Forgot Password","reset-password":"Reset Password"};if(i.includes(":id")){let a=e.snapshot?.data;if(a&&a.title)return a.title;let d=e.snapshot?.params;if(d&&d.id){if(i.startsWith("clients/"))return"Client";if(i.startsWith("users/"))return"User"}}return s[i]||i.charAt(0).toUpperCase()+i.slice(1)}static \u0275fac=function(i){return new(i||t)(C(ze))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ro(){let t=v(Di);return()=>t.initializeApp()}Fe(bi,{providers:[Ge(ki,He({scrollPositionRestoration:"top",anchorScrolling:"enabled"})),Ne(Ue([Fi])),Ye(ji),ti([Li]),Oi({maxAge:25,logOnly:!Re(),autoPause:!0,trace:!1,traceLimit:75}),{provide:At,useClass:Ni},{provide:Ee,useFactory:ro,multi:!0}]}).catch(t=>console.error(t));
