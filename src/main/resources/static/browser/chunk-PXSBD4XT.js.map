{
  "version": 3,
  "sources": ["src/app/features/home/pages/home-page/home-page.component.ts"],
  "sourcesContent": ["import { Component, OnInit, inject, ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Router, NavigationEnd } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { Observable, forkJoin, catchError, of, tap, Subject, filter, takeUntil } from 'rxjs';\nimport { AppState } from '../../../../core/store/app.state';\nimport { selectUser } from '../../../../core/store/auth/auth.selectors';\nimport { AuthUser } from '../../../../core/models/user.model';\nimport { PageHeaderService } from '../../../../core/services/page-header.service';\nimport { TransactionModalService } from '../../../../core/services/transaction-modal.service';\nimport { AnalyticsService } from '../../../../core/services/analytics.service';\nimport { PaymentsService, PaymentSearchResult } from '../../../../core/services/payments.service';\nimport { ToastService } from '../../../../core/services/toast.service';\nimport { BadgeComponent } from '../../../../shared/components/badge/badge.component';\nimport { ButtonComponent } from '../../../../shared/components/button/button.component';\nimport { RefundConfirmationModalComponent, Payment } from '../../../../shared/components/refund-confirmation-modal/refund-confirmation-modal.component';\nimport { IconButtonComponent } from '../../../../shared/components/icon-button/icon-button.component';\nimport { PaymentViewModalComponent } from '../../../../shared/components/payment-view-modal/payment-view-modal.component';\nimport { LoaderComponent } from '../../../../shared/components/loader/loader.component';\n\ninterface KpiCard {\n  iconId: 'revenue' | 'bonus' | 'clients' | 'transactions' | 'refunds' | 'average' | 'today' | 'month';\n  iconBg: string;\n  value: string;\n  label: string;\n  change?: string;\n  changeType?: 'positive' | 'negative';\n}\n\ninterface RecentPayment {\n  id: string;\n  clientId: string;\n  clientName: string;\n  clientPhone: string;\n  amount: number;\n  bonusEarned: number;\n  bonusUsed: number;\n  bonusRevoked: number;\n  paymentMethod: 'cash' | 'card' | 'transfer';\n  isRefund: boolean;\n  date: string;\n  time: string;\n  initiatedBy?: string | null;\n  refundReason?: string | null;\n}\n\n@Component({\n  selector: 'app-home-page',\n  standalone: true,\n  imports: [CommonModule, RouterModule, BadgeComponent, ButtonComponent, RefundConfirmationModalComponent, IconButtonComponent, PaymentViewModalComponent, LoaderComponent],\n  template: `\n    <div class=\"page-wrapper\">\n      <div class=\"dashboard\">\n        <!-- Loading State -->\n        <div class=\"page-loading-container\" *ngIf=\"isLoading || isChartLoading || isLoadingPayments\">\n          <app-loader [visible]=\"true\" [overlay]=\"false\" type=\"logo\" size=\"large\"></app-loader>\n        </div>\n        \n        <div *ngIf=\"!isLoading && !isChartLoading && !isLoadingPayments\">\n          <!-- Header -->\n      <div class=\"dashboard-header\">\n        <app-button\n          buttonType=\"primary\"\n          size=\"medium\"\n          (onClick)=\"openTransactionModal()\">\n          <svg class=\"create-icon\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path d=\"M6 12H18M12 6V18\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n          <span class=\"create-label\">Новая транзакция</span>\n        </app-button>\n      </div>\n\n      <!-- KPI Cards -->\n      <div class=\"kpi-grid\">\n        <div class=\"kpi-card\" *ngFor=\"let kpi of kpiCards\">\n          <div class=\"kpi-header\">\n            <div class=\"kpi-icon\" [style.background]=\"kpi.iconBg\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" [ngSwitch]=\"kpi.iconId\">\n                <!-- Revenue icon -->\n                <g *ngSwitchCase=\"'revenue'\">\n                  <path d=\"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </g>\n                <!-- Bonus icon -->\n                <g *ngSwitchCase=\"'bonus'\">\n                  <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </g>\n                <!-- Clients icon -->\n                <g *ngSwitchCase=\"'clients'\">\n                  <path d=\"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <circle cx=\"9\" cy=\"7\" r=\"4\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </g>\n                <!-- Transactions icon -->\n                <g *ngSwitchCase=\"'transactions'\">\n                  <path d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <rect x=\"9\" y=\"3\" width=\"6\" height=\"4\" rx=\"1\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M9 12h6M9 16h6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n                </g>\n                <!-- Refunds icon -->\n                <g class=\"refunds-icon\"  *ngSwitchCase=\"'refunds'\">\n                  <path _ngcontent-ng-c4142443301=\"\" d=\"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n                </g>\n                <!-- Average icon -->\n                <g *ngSwitchCase=\"'average'\">\n                  <path d=\"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </g>\n                <!-- Today icon -->\n                <g *ngSwitchCase=\"'today'\">\n                  <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M16 2v4M8 2v4M3 10h18\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </g>\n                <!-- Month icon -->\n                <g *ngSwitchCase=\"'month'\">\n                  <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M16 2v4M8 2v4M3 10h18\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                  <path d=\"M8 14h.01M12 14h.01M16 14h.01M8 18h.01M12 18h.01M16 18h.01\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n                </g>\n              </svg>\n            </div>\n            <span class=\"kpi-change\" *ngIf=\"kpi.change\" [class.positive]=\"kpi.changeType === 'positive'\" [class.negative]=\"kpi.changeType === 'negative'\">\n              {{ kpi.change }}\n            </span>\n          </div>\n          <div class=\"kpi-value\">{{ kpi.value }}</div>\n          <div class=\"kpi-label\">{{ kpi.label }}</div>\n        </div>\n      </div>\n\n      <!-- Charts Section -->\n      <div class=\"charts-section\">\n        <!-- Line Chart -->\n        <div class=\"chart-card line-chart-card\">\n          <h3 class=\"chart-title\">Выручка за месяц</h3>\n          <div class=\"chart-container\">\n            <div class=\"chart-y-axis\">\n              <span>30 000</span>\n              <span>25 000</span>\n              <span>20 000</span>\n              <span>15 000</span>\n              <span>10 000</span>\n              <span>5 000</span>\n              <span>0</span>\n            </div>\n            <div class=\"chart-area\">\n              <div class=\"chart-svg-wrapper\">\n                <svg viewBox=\"0 0 600 300\" preserveAspectRatio=\"none\" class=\"line-chart\">\n                  <defs>\n                    <linearGradient id=\"chartGradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                      <stop offset=\"0%\" style=\"stop-color:#22c55e;stop-opacity:0.3\" />\n                      <stop offset=\"100%\" style=\"stop-color:#22c55e;stop-opacity:0.02\" />\n                    </linearGradient>\n                  </defs>\n                  <!-- Grid lines -->\n                  <g stroke=\"#e2e8f0\" stroke-width=\"1\" opacity=\"0.5\">\n                    <line x1=\"50\" y1=\"50\" x2=\"550\" y2=\"50\" vector-effect=\"non-scaling-stroke\"/>\n                    <line x1=\"50\" y1=\"100\" x2=\"550\" y2=\"100\" vector-effect=\"non-scaling-stroke\"/>\n                    <line x1=\"50\" y1=\"150\" x2=\"550\" y2=\"150\" vector-effect=\"non-scaling-stroke\"/>\n                    <line x1=\"50\" y1=\"200\" x2=\"550\" y2=\"200\" vector-effect=\"non-scaling-stroke\"/>\n                    <line x1=\"50\" y1=\"250\" x2=\"550\" y2=\"250\" vector-effect=\"non-scaling-stroke\"/>\n                  </g>\n                  <!-- Area fill -->\n                  <path [attr.d]=\"getAreaPath()\" fill=\"url(#chartGradient)\" />\n                  <!-- Line -->\n                  <path [attr.d]=\"getChartPath()\" fill=\"none\" stroke=\"#22c55e\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" vector-effect=\"non-scaling-stroke\"/>\n                </svg>\n                <!-- Data points rendered as HTML for correct circles -->\n                <div class=\"chart-points\">\n                  <div \n                    *ngFor=\"let point of getChartData(); let last = last\"\n                    class=\"chart-point-wrapper\"\n                    [style.left.%]=\"(point.x / 600) * 100\"\n                    [style.top.%]=\"(point.y / 300) * 100\">\n                    <div class=\"chart-point\" [class.last-point]=\"last\"></div>\n                    <div class=\"chart-tooltip\">\n                      <div class=\"tooltip-day\">{{ point.day }} {{ getMonthName() }}</div>\n                      <div class=\"tooltip-stats\">\n                        <div class=\"tooltip-row\">\n                          <span class=\"tooltip-label\">Выручка:</span>\n                          <span class=\"tooltip-revenue\">{{ formatAmount(point.revenue) }} ₸</span>\n                        </div>\n                        <div class=\"tooltip-row\">\n                          <span class=\"tooltip-label\">Транзакций:</span>\n                          <span class=\"tooltip-value\">{{ point.transactions }}</span>\n                        </div>\n                        <div class=\"tooltip-row\">\n                          <span class=\"tooltip-label\">Начислено:</span>\n                          <span class=\"tooltip-bonus-earned\">+{{ formatAmount(point.bonusEarned) }}</span>\n                        </div>\n                        <div class=\"tooltip-row\" *ngIf=\"point.bonusUsed > 0\">\n                          <span class=\"tooltip-label\">Использовано:</span>\n                          <span class=\"tooltip-bonus-used\">-{{ formatAmount(point.bonusUsed) }}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"chart-x-axis\">\n                <span *ngFor=\"let label of getXAxisLabels(); let i = index\" [style.left.%]=\"(getXAxisLabelPositions()[i] / 600) * 100\">{{ label }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Donut Chart -->\n        \n      </div>\n\n      <!-- Recent Payments Table -->\n      <div class=\"table-section\">\n        <div class=\"table-header\">\n          <h3 class=\"table-title\">Последние операции</h3>\n          <a routerLink=\"/payments\" class=\"view-all-link\">Смотреть все →</a>\n        </div>\n        <div class=\"table-container\">\n          <table class=\"payments-table\">\n            <thead>\n              <tr>\n                <th class=\"th-id\">ID платежа</th>\n                <th class=\"th-client\">Клиент</th>\n                <th class=\"th-amount\">Сумма</th>\n                <th class=\"th-bonuses\">Бонусы</th>\n                <th class=\"th-method\">Способ оплаты</th>\n                <th class=\"th-status\">Статус</th>\n                <th class=\"th-date\">Дата и время</th>\n                <th class=\"th-actions\">Действия</th>\n              </tr>\n            </thead>\n            <tbody>\n              <ng-container *ngFor=\"let payment of recentPayments\">\n              <tr class=\"payment-row\" [class.expanded]=\"isRowExpanded(payment.id)\">\n                <td class=\"td-id\">\n                  <span class=\"payment-id clickable\" (click)=\"openPaymentView(payment.id)\">#{{ formatPaymentId(payment.id) }}</span>\n                </td>\n                <td class=\"td-client\">\n                  <div class=\"client-cell\">\n                    <div class=\"client-avatar\">\n                      {{ getInitials(payment.clientName) }}\n                    </div>\n                    <div class=\"client-info\">\n                      <a [routerLink]=\"['/clients', payment.clientId]\" class=\"client-name-link\">\n                        <span class=\"client-name\">{{ payment.clientName }}</span>\n                      </a>\n                      <span class=\"client-phone\">{{ payment.clientPhone }}</span>\n                    </div>\n                  </div>\n                </td>\n                <td class=\"td-amount\">\n                  <span class=\"amount-value\">{{ formatAmount(payment.amount) }} ₸</span>\n                </td>\n                <td class=\"td-bonuses\">\n                  <div class=\"bonus-info\">\n                    <app-badge \n                      *ngIf=\"payment.bonusEarned > 0\"\n                      badgeType=\"bonusGranted\" \n                      size=\"medium\"\n                      icon=\"star\"\n                      class=\"bonus-badge\">\n                      +{{ formatAmount(payment.bonusEarned) }}\n                    </app-badge>\n                    <app-badge \n                      *ngIf=\"payment.bonusUsed > 0\"\n                      badgeType=\"bonusUsed\" \n                      size=\"medium\"\n                      icon=\"check\"\n                      class=\"bonus-badge\">\n                      -{{ formatAmount(payment.bonusUsed) }}\n                    </app-badge>\n                    <app-badge \n                      *ngIf=\"payment.bonusRevoked > 0\"\n                      badgeType=\"refund\" \n                      size=\"medium\"\n                      icon=\"refund\"\n                      class=\"bonus-badge\">\n                      -{{ formatAmount(payment.bonusRevoked) }}\n                    </app-badge>\n                    <span class=\"bonus-none\" *ngIf=\"payment.bonusEarned === 0 && payment.bonusUsed === 0 && payment.bonusRevoked === 0\">—</span>\n                  </div>\n                </td>\n                <td class=\"td-method\">\n                  <app-badge \n                    badgeType=\"paymentMethod\" \n                    size=\"medium\"\n                    [paymentMethod]=\"getPaymentMethodForBadge(payment.paymentMethod)\">\n                  </app-badge>\n                </td>\n                <td class=\"td-status\">\n                  <app-badge \n                    [badgeType]=\"payment.isRefund ? 'refund' : 'payment'\" \n                    size=\"medium\"\n                    [icon]=\"payment.isRefund ? 'refund' : 'payment'\">\n                    {{ payment.isRefund ? 'Возврат' : 'Оплачено' }}\n                  </app-badge>\n                </td>\n                <td class=\"td-date\">\n                  <div class=\"date-info\">\n                    <span class=\"date-text\">{{ payment.date }}</span>\n                    <span class=\"time-text\">{{ payment.time }}</span>\n                  </div>\n                </td>\n                <td class=\"td-actions\">\n                  <div class=\"actions-cell\">\n                    <a [routerLink]=\"['/clients', payment.clientId]\" class=\"action-link\">\n                      <app-icon-button\n                        iconButtonType=\"view\"\n                        size=\"small\"\n                        tooltip=\"Просмотр клиента\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\">\n                          <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                          <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                        </svg>\n                      </app-icon-button>\n                    </a>\n                    <app-icon-button\n                      iconButtonType=\"refund\"\n                      size=\"small\"\n                      tooltip=\"Возврат\"\n                      [disabled]=\"payment.isRefund\"\n                      (onClick)=\"openRefundModal(payment)\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\">\n                        <path d=\"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                      </svg>\n                    </app-icon-button>\n                    <app-icon-button\n                      iconButtonType=\"ghost\"\n                      size=\"small\"\n                      [tooltip]=\"isRowExpanded(payment.id) ? 'Скрыть детали' : 'Показать детали'\"\n                      (onClick)=\"toggleRowExpansion(payment.id)\">\n                      <svg [class.rotated]=\"isRowExpanded(payment.id)\" viewBox=\"0 0 24 24\" fill=\"none\">\n                        <path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                      </svg>\n                    </app-icon-button>\n                  </div>\n                </td>\n              </tr>\n              <!-- Expandable row -->\n              <tr *ngIf=\"isRowExpanded(payment.id)\" class=\"payment-details-row\">\n                <td colspan=\"9\" class=\"payment-details-cell\">\n                  <div class=\"payment-details-content\">\n                    <div class=\"refund-details-grid\">\n                      <div class=\"refund-reason-section\">\n                        <span class=\"refund-label\">Причина возврата:</span>\n                        <div class=\"refund-reason-text\" *ngIf=\"payment.refundReason\">\n                          {{ payment.refundReason }}\n                        </div>\n                        <div class=\"refund-reason-empty\" *ngIf=\"!payment.refundReason\">\n                          Нет причины возврата\n                        </div>\n                      </div>\n                      <div class=\"refund-by-section\">\n                        <span class=\"refund-label\">Инициатор платежа:</span>\n                        <div class=\"refund-by-text\" *ngIf=\"payment.initiatedBy\">\n                          {{ payment.initiatedBy }}\n                        </div>\n                        <div class=\"refund-by-empty\" *ngIf=\"!payment.initiatedBy\">\n                          Не указан\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </td>\n              </tr>\n              </ng-container>\n            </tbody>\n          </table>\n        </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Refund Confirmation Modal -->\n    <app-refund-confirmation-modal\n      [visible]=\"showRefundModal\"\n      [payment]=\"selectedPaymentForRefund\"\n      [isProcessing]=\"isProcessingRefund\"\n      (visibleChange)=\"onRefundModalVisibleChange($event)\"\n      (confirm)=\"confirmRefund($event)\">\n    </app-refund-confirmation-modal>\n\n    <!-- Payment View Modal -->\n    <app-payment-view-modal\n      [visible]=\"showPaymentViewModal\"\n      [paymentTxId]=\"selectedPaymentTxId\"\n      [paymentSearchResult]=\"selectedPaymentSearchResult\"\n      (visibleChange)=\"closePaymentView()\"\n      (paymentUpdated)=\"onPaymentUpdated()\"\n      (refundedPaymentClick)=\"openPaymentView($event)\">\n    </app-payment-view-modal>\n  </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      height: 100%;\n    }\n\n    .page-wrapper {\n      min-height: 100%;\n      margin: -2rem;\n      padding: 2rem;\n      background: linear-gradient(180deg, #f0fdf4 0%, #f8fafc 50%, #f8fafc 100%);\n    }\n\n    .dashboard {\n      max-width: 1400px;\n      margin: 0 auto;\n      position: relative;\n      min-height: 400px;\n    }\n\n    .page-loading-container {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      min-height: 60vh;\n      width: 100%;\n    }\n\n    /* Header */\n    .dashboard-header {\n      display: flex;\n      justify-content: flex-start;\n      align-items: flex-start;\n      margin-bottom: 2rem;\n    }\n\n    .dashboard-title {\n      font-size: 1.75rem;\n      font-weight: 700;\n      color: #0f172a;\n      margin: 0 0 0.25rem 0;\n    }\n\n    .refunds-icon {\n      color: #dc2626;\n    }\n\n    .dashboard-subtitle {\n      font-size: 0.9375rem;\n      color: #64748b;\n      margin: 0;\n    }\n\n    .new-transaction-btn {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      padding: 0.75rem 1.5rem;\n      background: #16A34A;\n      color: white;\n      border: none;\n      border-radius: 12px;\n      font-size: 0.9375rem;\n      font-weight: 600;\n      cursor: pointer;\n      transition: all 0.2s ease;\n    }\n\n    .new-transaction-btn:hover {\n      background: #15803d;\n    }\n\n    .new-transaction-btn .btn-icon {\n      width: 18px;\n      height: 18px;\n    }\n\n    /* KPI Cards */\n    .kpi-grid {\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      gap: 1.5rem;\n      margin-bottom: 2rem;\n    }\n\n    @media (max-width: 1400px) {\n      .kpi-grid {\n        grid-template-columns: repeat(3, 1fr);\n      }\n    }\n\n    @media (max-width: 1000px) {\n      .kpi-grid {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    }\n\n    @media (max-width: 600px) {\n      .kpi-grid {\n        grid-template-columns: 1fr;\n      }\n    }\n\n    .kpi-card {\n      background: white;\n      border-radius: 16px;\n      padding: 1.5rem;\n      border: 1px solid rgba(0, 0, 0, 0.06);\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03), 0 3px 6px rgba(0, 0, 0, 0.03);\n    }\n\n    .kpi-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n      margin-bottom: 1rem;\n    }\n\n    .kpi-icon {\n      width: 48px;\n      height: 48px;\n      border-radius: 12px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 1.25rem;\n    }\n\n    .kpi-icon svg {\n      width: 24px;\n      height: 24px;\n      color: #16A34A;\n      display: block;\n    }\n\n    .kpi-change {\n      font-size: 0.8125rem;\n      font-weight: 600;\n      padding: 0.25rem 0.625rem;\n      border-radius: 20px;\n      background: #f0fdf4;\n      color: #16A34A;\n    }\n\n    .kpi-change.positive {\n      background: #f0fdf4;\n      color: #16A34A;\n    }\n\n    .kpi-change.negative {\n      background: #fef2f2;\n      color: #dc2626;\n    }\n\n    .kpi-value {\n      font-size: 2rem;\n      font-weight: 700;\n      color: #0f172a;\n      margin-bottom: 0.25rem;\n    }\n\n    .kpi-label {\n      font-size: 0.875rem;\n      color: #64748b;\n    }\n\n    /* Charts Section */\n    .charts-section {\n      display: grid;\n      // grid-template-columns: 2fr 1fr;\n      // gap: 1.5rem;\n      margin-bottom: 2rem;\n    }\n\n    @media (max-width: 1024px) {\n      .charts-section {\n        grid-template-columns: 1fr;\n      }\n    }\n\n    .chart-card {\n      background: white;\n      border-radius: 16px;\n      padding: 1.5rem;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n    }\n\n    .chart-title {\n      font-size: 1.125rem;\n      font-weight: 600;\n      color: #0f172a;\n      margin: 0 0 1.5rem 0;\n    }\n\n    /* Line Chart */\n    .line-chart-card {\n      min-height: 350px;\n      overflow: visible;\n    }\n\n    .chart-container {\n      display: flex;\n      height: 320px;\n      overflow: visible;\n    }\n\n    .chart-y-axis {\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      padding-right: 1rem;\n      font-size: 0.75rem;\n      color: #94a3b8;\n    }\n\n    .chart-area {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      overflow: visible;\n    }\n\n    .chart-svg-wrapper {\n      flex: 1;\n      position: relative;\n      min-height: 280px;\n      overflow: visible;\n    }\n\n    .line-chart {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      display: block;\n    }\n\n    .chart-points {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      overflow: visible;\n    }\n\n    .chart-point-wrapper {\n      position: absolute;\n      transform: translate(-50%, -50%);\n      cursor: pointer;\n      z-index: 1;\n      pointer-events: auto;\n      padding: 8px;\n    }\n\n    .chart-point-wrapper:hover {\n      z-index: 10;\n    }\n\n    .chart-point {\n      width: 10px;\n      height: 10px;\n      background: #22c55e;\n      border-radius: 50%;\n      transition: transform 0.15s ease, box-shadow 0.15s ease;\n    }\n\n    .chart-point-wrapper:hover .chart-point {\n      transform: scale(1.3);\n      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);\n    }\n\n    .chart-point.last-point {\n      width: 12px;\n      height: 12px;\n      background: white;\n      border: 2.5px solid #22c55e;\n      box-sizing: border-box;\n    }\n\n    .chart-tooltip {\n      position: absolute;\n      bottom: calc(100% + 10px);\n      left: 50%;\n      transform: translateX(-50%) translateY(6px) scale(0.97);\n      background: #1f2937;\n      color: white;\n      padding: 0.625rem 0.875rem;\n      border-radius: 8px;\n      font-size: 0.8125rem;\n      white-space: nowrap;\n      opacity: 0;\n      visibility: hidden;\n      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      pointer-events: none;\n    }\n\n    .chart-tooltip::after {\n      content: '';\n      position: absolute;\n      top: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      border: 6px solid transparent;\n      border-top-color: #1f2937;\n      transition: opacity 0.3s ease;\n    }\n\n    .chart-point-wrapper:hover .chart-tooltip {\n      opacity: 1;\n      visibility: visible;\n      transform: translateX(-50%) translateY(0) scale(1);\n    }\n\n    .tooltip-day {\n      font-weight: 600;\n      margin-bottom: 0.5rem;\n      padding-bottom: 0.375rem;\n      border-bottom: 1px solid #374151;\n      color: #f3f4f6;\n    }\n\n    .tooltip-stats {\n      display: flex;\n      flex-direction: column;\n      gap: 0.25rem;\n    }\n\n    .tooltip-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 1rem;\n    }\n\n    .tooltip-label {\n      color: #9ca3af;\n      font-size: 0.75rem;\n    }\n\n    .tooltip-value {\n      color: #f3f4f6;\n      font-weight: 500;\n    }\n\n    .tooltip-revenue {\n      color: #22c55e;\n      font-weight: 600;\n    }\n\n    .tooltip-bonus-earned {\n      color: #fbbf24;\n      font-weight: 600;\n    }\n\n    .tooltip-bonus-used {\n      color: #f472b6;\n      font-weight: 600;\n    }\n\n    .chart-x-axis {\n      position: relative;\n      height: 20px;\n      padding-top: 0.5rem;\n      font-size: 0.75rem;\n      color: #94a3b8;\n    }\n\n    .chart-x-axis span {\n      position: absolute;\n      transform: translateX(-50%);\n    }\n\n    /* Donut Chart */\n    .donut-chart-card {\n      display: flex;\n      flex-direction: column;\n    }\n\n    .donut-container {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 1rem;\n    }\n\n    .donut-chart {\n      width: 180px;\n      height: 180px;\n    }\n\n    .donut-legend {\n      display: flex;\n      justify-content: center;\n      gap: 2rem;\n      padding-top: 1rem;\n    }\n\n    .legend-item {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      font-size: 0.8125rem;\n      color: #64748b;\n    }\n\n    .legend-color {\n      width: 12px;\n      height: 12px;\n      border-radius: 3px;\n    }\n\n    .legend-color.active {\n      background: #16A34A;\n    }\n\n    .legend-color.forecast {\n      background: #dcfce7;\n    }\n\n    /* Table Section */\n    .table-section {\n      margin-bottom: 2rem;\n    }\n\n    .table-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 1rem;\n    }\n\n    .table-title {\n      font-size: 1.125rem;\n      font-weight: 600;\n      color: #0f172a;\n      margin: 0;\n    }\n\n    .view-all-link {\n      font-size: 0.875rem;\n      color: #16A34A;\n      text-decoration: none;\n      font-weight: 500;\n      transition: color 0.2s ease;\n    }\n\n    .view-all-link:hover {\n      color: #15803d;\n    }\n\n    .table-container {\n      background: white;\n      border-radius: 16px;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n      border: 1px solid #e5e7eb;\n      overflow: hidden;\n    }\n\n    .payments-table {\n      width: 100%;\n      border-collapse: collapse;\n    }\n\n    .payments-table th {\n      padding: 1rem;\n      text-align: left;\n      font-size: 0.75rem;\n      font-weight: 600;\n      color: #64748b;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      background: #f8fafc;\n      border-bottom: 1px solid #e5e7eb;\n    }\n\n    .payments-table td {\n      padding: 1rem;\n      border-bottom: 1px solid #f1f5f9;\n    }\n\n    .payment-row {\n      transition: background 0.15s;\n    }\n\n    .payment-row:hover {\n      background: #f8fafc;\n    }\n\n    .payment-row:last-child td {\n      border-bottom: none;\n    }\n\n    /* Payment ID */\n    .td-id {\n      min-width: 100px;\n    }\n\n    .payment-id {\n      font-family: monospace;\n      font-weight: 600;\n      color: #64748b;\n      font-size: 0.875rem;\n    }\n\n    .payment-id.clickable {\n      color: #64748b;\n      cursor: pointer;\n      text-decoration: underline;\n      transition: color 0.2s;\n    }\n\n    .payment-id.clickable:hover {\n      color: #475569;\n    }\n\n    .client-cell {\n      display: flex;\n      align-items: center;\n      gap: 0.75rem;\n    }\n\n    .client-avatar {\n      width: 40px;\n      height: 40px;\n      border-radius: 10px;\n      background: linear-gradient(135deg, #f0fdf4, #dcfce7);\n      color: #16A34A;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 0.875rem;\n      font-weight: 600;\n      flex-shrink: 0;\n      flex-shrink: 0;\n    }\n\n    .client-info {\n      display: flex;\n      flex-direction: column;\n      gap: 0.15rem;\n    }\n\n    .client-name-link {\n      text-decoration: none;\n      color: inherit;\n      transition: color 0.15s;\n    }\n\n    .client-name-link:hover {\n      color: #16A34A;\n    }\n\n    .client-name {\n      font-size: 0.9rem;\n      font-weight: 600;\n      color: #1f2937;\n      cursor: pointer;\n    }\n\n    .client-name-link:hover .client-name {\n      color: #16A34A;\n    }\n\n    .client-phone {\n      font-size: 0.8rem;\n      color: #64748b;\n    }\n\n    .amount-value {\n      font-size: 0.95rem;\n      font-weight: 600;\n      color: #16A34A;\n    }\n\n    .bonus-info {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      flex-wrap: wrap;\n    }\n\n    .bonus-badge {\n      display: inline-block;\n    }\n\n    .bonus-none {\n      font-size: 0.8rem;\n      color: #94a3b8;\n    }\n\n\n    .date-info {\n      display: flex;\n      flex-direction: column;\n      gap: 0.15rem;\n    }\n\n    .date-text {\n      font-size: 0.85rem;\n      color: #1f2937;\n      font-weight: 500;\n    }\n\n    .time-text {\n      font-size: 0.75rem;\n      color: #64748b;\n    }\n\n    .actions-cell {\n      display: flex;\n      gap: 0.5rem;\n      align-items: center;\n    }\n\n    .action-link {\n      display: inline-flex;\n      text-decoration: none;\n      color: inherit;\n    }\n\n    /* Expandable row styles */\n    .payments-table tbody tr.payment-details-row {\n      background: transparent;\n    }\n\n    .payments-table tbody tr.payment-details-row td {\n      border-top: none;\n      padding: 0;\n    }\n\n    .payment-details-cell {\n      padding: 0 !important;\n      background: transparent;\n    }\n\n    .payment-details-content {\n      padding: 1rem 1.5rem;\n      overflow: hidden;\n      animation: slideDown 0.3s ease-out;\n    }\n\n    @keyframes slideDown {\n      from {\n        opacity: 0;\n        max-height: 0;\n      }\n      to {\n        opacity: 1;\n        max-height: 300px;\n      }\n    }\n\n    .refund-details-grid {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n      gap: 2rem;\n    }\n\n    .refund-reason-section {\n      flex: 1;\n      text-align: left;\n    }\n\n    .refund-by-section {\n      flex: 0 0 auto;\n      text-align: right;\n      min-width: 200px;\n    }\n\n    .refund-reason-section,\n    .refund-by-section {\n      display: flex;\n      flex-direction: column;\n      gap: 0.5rem;\n    }\n\n    .refund-label {\n      font-size: 0.875rem;\n      font-weight: 600;\n      color: #475569;\n    }\n\n    .refund-reason-text {\n      padding: 0.75rem;\n      background: transparent;\n      border: none;\n      border-radius: 0;\n      font-size: 0.875rem;\n      color: #1f2937;\n      line-height: 1.6;\n      white-space: pre-wrap;\n      text-align: left;\n    }\n\n    .refund-by-text {\n      padding: 0.75rem 0;\n      background: transparent;\n      border: none;\n      border-radius: 0;\n      font-size: 0.875rem;\n      color: #1f2937;\n      line-height: 1.6;\n      white-space: pre-wrap;\n      text-align: right;\n    }\n\n    .refund-reason-empty {\n      padding: 0.75rem;\n      background: transparent;\n      border: none;\n      border-radius: 0;\n      font-size: 0.875rem;\n      color: #94a3b8;\n      font-style: italic;\n      text-align: left;\n    }\n\n    .refund-by-empty {\n      padding: 0.75rem 0;\n      background: transparent;\n      border: none;\n      border-radius: 0;\n      font-size: 0.875rem;\n      color: #94a3b8;\n      font-style: italic;\n      text-align: right;\n    }\n\n    .actions-cell svg {\n      transition: transform 0.3s ease;\n    }\n\n    .actions-cell svg.rotated {\n      transform: rotate(180deg);\n    }\n\n    /* Стили для SVG внутри app-button */\n    :host ::ng-deep app-button svg,\n    app-button svg {\n      width: 18px;\n      height: 18px;\n      flex-shrink: 0;\n      display: block;\n    }\n\n    :host ::ng-deep app-button.size-small svg,\n    app-button.size-small svg {\n      width: 16px;\n      height: 16px;\n    }\n\n    .btn-icon {\n      width: 18px;\n      height: 18px;\n      flex-shrink: 0;\n      display: block;\n    }\n\n    :host ::ng-deep .dashboard-header app-button button {\n      height: 44px;\n      padding: 0 1rem;\n    }\n\n    :host ::ng-deep .dashboard-header app-button button svg.create-icon {\n      width: 32px;\n      height: 32px;\n      flex-shrink: 0;\n    }\n\n    :host ::ng-deep app-button button .create-label {\n      display: inline-flex;\n      align-items: center;\n      line-height: 1.5;\n    }\n\n    @media (max-width: 768px) {\n      .page-wrapper {\n        margin: -1rem;\n        padding: 1rem;\n      }\n\n      .dashboard-header {\n        flex-direction: column;\n        gap: 1rem;\n      }\n\n      .new-transaction-btn {\n        width: 100%;\n        justify-content: center;\n      }\n\n      .clients-table {\n        display: block;\n        overflow-x: auto;\n      }\n    }\n  `]\n})\nexport class HomePageComponent implements OnInit, OnDestroy {\n  user$: Observable<AuthUser | null>;\n  private pageHeaderService = inject(PageHeaderService);\n  transactionModalService = inject(TransactionModalService);\n  private analyticsService = inject(AnalyticsService);\n  private paymentsService = inject(PaymentsService);\n  private toastService = inject(ToastService);\n  private cdr = inject(ChangeDetectorRef);\n\n  // Refund modal\n  showRefundModal = false;\n  selectedPaymentForRefund: Payment | null = null;\n\n  // Payment view modal\n  showPaymentViewModal = false;\n  selectedPaymentTxId: string | null = null;\n  selectedPaymentSearchResult: PaymentSearchResult | null = null;\n  isProcessingRefund = false;\n  \n  // Expanded rows\n  expandedRows = new Set<string>();\n\n  // Loading state\n  isLoading = true;\n  isChartLoading = true;\n  isLoadingPayments = false;\n\n  // KPI Cards Data (initialized empty, filled from real analytics API to avoid mock flicker)\n  kpiCards: KpiCard[] = [];\n\n  // Recent Payments Data\n  recentPayments: RecentPayment[] = [];\n\n  private destroy$ = new Subject<void>();\n  private router = inject(Router);\n\n  constructor(private store: Store<AppState>) {\n    this.user$ = this.store.select(selectUser);\n  }\n\n  ngOnInit(): void {\n    this.pageHeaderService.setPageHeader('Быстрый Обзор', [\n      { label: 'Главная' }\n    ]);\n    this.loadAnalyticsData();\n    this.loadChartData();\n    this.loadRecentPayments();\n\n    // Subscribe to transaction completion events\n    this.transactionModalService.transactionComplete$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => {\n        // Reload metrics and latest payments when on /home route\n        const currentUrl = this.router.url;\n        if (currentUrl === '/home' || currentUrl.startsWith('/home')) {\n          this.loadAnalyticsData();\n          this.loadChartData();\n          this.loadRecentPayments();\n        }\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  loadAnalyticsData(): void {\n    this.isLoading = true;\n    forkJoin({\n      monthlyRevenue: this.analyticsService.getMonthlyRevenue().pipe(\n        catchError((error) => {\n          console.error('Error loading monthly revenue:', error);\n          return of({ revenue: 0, changePercent: 0 });\n        }),\n        tap((data) => console.log('Monthly revenue response:', data))\n      ),\n      dailyRevenue: this.analyticsService.getDailyRevenue().pipe(\n        catchError((error) => {\n          console.error('Error loading daily revenue:', error);\n          return of({ revenue: 0, changePercent: 0 });\n        }),\n        tap((data) => console.log('Daily revenue response:', data))\n      ),\n      dailyTransactions: this.analyticsService.getDailyTransactions().pipe(\n        catchError((error) => {\n          console.error('Error loading daily transactions:', error);\n          return of({ count: 0, changeAbsolute: 0 });\n        }),\n        tap((data) => console.log('Daily transactions response:', data))\n      ),\n      newClients: this.analyticsService.getNewClients('DAILY').pipe(\n        catchError((error) => {\n          console.error('Error loading new clients:', error);\n          return of({ count: 0, changeAbsolute: 0, type: 'NEW' as const, period: 'DAILY' as const });\n        }),\n        tap((data) => console.log('New clients response:', data))\n      ),\n      averageCheck: this.analyticsService.getAverageCheck('MONTHLY').pipe(\n        catchError((error) => {\n          console.error('Error loading average check:', error);\n          return of({ averageCheck: 0, changePercent: 0 });\n        }),\n        tap((data) => console.log('Average check response:', data))\n      ),\n      bonusesAccrued: this.analyticsService.getBonusesAccrued('MONTHLY').pipe(\n        catchError((error) => {\n          console.error('Error loading bonuses accrued:', error);\n          return of({ amount: 0, changePercentage: 0 });\n        }),\n        tap((data) => console.log('Bonuses accrued response:', data))\n      ),\n      dailyRefunds: this.analyticsService.getDailyRefunds().pipe(\n        catchError((error) => {\n          console.error('Error loading daily refunds:', error);\n          return of({ count: 0, changeAbsolute: 0 });\n        }),\n        tap((data) => console.log('Daily refunds response:', data))\n      ),\n      activeClients: this.analyticsService.getActiveClients().pipe(\n        catchError((error) => {\n          console.error('Error loading active clients:', error);\n          return of({ count: 0, changeAbsolute: 0 });\n        }),\n        tap((data) => console.log('Active clients response:', data))\n      )\n    }).subscribe({\n      next: (data) => {\n        console.log('All analytics data received:', data);\n        console.log('Monthly revenue:', data.monthlyRevenue);\n        console.log('Daily revenue:', data.dailyRevenue);\n        console.log('Average check:', data.averageCheck);\n        console.log('Bonuses accrued:', data.bonusesAccrued);\n        this.updateKpiCards(data);\n        this.isLoading = false;\n      },\n      error: (error) => {\n        console.error('Error loading analytics data:', error);\n        this.isLoading = false;\n      }\n    });\n  }\n\n  loadRecentPayments(): void {\n    this.isLoadingPayments = true;\n    this.paymentsService.searchPayments({\n      page: 0,\n      size: 5,\n      sortBy: 'date',\n      sortDirection: 'DESC'\n    }).pipe(\n      catchError((error) => {\n        console.error('Error loading recent payments:', error);\n        return of({ content: [], totalElements: 0, totalPages: 0, page: 0, size: 5 });\n      })\n    ).subscribe({\n      next: (response) => {\n        console.log('Recent payments received:', response);\n        this.recentPayments = response.content.map(payment => this.convertPaymentToRecentPayment(payment));\n        this.isLoadingPayments = false;\n        this.cdr.detectChanges();\n      },\n      error: (error) => {\n        console.error('Error in recent payments subscription:', error);\n        this.isLoadingPayments = false;\n        this.cdr.detectChanges();\n      }\n    });\n  }\n\n  convertPaymentToRecentPayment(payment: PaymentSearchResult): RecentPayment {\n    if (!payment.createdAt) {\n      const now = new Date();\n      return {\n        id: payment.txId || '',\n        clientId: payment.clientId || '',\n        clientName: payment.clientName || '—',\n        clientPhone: payment.clientPhone || '—',\n        amount: payment.amount || 0,\n        bonusEarned: payment.bonusGranted || 0,\n        bonusUsed: payment.bonusUsed || 0,\n        bonusRevoked: payment.bonusRevoked || 0,\n        paymentMethod: 'card',\n        isRefund: payment.status === 'REFUNDED' || payment.refundedPaymentTxId !== null,\n        date: now.toLocaleDateString('ru-RU'),\n        time: now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' }),\n        initiatedBy: payment.initiatedBy || null,\n        refundReason: payment.refundReason || null\n      };\n    }\n    \n    const createdAt = new Date(payment.createdAt);\n    // Check if date is valid\n    if (isNaN(createdAt.getTime())) {\n      const now = new Date();\n      createdAt.setTime(now.getTime());\n    }\n    \n    // Format date as DD.MM.YYYY\n    const day = String(createdAt.getDate()).padStart(2, '0');\n    const month = String(createdAt.getMonth() + 1).padStart(2, '0');\n    const year = createdAt.getFullYear();\n    const dateStr = `${day}.${month}.${year}`;\n    \n    // Format time as HH:MM\n    const hours = String(createdAt.getHours()).padStart(2, '0');\n    const minutes = String(createdAt.getMinutes()).padStart(2, '0');\n    const timeStr = `${hours}:${minutes}`;\n    \n    // Determine payment method from paymentMethod or default\n    let paymentMethod: 'cash' | 'card' | 'transfer' = 'card';\n    if (payment.paymentMethod) {\n      const method = payment.paymentMethod.toLowerCase();\n      if (method.includes('cash') || method.includes('налич')) {\n        paymentMethod = 'cash';\n      } else if (method.includes('transfer') || method.includes('перевод')) {\n        paymentMethod = 'transfer';\n      } else {\n        paymentMethod = 'card';\n      }\n    }\n    \n    return {\n      id: payment.txId || '',\n      clientId: payment.clientId || '',\n      clientName: payment.clientName || '—',\n      clientPhone: payment.clientPhone || '—',\n      amount: payment.amount || 0,\n      bonusEarned: payment.bonusGranted || 0,\n      bonusUsed: payment.bonusUsed || 0,\n      bonusRevoked: payment.bonusRevoked || 0,\n      paymentMethod: paymentMethod,\n      isRefund: payment.status === 'REFUNDED' || payment.refundedPaymentTxId !== null,\n      date: dateStr,\n      time: timeStr,\n      initiatedBy: payment.initiatedBy || null,\n      refundReason: payment.refundReason || null\n    };\n  }\n\n  loadChartData(): void {\n    this.isChartLoading = true;\n    const now = new Date();\n    const currentYear = now.getFullYear();\n    const currentMonth = now.getMonth() + 1;\n    \n    console.log('Loading chart data for:', currentYear, currentMonth);\n    \n    this.analyticsService.getMonthlyRevenueChart(currentYear, currentMonth).pipe(\n      catchError((error) => {\n        console.error('Error loading chart data:', error);\n        console.error('Error status:', error.status);\n        \n        // Try previous month if current month fails\n        let fallbackYear = currentYear;\n        let fallbackMonth = currentMonth - 1;\n        \n        if (fallbackMonth < 1) {\n          fallbackMonth = 12;\n          fallbackYear = currentYear - 1;\n        }\n        \n        console.log('Trying fallback date:', fallbackYear, fallbackMonth);\n        \n        // Retry with fallback date\n        return this.analyticsService.getMonthlyRevenueChart(fallbackYear, fallbackMonth).pipe(\n          catchError((fallbackError) => {\n            console.error('Fallback also failed:', fallbackError);\n            // Return empty data if both attempts fail\n            return of({ dailyData: [], year: fallbackYear, month: fallbackMonth });\n          })\n        );\n      })\n    ).subscribe({\n      next: (chartData) => {\n        console.log('Chart data received:', chartData);\n        console.log('Chart data array length:', chartData.dailyData?.length);\n        const dataArray = chartData.dailyData || (chartData as any).data || [];\n        this.updateChartData(dataArray);\n        this.isChartLoading = false;\n        this.cdr.detectChanges();\n      },\n      error: (error) => {\n        console.error('Subscription error:', error);\n        this.isChartLoading = false;\n        this.cdr.detectChanges();\n      }\n    });\n  }\n\n  updateKpiCards(data: any): void {\n    // Extract values with fallback support\n    const monthlyRevenue = data.monthlyRevenue?.amount ?? data.monthlyRevenue?.revenue ?? 0;\n    const monthlyRevenueChange = data.monthlyRevenue?.changePercentage ?? data.monthlyRevenue?.changePercent;\n    \n    const dailyRevenue = data.dailyRevenue?.amount ?? data.dailyRevenue?.revenue ?? 0;\n    const dailyRevenueChange = data.dailyRevenue?.changePercentage ?? data.dailyRevenue?.changePercent;\n    \n    const averageCheck = data.averageCheck?.amount ?? data.averageCheck?.averageCheck ?? 0;\n    const averageCheckChange = data.averageCheck?.changePercentage ?? data.averageCheck?.changePercent;\n    \n    const bonusesAccrued = data.bonusesAccrued?.amount ?? data.bonusesAccrued?.count ?? 0;\n    const bonusesAccruedChange = data.bonusesAccrued?.changePercentage ?? data.bonusesAccrued?.changePercent;\n    \n    this.kpiCards = [\n      {\n        iconId: 'month',\n        iconBg: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n        value: this.formatCurrency(monthlyRevenue),\n        label: 'Выручка за месяц',\n        change: monthlyRevenueChange != null ? `${monthlyRevenueChange > 0 ? '+' : ''}${monthlyRevenueChange.toFixed(0)}%` : undefined,\n        changeType: monthlyRevenueChange != null && monthlyRevenueChange >= 0 ? 'positive' : 'negative'\n      },\n      {\n        iconId: 'revenue',\n        iconBg: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n        value: this.formatCurrency(dailyRevenue),\n        label: 'Выручка за сегодня',\n        change: dailyRevenueChange != null ? `${dailyRevenueChange > 0 ? '+' : ''}${dailyRevenueChange.toFixed(0)}%` : undefined,\n        changeType: dailyRevenueChange != null && dailyRevenueChange >= 0 ? 'positive' : 'negative'\n      },\n      {\n        iconId: 'transactions',\n        iconBg: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n        value: (data.dailyTransactions?.count ?? 0).toString(),\n        label: 'Транзакций сегодня',\n        change: data.dailyTransactions?.changeAbsolute != null ? `${data.dailyTransactions.changeAbsolute > 0 ? '+' : ''}${data.dailyTransactions.changeAbsolute}` : undefined,\n        changeType: data.dailyTransactions?.changeAbsolute != null && data.dailyTransactions.changeAbsolute >= 0 ? 'positive' : 'negative'\n      },\n      {\n        iconId: 'clients',\n        iconBg: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n        value: (data.newClients?.count ?? 0).toString(),\n        label: 'Новых клиентов',\n        change: data.newClients?.changeAbsolute != null ? `${data.newClients.changeAbsolute > 0 ? '+' : ''}${data.newClients.changeAbsolute}` : undefined,\n        changeType: data.newClients?.changeAbsolute != null && data.newClients.changeAbsolute >= 0 ? 'positive' : 'negative'\n      },\n      {\n        iconId: 'revenue',\n        iconBg: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n        value: this.formatCurrency(averageCheck),\n        label: 'Средний чек',\n        change: averageCheckChange != null ? `${averageCheckChange > 0 ? '+' : ''}${averageCheckChange.toFixed(0)}%` : undefined,\n        changeType: averageCheckChange != null && averageCheckChange >= 0 ? 'positive' : 'negative'\n      },\n      {\n        iconId: 'bonus',\n        iconBg: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n        value: this.formatCurrency(bonusesAccrued),\n        label: 'Бонусов начислено',\n        change: bonusesAccruedChange != null ? `${bonusesAccruedChange > 0 ? '+' : ''}${bonusesAccruedChange.toFixed(0)}%` : undefined,\n        changeType: bonusesAccruedChange != null && bonusesAccruedChange >= 0 ? 'positive' : 'negative'\n      },\n      {\n        iconId: 'refunds',\n        iconBg: 'linear-gradient(135deg, #fef2f2, #fee2e2)',\n        value: (data.dailyRefunds?.count ?? 0).toString(),\n        label: 'Возвратов',\n        change: data.dailyRefunds?.changeAbsolute != null ? `${data.dailyRefunds.changeAbsolute > 0 ? '+' : ''}${data.dailyRefunds.changeAbsolute}` : undefined,\n        changeType: data.dailyRefunds?.changeAbsolute != null && data.dailyRefunds.changeAbsolute >= 0 ? 'positive' : 'negative'\n      },\n      {\n        iconId: 'today',\n        iconBg: 'linear-gradient(135deg, #f0fdf4, #dcfce7)',\n        value: (data.activeClients?.count ?? 0).toString(),\n        label: 'Активных клиентов',\n        change: data.activeClients?.changeAbsolute != null ? `${data.activeClients.changeAbsolute > 0 ? '+' : ''}${data.activeClients.changeAbsolute}` : undefined,\n        changeType: data.activeClients?.changeAbsolute != null && data.activeClients.changeAbsolute >= 0 ? 'positive' : 'negative'\n      }\n    ];\n  }\n\n  updateChartData(chartData: any[]): void {\n    console.log('Updating chart data with:', chartData);\n    if (!chartData || chartData.length === 0) {\n      console.log('Chart data is empty, clearing cache');\n      this._chartDataCache = null;\n      return;\n    }\n\n    const daysInMonth = this.getDaysInCurrentMonth();\n    const svgWidth = 600;\n    const svgHeight = 300;\n    const padding = 50;\n    const chartWidth = svgWidth - padding * 2;\n    const chartHeight = svgHeight - padding * 2;\n\n    // Find max revenue for scaling\n    const maxRevenue = Math.max(...chartData.map(d => (d.revenue || d.amount || 0)), 1);\n    console.log('Max revenue for scaling:', maxRevenue);\n\n    const points = chartData.map((dataPoint) => {\n      const day = dataPoint.day || dataPoint.dayNumber || 1;\n      const dayRatio = daysInMonth > 1 ? (day - 1) / (daysInMonth - 1) : 0;\n      const x = padding + dayRatio * chartWidth;\n      const revenue = dataPoint.revenue || dataPoint.amount || 0;\n      const y = svgHeight - padding - (revenue / maxRevenue) * chartHeight;\n      \n      // Use new field names from API (transactionCount, bonusesGranted, bonusesUsed)\n      // with fallback to old field names for backward compatibility\n      const transactions = dataPoint.transactionCount ?? dataPoint.transactions ?? 0;\n      const bonusEarned = dataPoint.bonusesGranted ?? dataPoint.bonusEarned ?? dataPoint.bonusesAccrued ?? 0;\n      const bonusUsed = dataPoint.bonusesUsed ?? dataPoint.bonusUsed ?? 0;\n      \n      return {\n        x,\n        y,\n        day: day,\n        revenue: revenue,\n        transactions: transactions,\n        bonusEarned: bonusEarned,\n        bonusUsed: bonusUsed\n      };\n    });\n\n    console.log('Updated chart cache with', points.length, 'points');\n    this._chartDataCache = points;\n  }\n\n  formatCurrency(amount: number | null | undefined, showSymbol: boolean = true): string {\n    if (amount === null || amount === undefined || isNaN(amount)) {\n      return showSymbol ? '0 ₸' : '0';\n    }\n    const formatted = amount.toLocaleString('ru-RU', {\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    });\n    return showSymbol ? `${formatted} ₸` : formatted;\n  }\n\n  getInitials(name: string | null | undefined): string {\n    if (!name || name.trim() === '') {\n      return '—';\n    }\n    const parts = name.trim().split(' ').filter(n => n.length > 0);\n    if (parts.length === 0) {\n      return '—';\n    }\n    return parts.map(n => n[0]).join('').toUpperCase().slice(0, 2);\n  }\n\n  formatAmount(amount: number): string {\n    return amount.toLocaleString('ru-RU', {\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    });\n  }\n\n  formatPaymentId(id: string): string {\n    if (!id) return '—';\n    // If id is already in format like \"PTX-26-APQTM\", return it as is\n    if (id.includes('-')) {\n      return id;\n    }\n    // Otherwise, try to parse as number\n    const numId = parseInt(id, 10);\n    if (isNaN(numId)) {\n      return id;\n    }\n    return `PAY-${String(numId).padStart(3, '0')}`;\n  }\n\n  getPaymentMethodForBadge(method: string | undefined): 'CASH' | 'CARD' | 'TRANSFER' | null {\n    if (!method) return null;\n    const upperMethod = method.toUpperCase();\n    if (upperMethod === 'CASH' || upperMethod === 'CARD' || upperMethod === 'TRANSFER') {\n      return upperMethod as 'CASH' | 'CARD' | 'TRANSFER';\n    }\n    return null;\n  }\n\n  getPaymentMethodLabel(method: 'cash' | 'card' | 'transfer'): string {\n    const labels: Record<string, string> = {\n      cash: 'Наличные',\n      card: 'Карта',\n      transfer: 'Перевод'\n    };\n    return labels[method] || method;\n  }\n\n  openTransactionModal(): void {\n    this.transactionModalService.open();\n  }\n\n  openRefundModal(payment: RecentPayment): void {\n    if (payment.isRefund) {\n      return;\n    }\n    // Reset processing state when opening modal\n    this.isProcessingRefund = false;\n    // Convert RecentPayment to Payment format\n    const paymentForModal: Payment = {\n      id: payment.id,\n      clientId: payment.clientId,\n      clientName: payment.clientName,\n      clientPhone: payment.clientPhone,\n      amount: payment.amount,\n      bonusEarned: payment.bonusEarned,\n      bonusUsed: payment.bonusUsed,\n      bonusRevoked: payment.bonusRevoked,\n      paymentMethod: payment.paymentMethod,\n      isRefund: payment.isRefund,\n      date: payment.date,\n      time: payment.time\n    };\n    this.selectedPaymentForRefund = paymentForModal;\n    this.showRefundModal = true;\n  }\n\n  closeRefundModal(): void {\n    if (!this.isProcessingRefund) {\n      this.showRefundModal = false;\n      this.selectedPaymentForRefund = null;\n      this.isProcessingRefund = false;\n    }\n  }\n  \n  onRefundModalVisibleChange(visible: boolean): void {\n    if (!visible && !this.isProcessingRefund) {\n      this.closeRefundModal();\n    }\n  }\n\n  confirmRefund(payment: Payment): void {\n    if (!payment || this.isProcessingRefund) {\n      return;\n    }\n    \n    this.isProcessingRefund = true;\n    \n    this.paymentsService.refundPayment(payment.id, {\n      notes: payment.refundReason || ''\n    }).subscribe({\n      next: () => {\n        this.toastService.success('Возврат успешно выполнен');\n        // Reload payments to get updated data\n        this.loadRecentPayments();\n        this.isProcessingRefund = false;\n        this.showRefundModal = false;\n        this.selectedPaymentForRefund = null;\n      },\n      error: (error) => {\n        console.error('Error processing refund:', error);\n        const errorMessage = error?.error?.message || 'Ошибка при выполнении возврата';\n        this.toastService.error(errorMessage);\n        // Не сбрасываем isProcessingRefund при ошибке, чтобы кнопка оставалась заблокированной\n      }\n    });\n  }\n  \n  toggleRowExpansion(paymentId: string): void {\n    if (this.expandedRows.has(paymentId)) {\n      this.expandedRows.delete(paymentId);\n    } else {\n      this.expandedRows.add(paymentId);\n    }\n  }\n  \n  isRowExpanded(paymentId: string): boolean {\n    return this.expandedRows.has(paymentId);\n  }\n\n  getDaysInCurrentMonth(): number {\n    const now = new Date();\n    return new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();\n  }\n\n  getChartDataPoints(): Array<{ x: number; y: number; day: number; revenue: number; transactions: number; bonusEarned: number; bonusUsed: number }> {\n    // If we have cached chart data from API, use it\n    if (this._chartDataCache && this._chartDataCache.length > 0) {\n      return this._chartDataCache;\n    }\n\n    // Otherwise, generate sample data as fallback\n    const daysInMonth = this.getDaysInCurrentMonth();\n    const svgWidth = 600;\n    const svgHeight = 300;\n    const padding = 50;\n    const chartWidth = svgWidth - padding * 2;\n    const chartHeight = svgHeight - padding * 2;\n    \n    const points: Array<{ x: number; y: number; day: number; revenue: number; transactions: number; bonusEarned: number; bonusUsed: number }> = [];\n    \n    if (daysInMonth === 0) return points;\n    \n    // Generate sample revenue data (increasing trend with some variation)\n    for (let day = 1; day <= daysInMonth; day++) {\n      const dayRatio = daysInMonth > 1 ? (day - 1) / (daysInMonth - 1) : 0;\n      const x = padding + dayRatio * chartWidth;\n      // Simulate revenue: starts around 5000, ends around 25000, with some variation\n      const baseRevenue = 5000 + (day / daysInMonth) * 20000;\n      const variation = Math.sin(day * 0.2) * 2000; // Add some wave pattern\n      const revenue = Math.round(baseRevenue + variation);\n      // Simulate transactions: 5-25 per day with some variation\n      const transactions = Math.floor(5 + Math.random() * 20 + (day / daysInMonth) * 10);\n      // Simulate bonuses: ~1% of revenue earned, ~0.5% used\n      const bonusEarned = Math.round(revenue * 0.01 * (0.8 + Math.random() * 0.4));\n      const bonusUsed = Math.round(revenue * 0.005 * Math.random());\n      // Convert revenue to Y coordinate (inverted, as SVG Y increases downward)\n      const y = svgHeight - padding - (revenue / 30000) * chartHeight;\n      points.push({ x, y, day, revenue, transactions, bonusEarned, bonusUsed });\n    }\n    \n    return points;\n  }\n\n  // Cache chart data to avoid recalculating on every hover\n  private _chartDataCache: Array<{ x: number; y: number; day: number; revenue: number; transactions: number; bonusEarned: number; bonusUsed: number }> | null = null;\n  \n  getChartData(): Array<{ x: number; y: number; day: number; revenue: number; transactions: number; bonusEarned: number; bonusUsed: number }> {\n    // If we have cached chart data from API, use it\n    if (this._chartDataCache && this._chartDataCache.length > 0) {\n      return this._chartDataCache;\n    }\n    // Fallback to generated data if no API data available (only if not loading)\n    if (!this.isChartLoading) {\n      return this.getChartDataPoints();\n    }\n    // Return empty array while loading\n    return [];\n  }\n\n  getMonthName(): string {\n    const months = [\n      'января', 'февраля', 'марта', 'апреля', 'мая', 'июня',\n      'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'\n    ];\n    return months[new Date().getMonth()];\n  }\n\n  getTransactionsText(count: number): string {\n    const lastDigit = count % 10;\n    const lastTwoDigits = count % 100;\n    \n    if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {\n      return 'транзакций';\n    }\n    if (lastDigit === 1) {\n      return 'транзакция';\n    }\n    if (lastDigit >= 2 && lastDigit <= 4) {\n      return 'транзакции';\n    }\n    return 'транзакций';\n  }\n\n  getChartPath(): string {\n    const points = this.getChartData();\n    if (points.length === 0) return '';\n    \n    let path = `M${points[0].x},${points[0].y}`;\n    for (let i = 1; i < points.length; i++) {\n      path += ` L${points[i].x},${points[i].y}`;\n    }\n    return path;\n  }\n\n  getAreaPath(): string {\n    const points = this.getChartData();\n    if (points.length === 0) return '';\n    \n    const svgHeight = 300;\n    const padding = 50;\n    \n    let path = `M${points[0].x},${svgHeight - padding}`;\n    path += ` L${points[0].x},${points[0].y}`;\n    for (let i = 1; i < points.length; i++) {\n      path += ` L${points[i].x},${points[i].y}`;\n    }\n    path += ` L${points[points.length - 1].x},${svgHeight - padding} Z`;\n    return path;\n  }\n\n  getXAxisLabels(): string[] {\n    const daysInMonth = this.getDaysInCurrentMonth();\n    const labels: string[] = [];\n    \n    // Show labels at: 1, ~25%, ~50%, ~75%, and last day\n    const positions = [\n      1,\n      Math.ceil(daysInMonth * 0.25),\n      Math.ceil(daysInMonth * 0.5),\n      Math.ceil(daysInMonth * 0.75),\n      daysInMonth\n    ];\n    \n    // Remove duplicates and sort\n    const uniquePositions = [...new Set(positions)].sort((a, b) => a - b);\n    \n    return uniquePositions.map(day => day.toString());\n  }\n\n  getXAxisLabelPositions(): number[] {\n    const daysInMonth = this.getDaysInCurrentMonth();\n    const svgWidth = 600;\n    const padding = 50;\n    const chartWidth = svgWidth - padding * 2;\n    \n    const labels = this.getXAxisLabels();\n    return labels.map(label => {\n      const day = parseInt(label, 10);\n      const dayRatio = daysInMonth > 1 ? (day - 1) / (daysInMonth - 1) : 0;\n      return padding + dayRatio * chartWidth;\n    });\n  }\n\n  openPaymentView(paymentId: string): void {\n    // Find payment in the list to get search result data\n    const payment = this.recentPayments.find(p => p.id === paymentId);\n    if (payment) {\n      // Convert RecentPayment to PaymentSearchResult format\n      this.selectedPaymentSearchResult = {\n        txId: payment.id,\n        clientId: payment.clientId,\n        clientName: payment.clientName,\n        clientPhone: payment.clientPhone,\n        clientEmail: null,\n        amount: payment.amount,\n        status: payment.isRefund ? 'REFUNDED' : 'COMPLETED',\n        paymentMethod: payment.paymentMethod?.toUpperCase() as 'CASH' | 'CARD' | 'TRANSFER' | null,\n        initiatedBy: payment.initiatedBy || null,\n        createdAt: payment.date + 'T' + payment.time,\n        refundedPaymentTxId: null,\n        bonusGranted: payment.bonusEarned,\n        bonusUsed: payment.bonusUsed,\n        bonusRevoked: payment.bonusRevoked,\n        refundReason: payment.refundReason || null\n      };\n    }\n    this.selectedPaymentTxId = paymentId;\n    this.showPaymentViewModal = true;\n  }\n\n  closePaymentView(): void {\n    this.showPaymentViewModal = false;\n    this.selectedPaymentTxId = null;\n    this.selectedPaymentSearchResult = null;\n  }\n\n  onPaymentUpdated(): void {\n    // Reload payments after update\n    this.loadRecentPayments();\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
