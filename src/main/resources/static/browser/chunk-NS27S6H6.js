import{b as A,g as N,h as $,l as k,n as h}from"./chunk-I65UNOFV.js";import{A as b,C as _,D as y,E as C,P as p,R as i,S as a,T as c,V as w,W as D,a as d,c as R,d as I,ga as x,n as l,p as v,s as F,t as E,u as j,x as T,y as O}from"./chunk-XIV6Y6YY.js";var K={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},g="__@ngrx/effects_create__";function xe(e,r={}){let t=r.functional?e:e(),n=d(d({},K),r);return Object.defineProperty(t,g,{value:n}),t}function Y(e){return Object.getOwnPropertyNames(e).filter(n=>e[n]&&e[n].hasOwnProperty(g)?e[n][g].hasOwnProperty("dispatch"):!1).map(n=>{let s=e[n][g];return d({propertyName:n},s)})}function J(e){return Y(e)}function P(e){return Object.getPrototypeOf(e)}function L(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function U(e){return typeof e=="function"}function X(e){return e.filter(U)}function q(e,r,t){let n=P(e),o=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,u=J(e).map(({propertyName:f,dispatch:V,useEffectsErrorHandler:z})=>{let m=typeof e[f]=="function"?e[f]():e[f],M=z?t(m,r):m;return V===!1?M.pipe(O()):M.pipe(C()).pipe(l(B=>({effect:e[f],notification:B,propertyName:f,sourceName:o,sourceInstance:e})))});return F(...u)}var Q=10;function G(e,r,t=Q){return e.pipe(j(n=>(r&&r.handleError(n),t<=1?e:G(e,r,t-1))))}var Ae=(()=>{class e extends R{constructor(t){super(),t&&(this.source=t)}lift(t){let n=new e;return n.source=this,n.operator=t,n}static{this.\u0275fac=function(n){return new(n||e)(a(k))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ne(...e){return E(r=>e.some(t=>typeof t=="string"?t===r.type:t.type===r.type))}var $e=new i("@ngrx/effects Internal Root Guard"),ke=new i("@ngrx/effects User Provided Effects"),Pe=new i("@ngrx/effects Internal Root Effects"),Ue=new i("@ngrx/effects Internal Root Effects Instances"),Ge=new i("@ngrx/effects Internal Feature Effects"),He=new i("@ngrx/effects Internal Feature Effects Instance Groups"),W=new i("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>G}),Z="@ngrx/effects/init",ee=A(Z);function te(e,r){if(e.notification.kind==="N"){let t=e.notification.value;!ne(t)&&r.handleError(new Error(`Effect ${re(e)} dispatched an invalid action: ${oe(t)}`))}}function ne(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function re({propertyName:e,sourceInstance:r,sourceName:t}){let n=typeof r[e]=="function";return!!t?`"${t}.${String(e)}${n?"()":""}"`:`"${String(e)}()"`}function oe(e){try{return JSON.stringify(e)}catch{return e}}var se="ngrxOnIdentifyEffects";function ie(e){return S(e,se)}var fe="ngrxOnRunEffects";function ce(e){return S(e,fe)}var ue="ngrxOnInitEffects";function ae(e){return S(e,ue)}function S(e,r){return e&&r in e&&typeof e[r]=="function"}var H=(()=>{class e extends I{constructor(t,n){super(),this.errorHandler=t,this.effectsErrorHandler=n}addEffects(t){this.next(t)}toActions(){return this.pipe(y(t=>L(t)?P(t):t),v(t=>t.pipe(y(de))),v(t=>{let n=t.pipe(_(o=>le(this.errorHandler,this.effectsErrorHandler)(o)),l(o=>(te(o,this.errorHandler),o.notification)),E(o=>o.kind==="N"&&o.value!=null),b()),s=t.pipe(T(1),E(ae),l(o=>o.ngrxOnInitEffects()));return F(n,s)}))}static{this.\u0275fac=function(n){return new(n||e)(a(x),a(W))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function de(e){return ie(e)?e.ngrxOnIdentifyEffects():""}function le(e,r){return t=>{let n=q(t,e,r);return ce(t)?t.ngrxOnRunEffects(n):n}}var Ee=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,n){this.effectSources=t,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(n){return new(n||e)(a(H),a(h))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ve(...e){let r=e.flat(),t=X(r);return w([t,D(()=>{c(N),c($,{optional:!0});let n=c(Ee),s=c(H),o=!n.isStarted;o&&n.start();for(let u of r){let f=U(u)?c(u):u;s.addEffects(f)}o&&c(h).dispatch(ee())})])}export{xe as a,Ae as b,Ne as c,Ve as d};
