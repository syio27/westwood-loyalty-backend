{
  "version": 3,
  "sources": ["src/app/features/bonus-program/pages/bonus-program-page/bonus-program-page.component.ts"],
  "sourcesContent": ["import { Component, OnInit, inject, HostListener } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router, RouterLink } from '@angular/router';\nimport { PageHeaderService } from '../../../../core/services/page-header.service';\nimport { ToastService } from '../../../../core/services/toast.service';\nimport { RewardProgramsService } from '../../../../core/services/reward-programs.service';\nimport { DialogComponent } from '../../../../shared/components/dialog/dialog.component';\nimport {\n  RewardProgramListItem,\n  RewardProgramStatus,\n  RewardProgramType,\n  RewardProgramResponse,\n  LaunchCashbackProgramRequest\n} from '../../../../core/models/reward-program.model';\nimport { rewardProgramTypeToSlug } from '../../../../core/services/reward-programs.service';\n\ntype FilterTab = 'All' | 'Active' | 'Draft' | 'Scheduled' | 'Archived' | 'Inactive';\n\ntype ConfirmAction = 'launchNow' | 'deactivate' | 'delete';\ninterface ConfirmState {\n  action: ConfirmAction;\n  program: RewardProgramListItem;\n}\n\nfunction formatDateRange(startDate: string | null, endDate: string | null): string {\n  const start = startDate ? new Date(startDate).toLocaleDateString() : '—';\n  const end = endDate ? new Date(endDate).toLocaleDateString() : '∞';\n  return `${start} – ${end}`;\n}\n\nfunction typeToLabel(type: RewardProgramType): string {\n  const map: Record<RewardProgramType, string> = {\n    WELCOME: 'Welcome',\n    BIRTHDAY: 'Birthday',\n    REFERRAL: 'Referral',\n    CASHBACK: 'Cashback'\n  };\n  return map[type] ?? type;\n}\n\nfunction statusToLabel(status: RewardProgramStatus): string {\n  const map: Record<RewardProgramStatus, string> = {\n    DRAFT: 'Draft',\n    SCHEDULED: 'Scheduled',\n    ACTIVE: 'Active',\n    INACTIVE: 'Inactive',\n    ARCHIVED: 'Archived'\n  };\n  return map[status] ?? status;\n}\n\nfunction formatBonusType(program: RewardProgramListItem): { line1: string; line2: string } {\n  if (program.type !== 'CASHBACK') {\n    return { line1: '—', line2: '' };\n  }\n  const ct = program.cashbackType;\n  const value = program.cashbackValue ?? 0;\n  const minSpend = program.minSpendAmount ?? 0;\n  const ptsThreshold = program.pointsSpendThreshold;\n  if (ct === 'PERCENTAGE') {\n    return { line1: 'Percentage', line2: `${value}% per order` };\n  }\n  if (ct === 'BONUS_POINTS') {\n    const per = ptsThreshold != null && Number(ptsThreshold) > 0\n      ? ` per ${Number(ptsThreshold)} spend`\n      : ' per order';\n    return { line1: 'Bonus points', line2: `${value} pts earned${per}` };\n  }\n  return { line1: '—', line2: '' };\n}\n\n@Component({\n  selector: 'app-bonus-program-page',\n  standalone: true,\n  imports: [CommonModule, FormsModule, RouterLink, DialogComponent],\n  template: `\n    <div class=\"page-wrapper\">\n      <div class=\"programs-container\">\n        <div class=\"intro-row\">\n          <p class=\"intro-text\">\n            Increase engagement with your loyalty program. Create a promotion where members can earn extra points when they shop at designated times — perfect for happy hour or holidays.\n          </p>\n          <a routerLink=\"/bonus-program/programs\" class=\"btn-create-program\">\n            <svg class=\"btn-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M12 5v14M5 12h14\"/>\n            </svg>\n            Create program\n          </a>\n        </div>\n\n        <div class=\"tabs-row\">\n          <div class=\"tabs\">\n            <button type=\"button\" class=\"tab\" [class.active]=\"activeTab === 'All'\" (click)=\"activeTab = 'All'\">All</button>\n            <button type=\"button\" class=\"tab\" [class.active]=\"activeTab === 'Active'\" (click)=\"activeTab = 'Active'\">Active</button>\n            <button type=\"button\" class=\"tab\" [class.active]=\"activeTab === 'Draft'\" (click)=\"activeTab = 'Draft'\">Draft</button>\n            <button type=\"button\" class=\"tab\" [class.active]=\"activeTab === 'Scheduled'\" (click)=\"activeTab = 'Scheduled'\">Scheduled</button>\n            <button type=\"button\" class=\"tab\" [class.active]=\"activeTab === 'Inactive'\" (click)=\"activeTab = 'Inactive'\">Inactive</button>\n            <button type=\"button\" class=\"tab\" [class.active]=\"activeTab === 'Archived'\" (click)=\"activeTab = 'Archived'\">Archived</button>\n          </div>\n          <span class=\"tab-count\">{{ filteredPrograms.length }} program{{ filteredPrograms.length === 1 ? '' : 's' }}</span>\n        </div>\n\n        @if (loading) {\n          <p class=\"loading-message\">Loading programs…</p>\n        } @else if (loadError) {\n          <p class=\"error-message\">{{ loadError }}</p>\n        } @else if (programs.length === 0) {\n          <div class=\"table-wrap empty-state-wrap\">\n            <div class=\"empty-state\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\n                <path d=\"M20 12v9H4v-9\"/><rect x=\"2\" y=\"7\" width=\"20\" height=\"5\" rx=\"1\"/><path d=\"M12 22V7\"/><path d=\"M12 7c-2-2-4-2.5-4-4.5a2 2 0 0 1 4 0c0 1.5-2 2-4 4.5\"/><path d=\"M12 7c2-2 4-2.5 4-4.5a2 2 0 0 0-4 0c0 1.5 2 2 4 4.5\"/>\n              </svg>\n              <span>You don't have programs created</span>\n              <a routerLink=\"/bonus-program/programs\" class=\"btn-create-loyalty\">Create loyalty program</a>\n            </div>\n          </div>\n        } @else {\n          <div class=\"table-wrap\">\n            <table class=\"programs-table\">\n              <colgroup>\n                <col style=\"width:22%\">\n                <col style=\"width:14%\">\n                <col style=\"width:22%\">\n                <col style=\"width:20%\">\n                <col style=\"width:14%\">\n                <col style=\"width:8%\">\n              </colgroup>\n              <thead>\n                <tr>\n                  <th>Program name</th>\n                  <th>Program type</th>\n                  <th>Bonus type</th>\n                  <th>Start date – End date</th>\n                  <th>Status</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"let program of paginatedPrograms\" class=\"program-row\" (click)=\"goToProgram(program)\">\n                  <td>\n                    <span class=\"program-name\">{{ program.name || 'Untitled' }}</span>\n                  </td>\n                  <td>\n                    <span class=\"program-type-label\">{{ typeToLabel(program.type) }}</span>\n                  </td>\n                  <td>\n                    <div class=\"bonus-type-cell\">\n                      <span class=\"bonus-type-line1\">{{ formatBonusType(program).line1 }}</span>\n                      @if (formatBonusType(program).line2) {\n                        <span class=\"bonus-type-line2\">{{ formatBonusType(program).line2 }}</span>\n                      }\n                    </div>\n                  </td>\n                  <td class=\"date-cell\">{{ formatDateRange(program.startDate, program.endDate) }}</td>\n                  <td>\n                    <span class=\"status-pill\" [class.active]=\"program.status === 'ACTIVE'\" [class.scheduled]=\"program.status === 'SCHEDULED'\" [class.draft]=\"program.status === 'DRAFT'\" [class.archived]=\"program.status === 'ARCHIVED'\" [class.inactive]=\"program.status === 'INACTIVE'\">\n                      <span class=\"status-icon\" [attr.aria-hidden]=\"true\">\n                        @switch (program.status) {\n                          @case ('ACTIVE') {\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M20 6L9 17l-5-5\"/></svg>\n                          }\n                          @case ('SCHEDULED') {\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\"/><path d=\"M16 2v4M8 2v4M3 10h18\"/></svg>\n                          }\n                          @case ('DRAFT') {\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"/><path d=\"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"/></svg>\n                          }\n                          @case ('ARCHIVED') {\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M21 8v13H3V8\"/><path d=\"M1 3h22v5H1z\"/><path d=\"M10 12h4\"/></svg>\n                          }\n                          @case ('INACTIVE') {\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"M10 15V9\"/><path d=\"M14 15V9\"/></svg>\n                          }\n                          @default {\n                            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"10\"/></svg>\n                          }\n                        }\n                      </span>\n                      <span class=\"status-text\">{{ statusToLabel(program.status) }}</span>\n                    </span>\n                  </td>\n                  <td class=\"action-cell\" (click)=\"$event.stopPropagation()\">\n                    <button type=\"button\" class=\"btn-menu\" (click)=\"toggleMenu(program.uuid)\" [attr.aria-expanded]=\"openMenuUuid === program.uuid\" aria-label=\"Actions\">\n                      <svg class=\"dots-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><circle cx=\"12\" cy=\"6\" r=\"1.5\"/><circle cx=\"12\" cy=\"12\" r=\"1.5\"/><circle cx=\"12\" cy=\"18\" r=\"1.5\"/></svg>\n                    </button>\n                    @if (openMenuUuid === program.uuid) {\n                      <div class=\"menu-dropdown\">\n                        @if (program.status === 'DRAFT') {\n                          <button type=\"button\" class=\"menu-item\" (click)=\"actionContinueCreate(program)\">Continue editing</button>\n                        } @else {\n                          <button type=\"button\" class=\"menu-item\" (click)=\"actionFullView(program)\">Full view</button>\n                        }\n                        <button type=\"button\" class=\"menu-item\" (click)=\"actionReports(program)\">Reports</button>\n                        @if (program.status === 'SCHEDULED') {\n                          <button type=\"button\" class=\"menu-item\" (click)=\"actionLaunchNow(program)\">Launch now</button>\n                        }\n                        @if (program.status === 'ACTIVE') {\n                          <button type=\"button\" class=\"menu-item menu-item-danger\" (click)=\"actionDeactivate(program)\">Deactivate</button>\n                        }\n                        @if (program.status === 'INACTIVE' || program.status === 'ARCHIVED' || program.status === 'DRAFT') {\n                          <button type=\"button\" class=\"menu-item menu-item-danger\" (click)=\"actionDelete(program)\">Delete</button>\n                        }\n                      </div>\n                    }\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n\n          <div class=\"pagination\">\n            <button type=\"button\" class=\"page-btn\" [disabled]=\"currentPage <= 1\" (click)=\"currentPage = currentPage - 1\" aria-label=\"Previous\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M15 18l-6-6 6-6\"/></svg>\n            </button>\n            <span class=\"page-info\">{{ filteredPrograms.length === 0 ? 0 : (currentPage - 1) * pageSize + 1 }}-{{ Math.min(currentPage * pageSize, filteredPrograms.length) }} of {{ filteredPrograms.length }}</span>\n            <button type=\"button\" class=\"page-btn\" [disabled]=\"currentPage * pageSize >= filteredPrograms.length\" (click)=\"currentPage = currentPage + 1\" aria-label=\"Next\">\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M9 18l6-6-6-6\"/></svg>\n            </button>\n          </div>\n        }\n      </div>\n    </div>\n\n    <app-dialog\n      [visible]=\"!!confirmState\"\n      [title]=\"confirmDialogTitle\"\n      [message]=\"confirmDialogMessage\"\n      [confirmLabel]=\"confirmDialogConfirmLabel\"\n      cancelLabel=\"Cancel\"\n      (confirmed)=\"onConfirmAction()\"\n      (cancelled)=\"confirmState = null\"\n      (closed)=\"confirmState = null\">\n    </app-dialog>\n  `,\n  styles: [`\n    :host { display: block; height: 100%; }\n    .page-wrapper { min-height: 100%; margin: -2rem; padding: 2rem; background: linear-gradient(180deg, #f1f5f9 0%, #f8fafc 100%); }\n    .programs-container { max-width: 1200px; margin: 0 auto; }\n\n    .intro-row { display: flex; align-items: flex-start; justify-content: space-between; gap: 1.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; }\n    .intro-text { flex: 1; min-width: 0; font-size: 0.95rem; color: #475569; line-height: 1.6; margin: 0; max-width: 720px; }\n    .btn-create-program { flex-shrink: 0; display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.6rem 1.25rem; background: #16A34A; color: white; border-radius: 10px; font-size: 0.9rem; font-weight: 600; text-decoration: none; transition: all 0.2s; box-shadow: 0 1px 3px rgba(22, 163, 74, 0.25); }\n    .btn-create-program:hover { background: #15803d; color: white; transform: translateY(-1px); box-shadow: 0 2px 6px rgba(22, 163, 74, 0.3); }\n    .btn-icon { width: 18px; height: 18px; }\n\n    .tabs-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.25rem; gap: 1rem; flex-wrap: wrap; }\n    .tabs { display: flex; gap: 0; background: white; border-radius: 10px; padding: 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }\n    .tab { padding: 0.5rem 1rem; border: none; background: transparent; border-radius: 8px; font-size: 0.875rem; font-weight: 500; color: #64748b; cursor: pointer; transition: all 0.2s; }\n    .tab:hover { color: #0f172a; background: #f1f5f9; }\n    .tab.active { background: #16A34A; color: white; }\n    .tab-count { font-size: 0.875rem; color: #64748b; font-weight: 500; }\n\n    .loading-message, .error-message { padding: 1.5rem; text-align: center; color: #64748b; }\n    .error-message { color: #b91c1c; }\n\n    .empty-state-wrap { background: white; border-radius: 16px; border: 1px solid #e2e8f0; overflow: visible; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -2px rgba(0,0,0,0.05); }\n    .empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 4rem 2rem; color: #64748b; }\n    .empty-state svg { width: 56px; height: 56px; margin-bottom: 1rem; color: #94a3b8; }\n    .empty-state span { font-size: 1rem; margin-bottom: 1.25rem; }\n    .btn-create-loyalty { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.6rem 1.25rem; background: #16A34A; color: white; border-radius: 10px; font-size: 0.9rem; font-weight: 600; text-decoration: none; transition: all 0.2s; box-shadow: 0 1px 3px rgba(22, 163, 74, 0.25); }\n    .btn-create-loyalty:hover { background: #15803d; color: white; }\n\n    .table-wrap { background: white; border-radius: 16px; border: 1px solid #e2e8f0; overflow: visible; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -2px rgba(0,0,0,0.05); }\n    .programs-table { width: 100%; border-collapse: collapse; table-layout: fixed; }\n    .programs-table th,\n    .programs-table td { text-align: left; padding: 1rem 1.25rem; vertical-align: middle; }\n    .programs-table th { font-size: 0.7rem; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.06em; background: #f8fafc; border-bottom: 1px solid #e2e8f0; }\n    .programs-table td { padding: 1rem 1.25rem; border-bottom: 1px solid #f1f5f9; font-size: 0.9rem; color: #334155; }\n    .program-row { cursor: pointer; transition: background 0.15s; }\n    .program-row:hover { background: #f8fafc; }\n    .program-row:last-child td { border-bottom: none; }\n\n    .program-name { font-weight: 600; color: #0f172a; }\n    .program-type-label { color: #475569; }\n    .bonus-type-cell { display: flex; flex-direction: column; gap: 0.15rem; }\n    .bonus-type-line1 { font-weight: 500; color: #0f172a; }\n    .bonus-type-line2 { font-size: 0.8rem; color: #64748b; }\n    .date-cell { color: #475569; font-variant-numeric: tabular-nums; }\n\n    .status-pill { display: inline-flex; align-items: center; gap: 0.4rem; padding: 0.35rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 600; }\n    .status-icon { display: inline-flex; width: 16px; height: 16px; }\n    .status-icon svg { width: 100%; height: 100%; }\n    .status-text { text-transform: none; }\n    .status-pill.active { background: #dcfce7; color: #166534; }\n    .status-pill.scheduled { background: #e0f2fe; color: #0369a1; }\n    .status-pill.draft { background: #fef3c7; color: #b45309; }\n    .status-pill.archived { background: #f1f5f9; color: #64748b; }\n    .status-pill.inactive { background: #fee2e2; color: #b91c1c; }\n\n    .action-cell { position: relative; text-align: right; }\n    .btn-menu { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border: none; border-radius: 10px; background: transparent; color: #64748b; cursor: pointer; transition: color 0.2s, background 0.2s; }\n    .btn-menu:hover { background: #f1f5f9; color: #0f172a; }\n    .dots-icon { width: 20px; height: 20px; }\n    .menu-dropdown { position: absolute; top: 100%; right: 0; margin-top: 4px; min-width: 160px; background: white; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.12); border: 1px solid #e2e8f0; padding: 4px; z-index: 100; }\n    .menu-item { display: block; width: 100%; text-align: left; padding: 0.5rem 0.75rem; border: none; background: none; border-radius: 6px; font-size: 0.875rem; color: #334155; cursor: pointer; transition: background 0.15s; }\n    .menu-item:hover { background: #f1f5f9; }\n    .menu-item-danger { color: #b91c1c; }\n    .menu-item-danger:hover { background: #fef2f2; }\n\n    .pagination { display: flex; align-items: center; justify-content: center; gap: 1rem; margin-top: 1.5rem; }\n    .page-btn { width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; border: 1px solid #e2e8f0; border-radius: 10px; background: white; color: #475569; cursor: pointer; transition: all 0.2s; }\n    .page-btn:hover:not(:disabled) { background: #f8fafc; border-color: #16A34A; color: #16A34A; }\n    .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }\n    .page-btn svg { width: 18px; height: 18px; }\n    .page-info { font-size: 0.875rem; color: #64748b; }\n  `]\n})\nexport class BonusProgramPageComponent implements OnInit {\n  private pageHeaderService = inject(PageHeaderService);\n  private router = inject(Router);\n  private toast = inject(ToastService);\n  private rewardProgramsService = inject(RewardProgramsService);\n\n  activeTab: FilterTab = 'All';\n  currentPage = 1;\n  pageSize = 10;\n  Math = Math;\n\n  programs: RewardProgramListItem[] = [];\n  loading = false;\n  loadError = '';\n  openMenuUuid: string | null = null;\n  actionInProgress: string | null = null;\n  confirmState: ConfirmState | null = null;\n\n  get confirmDialogTitle(): string {\n    if (!this.confirmState) return '';\n    const t: Record<ConfirmAction, string> = {\n      launchNow: 'Launch program now?',\n      deactivate: 'Deactivate program?',\n      delete: 'Delete program?'\n    };\n    return t[this.confirmState.action];\n  }\n\n  get confirmDialogMessage(): string {\n    if (!this.confirmState) return '';\n    const m: Record<ConfirmAction, string> = {\n      launchNow: 'It will start affecting customers joining the loyalty program and the start date will be set to today.',\n      deactivate: 'This program will be deactivated and will stop affecting customers.',\n      delete: 'This program will be permanently deleted. This cannot be undone.'\n    };\n    return m[this.confirmState.action];\n  }\n\n  get confirmDialogConfirmLabel(): string {\n    if (!this.confirmState) return 'Confirm';\n    const l: Record<ConfirmAction, string> = {\n      launchNow: 'Launch now',\n      deactivate: 'Deactivate',\n      delete: 'Delete'\n    };\n    return l[this.confirmState.action];\n  }\n\n  @HostListener('document:click') onDocumentClick(): void {\n    this.openMenuUuid = null;\n  }\n\n  readonly formatDateRange = formatDateRange;\n  readonly typeToLabel = typeToLabel;\n  readonly statusToLabel = statusToLabel;\n  readonly formatBonusType = formatBonusType;\n\n  get filteredPrograms(): RewardProgramListItem[] {\n    let list = this.programs;\n    if (this.activeTab !== 'All') {\n      const status = this.activeTab.toUpperCase() as RewardProgramStatus;\n      list = list.filter(p => p.status === status);\n    }\n    return list;\n  }\n\n  get paginatedPrograms(): RewardProgramListItem[] {\n    const start = (this.currentPage - 1) * this.pageSize;\n    return this.filteredPrograms.slice(start, start + this.pageSize);\n  }\n\n  ngOnInit(): void {\n    this.pageHeaderService.setPageHeader('Reward Programs', [\n      { label: 'Главная', route: '/home' },\n      { label: 'Reward Programs' }\n    ]);\n    this.loadPrograms();\n  }\n\n  private loadPrograms(): void {\n    this.loading = true;\n    this.loadError = '';\n    this.rewardProgramsService.listPrograms().subscribe({\n      next: (list) => {\n        this.programs = list;\n        this.loading = false;\n      },\n      error: (err) => {\n        this.loadError = err?.error?.message || 'Failed to load programs.';\n        this.loading = false;\n      }\n    });\n  }\n\n  toggleMenu(uuid: string): void {\n    this.openMenuUuid = this.openMenuUuid === uuid ? null : uuid;\n  }\n\n  actionFullView(program: RewardProgramListItem): void {\n    this.openMenuUuid = null;\n    this.router.navigate(['/bonus-program', 'view', program.uuid]);\n  }\n\n  actionContinueCreate(program: RewardProgramListItem): void {\n    this.openMenuUuid = null;\n    this.goToDraftWizard(program);\n  }\n\n  actionReports(program: RewardProgramListItem): void {\n    this.openMenuUuid = null;\n    this.toast.show('Reports coming soon', 'success');\n  }\n\n  actionLaunchNow(program: RewardProgramListItem): void {\n    this.openMenuUuid = null;\n    this.confirmState = { action: 'launchNow', program };\n  }\n\n  private buildLaunchNowPayload(res: RewardProgramResponse): LaunchCashbackProgramRequest {\n    const r = res.cashbackRule;\n    const schedules = (res.weeklySchedules || []).map(s => ({\n      dayOfWeek: s.dayOfWeek,\n      enabled: s.enabled,\n      startTime: s.startTime ?? null,\n      endTime: s.endTime ?? null\n    }));\n    const tiers = (res.cashbackTiers || []).map((t, i) => ({\n      name: t.name,\n      minAmount: t.minAmount,\n      maxAmount: t.maxAmount ?? null,\n      extraEarningPercent: t.extraEarningPercent,\n      sortOrder: i\n    }));\n    return {\n      immediate: true,\n      name: res.name ?? null,\n      description: res.description ?? null,\n      cashbackType: r?.cashbackType ?? null,\n      cashbackValue: r?.cashbackValue ?? null,\n      minSpendAmount: r?.minSpendAmount ?? null,\n      eligibilityType: r?.eligibilityType ?? null,\n      redeemLimitPercent: r?.redeemLimitPercent ?? null,\n      bonusLifespanDays: r?.bonusLifespanDays ?? null,\n      pointsSpendThreshold: r?.pointsSpendThreshold ?? null,\n      startDate: new Date().toISOString(),\n      endDate: res.endDate ?? null,\n      weeklySchedules: schedules.length > 0 ? schedules : null,\n      tiers: tiers.length > 0 ? tiers : null\n    };\n  }\n\n  actionDeactivate(program: RewardProgramListItem): void {\n    this.openMenuUuid = null;\n    this.confirmState = { action: 'deactivate', program };\n  }\n\n  actionDelete(program: RewardProgramListItem): void {\n    this.openMenuUuid = null;\n    this.confirmState = { action: 'delete', program };\n  }\n\n  onConfirmAction(): void {\n    const state = this.confirmState;\n    if (!state || this.actionInProgress) return;\n    this.confirmState = null;\n    const program = state.program;\n    this.actionInProgress = program.uuid;\n\n    if (state.action === 'launchNow') {\n      this.rewardProgramsService.getProgram(program.uuid).subscribe({\n        next: (full) => {\n          const payload = this.buildLaunchNowPayload(full);\n          this.rewardProgramsService.launchCashbackProgram(program.uuid, payload).subscribe({\n            next: () => {\n              this.actionInProgress = null;\n              this.toast.success('Program launched');\n              this.loadPrograms();\n            },\n            error: (err) => {\n              this.actionInProgress = null;\n              this.toast.error(err?.error?.message || 'Failed to launch program');\n            }\n          });\n        },\n        error: (err) => {\n          this.actionInProgress = null;\n          this.toast.error(err?.error?.message || 'Failed to load program');\n        }\n      });\n      return;\n    }\n\n    if (state.action === 'deactivate') {\n      this.rewardProgramsService.deactivateProgram(program.uuid).subscribe({\n        next: () => {\n          this.actionInProgress = null;\n          this.toast.success('Program deactivated');\n          this.loadPrograms();\n        },\n        error: (err) => {\n          this.actionInProgress = null;\n          this.toast.error(err?.error?.message || 'Failed to deactivate');\n        }\n      });\n      return;\n    }\n\n    if (state.action === 'delete') {\n      this.rewardProgramsService.deleteProgram(program.uuid).subscribe({\n        next: () => {\n          this.actionInProgress = null;\n          this.toast.success('Program deleted');\n          this.loadPrograms();\n        },\n        error: (err) => {\n          this.actionInProgress = null;\n          this.toast.error(err?.error?.message || 'Failed to delete');\n        }\n      });\n    }\n  }\n\n  goToProgram(program: RewardProgramListItem): void {\n    if (program.status === 'DRAFT') {\n      this.goToDraftWizard(program);\n    } else {\n      this.router.navigate(['/bonus-program', 'view', program.uuid]);\n    }\n  }\n\n  private goToDraftWizard(program: RewardProgramListItem): void {\n    const slug = rewardProgramTypeToSlug(program.type);\n    if (program.type === 'CASHBACK') {\n      this.router.navigate(['/bonus-program', 'create', slug, program.uuid, 'steps', 1]);\n    } else {\n      this.router.navigate(['/bonus-program', 'create', slug, program.uuid]);\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
