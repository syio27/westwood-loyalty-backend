{
  "version": 3,
  "sources": ["src/app/core/services/message-templates.service.ts", "src/app/core/services/messages.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../../environments/environment';\n\nexport interface MessageTemplate {\n  id: string;\n  name: string;\n  type: string;\n  content: string;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\nexport interface CreateMessageTemplateRequest {\n  name: string;\n  type: string;\n  content: string;\n}\n\nexport interface UpdateMessageTemplateRequest {\n  name?: string;\n  type?: string;\n  content?: string;\n}\n\nexport interface TemplateVariable {\n  name: string;\n  description: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageTemplatesService {\n  private readonly apiUrl = `${environment.apiUrl}/message-templates`;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Get all message templates\n   * @param type - Optional filter by template type\n   * @returns Observable with array of message templates\n   */\n  getAllTemplates(type?: string): Observable<MessageTemplate[]> {\n    let params = new HttpParams();\n    if (type) {\n      params = params.set('type', type);\n    }\n    return this.http.get<MessageTemplate[]>(this.apiUrl, { params });\n  }\n\n  /**\n   * Get message template by ID\n   * @param id - Template ID\n   * @returns Observable with message template\n   */\n  getTemplateById(id: string): Observable<MessageTemplate> {\n    return this.http.get<MessageTemplate>(`${this.apiUrl}/${id}`);\n  }\n\n  /**\n   * Create a new message template\n   * @param data - Template data\n   * @returns Observable with created message template\n   */\n  createTemplate(data: CreateMessageTemplateRequest): Observable<MessageTemplate> {\n    return this.http.post<MessageTemplate>(this.apiUrl, data);\n  }\n\n  /**\n   * Update message template\n   * @param id - Template ID\n   * @param data - Updated template data\n   * @returns Observable with updated message template\n   */\n  updateTemplate(id: string, data: UpdateMessageTemplateRequest): Observable<MessageTemplate> {\n    return this.http.put<MessageTemplate>(`${this.apiUrl}/${id}`, data);\n  }\n\n  /**\n   * Delete message template\n   * @param id - Template ID\n   * @returns Observable with void\n   */\n  deleteTemplate(id: string): Observable<void> {\n    return this.http.delete<void>(`${this.apiUrl}/${id}`);\n  }\n\n  /**\n   * Get populated message template with variables replaced\n   * @param type - Template type\n   * @param clientId - Client UUID\n   * @param paymentTxId - Optional payment transaction ID\n   * @returns Observable with populated template content\n   */\n  getPopulatedTemplate(\n    type: string,\n    clientId: string,\n    paymentTxId?: string\n  ): Observable<{ id: number; name: string; type: string; populatedContent: string }> {\n    let params = new HttpParams()\n      .set('type', type)\n      .set('clientId', clientId);\n    \n    if (paymentTxId) {\n      params = params.set('paymentTxId', paymentTxId);\n    }\n    \n    return this.http.get<{ id: number; name: string; type: string; populatedContent: string }>(`${this.apiUrl}/populated`, { params });\n  }\n\n  /**\n   * Get available template variables\n   * @returns Observable with array of template variables\n   */\n  getTemplateVariables(): Observable<TemplateVariable[]> {\n    return this.http.get<TemplateVariable[]>(`${this.apiUrl}/variables`);\n  }\n\n  /**\n   * Get available template types\n   * @returns Observable with array of template types with display names\n   */\n  getTemplateTypes(): Observable<Array<{ type: string; displayName: string }>> {\n    return this.http.get<Array<{ type: string; displayName: string }>>(`${this.apiUrl}/types`);\n  }\n}\n", "import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../../environments/environment';\n\nexport interface MessageRecord {\n  id: string;\n  clientId: string;\n  clientName?: string;\n  messageContent: string;\n  channel: 'EMAIL' | 'WHATSAPP' | 'SMS';\n  status: string;\n  sentAt?: string;\n  createdAt?: string;\n  updatedAt?: string;\n  initiatedByUserId?: number;\n  initiatedByUsername?: string;\n}\n\nexport interface SendMessageRequest {\n  clientId: string;\n  messageContent: string;\n  channel: 'EMAIL' | 'WHATSAPP' | 'SMS';\n}\n\nexport interface SendMessageResponse {\n  id: string;\n  clientId: string;\n  messageContent: string;\n  channel: 'EMAIL' | 'WHATSAPP' | 'SMS';\n  status: string;\n  sentAt: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessagesService {\n  private readonly apiUrl = `${environment.apiUrl}/messages`;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Send a message to a client\n   * @param data - Message data including clientId, messageContent, and channel\n   * @returns Observable with sent message response\n   */\n  sendMessage(data: SendMessageRequest): Observable<SendMessageResponse> {\n    return this.http.post<SendMessageResponse>(`${this.apiUrl}/send`, data);\n  }\n\n  /**\n   * Get message records by channel\n   * @param channel - Channel type: EMAIL, WHATSAPP, or SMS\n   * @returns Observable with array of message records\n   */\n  getMessagesByChannel(channel: 'EMAIL' | 'WHATSAPP' | 'SMS'): Observable<MessageRecord[]> {\n    return this.http.get<MessageRecord[]>(`${this.apiUrl}/channel/${channel}`);\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAkCM,IAAO,0BAAP,MAAO,yBAAuB;EAGd;EAFH,SAAS,GAAG,YAAY,MAAM;EAE/C,YAAoB,MAAgB;AAAhB,SAAA,OAAA;EAAmB;;;;;;EAOvC,gBAAgB,MAAa;AAC3B,QAAI,SAAS,IAAI,WAAU;AAC3B,QAAI,MAAM;AACR,eAAS,OAAO,IAAI,QAAQ,IAAI;IAClC;AACA,WAAO,KAAK,KAAK,IAAuB,KAAK,QAAQ,EAAE,OAAM,CAAE;EACjE;;;;;;EAOA,gBAAgB,IAAU;AACxB,WAAO,KAAK,KAAK,IAAqB,GAAG,KAAK,MAAM,IAAI,EAAE,EAAE;EAC9D;;;;;;EAOA,eAAe,MAAkC;AAC/C,WAAO,KAAK,KAAK,KAAsB,KAAK,QAAQ,IAAI;EAC1D;;;;;;;EAQA,eAAe,IAAY,MAAkC;AAC3D,WAAO,KAAK,KAAK,IAAqB,GAAG,KAAK,MAAM,IAAI,EAAE,IAAI,IAAI;EACpE;;;;;;EAOA,eAAe,IAAU;AACvB,WAAO,KAAK,KAAK,OAAa,GAAG,KAAK,MAAM,IAAI,EAAE,EAAE;EACtD;;;;;;;;EASA,qBACE,MACA,UACA,aAAoB;AAEpB,QAAI,SAAS,IAAI,WAAU,EACxB,IAAI,QAAQ,IAAI,EAChB,IAAI,YAAY,QAAQ;AAE3B,QAAI,aAAa;AACf,eAAS,OAAO,IAAI,eAAe,WAAW;IAChD;AAEA,WAAO,KAAK,KAAK,IAA0E,GAAG,KAAK,MAAM,cAAc,EAAE,OAAM,CAAE;EACnI;;;;;EAMA,uBAAoB;AAClB,WAAO,KAAK,KAAK,IAAwB,GAAG,KAAK,MAAM,YAAY;EACrE;;;;;EAMA,mBAAgB;AACd,WAAO,KAAK,KAAK,IAAkD,GAAG,KAAK,MAAM,QAAQ;EAC3F;;qCA5FW,0BAAuB,mBAAA,UAAA,CAAA;EAAA;4EAAvB,0BAAuB,SAAvB,yBAAuB,WAAA,YAFtB,OAAM,CAAA;;;sEAEP,yBAAuB,CAAA;UAHnC;WAAW;MACV,YAAY;KACb;;;;;ACIK,IAAO,kBAAP,MAAO,iBAAe;EAGN;EAFH,SAAS,GAAG,YAAY,MAAM;EAE/C,YAAoB,MAAgB;AAAhB,SAAA,OAAA;EAAmB;;;;;;EAOvC,YAAY,MAAwB;AAClC,WAAO,KAAK,KAAK,KAA0B,GAAG,KAAK,MAAM,SAAS,IAAI;EACxE;;;;;;EAOA,qBAAqB,SAAqC;AACxD,WAAO,KAAK,KAAK,IAAqB,GAAG,KAAK,MAAM,YAAY,OAAO,EAAE;EAC3E;;qCArBW,kBAAe,mBAAA,UAAA,CAAA;EAAA;4EAAf,kBAAe,SAAf,iBAAe,WAAA,YAFd,OAAM,CAAA;;;sEAEP,iBAAe,CAAA;UAH3B;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
