{
  "version": 3,
  "sources": ["src/app/features/auth/pages/login-page/login-page.component.ts"],
  "sourcesContent": ["import { Component, OnInit, OnDestroy, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule, ActivatedRoute } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { Observable, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { login, clearError } from '../../../../core/store/auth/auth.actions';\nimport { selectIsLoading, selectAuthError } from '../../../../core/store/auth/auth.selectors';\nimport { LoginRequest } from '../../../../core/models/user.model';\nimport { AlertComponent } from '../../../../shared/components/alert/alert.component';\nimport { InputComponent } from '../../../../shared/components/input/input.component';\nimport { ButtonComponent } from '../../../../shared/components/button/button.component';\nimport { LinkComponent } from '../../../../shared/components/link/link.component';\nimport { AuthPromoPanelComponent } from '../../../../shared/components/auth-promo-panel/auth-promo-panel.component';\nimport { authMobileStyles } from '../../../../shared/styles/auth-mobile.styles';\n\n@Component({\n  selector: 'app-login-page',\n  standalone: true,\n  imports: [\n    CommonModule, \n    ReactiveFormsModule, \n    RouterModule, \n    AlertComponent, \n    InputComponent, \n    ButtonComponent, \n    LinkComponent,\n    AuthPromoPanelComponent\n  ],\n  template: `\n    <div class=\"login-page auth-page\">\n      <!-- Left Promotional Panel -->\n      <app-auth-promo-panel class=\"promo-panel-desktop\"></app-auth-promo-panel>\n\n      <!-- Right Login Form Panel -->\n      <div class=\"form-panel\">\n        <div class=\"form-content\">\n          <div class=\"form-header\">\n            <h2 class=\"brand-name\">WestWood</h2>\n            <h3 class=\"welcome-title\">Добро пожаловать!</h3>\n          </div>\n\n        <!-- Session expired message -->\n        <app-alert\n          *ngIf=\"sessionExpired\"\n          type=\"warning\"\n          [title]=\"'Сессия истекла'\"\n          [dismissible]=\"true\"\n          (dismissed)=\"sessionExpired = false\"\n          class=\"warning-alert\">\n          Ваша сессия истекла. Пожалуйста, войдите снова.\n        </app-alert>\n\n        <app-alert\n          *ngIf=\"error$ | async as error\"\n          type=\"error\"\n          [title]=\"'Ошибка входа'\"\n          [dismissible]=\"true\"\n          (dismissed)=\"onClearError()\"\n          class=\"error-alert\">\n          {{ error }}\n        </app-alert>\n\n        <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\" class=\"login-form auth-form\">\n          <app-input\n            id=\"email\"\n            label=\"Email\"\n            type=\"email\"\n            placeholder=\"Введите email\"\n            formControlName=\"email\"\n            [errorMessage]=\"getErrorMessage('email')\"\n            [required]=\"true\">\n          </app-input>\n\n          <app-input\n            id=\"password\"\n            label=\"Пароль\"\n            type=\"password\"\n            placeholder=\"Введите пароль\"\n            formControlName=\"password\"\n            [errorMessage]=\"getErrorMessage('password')\"\n            [required]=\"true\"\n            [showPasswordToggle]=\"true\">\n          </app-input>\n\n          <app-button\n            buttonType=\"primary\"\n            type=\"submit\"\n            [disabled]=\"loginForm.invalid\"\n            [loading]=\"(isLoading$ | async) ?? false\"\n            class=\"submit-button\">\n            Войти\n          </app-button>\n\n          <div class=\"forgot-password-link\">\n            <app-link routerLink=\"/auth/forgot-password\">\n              Забыл пароль? <strong>Нажмите здесь</strong>\n            </app-link>\n          </div>\n        </form>\n\n        <div class=\"form-footer\">\n          <span>© 2026 WestWood. Все права защищены.</span>\n        </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .login-page {\n      display: flex;\n      min-height: 100vh;\n      background: #F5F6F8;\n    }\n\n    /* Right Form Panel */\n    .form-panel {\n      flex: 0 0 45%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 3rem;\n      background: #ffffff;\n    }\n\n    .form-content {\n      width: 100%;\n      max-width: 360px;\n      animation: slideUp 0.5s ease-out;\n    }\n\n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(30px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .form-header {\n      margin-bottom: 1rem;\n    }\n\n    .brand-name {\n      font-size: 1.75rem;\n      font-weight: 700;\n      color: #1a202c;\n      margin: 0 0 0.75rem 0;\n      letter-spacing: -0.02em;\n    }\n\n    .welcome-title {\n      font-size: 2rem;\n      font-weight: 700;\n      color: #1a202c;\n      margin: 0 0 1rem 0;\n    }\n\n    .warning-alert, .error-alert {\n      margin-bottom: 1.5rem;\n      animation: shake 0.5s ease-out;\n    }\n\n    @keyframes shake {\n      0%, 100% { transform: translateX(0); }\n      25% { transform: translateX(-10px); }\n      75% { transform: translateX(10px); }\n    }\n\n    .login-form {\n      display: flex;\n      flex-direction: column;\n      gap: 1rem;\n    }\n\n    .submit-button {\n      width: 100%;\n      margin-top: 0.25rem;\n    }\n\n    :host ::ng-deep .submit-button button {\n      width: 100%;\n      padding: 0.875rem 1.5rem !important;\n      font-size: 1rem !important;\n      font-weight: 600 !important;\n      border-radius: 4px !important;\n      background-color: #0F0F10 !important;\n      color: white !important;\n      transition: all 0.2s ease !important;\n    }\n\n\n    .forgot-password-link {\n      text-align: center;\n      margin-top: 0.25rem;\n    }\n\n    :host ::ng-deep .forgot-password-link app-link a {\n      color: #6b7280 !important;\n      font-weight: 500;\n      font-size: 0.875rem;\n      transition: color 0.2s ease;\n      text-decoration: none;\n    }\n\n    :host ::ng-deep .forgot-password-link app-link a strong {\n      color: #0F0F10 !important;\n      text-decoration: underline;\n      font-weight: 600;\n    }\n\n    ${authMobileStyles}\n  `]\n})\nexport class LoginPageComponent implements OnInit, OnDestroy {\n  private fb = inject(FormBuilder);\n  private store = inject(Store);\n  private route = inject(ActivatedRoute);\n  private destroy$ = new Subject<void>();\n\n  loginForm: FormGroup;\n  isLoading$: Observable<boolean>;\n  error$: Observable<string | null>;\n  sessionExpired = false;\n\n  constructor() {\n    this.loginForm = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n\n    this.isLoading$ = this.store.select(selectIsLoading);\n    this.error$ = this.store.select(selectAuthError);\n  }\n\n  ngOnInit(): void {\n    // Clear any existing errors when entering the page\n    this.store.dispatch(clearError());\n    this.sessionExpired = false;\n\n    // Check for query params\n    this.route.queryParams.pipe(takeUntil(this.destroy$)).subscribe(params => {\n      if (params['sessionExpired'] || params['expired']) {\n        this.sessionExpired = true;\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  onSubmit(): void {\n    if (this.loginForm.valid) {\n      const credentials: LoginRequest = this.loginForm.value;\n      this.store.dispatch(login({ credentials }));\n    }\n  }\n\n  onClearError(): void {\n    this.store.dispatch(clearError());\n  }\n\n  getErrorMessage(controlName: string): string {\n    const control = this.loginForm.get(controlName);\n    if (control?.errors && control.touched) {\n      if (control.errors['required']) {\n        return 'Это поле обязательно для заполнения';\n      }\n      if (control.errors['email']) {\n        return 'Неверный формат email';\n      }\n      if (control.errors['minlength']) {\n        return `Минимальная длина: ${control.errors['minlength'].requiredLength} символов`;\n      }\n    }\n    return '';\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
