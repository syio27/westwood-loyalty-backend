{
  "version": 3,
  "sources": ["src/app/features/bonus-program/pages/program-types-page/program-types-page.component.ts"],
  "sourcesContent": ["import { Component, OnInit, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Router, RouterLink } from '@angular/router';\nimport { PageHeaderService } from '../../../../core/services/page-header.service';\nimport { RewardProgramsService } from '../../../../core/services/reward-programs.service';\nimport { RewardProgramSlot, RewardProgramType } from '../../../../core/models/reward-program.model';\n\ntype ProgramTypeId = 'welcome' | 'birthday' | 'referral' | 'cashback';\n\ninterface ProgramTypeCard {\n  id: ProgramTypeId;\n  title: string;\n  description: string;\n  section: 'Acquisition' | 'Events' | 'Growth';\n  icon: string;\n}\n\nconst PROGRAM_TYPES: ProgramTypeCard[] = [\n  { id: 'welcome', title: 'Welcome reward', description: 'Fixed bonus after the first purchase.', section: 'Acquisition', icon: 'welcome' },\n  { id: 'birthday', title: 'Birthday reward', description: 'Bonus to customers on their birthday.', section: 'Events', icon: 'gift' },\n  { id: 'referral', title: 'Referral', description: 'Rewards for successful client referrals.', section: 'Growth', icon: 'referral' },\n  { id: 'cashback', title: 'Cashback', description: 'Percentage cashback on each payment.', section: 'Growth', icon: 'percent' }\n];\n\n@Component({\n  selector: 'app-program-types-page',\n  standalone: true,\n  imports: [CommonModule, RouterLink],\n  template: `\n    <div class=\"page-wrapper\">\n      <a routerLink=\"/bonus-program\" class=\"back-link\">\n        <svg class=\"back-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M19 12H5M12 19l-7-7 7-7\"/></svg>\n        Back\n      </a>\n      <h2 class=\"page-title\">Reward Program types</h2>\n      <p class=\"page-subtitle\">Choose what kind of reward program you want to configure.</p>\n\n      <div class=\"types-grid\">\n        <article *ngFor=\"let card of PROGRAM_TYPES\" class=\"type-card\">\n          <div class=\"type-card-header\">\n            <div class=\"type-card-icon\">\n              <ng-container [ngSwitch]=\"card.icon\">\n                <svg *ngSwitchCase=\"'welcome'\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\"/><path d=\"M3 10h18\"/><path d=\"M7 4v4M17 4v4\"/></svg>\n                <svg *ngSwitchCase=\"'gift'\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\"><path d=\"M20 12v9H4v-9\"/><rect x=\"2\" y=\"7\" width=\"20\" height=\"5\" rx=\"1\"/><path d=\"M12 22V7\"/><path d=\"M12 7c-2-2-4-2.5-4-4.5a2 2 0 0 1 4 0c0 1.5-2 2-4 4.5\"/><path d=\"M12 7c2-2 4-2.5 4-4.5a2 2 0 0 0-4 0c0 1.5 2 2 4 4.5\"/></svg>\n                <svg *ngSwitchCase=\"'referral'\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\"><circle cx=\"18\" cy=\"5\" r=\"2.5\"/><circle cx=\"6\" cy=\"12\" r=\"2.5\"/><circle cx=\"18\" cy=\"19\" r=\"2.5\"/><path d=\"M8.5 13.5l7 4M15.5 6.5l-7 4\"/></svg>\n                <svg *ngSwitchCase=\"'percent'\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\"><circle cx=\"9\" cy=\"9\" r=\"2\"/><circle cx=\"15\" cy=\"15\" r=\"2\"/><path d=\"M5 19L19 5\"/></svg>\n              </ng-container>\n            </div>\n            <span *ngIf=\"getSlotState(card) === 'ACTIVE'\" class=\"slot-badge slot-active\">Already active</span>\n            <span *ngIf=\"getSlotState(card) === 'SCHEDULED'\" class=\"slot-badge slot-scheduled\">Scheduled</span>\n          </div>\n          <div class=\"type-card-body\">\n            <h3 class=\"type-card-title\">{{ card.title }}</h3>\n            <p class=\"type-card-desc\">{{ card.description }}</p>\n          </div>\n          <div class=\"type-card-footer\">\n            <button type=\"button\" class=\"btn-go\" [disabled]=\"isSlotBlocked(card)\" (click)=\"onCreate(card)\" title=\"Create program\" aria-label=\"Create program\">\n              <svg class=\"btn-go-arrow\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M5 12h14M12 5l7 7-7 7\"/></svg>\n              <span class=\"btn-go-label\">Create</span>\n            </button>\n          </div>\n        </article>\n      </div>\n    </div>\n  `,\n  styles: [`\n    :host { display: block; height: 100%; }\n    .page-wrapper { min-height: 100%; margin: -2rem; padding: 2rem; background: #f8fafc; }\n\n    .back-link { display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; font-weight: 500; color: #475569; text-decoration: none; margin-bottom: 1rem; transition: color 0.2s; }\n    .back-link:hover { color: #16A34A; }\n    .back-icon { width: 20px; height: 20px; }\n\n    .page-title { font-size: 1.4rem; font-weight: 700; margin: 0 0 0.25rem 0; color: #0f172a; }\n    .page-subtitle { font-size: 0.9rem; color: #64748b; margin: 0 0 1.5rem 0; }\n\n    .types-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.5rem; margin-top: 1.5rem; }\n    .type-card { display: flex; flex-direction: column; gap: 0.75rem; padding: 2rem 2rem 1.5rem; border-radius: 14px; border: 1px solid #e2e8f0; background: #ffffff; box-shadow: 0 2px 6px rgba(0,0,0,0.04); }\n    .type-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.25rem; gap: 0.5rem; }\n    .slot-badge { font-size: 0.75rem; font-weight: 600; padding: 0.25rem 0.5rem; border-radius: 6px; flex-shrink: 0; }\n    .slot-active { background: #dcfce7; color: #16A34A; }\n    .slot-scheduled { background: #e0f2fe; color: #0369a1; }\n    .type-card-icon { width: 56px; height: 56px; border-radius: 14px; background: #dcfce7; color: #16A34A; display: flex; align-items: center; justify-content: center; }\n    .type-card-icon svg { width: 28px; height: 28px; }\n    .type-card-body { flex: 1; }\n    .type-card-title { font-size: 1.2rem; font-weight: 700; color: #0f172a; margin: 0 0 0.35rem 0; }\n    .type-card-desc { font-size: 0.95rem; color: #64748b; margin: 0; line-height: 1.5; }\n    .type-card-footer { margin-top: 1.25rem; display: flex; justify-content: flex-end; }\n    .btn-go { display: inline-flex; align-items: center; justify-content: center; gap: 0.4rem; padding: 0 1.25rem; height: 44px; border: none; border-radius: 22px; background: transparent; color: #94a3b8; cursor: pointer; transition: color 0.2s, background 0.2s; }\n    .btn-go:hover:not(:disabled) { color: #16A34A; background: #dcfce7; }\n    .btn-go:disabled { opacity: 0.5; cursor: not-allowed; }\n    .btn-go-arrow { width: 22px; height: 22px; flex-shrink: 0; }\n    .btn-go-label { font-size: 0.9rem; font-weight: 500; }\n  `]\n})\nexport class ProgramTypesPageComponent implements OnInit {\n  private pageHeaderService = inject(PageHeaderService);\n  private router = inject(Router);\n  private rewardProgramsService = inject(RewardProgramsService);\n\n  readonly PROGRAM_TYPES = PROGRAM_TYPES;\n  slots: RewardProgramSlot[] = [];\n\n  ngOnInit(): void {\n    this.pageHeaderService.setPageHeader('Create Program', [\n      { label: 'Главная', route: '/home' },\n      { label: 'Reward Programs', route: '/bonus-program' },\n      { label: 'Reward Program types' }\n    ]);\n    this.rewardProgramsService.getSlots().subscribe({\n      next: (list) => this.slots = list\n    });\n  }\n\n  getSlotState(card: ProgramTypeCard): string | null {\n    const type = this.toRewardProgramType(card.id);\n    const slot = this.slots.find(s => s.type === type);\n    if (!slot || slot.status === 'NOT_CREATED' || slot.status === 'DRAFT' || slot.status === 'INACTIVE' || slot.status === 'ARCHIVED') return null;\n    return slot.status; // ACTIVE | SCHEDULED\n  }\n\n  isSlotBlocked(card: ProgramTypeCard): boolean {\n    const state = this.getSlotState(card);\n    return state === 'ACTIVE' || state === 'SCHEDULED';\n  }\n\n  onCreate(card: ProgramTypeCard): void {\n    if (this.isSlotBlocked(card)) return;\n    const type = this.toRewardProgramType(card.id);\n    const typeSlug = card.id;\n    this.rewardProgramsService.createDraft(type).subscribe({\n      next: res => {\n        this.router.navigate(['/bonus-program', 'create', typeSlug, res.uuid]);\n      }\n    });\n  }\n\n  private toRewardProgramType(id: ProgramTypeId): RewardProgramType {\n    switch (id) {\n      case 'welcome': return 'WELCOME';\n      case 'birthday': return 'BIRTHDAY';\n      case 'referral': return 'REFERRAL';\n      case 'cashback':\n      default:\n        return 'CASHBACK';\n    }\n  }\n}\n\n"],
  "mappings": "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",
  "names": []
}
