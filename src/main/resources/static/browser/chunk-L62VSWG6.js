import{a as pe}from"./chunk-EZIU26DM.js";import"./chunk-SMZJ22JJ.js";import{a as ge}from"./chunk-W3QYXCYD.js";import{a as ce}from"./chunk-KJP7RGDR.js";import{a as me}from"./chunk-UFJZUWY7.js";import{a as de}from"./chunk-L6EPMYIC.js";import{a as ue}from"./chunk-H4NEVOOS.js";import"./chunk-3B24VZJ2.js";import{a as J}from"./chunk-QHRJ7I7H.js";import{c as Y,d as x,e as Q,f as X,h as Z,k as ee,l as te,m as ne,n as re,o as ie,s as oe,t as se,u as ae,v as le}from"./chunk-JTALTE7R.js";import{n as W,w as K}from"./chunk-I65UNOFV.js";import"./chunk-4BR2MMGB.js";import{$ as h,Aa as n,Ab as R,Ba as r,Ca as m,Da as N,Ea as I,Eb as q,Ga as L,Ha as g,Ia as p,K as T,Oa as z,Pa as o,Qa as S,Ra as v,Sa as $,T as M,Z as D,_ as F,aa as U,d as A,ib as G,jb as j,la as s,oa as V,pb as H,r as B,sa as _,wa as d,ya as C}from"./chunk-XIV6Y6YY.js";function fe(a,f){a&1&&(n(0,"div",45),m(1,"app-loader"),r())}function _e(a,f){if(a&1&&(n(0,"div",67),o(1),r()),a&2){let e=p().$implicit,i=p(2);s(),v(" ",i.formatLastSeen(i.getUserStatus(e.id).lastSeenAt)," ")}}function he(a,f){if(a&1){let e=L();N(0),n(1,"app-button",68),g("onClick",function(){D(e);let t=p().$implicit,l=p(2);return F(l.onLockClick(t))}),h(),n(2,"svg",35),m(3,"rect",69)(4,"path",70),r()(),I()}}function Ce(a,f){if(a&1){let e=L();N(0),n(1,"app-button",71),g("onClick",function(){D(e);let t=p().$implicit,l=p(2);return F(l.onDeleteClick(t))}),h(),n(2,"svg",35),m(3,"path",72)(4,"path",73),r()(),U(),n(5,"app-button",74),g("onClick",function(){D(e);let t=p().$implicit,l=p(2);return F(l.activateUser(t))}),h(),n(6,"svg",35),m(7,"path",75),r()(),I()}}function be(a,f){if(a&1&&(n(0,"tr")(1,"td")(2,"div",50)(3,"a",51)(4,"span",52),o(5),r()()()(),n(6,"td")(7,"span",53),o(8),r()(),n(9,"td")(10,"app-badge",54),o(11),r()(),n(12,"td")(13,"div",55)(14,"div",56),m(15,"span",57),n(16,"span",58),o(17),r()(),_(18,_e,2,1,"div",59),r()(),n(19,"td")(20,"span",60),o(21),r()(),n(22,"td")(23,"div",61)(24,"a",62)(25,"app-button",63),h(),n(26,"svg",35),m(27,"path",64)(28,"circle",65),r()()(),_(29,he,5,0,"ng-container",66)(30,Ce,8,0,"ng-container",66),r()()()),a&2){let e,i,t,l,u=f.$implicit,c=p(2);C("current-user-row",c.isCurrentUser(u)),s(3),d("routerLink",c.getUserRoute(u)),s(2),$("",u.firstName," ",u.lastName,""),s(3),S(u.role),s(2),d("badgeType",c.getStatusBadgeType(u.status)),s(),v(" ",c.getStatusLabel(u.status)," "),s(3),C("online",(e=c.getUserStatus(u.id))==null?null:e.isOnline)("offline",!((i=c.getUserStatus(u.id))!=null&&i.isOnline)),s(3),S((t=c.getUserStatus(u.id))!=null&&t.isOnline?"\u041E\u043D\u043B\u0430\u0439\u043D":"\u041E\u0444\u043B\u0430\u0439\u043D"),s(),d("ngIf",(l=c.getUserStatus(u.id))==null?null:l.lastSeenAt),s(3),S(c.formatDate(u.createdAt)),s(3),d("routerLink",c.getUserRoute(u)),s(5),d("ngIf",u.status!=="closed"&&u.id!==c.currentUserId),s(),d("ngIf",u.status==="closed")}}function ve(a,f){if(a&1&&(n(0,"app-paginated-table-wrapper",46,0)(2,"div",47)(3,"table",48)(4,"thead")(5,"tr")(6,"th"),o(7,"\u0418\u043C\u044F"),r(),n(8,"th"),o(9,"\u0420\u043E\u043B\u044C"),r(),n(10,"th"),o(11,"\u0421\u0442\u0430\u0442\u0443\u0441"),r(),n(12,"th"),o(13,"\u041E\u043D\u043B\u0430\u0439\u043D"),r(),n(14,"th"),o(15,"\u0414\u0430\u0442\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F"),r(),n(16,"th"),o(17,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),r()()(),n(18,"tbody"),_(19,be,31,18,"tr",49),r()()()()),a&2){let e=z(1),i=p();d("paginationEnabled",!1)("data",i.filteredUsers)("defaultPageSize",15),s(19),d("ngForOf",e.paginatedData)}}function xe(a,f){if(a&1&&(n(0,"span",76),o(1),r()),a&2){let e=p();s(),v(" ",e.getErrorMessage("email")," ")}}function Me(a,f){if(a&1&&(n(0,"span",76),o(1),r()),a&2){let e=p();s(),v(" ",e.getErrorMessage("phoneNumber")," ")}}function Ue(a,f){if(a&1&&(n(0,"span",76),o(1),r()),a&2){let e=p();s(),v(" ",e.getErrorMessage("firstName")," ")}}function Se(a,f){if(a&1&&(n(0,"span",76),o(1),r()),a&2){let e=p();s(),v(" ",e.getErrorMessage("lastName")," ")}}function Pe(a,f){a&1&&(n(0,"span",76),o(1," \u0420\u043E\u043B\u044C \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u0430 \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F "),r())}var We=(()=>{class a{pageHeaderService=M(ue);fb=M(oe);usersService=M(ce);toastService=M(J);store=M(W);destroy$=new A;showAddUserModal=!1;addUserForm;isLoading=!0;isInviting=!1;currentUserId=null;isLockConfirmModalOpen=!1;pendingLockUser=null;lockConfirmTitle="";lockConfirmDescription="";isDeleteConfirmModalOpen=!1;pendingDeleteUser=null;deleteConfirmTitle="";deleteConfirmDescription="";users=[];filteredUsers=[];userStatuses=new Map;constructor(){this.addUserForm=this.fb.group({email:["",[x.required,x.email]],phoneNumber:["",[x.required]],firstName:["",[x.required]],lastName:["",[x.required]],role:["",[x.required]]})}ngOnInit(){this.pageHeaderService.setPageHeader("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438",[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",route:"/home"},{label:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"}]),this.store.select(K).pipe(T(this.destroy$)).subscribe(e=>{this.currentUserId=e?String(e):null,this.users.length>0&&this.sortUsersWithCurrentUserFirst()}),this.loadUsers(),B(3e4).pipe(T(this.destroy$)).subscribe(()=>{this.users.length>0&&this.loadUserStatuses()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUsers(){this.isLoading=!0,this.usersService.getUsers().subscribe({next:e=>{this.users=e.map(i=>this.mapApiUserToUser(i)),this.sortUsersWithCurrentUserFirst(),this.loadUserStatuses(),this.isLoading=!1},error:e=>{let i=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439";this.toastService.error(i),this.isLoading=!1}})}loadUserStatuses(){this.usersService.getAllUsersStatus().subscribe({next:e=>{this.userStatuses.clear(),e.forEach(i=>{this.userStatuses.set(i.userId,{isOnline:i.isOnline,lastSeenAt:i.lastSeenAt})})},error:e=>{console.error("Error loading user statuses:",e)}})}getUserStatus(e){return this.userStatuses.get(e)||null}formatLastSeen(e){if(!e)return"\u041D\u0438\u043A\u043E\u0433\u0434\u0430";let i=new Date(e),l=new Date().getTime()-i.getTime(),u=Math.floor(l/6e4),c=Math.floor(l/36e5),b=Math.floor(l/864e5);return u<1?"\u0422\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E":u<60?`${u} \u043C\u0438\u043D \u043D\u0430\u0437\u0430\u0434`:c<24?`${c} \u0447 \u043D\u0430\u0437\u0430\u0434`:b<7?`${b} \u0434\u043D \u043D\u0430\u0437\u0430\u0434`:i.toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric"})}sortUsersWithCurrentUserFirst(){if(!this.currentUserId){this.filteredUsers=[...this.users];return}let e=this.users.find(t=>t.id===this.currentUserId),i=this.users.filter(t=>t.id!==this.currentUserId);e?this.filteredUsers=[e,...i]:this.filteredUsers=[...this.users]}isCurrentUser(e){return this.currentUserId!==null&&e.id===this.currentUserId}mapApiUserToUser(e){return{id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,phoneNumber:e.phone||"\u2014",role:this.getRoleLabel(e.roles),status:this.mapAccountStatusToStatus(e.accountStatus,e.active),createdAt:e.createdAt||""}}mapAccountStatusToStatus(e,i){return e==="PENDING_ACTIVATION"?"invited":e==="LOCKED"||i===!1?"closed":"active"}getRoleLabel(e){return e.includes("SUDO")?"\u0421\u0443\u043F\u0435\u0440 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":e.includes("ADMIN")?"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":e.includes("MANAGER")?"\u041C\u0435\u043D\u0435\u0434\u0436\u0435\u0440":e.join(", ")}openAddUserModal(){this.showAddUserModal=!0,this.addUserForm.reset(),this.isInviting=!1}closeAddUserModal(){this.showAddUserModal=!1,this.addUserForm.reset(),this.isInviting=!1}onSubmitAddUser(){if(this.addUserForm.valid&&!this.isInviting){this.isInviting=!0;let e=this.addUserForm.value,i={email:e.email,phone:e.phoneNumber,firstName:e.firstName,lastName:e.lastName,role:e.role};console.log("[UsersPage] Inviting user with data:",i),this.usersService.inviteUser(i).subscribe({next:t=>{console.log("[UsersPage] Invite success:",t),this.toastService.success("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D"),this.closeAddUserModal(),this.loadUsers()},error:t=>{console.error("[UsersPage] Invite error:",t);let l=t.error?.message||t.error?.errors||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F";this.toastService.error(typeof l=="string"?l:JSON.stringify(l))}})}else Object.keys(this.addUserForm.controls).forEach(e=>{this.addUserForm.get(e)?.markAsTouched()})}getErrorMessage(e){let i=this.addUserForm.get(e);return i?.hasError("required")?"\u042D\u0442\u043E \u043F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F":i?.hasError("email")?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email":""}getStatusBadgeType(e){switch(e){case"active":return"success";case"invited":return"warning";case"closed":return"danger";default:return"secondary"}}getStatusLabel(e){switch(e){case"invited":return"\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D";case"active":return"\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439";case"closed":return"\u0417\u0430\u043A\u0440\u044B\u0442\u044B\u0439";default:return e}}formatDate(e){return new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}onLockClick(e){this.pendingLockUser=e,this.lockConfirmTitle=`\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "${e.firstName} ${e.lastName}"?`,this.lockConfirmDescription=`\u041F\u0440\u0438 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C ${e.firstName} ${e.lastName} (${e.email}) \u043F\u043E\u0442\u0435\u0440\u044F\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F \u043A \u0441\u0438\u0441\u0442\u0435\u043C\u0435. \u0415\u0433\u043E \u043F\u0440\u043E\u0444\u0438\u043B\u044C \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043A\u0440\u044B\u0442, \u0438 \u043E\u043D \u043D\u0435 \u0441\u043C\u043E\u0436\u0435\u0442 \u0432\u044B\u043F\u043E\u043B\u043D\u044F\u0442\u044C \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0435. \u0412\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043F\u043E\u0437\u0436\u0435 \u0438\u043B\u0438 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0435\u0433\u043E \u043F\u0440\u043E\u0444\u0438\u043B\u044C.`,this.isLockConfirmModalOpen=!0}confirmLock(){this.pendingLockUser&&this.usersService.lockUser(this.pendingLockUser.id).subscribe({next:e=>{let i=this.users.findIndex(t=>t.id===this.pendingLockUser.id);i!==-1&&(this.users[i]=this.mapApiUserToUser(e),this.sortUsersWithCurrentUserFirst()),this.toastService.success("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D"),this.isLockConfirmModalOpen=!1,this.pendingLockUser=null},error:e=>{let i=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F";this.toastService.error(i)}})}cancelLock(){this.isLockConfirmModalOpen=!1,this.pendingLockUser=null}onDeleteClick(e){this.pendingDeleteUser=e,this.deleteConfirmTitle="\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439?",this.deleteConfirmDescription="\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435\u0445 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439? \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C. \u0412\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439 \u0431\u0443\u0434\u0443\u0442 \u0431\u0435\u0437\u0432\u043E\u0437\u0432\u0440\u0430\u0442\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u044B \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043C\u044B.",this.isDeleteConfirmModalOpen=!0}confirmDelete(){this.pendingDeleteUser&&this.usersService.deleteLockedUsers().subscribe({next:e=>{this.toastService.success(`\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439: ${e.deletedCount}`),this.loadUsers(),this.isDeleteConfirmModalOpen=!1,this.pendingDeleteUser=null},error:e=>{let i=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439";this.toastService.error(i)}})}cancelDelete(){this.isDeleteConfirmModalOpen=!1,this.pendingDeleteUser=null}activateUser(e){this.usersService.unlockUser(e.id).subscribe({next:i=>{let t=this.users.findIndex(l=>l.id===e.id);t!==-1&&(this.users[t]=this.mapApiUserToUser(i),this.sortUsersWithCurrentUserFirst()),this.toastService.success("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D")},error:i=>{let t=i.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F";this.toastService.error(t)}})}getUserRoute(e){return this.currentUserId&&e.id===this.currentUserId?["/profile"]:["/users",e.id]}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=V({type:a,selectors:[["app-users-page"]],decls:92,vars:28,consts:[["paginatedTable",""],[1,"page-wrapper"],[1,"users-container"],[1,"page-header-section"],["buttonType","primary","size","medium",3,"onClick"],["viewBox","0 0 24 24","fill","none",1,"btn-icon"],["d","M12 5v14M5 12h14","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","loading-container",4,"ngIf"],[3,"paginationEnabled","data","defaultPageSize",4,"ngIf"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0433\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",3,"closed","visible","showCloseButton"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label"],[1,"required-mark"],["type","email","formControlName","email","placeholder","user@example.com",1,"form-input"],["class","error-message",4,"ngIf"],["type","tel","formControlName","phoneNumber","placeholder","+7 (777) 123-45-67",1,"form-input"],["type","text","formControlName","firstName","placeholder","\u0418\u0432\u0430\u043D",1,"form-input"],["type","text","formControlName","lastName","placeholder","\u0418\u0432\u0430\u043D\u043E\u0432",1,"form-input"],[1,"select-label"],[1,"select-wrapper"],["formControlName","role",1,"form-select"],["value",""],["value","SUDO"],["value","ADMIN"],["value","MANAGER"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"select-arrow"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"modal-footer"],["buttonType","ghost",3,"onClick"],["buttonType","primary","type","submit",3,"disabled","loading"],[3,"visibleChange","visible","title"],[1,"modal-body"],[1,"toggle-confirm-content"],[1,"confirm-icon","disable"],["viewBox","0 0 24 24","fill","none"],["x","3","y","11","width","18","height","11","rx","2","stroke","currentColor","stroke-width","2"],["d","M7 11V7a5 5 0 0110 0v4","stroke","currentColor","stroke-width","2"],[1,"confirm-description"],[1,"confirm-text"],[1,"modal-actions"],["buttonType","danger",3,"onClick"],[1,"confirm-icon","delete"],["d","M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2","stroke","currentColor","stroke-width","2"],["d","M10 11v6M14 11v6","stroke","currentColor","stroke-width","2"],[1,"loading-container"],[3,"paginationEnabled","data","defaultPageSize"],[1,"table-container"],[1,"users-table"],[3,"current-user-row",4,"ngFor","ngForOf"],[1,"user-name-cell"],[1,"user-name-link",3,"routerLink"],[1,"user-name"],[1,"user-role"],["size","medium",3,"badgeType"],[1,"online-status-cell"],[1,"status-indicator"],[1,"status-dot"],[1,"status-text"],["class","last-seen",4,"ngIf"],[1,"user-date"],[1,"actions-cell"],["title","\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C",1,"action-link",3,"routerLink"],["buttonType","ghost","size","small"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","12","r","3","stroke","currentColor","stroke-width","1.5"],[4,"ngIf"],[1,"last-seen"],["buttonType","ghost","size","small","title","\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u043F\u0440\u043E\u0444\u0438\u043B\u044C",3,"onClick"],["x","3","y","11","width","18","height","11","rx","2","stroke","currentColor","stroke-width","1.5"],["d","M7 11V7a5 5 0 0110 0v4","stroke","currentColor","stroke-width","1.5"],["buttonType","ghost","size","small","title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C",3,"onClick"],["d","M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2","stroke","currentColor","stroke-width","1.5"],["d","M10 11v6M14 11v6","stroke","currentColor","stroke-width","1.5"],["buttonType","ghost","size","small","title","\u0410\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043E\u0431\u0440\u0430\u0442\u043D\u043E",3,"onClick"],["d","M20 6L9 17l-5-5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"error-message"]],template:function(i,t){if(i&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-button",4),g("onClick",function(){return t.openAddUserModal()}),h(),n(4,"svg",5),m(5,"path",6),r(),o(6," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0433\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F "),r()(),_(7,fe,2,0,"div",7)(8,ve,20,4,"app-paginated-table-wrapper",8),r()(),U(),n(9,"app-modal",9),g("closed",function(){return t.closeAddUserModal()}),n(10,"form",10),g("ngSubmit",function(){return t.onSubmitAddUser()}),n(11,"div",11)(12,"label",12),o(13," Email "),n(14,"span",13),o(15,"*"),r()(),m(16,"input",14),_(17,xe,2,1,"span",15),r(),n(18,"div",11)(19,"label",12),o(20," \u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430 "),n(21,"span",13),o(22,"*"),r()(),m(23,"input",16),_(24,Me,2,1,"span",15),r(),n(25,"div",11)(26,"label",12),o(27," \u0418\u043C\u044F "),n(28,"span",13),o(29,"*"),r()(),m(30,"input",17),_(31,Ue,2,1,"span",15),r(),n(32,"div",11)(33,"label",12),o(34," \u0424\u0430\u043C\u0438\u043B\u0438\u044F "),n(35,"span",13),o(36,"*"),r()(),m(37,"input",18),_(38,Se,2,1,"span",15),r(),n(39,"div",11)(40,"label",19),o(41," \u0420\u043E\u043B\u044C "),n(42,"span",13),o(43,"*"),r()(),n(44,"div",20)(45,"select",21)(46,"option",22),o(47,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043E\u043B\u044C"),r(),n(48,"option",23),o(49,"\u0421\u0443\u043F\u0435\u0440 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440"),r(),n(50,"option",24),o(51,"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440"),r(),n(52,"option",25),o(53,"\u041C\u0435\u043D\u0435\u0434\u0436\u0435\u0440"),r()(),h(),n(54,"svg",26),m(55,"path",27),r()(),_(56,Pe,2,0,"span",15),r(),U(),n(57,"div",28)(58,"app-button",29),g("onClick",function(){return t.closeAddUserModal()}),o(59," \u041E\u0442\u043C\u0435\u043D\u0430 "),r(),n(60,"app-button",30),o(61," \u041F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u044C "),r()()()(),n(62,"app-modal",31),g("visibleChange",function(u){return t.isLockConfirmModalOpen=u}),n(63,"div",32)(64,"div",33)(65,"div",34),h(),n(66,"svg",35),m(67,"rect",36)(68,"path",37),r()(),U(),n(69,"div",38)(70,"p",39),o(71),r()()(),n(72,"div",40)(73,"app-button",29),g("onClick",function(){return t.cancelLock()}),o(74," \u041E\u0442\u043C\u0435\u043D\u0430 "),r(),n(75,"app-button",41),g("onClick",function(){return t.confirmLock()}),o(76," \u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),r()()()(),n(77,"app-modal",31),g("visibleChange",function(u){return t.isDeleteConfirmModalOpen=u}),n(78,"div",32)(79,"div",33)(80,"div",42),h(),n(81,"svg",35),m(82,"path",43)(83,"path",44),r()(),U(),n(84,"div",38)(85,"p",39),o(86),r()()(),n(87,"div",40)(88,"app-button",29),g("onClick",function(){return t.cancelDelete()}),o(89," \u041E\u0442\u043C\u0435\u043D\u0430 "),r(),n(90,"app-button",41),g("onClick",function(){return t.confirmDelete()}),o(91," \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),r()()()()),i&2){let l,u,c,b,P,k,O,E,w,y;s(7),d("ngIf",t.isLoading),s(),d("ngIf",!t.isLoading),s(),d("visible",t.showAddUserModal)("showCloseButton",!0),s(),d("formGroup",t.addUserForm),s(6),C("error",((l=t.addUserForm.get("email"))==null?null:l.invalid)&&((l=t.addUserForm.get("email"))==null?null:l.touched)),s(),d("ngIf",((u=t.addUserForm.get("email"))==null?null:u.invalid)&&((u=t.addUserForm.get("email"))==null?null:u.touched)),s(6),C("error",((c=t.addUserForm.get("phoneNumber"))==null?null:c.invalid)&&((c=t.addUserForm.get("phoneNumber"))==null?null:c.touched)),s(),d("ngIf",((b=t.addUserForm.get("phoneNumber"))==null?null:b.invalid)&&((b=t.addUserForm.get("phoneNumber"))==null?null:b.touched)),s(6),C("error",((P=t.addUserForm.get("firstName"))==null?null:P.invalid)&&((P=t.addUserForm.get("firstName"))==null?null:P.touched)),s(),d("ngIf",((k=t.addUserForm.get("firstName"))==null?null:k.invalid)&&((k=t.addUserForm.get("firstName"))==null?null:k.touched)),s(6),C("error",((O=t.addUserForm.get("lastName"))==null?null:O.invalid)&&((O=t.addUserForm.get("lastName"))==null?null:O.touched)),s(),d("ngIf",((E=t.addUserForm.get("lastName"))==null?null:E.invalid)&&((E=t.addUserForm.get("lastName"))==null?null:E.touched)),s(7),C("error",((w=t.addUserForm.get("role"))==null?null:w.invalid)&&((w=t.addUserForm.get("role"))==null?null:w.touched)),s(11),d("ngIf",((y=t.addUserForm.get("role"))==null?null:y.invalid)&&((y=t.addUserForm.get("role"))==null?null:y.touched)),s(4),d("disabled",t.addUserForm.invalid||t.isInviting)("loading",t.isInviting),s(2),d("visible",t.isLockConfirmModalOpen)("title",t.lockConfirmTitle),s(9),S(t.lockConfirmDescription),s(6),d("visible",t.isDeleteConfirmModalOpen)("title",t.deleteConfirmTitle),s(9),S(t.deleteConfirmDescription)}},dependencies:[H,G,j,se,Z,re,ie,Y,ne,Q,X,ae,ee,te,q,R,me,de,le,pe,ge],styles:[".page-wrapper[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f0fdf4,#f8fafc 50% 100%);min-height:calc(100vh - 64px);padding:2rem;margin:-2rem}.users-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.page-header-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;justify-content:flex-end}.add-user-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#16a34a;color:#fff;border:none;border-radius:12px;padding:.75rem 1.5rem;font-size:.9375rem;font-weight:600;cursor:pointer;transition:all .2s ease}.add-user-btn[_ngcontent-%COMP%]:hover{background:#15803d}.add-user-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 1px 3px #0000000d}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem 1.5rem;text-align:left;font-size:.875rem;font-weight:600;color:#64748b;border-bottom:1px solid #e2e8f0}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #f1f5f9}.users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.current-user-row[_ngcontent-%COMP%]{background:#f1f5f9;border-left:3px solid #64748b}.users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.current-user-row[_ngcontent-%COMP%]:hover{background:#e2e8f0}.users-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.user-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.user-name-link[_ngcontent-%COMP%]{text-decoration:none;color:#1f2937;transition:color .2s;cursor:pointer}.user-name-link[_ngcontent-%COMP%]:hover{color:#16a34a}.user-name[_ngcontent-%COMP%]{font-weight:600;color:inherit}.user-role[_ngcontent-%COMP%]{color:#475569;font-size:.9375rem}.user-date[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.online-status-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.status-indicator.online[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#16a34a;box-shadow:0 0 0 2px #16a34a33}.status-indicator.offline[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#94a3b8}.status-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#475569}.status-indicator.online[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{color:#16a34a}.last-seen[_ngcontent-%COMP%]{font-size:.75rem;color:#94a3b8;margin-top:.125rem}.actions-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.action-link[_ngcontent-%COMP%]{display:inline-flex;text-decoration:none;color:inherit}[_nghost-%COMP%]     app-button svg, app-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0;display:block}[_nghost-%COMP%]     app-button.size-small svg, app-button.size-small[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.btn-icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0;display:block}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #e2e8f0;border-radius:8px;background:#fff;color:#64748b;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s;padding:0}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.action-btn.view[_ngcontent-%COMP%]:hover{background:#f0fdf4;border-color:#bbf7d0;color:#16a34a}.action-btn.lock[_ngcontent-%COMP%]:hover, .action-btn.delete[_ngcontent-%COMP%]:hover{background:#fef2f2;border-color:#fecaca;color:#dc2626}.action-btn.activate[_ngcontent-%COMP%]:hover{background:#f0fdf4;border-color:#bbf7d0;color:#16a34a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-label[_ngcontent-%COMP%], .select-label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:600;color:#475569;margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #cbd5e1;border-radius:10px;font-size:1rem;outline:none;transition:.2s}.form-input[_ngcontent-%COMP%]:focus{border-color:#16a34a;box-shadow:0 0 0 3px #dcfce7}.form-input.error[_ngcontent-%COMP%]{border-color:#dc2626}.required-mark[_ngcontent-%COMP%]{color:#dc2626;margin-left:.25rem}.select-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.form-select[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid #cbd5e1;border-radius:10px;font-size:1rem;outline:none;transition:all .2s ease;background:#fff;color:#1f2937;appearance:none;cursor:pointer;font-weight:500}.form-select[_ngcontent-%COMP%]:hover{border-color:#94a3b8}.form-select[_ngcontent-%COMP%]:focus{border-color:#16a34a;box-shadow:0 0 0 3px #15803d1a}.form-select.error[_ngcontent-%COMP%]{border-color:#dc2626}.form-select.error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc26261a}.select-arrow[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);width:20px;height:20px;color:#64748b;pointer-events:none;transition:transform .2s ease}.select-wrapper[_ngcontent-%COMP%]:hover   .select-arrow[_ngcontent-%COMP%]{color:#475569}.form-select[_ngcontent-%COMP%]:focus + .select-arrow[_ngcontent-%COMP%]{color:#16a34a}.form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:12px;font-weight:500}.form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:first-child{color:#94a3b8;font-weight:400}.error-message[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#dc2626;margin-top:.25rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #e2e8f0}.toggle-confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;padding:1rem 0}.confirm-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center}.confirm-icon.disable[_ngcontent-%COMP%], .confirm-icon.delete[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.confirm-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.confirm-description[_ngcontent-%COMP%]{text-align:center}.confirm-text[_ngcontent-%COMP%]{font-size:.9375rem;color:#475569;line-height:1.6;margin:0}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #e2e8f0}.loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:400px}"]})}return a})();export{We as UsersPageComponent};
