import{a as ce}from"./chunk-TKABTXOR.js";import{a as le}from"./chunk-WRAFSANK.js";import{a as se}from"./chunk-5QV5TA3C.js";import{a as G}from"./chunk-APN53XTZ.js";import{a as ae}from"./chunk-KHO44KZO.js";import"./chunk-3B24VZJ2.js";import{a as L}from"./chunk-TMJHU5AU.js";import{a as $,c as ee,e as z,g as I,i as te,m as ne,n as ie,o as oe,q as re,t as R,v as ue}from"./chunk-2HM6BEQO.js";import{$ as h,Aa as t,Ba as l,Ca as V,Da as A,Fa as B,Ga as m,Ha as v,N as W,Oa as r,Pa as C,Qa as _,Ra as Y,S,Ta as b,Ua as w,Va as M,Wa as q,Y as P,Z as k,_ as c,eb as y,ha as E,hb as U,ib as D,jb as J,ka as u,kb as K,na as O,ob as T,q as H,ra as f,s as j,va as s,vb as Q,wa as N,wb as X,xa as x,ya as F,yb as Z,za as e}from"./chunk-7F5AWDR7.js";function fe(o,g){if(o&1&&(e(0,"span",7),r(1),t()),o&2){let n=v(2);u(),C(n.value)}}function ve(o,g){if(o&1&&(e(0,"label",5),r(1),f(2,fe,2,1,"span",6),t()),o&2){let n=v();u(),_(" ",n.label," "),u(),s("ngIf",n.showValue)}}function _e(o,g){if(o&1&&(e(0,"div",8)(1,"span"),r(2),t(),e(3,"span"),r(4),t()()),o&2){let n=v();u(2),C(n.min),u(2),C(n.max)}}var ge=(()=>{class o{label="";min=0;max=100;step=1;disabled=!1;showValue=!1;showLabels=!1;value=0;onChangeFn=n=>{};onTouchedFn=()=>{};onInput(n){let a=n.target;this.value=parseFloat(a.value),this.onChangeFn(this.value)}onBlur(){this.onTouchedFn()}writeValue(n){this.value=n||0}registerOnChange(n){this.onChangeFn=n}registerOnTouched(n){this.onTouchedFn=n}setDisabledState(n){this.disabled=n}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=O({type:o,selectors:[["app-slider"]],inputs:{label:"label",min:"min",max:"max",step:"step",disabled:"disabled",showValue:"showValue",showLabels:"showLabels"},features:[q([{provide:$,useExisting:W(()=>o),multi:!0}])],decls:5,vars:7,consts:[[1,"slider-wrapper"],["class","slider-label",4,"ngIf"],[1,"slider-container"],["type","range",1,"slider",3,"input","blur","min","max","step","value","disabled"],["class","slider-labels",4,"ngIf"],[1,"slider-label"],["class","slider-value",4,"ngIf"],[1,"slider-value"],[1,"slider-labels"]],template:function(a,i){a&1&&(e(0,"div",0),f(1,ve,3,2,"label",1),e(2,"div",2)(3,"input",3),m("input",function(d){return i.onInput(d)})("blur",function(){return i.onBlur()}),t()(),f(4,_e,5,2,"div",4),t()),a&2&&(u(),s("ngIf",i.label),u(2),s("min",i.min)("max",i.max)("step",i.step)("value",i.value)("disabled",i.disabled),u(),s("ngIf",i.showLabels))},dependencies:[T,D],styles:[".slider-wrapper[_ngcontent-%COMP%]{width:100%}.slider-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;font-weight:500;color:#1a202c;margin-bottom:.5rem}.slider-value[_ngcontent-%COMP%]{color:#64748b;font-weight:400}.slider-container[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:3px;background:#e2e8f0;outline:none;-webkit-appearance:none}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:#007bff;cursor:pointer;box-shadow:0 2px 4px #0003}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#007bff;cursor:pointer;border:none;box-shadow:0 2px 4px #0003}.slider[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.slider-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.75rem;color:#64748b;margin-top:.25rem}"]})}return o})();function xe(o,g){o&1&&(e(0,"div",102),l(1,"div",103),e(2,"p",104),r(3,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445..."),t()())}function be(o,g){o&1&&(c(),e(0,"svg",17),l(1,"circle",105)(2,"path",106),t())}function we(o,g){o&1&&(c(),e(0,"svg",17),l(1,"path",107)(2,"path",108),t())}function Me(o,g){o&1&&(c(),e(0,"svg",17),l(1,"path",109),t())}function Pe(o,g){o&1&&(c(),e(0,"svg",17),l(1,"circle",105)(2,"path",106),t())}var me=(()=>{class o{monthlyRevenue;averageCheck;monthlyRevenueSignal=E(0);averageCheckSignal=E(0);isLoading=E(!1);analyticsService=S(se);toastService=S(L);router=S(Z);route=S(X);navigationSubscription;ngOnInit(){this.monthlyRevenue!==void 0&&this.averageCheck!==void 0?(this.monthlyRevenueSignal.set(this.monthlyRevenue),this.averageCheckSignal.set(this.averageCheck)):(this.loadAnalyticsData(),this.navigationSubscription=this.router.events.pipe(j(n=>n instanceof Q)).subscribe(n=>{n.urlAfterRedirects?.includes("/bonus-program")&&this.loadAnalyticsData()}))}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}loadAnalyticsData(){this.isLoading.set(!0),H({revenue:this.analyticsService.getMonthlyRevenue(),averageCheck:this.analyticsService.getAverageCheck("MONTHLY")}).subscribe({next:n=>{n.revenue.amount!==void 0&&n.revenue.amount!==null?this.monthlyRevenueSignal.set(n.revenue.amount):n.revenue.revenue!==void 0&&n.revenue.revenue!==null&&this.monthlyRevenueSignal.set(n.revenue.revenue),n.averageCheck.amount!==void 0&&n.averageCheck.amount!==null?this.averageCheckSignal.set(n.averageCheck.amount):n.averageCheck.averageCheck!==void 0&&n.averageCheck.averageCheck!==null&&this.averageCheckSignal.set(n.averageCheck.averageCheck),this.isLoading.set(!1)},error:n=>{let a=n.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0434\u0430\u043D\u043D\u044B\u0445";this.toastService.error(a),this.isLoading.set(!1)}})}isFinancialHelpModalOpen=!1;isScoreHelpModalOpen=!1;earnPercent=E(5);burnLimitPercent=E(50);get earnPercentValue(){return this.earnPercent()}set earnPercentValue(n){this.earnPercent.set(n)}get burnLimitPercentValue(){return this.burnLimitPercent()}set burnLimitPercentValue(n){this.burnLimitPercent.set(n)}giftPerClient=y(()=>this.averageCheckSignal()*(this.earnPercent()/100));totalLiability=y(()=>this.monthlyRevenueSignal()*(this.earnPercent()/100));guaranteedCash=y(()=>this.averageCheckSignal()*(1-this.burnLimitPercent()/100));guaranteedCashDifference=y(()=>this.guaranteedCash()-this.averageCheckSignal());vulnerabilityScore=y(()=>{let n=this.burnLimitPercent(),a=this.earnPercent();return n*(1+a/10)});scoreLevel=y(()=>{let n=this.vulnerabilityScore();return n<=30?"excellent":n>30&&n<=60?"warning":"danger"});scorePercentage=y(()=>{let n=this.vulnerabilityScore();return Math.min(n/100*100,100)});status=y(()=>{let n=this.earnPercent(),a=this.vulnerabilityScore();return n<3?{type:"low-motivation",title:"\u0421\u043B\u0430\u0431\u0430\u044F \u043C\u043E\u0442\u0438\u0432\u0430\u0446\u0438\u044F",description:"\u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u043D\u0438\u0437\u043A\u0438\u0439, \u0447\u0442\u043E\u0431\u044B \u043C\u043E\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u043E\u0432 \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044C\u0441\u044F."}:a<=30?{type:"excellent",title:"\u041E\u0442\u043B\u0438\u0447\u043D\u044B\u0439 \u0431\u0430\u043B\u0430\u043D\u0441",description:"\u041E\u0442\u043B\u0438\u0447\u043D\u044B\u0439 \u0431\u0430\u043B\u0430\u043D\u0441. \u0412\u0430\u0448\u0430 \u0433\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0432\u044B\u0440\u0443\u0447\u043A\u0430 \u043F\u043E\u0434 \u0437\u0430\u0449\u0438\u0442\u043E\u0439. \u0420\u0438\u0441\u043A\u0438 \u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B."}:a>30&&a<=60?{type:"warning",title:"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435",description:"\u0423\u043C\u0435\u0440\u0435\u043D\u043D\u044B\u0439 \u0440\u0438\u0441\u043A. \u0412\u044B \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u0435\u0442\u0435 \u0441\u043F\u0438\u0441\u044B\u0432\u0430\u0442\u044C \u043E\u0449\u0443\u0442\u0438\u043C\u0443\u044E \u0447\u0430\u0441\u0442\u044C \u0447\u0435\u043A\u0430. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u0432\u0430\u0448\u0430 \u043C\u0430\u0440\u0436\u0430 \u0432\u044B\u0448\u0435 30%."}:{type:"danger",title:"\u041E\u043F\u0430\u0441\u043D\u043E",description:"\u041A\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0440\u0438\u0441\u043A! \u0423\u0433\u0440\u043E\u0437\u0430 \u043A\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0440\u0430\u0437\u0440\u044B\u0432\u0430. \u0412\u044B \u0442\u0435\u0440\u044F\u0435\u0442\u0435 \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u043D\u043E\u0433\u043E \u0436\u0438\u0432\u044B\u0445 \u0434\u0435\u043D\u0435\u0433 \u0441 \u0437\u0430\u043A\u0430\u0437\u0430."}});formatCurrency(n){return Math.round(n).toLocaleString("ru-RU")}formatScore(n){return n.toFixed(1)}openFinancialHelpModal(){this.isFinancialHelpModalOpen=!0}openScoreHelpModal(){this.isScoreHelpModalOpen=!0}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=O({type:o,selectors:[["app-bonus-calculator"]],inputs:{monthlyRevenue:"monthlyRevenue",averageCheck:"averageCheck"},decls:251,vars:49,consts:[[1,"calculator-wrapper"],["class","loading-overlay",4,"ngIf"],[1,"calculator-header"],[1,"header-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 256 256",2,"width","100px","height","100px"],["id","icons_without_caption","data-name","icons without caption"],["id","CALCULATOR"],["d","M169.67 201.83H86.33a18.48 18.48 0 0 1-18.46-18.46V72.63a18.48 18.48 0 0 1 18.46-18.46h83.34a18.48 18.48 0 0 1 18.46 18.46v110.74a18.48 18.48 0 0 1-18.46 18.46zM86.33 58.17a14.47 14.47 0 0 0-14.46 14.46v110.74a14.47 14.47 0 0 0 14.46 14.46h83.34a14.48 14.48 0 0 0 14.46-14.46V72.63a14.47 14.47 0 0 0-14.46-14.46z",1,"cls-1"],["d","M97.16 148.06a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-19.91a8 8 0 1 0 8 8 8 8 0 0 0-8-8zM128.86 148.06a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-19.91a8 8 0 1 0 8 8 8 8 0 0 0-8-8zM97.16 181.29a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-19.91a8 8 0 1 0 8 8 8 8 0 0 0-8-8.01zM128.86 181.29a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-19.91a8 8 0 1 0 8 8 8 8 0 0 0-8-8.01zM160.56 148.06a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-19.91a8 8 0 1 0 8 8 8 8 0 0 0-8-8zM160.56 181.29a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-19.91a8 8 0 1 0 8 8 8 8 0 0 0-8-8.01zM172.52 105.89H85.2V73.34h87.32zm-83.32-4h79.32V77.34H89.2z",1,"cls-1"],[1,"calculator-title"],[1,"calculator-subtitle"],[1,"calculator-content"],[1,"main-layout"],[1,"input-section"],[1,"fixed-values"],[1,"fixed-value-item"],[1,"fixed-icon","revenue-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none"],["d","M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"fixed-content"],[1,"fixed-label"],[1,"fixed-value"],[1,"fixed-icon","check-icon"],["d","M9 12l2 2 4-4M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"slider-group"],[1,"slider-item"],[1,"slider-header"],[1,"slider-title-wrapper"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"slider-title-icon"],["cx","9","cy","9","r","2","stroke","currentColor","stroke-width","1.5"],["cx","15","cy","15","r","2","stroke","currentColor","stroke-width","1.5"],["d","M5 19L19 5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],[1,"slider-label-text"],[1,"slider-value-display"],[1,"slider-container-wrapper"],[3,"ngModelChange","ngModel","min","max","step","showValue"],[1,"slider-range"],[1,"financial-breakdown"],[1,"breakdown-header"],[1,"breakdown-header-left"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"breakdown-header-icon"],[1,"breakdown-title"],["type","button","aria-label","\u041F\u043E\u043C\u043E\u0449\u044C",1,"help-button",3,"click"],["width","40px","height","40px","viewBox","-2 0 10 10","id","meteor-icon-kit__regular-questionmark-s","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2 3C2 3.5523 1.5523 4 1 4C0.44772 4 0 3.5523 0 3C0 1.44772 1.4477 0 3 0C4.5523 0 6 1.44772 6 3C6 4.285 5.5004 4.8678 4.4472 5.3944C4.0004 5.6178 4 5.6183 4 6C4 6.5523 3.5523 7 3 7C2.4477 7 2 6.5523 2 6C2 4.715 2.4996 4.1322 3.5528 3.6056C3.9996 3.3822 4 3.3817 4 3C4 2.55228 3.4477 2 3 2C2.5523 2 2 2.55228 2 3zM3 10C2.4477 10 2 9.5523 2 9C2 8.4477 2.4477 8 3 8C3.5523 8 4 8.4477 4 9C4 9.5523 3.5523 10 3 10z","fill","#758CA3"],[1,"breakdown-items"],[1,"breakdown-item"],[1,"breakdown-item-content"],[1,"breakdown-icon-wrapper","gift-icon"],["d","M20 12v9H4v-9","stroke","currentColor","stroke-width","1.5"],["x","2","y","7","width","20","height","5","rx","1","stroke","currentColor","stroke-width","1.5"],["d","M12 22V7","stroke","currentColor","stroke-width","1.5"],[1,"breakdown-text"],[1,"breakdown-label"],[1,"breakdown-value"],[1,"breakdown-icon-wrapper","fund-icon"],[1,"breakdown-item","highlight"],[1,"breakdown-icon-wrapper","shield-icon-wrapper"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"shield-icon"],["d","M12 2L4 5v6c0 5.55 3.84 10.74 8 12 4.16-1.26 8-6.45 8-12V5l-8-3z","stroke","currentColor","stroke-width","1.5"],[1,"breakdown-value-group"],[1,"breakdown-value","highlight-value"],[1,"breakdown-difference"],[1,"vulnerability-score-section"],[1,"score-header"],[1,"score-header-left"],[1,"score-label"],[1,"score-header-right"],[1,"score-badge"],[1,"score-value"],[1,"score-bar"],[1,"score-bar-fill"],[1,"score-thresholds"],[1,"threshold-item"],[1,"threshold-dot","excellent"],[1,"threshold-label"],[1,"threshold-dot","warning"],[1,"threshold-dot","danger"],[1,"result-card"],[1,"result-icon-wrapper"],[1,"result-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",4,"ngIf"],[1,"result-content"],[1,"result-title"],[1,"result-description"],["title","\u0424\u0438\u043D\u0430\u043D\u0441\u043E\u0432\u044B\u0435 \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u0435\u043B\u0438",3,"visibleChange","visible","showCloseButton"],[1,"help-modal-content"],[1,"help-item"],[1,"help-item-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"help-item-icon"],[1,"help-item-description"],[1,"help-item","highlight"],["title","\u0418\u043D\u0434\u0435\u043A\u0441 \u0443\u044F\u0437\u0432\u0438\u043C\u043E\u0441\u0442\u0438",3,"visibleChange","visible","showCloseButton"],[1,"help-list"],[1,"help-levels"],[1,"help-level","excellent"],[1,"help-level-header"],[1,"help-level-dot","excellent"],[1,"help-level","warning"],[1,"help-level-dot","warning"],[1,"help-level","danger"],[1,"help-level-dot","danger"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"loading-text"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M12 8v4M12 16h.01","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z","stroke","currentColor","stroke-width","2"],["d","M12 9v4M12 17h.01","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M12 2L4 5v6c0 5.55 3.84 10.74 8 12 4.16-1.26 8-6.45 8-12V5l-8-3z","stroke","currentColor","stroke-width","2"]],template:function(a,i){a&1&&(e(0,"div",0),f(1,xe,4,0,"div",1),e(2,"div",2)(3,"div",3),c(),e(4,"svg",4)(5,"defs")(6,"style"),r(7,".cls-1{fill:#1d384d}"),t()(),e(8,"g",5)(9,"g",6),l(10,"path",7)(11,"path",8),t()()()(),h(),e(12,"h2",9),r(13,"\u041A\u0430\u043B\u044C\u043A\u0443\u043B\u044F\u0442\u043E\u0440 \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438 \u0431\u043E\u043D\u0443\u0441\u043D\u043E\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B"),t(),e(14,"p",10),r(15," \u041D\u0430\u0441\u0442\u0440\u043E\u0439\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B \u0438 \u0443\u0437\u043D\u0430\u0439\u0442\u0435, \u043D\u0430\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u0430 \u0432\u0430\u0448\u0430 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F "),t()(),e(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"div",16),c(),e(22,"svg",17),l(23,"path",18),t()(),h(),e(24,"div",19)(25,"span",20),r(26,"\u041C\u0435\u0441\u044F\u0447\u043D\u0430\u044F \u0432\u044B\u0440\u0443\u0447\u043A\u0430"),t(),e(27,"span",21),r(28),t()()(),e(29,"div",15)(30,"div",22),c(),e(31,"svg",17),l(32,"path",23),t()(),h(),e(33,"div",19)(34,"span",20),r(35,"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0447\u0435\u043A"),t(),e(36,"span",21),r(37),t()()()(),e(38,"div",24)(39,"div",25)(40,"div",26)(41,"div",27),c(),e(42,"svg",28),l(43,"circle",29)(44,"circle",30)(45,"path",31),t(),h(),e(46,"label",32),r(47,"\u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F (\u043A\u044D\u0448\u0431\u0435\u043A)"),t()(),e(48,"span",33),r(49),t()(),e(50,"div",34)(51,"app-slider",35),M("ngModelChange",function(d){return w(i.earnPercentValue,d)||(i.earnPercentValue=d),d}),t()(),e(52,"div",36)(53,"span"),r(54,"1%"),t(),e(55,"span"),r(56,"20%"),t()()(),e(57,"div",25)(58,"div",26)(59,"div",27),c(),e(60,"svg",28),l(61,"path",18),t(),h(),e(62,"label",32),r(63,"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0446\u0435\u043D\u0442 \u043E\u043F\u043B\u0430\u0442\u044B \u0431\u043E\u043D\u0443\u0441\u0430\u043C\u0438"),t()(),e(64,"span",33),r(65),t()(),e(66,"div",34)(67,"app-slider",35),M("ngModelChange",function(d){return w(i.burnLimitPercentValue,d)||(i.burnLimitPercentValue=d),d}),t()(),e(68,"div",36)(69,"span"),r(70,"10%"),t(),e(71,"span"),r(72,"100%"),t()()()()(),e(73,"div",37)(74,"div",38)(75,"div",39),c(),e(76,"svg",40),l(77,"path",18),t(),h(),e(78,"h3",41),r(79,"\u0424\u0438\u043D\u0430\u043D\u0441\u043E\u0432\u044B\u0435 \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u0435\u043B\u0438"),t()(),e(80,"button",42),m("click",function(){return i.openFinancialHelpModal()}),c(),e(81,"svg",43),l(82,"path",44),t()()(),h(),e(83,"div",45)(84,"div",46)(85,"div",47)(86,"div",48),c(),e(87,"svg",17),l(88,"path",49)(89,"rect",50)(90,"path",51),t()(),h(),e(91,"div",52)(92,"span",53),r(93,"\u0414\u0430\u0440\u0438\u043C \u0441 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u0447\u0435\u043A\u0430"),t(),e(94,"span",54),r(95),t()()()(),e(96,"div",46)(97,"div",47)(98,"div",55),c(),e(99,"svg",17),l(100,"path",18),t()(),h(),e(101,"div",52)(102,"span",53),r(103,"\u0424\u043E\u043D\u0434 \u0431\u043E\u043D\u0443\u0441\u043E\u0432 \u0437\u0430 \u043C\u0435\u0441\u044F\u0446"),t(),e(104,"span",54),r(105),t()()()(),e(106,"div",56)(107,"div",47)(108,"div",57),c(),e(109,"svg",58),l(110,"path",59),t()(),h(),e(111,"div",52)(112,"span",53),r(113,"\u0413\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0432\u044B\u0440\u0443\u0447\u043A\u0430 \u0441 \u0447\u0435\u043A\u0430"),t(),e(114,"div",60)(115,"span",61),r(116),t(),e(117,"span",62),r(118),t()()()()()()()(),e(119,"div",63)(120,"div",64)(121,"div",65)(122,"span",66),r(123,"\u0418\u043D\u0434\u0435\u043A\u0441 \u0443\u044F\u0437\u0432\u0438\u043C\u043E\u0441\u0442\u0438"),t()(),e(124,"div",67)(125,"button",42),m("click",function(){return i.openScoreHelpModal()}),c(),e(126,"svg",43),l(127,"path",44),t()(),h(),e(128,"div",68)(129,"span",69),r(130),t()()()(),e(131,"div",70),l(132,"div",71),t(),e(133,"div",72)(134,"span",73),l(135,"span",74),e(136,"span",75),r(137,"\u0411\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E (\u226430)"),t()(),e(138,"span",73),l(139,"span",76),e(140,"span",75),r(141,"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435 (31-60)"),t()(),e(142,"span",73),l(143,"span",77),e(144,"span",75),r(145,"\u041E\u043F\u0430\u0441\u043D\u043E (>60)"),t()()()(),e(146,"div",78)(147,"div",79)(148,"div",80),f(149,be,3,0,"svg",81)(150,we,3,0,"svg",81)(151,Me,2,0,"svg",81)(152,Pe,3,0,"svg",81),t()(),e(153,"div",82)(154,"h3",83),r(155),t(),e(156,"p",84),r(157),t()()()()(),e(158,"app-modal",85),m("visibleChange",function(d){return i.isFinancialHelpModalOpen=d}),e(159,"div",86)(160,"div",87)(161,"h4",88),c(),e(162,"svg",89),l(163,"path",49)(164,"rect",50)(165,"path",51),t(),r(166," \u0414\u0430\u0440\u0438\u043C \u0441 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u0447\u0435\u043A\u0430 "),t(),h(),e(167,"p",90),r(168," \u0421\u0443\u043C\u043C\u0430 \u0434\u0435\u043D\u0435\u0433, \u043A\u043E\u0442\u043E\u0440\u0443\u044E \u0432\u044B \u043E\u0442\u0434\u0430\u0435\u0442\u0435 \u043A\u043B\u0438\u0435\u043D\u0442\u0443 \u0432 \u0432\u0438\u0434\u0435 \u0431\u043E\u043D\u0443\u0441\u043E\u0432 \u043F\u0440\u0438 \u043A\u0430\u0436\u0434\u043E\u0439 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438. \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u043A\u0430\u043A: "),e(169,"strong"),r(170,"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0447\u0435\u043A \xD7 \u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F"),t(),r(171,". "),t()(),e(172,"div",87)(173,"h4",88),c(),e(174,"svg",89),l(175,"path",18),t(),r(176," \u0424\u043E\u043D\u0434 \u0431\u043E\u043D\u0443\u0441\u043E\u0432 \u0437\u0430 \u043C\u0435\u0441\u044F\u0446 "),t(),h(),e(177,"p",90),r(178," \u041E\u0431\u0449\u0430\u044F \u0441\u0443\u043C\u043C\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0435\u043D\u0435\u0433 (\u0431\u043E\u043D\u0443\u0441\u043E\u0432), \u043A\u043E\u0442\u043E\u0440\u0443\u044E \u0432\u044B \u0432\u044B\u043F\u0443\u0441\u043A\u0430\u0435\u0442\u0435 \u0437\u0430 \u043C\u0435\u0441\u044F\u0446. \u042D\u0442\u043E \u0432\u0430\u0448 \u043F\u043E\u0442\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0438\u0441\u043A. \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u043A\u0430\u043A: "),e(179,"strong"),r(180,"\u041C\u0435\u0441\u044F\u0447\u043D\u0430\u044F \u0432\u044B\u0440\u0443\u0447\u043A\u0430 \xD7 \u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F"),t(),r(181,". "),t()(),e(182,"div",91)(183,"h4",88),c(),e(184,"svg",89),l(185,"path",59),t(),r(186," \u0413\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0432\u044B\u0440\u0443\u0447\u043A\u0430 \u0441 \u0447\u0435\u043A\u0430 "),t(),h(),e(187,"p",90),r(188," \u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0443\u043C\u043C\u0430 \u0440\u0435\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0435\u043D\u0435\u0433, \u043A\u043E\u0442\u043E\u0440\u0443\u044E \u0432\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u0435 \u0441 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u0437\u0430\u043A\u0430\u0437\u0430, \u043D\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E \u043E\u0442 \u0442\u043E\u0433\u043E, \u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0431\u043E\u043D\u0443\u0441\u043E\u0432 \u043F\u043E\u0442\u0440\u0430\u0442\u0438\u0442 \u043A\u043B\u0438\u0435\u043D\u0442. \u042D\u0442\u043E \u0432\u0430\u0448\u0430 \u0437\u0430\u0449\u0438\u0442\u0430 \u043E\u0442 \u043A\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0440\u0430\u0437\u0440\u044B\u0432\u0430. "),l(189,"br")(190,"br"),r(191," \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u043A\u0430\u043A: "),e(192,"strong"),r(193,"\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0447\u0435\u043A \xD7 (1 - \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0446\u0435\u043D\u0442 \u043E\u043F\u043B\u0430\u0442\u044B \u0431\u043E\u043D\u0443\u0441\u0430\u043C\u0438)"),t(),r(194,". "),l(195,"br")(196,"br"),e(197,"strong"),r(198,"\u0420\u0430\u0437\u043D\u0438\u0446\u0430"),t(),r(199," \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442, \u043D\u0430\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0433\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0432\u044B\u0440\u0443\u0447\u043A\u0430 \u043E\u0442\u043B\u0438\u0447\u0430\u0435\u0442\u0441\u044F \u043E\u0442 \u0441\u0440\u0435\u0434\u043D\u0435\u0433\u043E \u0447\u0435\u043A\u0430. \u041E\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u043E\u0437\u043D\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043E \u0432\u044B \u0442\u0435\u0440\u044F\u0435\u0442\u0435 \u0447\u0430\u0441\u0442\u044C \u0432\u044B\u0440\u0443\u0447\u043A\u0438. "),t()()()(),e(200,"app-modal",92),m("visibleChange",function(d){return i.isScoreHelpModalOpen=d}),e(201,"div",86)(202,"div",87)(203,"h4",88),r(204,"\u0427\u0442\u043E \u044D\u0442\u043E \u0442\u0430\u043A\u043E\u0435?"),t(),e(205,"p",90),r(206," \u0418\u043D\u0434\u0435\u043A\u0441 \u0443\u044F\u0437\u0432\u0438\u043C\u043E\u0441\u0442\u0438 \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442, \u043D\u0430\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0432\u0430\u0448\u0430 \u0431\u043E\u043D\u0443\u0441\u043D\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430 \u043F\u043E\u0434\u0432\u0435\u0440\u0436\u0435\u043D\u0430 \u0440\u0438\u0441\u043A\u0443 \u043A\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0440\u0430\u0437\u0440\u044B\u0432\u0430. \u0427\u0435\u043C \u0432\u044B\u0448\u0435 \u0438\u043D\u0434\u0435\u043A\u0441, \u0442\u0435\u043C \u0431\u043E\u043B\u044C\u0448\u0435 \u0440\u0438\u0441\u043A \u043F\u043E\u0442\u0435\u0440\u044F\u0442\u044C \u0436\u0438\u0432\u044B\u0435 \u0434\u0435\u043D\u044C\u0433\u0438. "),t()(),e(207,"div",87)(208,"h4",88),r(209,"\u041A\u0430\u043A \u0440\u0430\u0441\u0441\u0447\u0438\u0442\u044B\u0432\u0430\u0435\u0442\u0441\u044F?"),t(),e(210,"div",90)(211,"p"),r(212,"\u0424\u043E\u0440\u043C\u0443\u043B\u0430: "),e(213,"strong"),r(214,"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0446\u0435\u043D\u0442 \u043E\u043F\u043B\u0430\u0442\u044B \u0431\u043E\u043D\u0443\u0441\u0430\u043C\u0438 \xD7 (1 + \u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F / 10)"),t()(),e(215,"p"),r(216,"\u0418\u043D\u0434\u0435\u043A\u0441 \u0443\u0447\u0438\u0442\u044B\u0432\u0430\u0435\u0442:"),t(),e(217,"ul",93)(218,"li")(219,"strong"),r(220,"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0446\u0435\u043D\u0442 \u043E\u043F\u043B\u0430\u0442\u044B \u0431\u043E\u043D\u0443\u0441\u0430\u043C\u0438"),t(),r(221," \u2014 \u043F\u0440\u044F\u043C\u043E\u0439 \u0440\u0438\u0441\u043A \u043F\u043E\u0442\u0435\u0440\u0438 \u0432\u044B\u0440\u0443\u0447\u043A\u0438"),t(),e(222,"li")(223,"strong"),r(224,"\u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F"),t(),r(225," \u2014 \u0447\u0435\u043C \u0432\u044B\u0448\u0435 \u043A\u044D\u0448\u0431\u0435\u043A, \u0442\u0435\u043C \u0447\u0430\u0449\u0435 \u043A\u043B\u0438\u0435\u043D\u0442\u044B \u0442\u0440\u0430\u0442\u044F\u0442 \u0431\u043E\u043D\u0443\u0441\u044B"),t()()()(),e(226,"div",87)(227,"h4",88),r(228,"\u0423\u0440\u043E\u0432\u043D\u0438 \u0440\u0438\u0441\u043A\u0430"),t(),e(229,"div",94)(230,"div",95)(231,"div",96),l(232,"span",97),e(233,"strong"),r(234,"\u0411\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E (\u226430)"),t()(),e(235,"p"),r(236,"\u0412\u0430\u0448\u0430 \u0433\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0432\u044B\u0440\u0443\u0447\u043A\u0430 \u043F\u043E\u0434 \u0437\u0430\u0449\u0438\u0442\u043E\u0439. \u0420\u0438\u0441\u043A\u0438 \u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B."),t()(),e(237,"div",98)(238,"div",96),l(239,"span",99),e(240,"strong"),r(241,"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435 (31-60)"),t()(),e(242,"p"),r(243,"\u0423\u043C\u0435\u0440\u0435\u043D\u043D\u044B\u0439 \u0440\u0438\u0441\u043A. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u0432\u0430\u0448\u0430 \u043C\u0430\u0440\u0436\u0430 \u0432\u044B\u0448\u0435 30%."),t()(),e(244,"div",100)(245,"div",96),l(246,"span",101),e(247,"strong"),r(248,"\u041E\u043F\u0430\u0441\u043D\u043E (>60)"),t()(),e(249,"p"),r(250,"\u041A\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0440\u0438\u0441\u043A! \u0423\u0433\u0440\u043E\u0437\u0430 \u043A\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0440\u0430\u0437\u0440\u044B\u0432\u0430. \u0421\u0440\u043E\u0447\u043D\u043E \u043F\u0435\u0440\u0435\u0441\u043C\u043E\u0442\u0440\u0438\u0442\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438."),t()()()()()()),a&2&&(u(),s("ngIf",i.isLoading()),u(27),_("",i.formatCurrency(i.monthlyRevenueSignal())," \u20B8"),u(9),_("",i.formatCurrency(i.averageCheckSignal())," \u20B8"),u(12),_("",i.earnPercent(),"%"),u(2),b("ngModel",i.earnPercentValue),s("min",1)("max",20)("step",.5)("showValue",!1),u(14),_("",i.burnLimitPercent(),"%"),u(2),b("ngModel",i.burnLimitPercentValue),s("min",10)("max",100)("step",2.5)("showValue",!1),u(28),_("",i.formatCurrency(i.giftPerClient())," \u20B8"),u(10),_("",i.formatCurrency(i.totalLiability())," \u20B8"),u(11),_("",i.formatCurrency(i.guaranteedCash())," \u20B8"),u(),x("positive",i.guaranteedCashDifference()>=0)("negative",i.guaranteedCashDifference()<0),u(),Y(" ",i.guaranteedCashDifference()>=0?"+":"","",i.formatCurrency(i.guaranteedCashDifference())," \u20B8 "),u(10),F("score-"+i.scoreLevel()),u(2),C(i.formatScore(i.vulnerabilityScore())),u(2),F("score-"+i.scoreLevel()),N("width",i.scorePercentage(),"%"),u(2),x("active",i.scoreLevel()==="excellent"),u(4),x("active",i.scoreLevel()==="warning"),u(4),x("active",i.scoreLevel()==="danger"),u(4),F("status-"+i.status().type),u(3),s("ngIf",i.status().type==="danger"),u(),s("ngIf",i.status().type==="warning"),u(),s("ngIf",i.status().type==="excellent"),u(),s("ngIf",i.status().type==="low-motivation"),u(3),C(i.status().title),u(2),C(i.status().description),u(),s("visible",i.isFinancialHelpModalOpen)("showCloseButton",!0),u(42),s("visible",i.isScoreHelpModalOpen)("showCloseButton",!0))},dependencies:[T,D,R,z,I,ge,G],styles:['.calculator-wrapper[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:16px;padding:2.5rem;border:1px solid #e2e8f0;box-shadow:0 4px 6px -1px #0000001a;margin-top:2rem;transition:all .3s ease}.calculator-wrapper[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px -4px #0000001a}.calculator-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;position:relative}.header-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:linear-gradient(135deg,#dcfce7,#bbf7d0);border-radius:14px;display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:#16a34a}.calculator-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#0f172a;margin:0 0 .5rem;letter-spacing:-.02em}.calculator-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#64748b;margin:0;line-height:1.6}.calculator-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.main-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem}.input-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.fixed-values[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}.fixed-value-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0;transition:all .2s ease}.fixed-value-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;// transform: translateY(-1px)}.fixed-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.fixed-icon.revenue-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);color:#2563eb}.fixed-icon.check-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);color:#16a34a}.fixed-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.fixed-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;flex:1}.fixed-label[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.fixed-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a;letter-spacing:-.01em}.slider-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.slider-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1.5rem;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0;transition:all .2s ease}.slider-item[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1}.slider-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.slider-title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.slider-title-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#16a34a;flex-shrink:0}.slider-label-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#475569}.slider-value-display[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#16a34a;letter-spacing:-.02em}.slider-container-wrapper[_ngcontent-%COMP%]{padding:.5rem 0}.slider-container-wrapper[_ngcontent-%COMP%]     .slider{height:8px;background:#e2e8f0}.slider-container-wrapper[_ngcontent-%COMP%]     .slider::-webkit-slider-thumb{width:24px;height:24px;background:#16a34a;box-shadow:0 2px 8px #16a34a4d;transition:all .2s ease}.slider-container-wrapper[_ngcontent-%COMP%]     .slider::-webkit-slider-thumb:hover{background:#15803d;box-shadow:0 4px 12px #16a34a66;// transform: scale(1.1)}.slider-container-wrapper[_ngcontent-%COMP%]     .slider::-moz-range-thumb{width:24px;height:24px;background:#16a34a;border:none;box-shadow:0 2px 8px #16a34a4d;transition:all .2s ease}.slider-container-wrapper[_ngcontent-%COMP%]     .slider::-moz-range-thumb:hover{background:#15803d;box-shadow:0 4px 12px #16a34a66;// transform: scale(1.1)}.slider-range[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.75rem;color:#94a3b8;font-weight:500}.result-card[_ngcontent-%COMP%]{padding:1.75rem;border-radius:14px;display:flex;gap:1.25rem;align-items:flex-start;border:2px solid;transition:all .3s ease;position:relative;overflow:hidden}.result-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:currentColor;opacity:.3}.result-card.status-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2,#fee2e2);border-color:#fecaca;color:#991b1b}.result-card.status-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fffbeb,#fef3c7);border-color:#fde68a;color:#92400e}.result-card.status-excellent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-color:#bbf7d0;color:#15803d}.result-card.status-low-motivation[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-color:#cbd5e1;color:#64748b}.result-icon-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.result-icon[_ngcontent-%COMP%]{width:56px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:14px;background:#fffc;box-shadow:0 2px 8px #0000001a}.result-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.result-content[_ngcontent-%COMP%]{flex:1}.result-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin:0 0 .5rem}.result-description[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.6;margin:0;opacity:.9}.financial-breakdown[_ngcontent-%COMP%]{background:#f8fafc;border-radius:14px;padding:1.75rem;border:1px solid #e2e8f0}.breakdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.breakdown-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.breakdown-header-icon[_ngcontent-%COMP%]{width:24px;height:24px;color:#16a34a}.breakdown-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a;margin:0;letter-spacing:-.01em}.breakdown-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.breakdown-item[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;transition:all .2s ease;overflow:hidden}.breakdown-item[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;// transform: translateY(-1px);// box-shadow: 0 2px 8px rgba(0,0,0,.05)}.breakdown-item.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border-color:#86efac;box-shadow:0 4px 12px #16a34a33}.breakdown-item.highlight[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #16a34a40;// transform: translateY(-2px)}.breakdown-item-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.25rem}.breakdown-icon-wrapper[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.breakdown-icon-wrapper.gift-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);color:#d97706}.breakdown-icon-wrapper.fund-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);color:#2563eb}.breakdown-icon-wrapper.shield-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);color:#16a34a}.breakdown-icon-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.breakdown-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;flex:1}.breakdown-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.breakdown-item.highlight[_ngcontent-%COMP%]   .breakdown-label[_ngcontent-%COMP%]{color:#15803d}.shield-icon[_ngcontent-%COMP%]{width:24px;height:24px}.breakdown-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;letter-spacing:-.02em}.breakdown-item.highlight[_ngcontent-%COMP%]   .breakdown-value[_ngcontent-%COMP%]{color:#15803d;font-size:1.75rem}.breakdown-value-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;align-items:start}.breakdown-difference[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;padding:.25rem .5rem;border-radius:6px}.breakdown-difference.positive[_ngcontent-%COMP%]{color:#15803d;background:#16a34a1a}.breakdown-difference.negative[_ngcontent-%COMP%]{color:#dc2626;// background: rgba(220,38,38,.1)}.vulnerability-score-section[_ngcontent-%COMP%]{background:#f8fafc;border-radius:14px;padding:1.5rem;border:1px solid #e2e8f0;margin-top:1rem}.score-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.score-header-left[_ngcontent-%COMP%]{display:flex;align-items:center}.score-header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.score-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#475569;text-transform:uppercase;letter-spacing:.05em}.score-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:8px;font-weight:700;font-size:1.25rem;letter-spacing:-.02em}.score-badge.score-excellent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);color:#15803d}.score-badge.score-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);color:#92400e}.score-badge.score-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#991b1b}.score-value[_ngcontent-%COMP%]{display:inline-block}.score-bar[_ngcontent-%COMP%]{width:100%;height:12px;background:#e2e8f0;border-radius:6px;overflow:hidden;margin-bottom:1rem;position:relative}.score-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:6px;transition:width .3s ease,background .3s ease}.score-bar-fill.score-excellent[_ngcontent-%COMP%]{background:linear-gradient(90deg,#16a34a,#22c55e)}.score-bar-fill.score-warning[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#fbbf24)}.score-bar-fill.score-danger[_ngcontent-%COMP%]{background:linear-gradient(90deg,#dc2626,#ef4444)}.score-thresholds[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.threshold-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1;font-size:.8rem;color:#64748b;transition:all .2s ease}.threshold-item.active[_ngcontent-%COMP%]{color:#0f172a;font-weight:600}.threshold-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.threshold-dot.excellent[_ngcontent-%COMP%]{background:#16a34a}.threshold-dot.warning[_ngcontent-%COMP%]{background:#f59e0b}.threshold-dot.danger[_ngcontent-%COMP%]{background:#dc2626}.threshold-label[_ngcontent-%COMP%]{white-space:nowrap}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;border-radius:16px;z-index:10}.loading-spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#16a34a;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;font-weight:500;margin:0}.help-button[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;border:1px solid #cbd5e1;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#64748b;flex-shrink:0}.help-button[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#16a34a;color:#16a34a;// transform: scale(1.1)}.help-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.help-modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:.5rem 0}.help-item[_ngcontent-%COMP%]{padding:1rem;background:#f8fafc;border-radius:10px;border:1px solid #e2e8f0}.help-item.highlight[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border-color:#86efac}.help-item-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1rem;font-weight:700;color:#0f172a;margin:0 0 .75rem}.help-item-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#16a34a;flex-shrink:0}.help-item-description[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.6;color:#475569;margin:0}.help-item-description[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0f172a;font-weight:600}.help-list[_ngcontent-%COMP%]{margin:.75rem 0 0;padding-left:1.5rem;color:#475569}.help-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;line-height:1.5}.help-levels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:.75rem}.help-level[_ngcontent-%COMP%]{padding:1rem;background:#fff;border-radius:8px;border:1px solid #e2e8f0}.help-level.excellent[_ngcontent-%COMP%]{border-left:4px solid #16A34A}.help-level.warning[_ngcontent-%COMP%]{border-left:4px solid #f59e0b}.help-level.danger[_ngcontent-%COMP%]{border-left:4px solid #dc2626}.help-level-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;font-size:.95rem}.help-level-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;flex-shrink:0}.help-level-dot.excellent[_ngcontent-%COMP%]{background:#16a34a}.help-level-dot.warning[_ngcontent-%COMP%]{background:#f59e0b}.help-level-dot.danger[_ngcontent-%COMP%]{background:#dc2626}.help-level[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#64748b;line-height:1.5}@media (max-width: 1024px){.main-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.calculator-wrapper[_ngcontent-%COMP%]{padding:1.5rem}.calculator-title[_ngcontent-%COMP%]{font-size:1.5rem}.fixed-values[_ngcontent-%COMP%]{grid-template-columns:1fr}.fixed-value-item[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.slider-item[_ngcontent-%COMP%]{padding:1.25rem}.slider-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.result-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:1.5rem}.result-icon-wrapper[_ngcontent-%COMP%]{margin:0 auto}.breakdown-item-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.breakdown-value-group[_ngcontent-%COMP%]{align-items:center}.score-thresholds[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.threshold-item[_ngcontent-%COMP%]{justify-content:flex-start}}']})}return o})();function ke(o,g){o&1&&(e(0,"div",42),l(1,"app-loader"),t())}function Se(o,g){o&1&&(c(),e(0,"svg",65),l(1,"rect",66)(2,"path",67)(3,"path",68),t())}function ye(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",69),t())}function Ee(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",70)(2,"path",71)(3,"path",72)(4,"circle",73)(5,"circle",74)(6,"circle",75),t())}function Oe(o,g){o&1&&(c(),e(0,"svg",65),l(1,"circle",76)(2,"circle",77)(3,"circle",78)(4,"path",79),t())}function Be(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",80)(2,"rect",81)(3,"path",82)(4,"path",83)(5,"path",84),t())}function De(o,g){o&1&&(c(),e(0,"svg",65),l(1,"circle",85)(2,"circle",86)(3,"path",87),t())}function Te(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",88),t())}function Fe(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",89)(2,"path",90)(3,"path",91)(4,"path",92),t())}function Ve(o,g){if(o&1&&(e(0,"div",93),c(),e(1,"svg",94),l(2,"circle",95)(3,"path",96),t(),r(4),t()),o&2){let n=v().$implicit;u(4),_(" ",n.expirationDays," \u0434\u043D. ")}}function Ae(o,g){o&1&&(e(0,"div",97),c(),e(1,"svg",94),l(2,"path",98),t(),r(3," \u0431\u0435\u0441\u0441\u0440\u043E\u0447\u043D\u043E "),t())}function Le(o,g){if(o&1){let n=B();e(0,"div",49)(1,"div",50)(2,"div",51),V(3,52),f(4,Se,4,0,"svg",53)(5,ye,2,0,"svg",53)(6,Ee,7,0,"svg",53)(7,Oe,5,0,"svg",53)(8,Be,6,0,"svg",53)(9,De,4,0,"svg",53)(10,Te,2,0,"svg",53)(11,Fe,5,0,"svg",53),A(),t(),e(12,"label",54)(13,"input",55),m("click",function(i){let p=P(n).$implicit,d=v(2);return k(d.onToggleClick(p,i))}),t(),l(14,"span",56),t()(),e(15,"div",57),r(16),t(),e(17,"div",58),r(18),t(),e(19,"div",59)(20,"div",60)(21,"div",61),r(22),e(23,"span"),r(24),t()(),f(25,Ve,5,1,"div",62)(26,Ae,4,0,"div",63),t(),e(27,"button",64),m("click",function(){let i=P(n).$implicit,p=v(2);return k(p.openSettingsModal(i))}),r(28," \u041D\u0430\u0441\u0442\u0440\u043E\u0438\u0442\u044C "),t()()()}if(o&2){let n=g.$implicit;x("active-config",n.active),u(3),s("ngSwitch",n.icon),u(),s("ngSwitchCase","wallet"),u(),s("ngSwitchCase","party"),u(),s("ngSwitchCase","cake"),u(),s("ngSwitchCase","share"),u(),s("ngSwitchCase","gift"),u(),s("ngSwitchCase","percent"),u(),s("ngSwitchCase","heart"),u(),s("ngSwitchCase","trophy"),u(2),s("checked",n.active),u(3),C(n.title),u(2),C(n.description),u(4),_(" ",n.value,""),u(2),C(n.unit),u(),s("ngIf",n.expirationDays>0),u(),s("ngIf",n.expirationDays===0)}}function ze(o,g){if(o&1){let n=B();e(0,"div",43),f(1,Le,29,18,"div",44),e(2,"div",45),m("click",function(){P(n);let i=v();return k(i.openAddModal())}),c(),e(3,"svg",46),l(4,"path",47),t(),h(),e(5,"span",48),r(6,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0431\u043E\u043D\u0443\u0441"),t()()()}if(o&2){let n=v();u(),s("ngForOf",n.bonusRules)}}function Ie(o,g){o&1&&(c(),e(0,"svg",65),l(1,"rect",66)(2,"path",67)(3,"path",68),t())}function Re(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",69),t())}function Ge(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",70)(2,"path",71)(3,"path",72)(4,"circle",73)(5,"circle",74)(6,"circle",75),t())}function He(o,g){o&1&&(c(),e(0,"svg",65),l(1,"circle",76)(2,"circle",77)(3,"circle",78)(4,"path",79),t())}function je(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",80)(2,"rect",81)(3,"path",82)(4,"path",83)(5,"path",84),t())}function We(o,g){o&1&&(c(),e(0,"svg",65),l(1,"circle",85)(2,"circle",86)(3,"path",87),t())}function Ne(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",88),t())}function Ye(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",89)(2,"path",90)(3,"path",91)(4,"path",92),t())}function qe(o,g){if(o&1){let n=B();e(0,"button",104),m("click",function(){let i=P(n).$implicit,p=v(2);return k(p.editIcon=i.id)}),V(1,52),f(2,Ie,4,0,"svg",53)(3,Re,2,0,"svg",53)(4,Ge,7,0,"svg",53)(5,He,5,0,"svg",53)(6,je,6,0,"svg",53)(7,We,4,0,"svg",53)(8,Ne,2,0,"svg",53)(9,Ye,5,0,"svg",53),A(),t()}if(o&2){let n=g.$implicit,a=v(2);x("selected",a.editIcon===n.id),u(),s("ngSwitch",n.id),u(),s("ngSwitchCase","wallet"),u(),s("ngSwitchCase","party"),u(),s("ngSwitchCase","cake"),u(),s("ngSwitchCase","share"),u(),s("ngSwitchCase","gift"),u(),s("ngSwitchCase","percent"),u(),s("ngSwitchCase","heart"),u(),s("ngSwitchCase","trophy")}}function Ue(o,g){if(o&1){let n=B();e(0,"div",7)(1,"div",8),r(2," \u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043D\u043E\u0432\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0434\u043B\u044F \u044D\u0442\u043E\u0433\u043E \u0442\u0438\u043F\u0430 \u0431\u043E\u043D\u0443\u0441\u043E\u0432. \u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u0441\u0442\u0443\u043F\u044F\u0442 \u0432 \u0441\u0438\u043B\u0443 \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u0431\u0443\u0434\u0443\u0449\u0438\u0445 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0439. "),t(),e(3,"div",9)(4,"label",10),r(5),t(),e(6,"input",21),M("ngModelChange",function(i){P(n);let p=v();return w(p.editValue,i)||(p.editValue=i),k(i)}),t()(),e(7,"div",9)(8,"label",10),r(9,"\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u0431\u043E\u043D\u0443\u0441\u043E\u0432"),t(),e(10,"div",28)(11,"input",21),M("ngModelChange",function(i){P(n);let p=v();return w(p.editExpirationDays,i)||(p.editExpirationDays=i),k(i)}),t(),e(12,"span",29),r(13,"\u0434\u043D\u0435\u0439"),t()(),e(14,"div",30),r(15,"0 = \u0431\u0435\u0441\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u0431\u043E\u043D\u0443\u0441\u044B"),t()(),e(16,"div",9)(17,"label",10),r(18,"\u0418\u043A\u043E\u043D\u043A\u0430"),t(),e(19,"div",31),f(20,qe,10,11,"button",32),t()(),e(21,"div",39)(22,"button",99),m("click",function(){P(n);let i=v();return k(i.saveSettings())}),r(23," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F "),t(),e(24,"button",100),m("click",function(){P(n);let i=v();return k(i.deleteBonus())}),c(),e(25,"svg",101),l(26,"path",102)(27,"path",103),t(),r(28," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0431\u043E\u043D\u0443\u0441 "),t()()()}if(o&2){let n=v();u(5),C(n.selectedRule.label),u(),b("ngModel",n.editValue),u(5),b("ngModel",n.editExpirationDays),u(9),s("ngForOf",n.availableIcons)}}function Je(o,g){if(o&1&&(e(0,"option",105),r(1),t()),o&2){let n=g.$implicit;s("value",n.type),u(),_(" ",n.displayName," ")}}function Ke(o,g){o&1&&(c(),e(0,"svg",65),l(1,"rect",66)(2,"path",67)(3,"path",68),t())}function Qe(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",69),t())}function Xe(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",70)(2,"path",71)(3,"path",72)(4,"circle",73)(5,"circle",74)(6,"circle",75),t())}function Ze(o,g){o&1&&(c(),e(0,"svg",65),l(1,"circle",76)(2,"circle",77)(3,"circle",78)(4,"path",79),t())}function $e(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",80)(2,"rect",81)(3,"path",82)(4,"path",83)(5,"path",84),t())}function et(o,g){o&1&&(c(),e(0,"svg",65),l(1,"circle",85)(2,"circle",86)(3,"path",87),t())}function tt(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",88),t())}function nt(o,g){o&1&&(c(),e(0,"svg",65),l(1,"path",89)(2,"path",90)(3,"path",91)(4,"path",92),t())}function it(o,g){if(o&1){let n=B();e(0,"button",104),m("click",function(){let i=P(n).$implicit,p=v();return k(p.newBonus.icon=i.id)}),V(1,52),f(2,Ke,4,0,"svg",53)(3,Qe,2,0,"svg",53)(4,Xe,7,0,"svg",53)(5,Ze,5,0,"svg",53)(6,$e,6,0,"svg",53)(7,et,4,0,"svg",53)(8,tt,2,0,"svg",53)(9,nt,5,0,"svg",53),A(),t()}if(o&2){let n=g.$implicit,a=v();x("selected",a.newBonus.icon===n.id),u(),s("ngSwitch",n.id),u(),s("ngSwitchCase","wallet"),u(),s("ngSwitchCase","party"),u(),s("ngSwitchCase","cake"),u(),s("ngSwitchCase","share"),u(),s("ngSwitchCase","gift"),u(),s("ngSwitchCase","percent"),u(),s("ngSwitchCase","heart"),u(),s("ngSwitchCase","trophy")}}function ot(o,g){o&1&&(c(),e(0,"svg",106),l(1,"circle",107)(2,"path",108),t())}function rt(o,g){o&1&&(c(),e(0,"svg",106),l(1,"circle",107)(2,"path",109),t())}var Lt=(()=>{class o{pageHeaderService=S(ae);bonusTypesService=S(le);toastService=S(L);isLoading=!0;bonusRules=[];availableIcons=[{id:"wallet",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><rect x="2" y="5" width="20" height="14" rx="2" stroke="currentColor" stroke-width="1.2"/><path d="M16 12h2" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/><path d="M2 10h20" stroke="currentColor" stroke-width="1.2"/></svg>'},{id:"party",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M12 2l2.4 7.4h7.6l-6.2 4.5 2.4 7.4-6.2-4.5-6.2 4.5 2.4-7.4-6.2-4.5h7.6L12 2z" stroke="currentColor" stroke-width="1.2" stroke-linejoin="round"/></svg>'},{id:"cake",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M20 21H4a1 1 0 0 1-1-1v-6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6a1 1 0 0 1-1 1z" stroke="currentColor" stroke-width="1.2"/><path d="M3 16h18" stroke="currentColor" stroke-width="1.2"/><path d="M12 12V9m-4 3V10m8 2V10" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/><circle cx="8" cy="6" r="1" stroke="currentColor" stroke-width="1.2"/><circle cx="12" cy="6" r="1" stroke="currentColor" stroke-width="1.2"/><circle cx="16" cy="6" r="1" stroke="currentColor" stroke-width="1.2"/></svg>'},{id:"share",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="18" cy="5" r="2.5" stroke="currentColor" stroke-width="1.2"/><circle cx="6" cy="12" r="2.5" stroke="currentColor" stroke-width="1.2"/><circle cx="18" cy="19" r="2.5" stroke="currentColor" stroke-width="1.2"/><path d="M8.5 13.5l7 4M15.5 6.5l-7 4" stroke="currentColor" stroke-width="1.2"/></svg>'},{id:"gift",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M20 12v9H4v-9" stroke="currentColor" stroke-width="1.2"/><rect x="2" y="7" width="20" height="5" rx="1" stroke="currentColor" stroke-width="1.2"/><path d="M12 22V7" stroke="currentColor" stroke-width="1.2"/><path d="M12 7c-2-2-4-2.5-4-4.5a2 2 0 0 1 4 0c0 1.5-2 2-4 4.5" stroke="currentColor" stroke-width="1.2"/><path d="M12 7c2-2 4-2.5 4-4.5a2 2 0 0 0-4 0c0 1.5 2 2 4 4.5" stroke="currentColor" stroke-width="1.2"/></svg>'},{id:"percent",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.2"/><circle cx="15" cy="15" r="2" stroke="currentColor" stroke-width="1.2"/><path d="M5 19L19 5" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/></svg>'},{id:"heart",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" stroke="currentColor" stroke-width="1.2"/></svg>'},{id:"trophy",svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M6 9H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2" stroke="currentColor" stroke-width="1.2"/><path d="M18 9h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-2" stroke="currentColor" stroke-width="1.2"/><path d="M12 15a6 6 0 0 0 6-6V3H6v6a6 6 0 0 0 6 6z" stroke="currentColor" stroke-width="1.2"/><path d="M12 15v3m-4 3h8m-6 0v-3m4 3v-3" stroke="currentColor" stroke-width="1.2"/></svg>'}];isSettingsModalOpen=!1;isAddModalOpen=!1;isToggleConfirmModalOpen=!1;selectedRule=null;pendingToggleRule=null;pendingToggleState=!1;toggleConfirmTitle="";toggleConfirmDescription="";editValue=0;editExpirationDays=0;editIcon="gift";preconfiguredTypes=[];isLoadingPreconfiguredTypes=!1;newBonus={title:"",description:"",value:0,unit:"\u0431\u0430\u043B\u043B\u043E\u0432",icon:"gift",expirationDays:30,type:""};ngOnInit(){this.pageHeaderService.setPageHeader("\u0411\u043E\u043D\u0443\u0441\u043D\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430",[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",route:"/home"},{label:"\u0411\u043E\u043D\u0443\u0441\u043D\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430"}]),this.loadBonusTypes(),this.loadPreconfiguredTypes()}loadPreconfiguredTypes(){this.isLoadingPreconfiguredTypes=!0,this.bonusTypesService.getPreconfiguredBonusTypes().subscribe({next:n=>{this.preconfiguredTypes=n,this.isLoadingPreconfiguredTypes=!1},error:n=>{let a=n.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043F\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0442\u0438\u043F\u043E\u0432 \u0431\u043E\u043D\u0443\u0441\u043E\u0432";this.toastService.error(a),this.isLoadingPreconfiguredTypes=!1}})}loadBonusTypes(){this.isLoading=!0,this.bonusTypesService.getAllBonusTypes().subscribe({next:n=>{this.bonusRules=n.map(a=>this.mapBonusTypeToRule(a)),this.isLoading=!1},error:n=>{let a=n.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u0438\u043F\u043E\u0432 \u0431\u043E\u043D\u0443\u0441\u043E\u0432";this.toastService.error(a),this.isLoading=!1}})}mapBonusTypeToRule(n){let a=n.bonusPercentage??n.bonusAmount??0,i=n.bonusPercentage?"%":"\u0431\u0430\u043B\u043B\u043E\u0432",p=n.bonusPercentage?"\u041F\u0440\u043E\u0446\u0435\u043D\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u044F":"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0430\u043B\u043B\u043E\u0432",d=this.mapBackendIconToFrontend(n.iconType);return{id:n.id.toString(),icon:d,title:n.name,description:n.description,value:a,unit:i,label:p,active:n.enabled,expirationDays:n.expirationDays}}mapBackendIconToFrontend(n){return n?n.toLowerCase():"gift"}mapFrontendIconToBackend(n){return n?n.toUpperCase():"GIFT"}mapRuleToCreateRequest(n,a="BASIC_CASHBACK"){let i=n.unit==="%",p={name:n.title||"",type:a,expirationDays:n.expirationDays??30,description:n.description||"",iconType:this.mapFrontendIconToBackend(n.icon||"gift")};return i?p.bonusPercentage=n.value??0:p.bonusAmount=n.value??0,p}onToggleClick(n,a){a.preventDefault(),a.stopPropagation();let i=a.target,d=!n.active;this.pendingToggleRule=n,this.pendingToggleState=d,d?(this.toggleConfirmTitle=`\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C "${n.title}"?`,this.toggleConfirmDescription=`\u041F\u0440\u0438 \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0438 \u044D\u0442\u043E\u0433\u043E \u0431\u043E\u043D\u0443\u0441\u0430 \u043A\u043B\u0438\u0435\u043D\u0442\u044B \u0441\u043C\u043E\u0433\u0443\u0442 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u044C ${n.value}${n.unit==="%"?"%":" "+n.unit} \u043F\u0440\u0438 \u043A\u0430\u0436\u0434\u043E\u0439 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u0438. \u0411\u043E\u043D\u0443\u0441\u043D\u0430\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430 \u043D\u0430\u0447\u043D\u0435\u0442 \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u0431\u0443\u0434\u0443\u0449\u0438\u0445 \u043F\u043E\u043A\u0443\u043F\u043E\u043A.`):(this.toggleConfirmTitle=`\u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C "${n.title}"?`,this.toggleConfirmDescription=`\u041F\u0440\u0438 \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0438 \u044D\u0442\u043E\u0433\u043E \u0431\u043E\u043D\u0443\u0441\u0430 \u043A\u043B\u0438\u0435\u043D\u0442\u044B \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u0431\u0443\u0434\u0443\u0442 \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u044C ${n.value}${n.unit==="%"?"%":" "+n.unit} \u043F\u0440\u0438 \u0442\u0440\u0430\u043D\u0437\u0430\u043A\u0446\u0438\u044F\u0445. \u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430 \u043F\u0435\u0440\u0435\u0441\u0442\u0430\u043D\u0435\u0442 \u043D\u0430\u0447\u0438\u0441\u043B\u044F\u0442\u044C \u0431\u043E\u043D\u0443\u0441\u044B \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u0431\u0443\u0434\u0443\u0449\u0438\u0445 \u043F\u043E\u043A\u0443\u043F\u043E\u043A. \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u043D\u0430\u043A\u043E\u043F\u043B\u0435\u043D\u043D\u044B\u0435 \u0431\u043E\u043D\u0443\u0441\u044B \u043A\u043B\u0438\u0435\u043D\u0442\u043E\u0432 \u043E\u0441\u0442\u0430\u043D\u0443\u0442\u0441\u044F \u0431\u0435\u0437 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439.`),this.isToggleConfirmModalOpen=!0}confirmToggle(){if(this.pendingToggleRule){let n=parseInt(this.pendingToggleRule.id);this.bonusTypesService.toggleBonusType(n,this.pendingToggleState).subscribe({next:a=>{this.loadBonusTypes(),this.toastService.success(this.pendingToggleState?"\u0411\u043E\u043D\u0443\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u043A\u043B\u044E\u0447\u0435\u043D":"\u0411\u043E\u043D\u0443\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D"),this.isToggleConfirmModalOpen=!1,this.pendingToggleRule=null},error:a=>{let i=a.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0431\u043E\u043D\u0443\u0441\u0430";this.toastService.error(i)}})}}cancelToggle(){this.pendingToggleRule&&(this.pendingToggleRule=null),this.isToggleConfirmModalOpen=!1}openSettingsModal(n){this.selectedRule=n,this.editValue=n.value,this.editExpirationDays=n.expirationDays,this.editIcon=n.icon,this.isSettingsModalOpen=!0}saveSettings(){if(this.selectedRule&&this.editValue>=0){let n=parseInt(this.selectedRule.id),a=this.selectedRule.unit==="%",i={name:this.selectedRule.title,enabled:this.selectedRule.active,description:this.selectedRule.description||"",expirationDays:this.editExpirationDays,iconType:this.mapFrontendIconToBackend(this.editIcon)};a?i.bonusPercentage=this.editValue:i.bonusAmount=this.editValue,this.bonusTypesService.updateBonusType(n,i).subscribe({next:p=>{let d=this.bonusRules.findIndex(he=>he.id===this.selectedRule.id);d!==-1&&(this.bonusRules[d]=this.mapBonusTypeToRule(p)),this.toastService.success("\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0431\u043E\u043D\u0443\u0441\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B"),this.isSettingsModalOpen=!1,this.selectedRule=null},error:p=>{let d=p.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A";this.toastService.error(d)}})}}deleteBonus(){if(this.selectedRule){let n=parseInt(this.selectedRule.id);this.bonusTypesService.deleteBonusType(n).subscribe({next:()=>{let a=this.bonusRules.findIndex(i=>i.id===this.selectedRule.id);a!==-1&&this.bonusRules.splice(a,1),this.toastService.success("\u0411\u043E\u043D\u0443\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D"),this.isSettingsModalOpen=!1,this.selectedRule=null},error:a=>{let i=a.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0431\u043E\u043D\u0443\u0441\u0430";this.toastService.error(i)}})}}openAddModal(){this.newBonus={title:"",description:"",value:0,unit:"\u0431\u0430\u043B\u043B\u043E\u0432",icon:"gift",expirationDays:30,type:""},this.isAddModalOpen=!0}addNewBonus(){if(!this.newBonus.title||!this.newBonus.value||!this.newBonus.type)return;let n=this.newBonus.unit==="%",a={name:this.newBonus.title,type:this.newBonus.type,expirationDays:this.newBonus.expirationDays,description:this.newBonus.description||"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0439 \u0431\u043E\u043D\u0443\u0441",iconType:this.mapFrontendIconToBackend(this.newBonus.icon)};n?a.bonusPercentage=this.newBonus.value:a.bonusAmount=this.newBonus.value,this.bonusTypesService.createBonusType(a).subscribe({next:i=>{let p=this.mapBonusTypeToRule(i);this.bonusRules.push(p),this.toastService.success("\u0411\u043E\u043D\u0443\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D"),this.isAddModalOpen=!1,this.newBonus={title:"",description:"",value:0,unit:"\u0431\u0430\u043B\u043B\u043E\u0432",icon:"gift",expirationDays:30,type:""}},error:i=>{let p=i.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u0431\u043E\u043D\u0443\u0441\u0430";this.toastService.error(p)}})}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=O({type:o,selectors:[["app-bonus-program-page"]],decls:80,vars:30,consts:[[1,"page-wrapper"],[1,"bonus-program"],["class","loading-container",4,"ngIf"],["class","config-grid",4,"ngIf"],[3,"visibleChange","visible","title"],["class","modal-body",4,"ngIf"],["title","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0431\u043E\u043D\u0443\u0441",3,"visibleChange","visible"],[1,"modal-body"],[1,"modal-description"],[1,"form-group"],[1,"input-label"],[1,"required-mark"],[1,"select-wrapper"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"select-arrow"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","text","placeholder","\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: \u0411\u043E\u043D\u0443\u0441 \u0432\u044B\u0445\u043E\u0434\u043D\u043E\u0433\u043E \u0434\u043D\u044F",1,"form-input",3,"ngModelChange","ngModel"],["placeholder","\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u0439...","rows","3",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","min","0","placeholder","0",1,"form-input",3,"ngModelChange","ngModel"],[1,"unit-selector"],["type","button",1,"unit-option",3,"click"],[1,"unit-icon"],[1,"unit-text"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"unit-icon-svg"],["d","M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z","fill","currentColor"],[1,"expiration-input"],[1,"expiration-suffix"],[1,"input-hint"],[1,"icon-selector"],["class","icon-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"submit-btn",3,"click","disabled"],[1,"toggle-confirm-content"],[1,"confirm-icon"],["viewBox","0 0 24 24","fill","none",4,"ngIf"],[1,"confirm-description"],[1,"confirm-text"],[1,"modal-actions"],["buttonType","ghost",3,"onClick"],[3,"onClick","buttonType"],[1,"loading-container"],[1,"config-grid"],["class","config-card",3,"active-config",4,"ngFor","ngForOf"],[1,"config-card-add",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"add-icon"],["d","M12 5v14M5 12h14","stroke","currentColor","stroke-width","2","stroke-linecap","round"],[1,"add-text"],[1,"config-card"],[1,"config-header"],[1,"config-icon"],[3,"ngSwitch"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",4,"ngSwitchCase"],[1,"switch"],["type","checkbox",3,"click","checked"],[1,"slider"],[1,"config-title"],[1,"config-desc"],[1,"config-footer"],[1,"config-values"],[1,"config-value"],["class","config-expiration",4,"ngIf"],["class","config-expiration forever",4,"ngIf"],[1,"btn-config-card",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none"],["x","2","y","5","width","20","height","14","rx","2","stroke","currentColor","stroke-width","1.2"],["d","M16 12h2","stroke","currentColor","stroke-width","1.2","stroke-linecap","round"],["d","M2 10h20","stroke","currentColor","stroke-width","1.2"],["d","M12 2l2.4 7.4h7.6l-6.2 4.5 2.4 7.4-6.2-4.5-6.2 4.5 2.4-7.4-6.2-4.5h7.6L12 2z","stroke","currentColor","stroke-width","1.2","stroke-linejoin","round"],["d","M20 21H4a1 1 0 0 1-1-1v-6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6a1 1 0 0 1-1 1z","stroke","currentColor","stroke-width","1.2"],["d","M3 16h18","stroke","currentColor","stroke-width","1.2"],["d","M12 12V9m-4 3V10m8 2V10","stroke","currentColor","stroke-width","1.2","stroke-linecap","round"],["cx","8","cy","6","r","1","stroke","currentColor","stroke-width","1.2"],["cx","12","cy","6","r","1","stroke","currentColor","stroke-width","1.2"],["cx","16","cy","6","r","1","stroke","currentColor","stroke-width","1.2"],["cx","18","cy","5","r","2.5","stroke","currentColor","stroke-width","1.2"],["cx","6","cy","12","r","2.5","stroke","currentColor","stroke-width","1.2"],["cx","18","cy","19","r","2.5","stroke","currentColor","stroke-width","1.2"],["d","M8.5 13.5l7 4M15.5 6.5l-7 4","stroke","currentColor","stroke-width","1.2"],["d","M20 12v9H4v-9","stroke","currentColor","stroke-width","1.2"],["x","2","y","7","width","20","height","5","rx","1","stroke","currentColor","stroke-width","1.2"],["d","M12 22V7","stroke","currentColor","stroke-width","1.2"],["d","M12 7c-2-2-4-2.5-4-4.5a2 2 0 0 1 4 0c0 1.5-2 2-4 4.5","stroke","currentColor","stroke-width","1.2"],["d","M12 7c2-2 4-2.5 4-4.5a2 2 0 0 0-4 0c0 1.5 2 2 4 4.5","stroke","currentColor","stroke-width","1.2"],["cx","9","cy","9","r","2","stroke","currentColor","stroke-width","1.2"],["cx","15","cy","15","r","2","stroke","currentColor","stroke-width","1.2"],["d","M5 19L19 5","stroke","currentColor","stroke-width","1.2","stroke-linecap","round"],["d","M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z","stroke","currentColor","stroke-width","1.2"],["d","M6 9H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2","stroke","currentColor","stroke-width","1.2"],["d","M18 9h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-2","stroke","currentColor","stroke-width","1.2"],["d","M12 15a6 6 0 0 0 6-6V3H6v6a6 6 0 0 0 6 6z","stroke","currentColor","stroke-width","1.2"],["d","M12 15v3m-4 3h8m-6 0v-3m4 3v-3","stroke","currentColor","stroke-width","1.2"],[1,"config-expiration"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"expiration-icon"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","1.5"],["d","M12 6v6l4 2","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],[1,"config-expiration","forever"],["d","M18.178 8c5.096 0 5.096 8 0 8-5.095 0-7.133-8-12.739-8-4.585 0-4.585 8 0 8 5.606 0 7.644-8 12.74-8z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"submit-btn",3,"click"],[1,"delete-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"delete-icon"],["d","M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m3 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6h14z","stroke","currentColor","stroke-width","1.2","stroke-linecap","round","stroke-linejoin","round"],["d","M10 11v6M14 11v6","stroke","currentColor","stroke-width","1.2","stroke-linecap","round"],[1,"icon-option",3,"click"],[3,"value"],["viewBox","0 0 24 24","fill","none"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M9 12l2 2 4-4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 9l-6 6M9 9l6 6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(a,i){a&1&&(e(0,"div",0)(1,"div",1),f(2,ke,2,0,"div",2)(3,ze,7,1,"div",3),l(4,"app-bonus-calculator"),t()(),e(5,"app-modal",4),m("visibleChange",function(d){return i.isSettingsModalOpen=d}),f(6,Ue,29,4,"div",5),t(),e(7,"app-modal",6),m("visibleChange",function(d){return i.isAddModalOpen=d}),e(8,"div",7)(9,"div",8),r(10," \u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u0442\u0438\u043F \u0431\u043E\u043D\u0443\u0441\u0430 \u0434\u043B\u044F \u0432\u0430\u0448\u0435\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B \u043B\u043E\u044F\u043B\u044C\u043D\u043E\u0441\u0442\u0438. "),t(),e(11,"div",9)(12,"label",10),r(13," \u0422\u0438\u043F \u0431\u043E\u043D\u0443\u0441\u0430 "),e(14,"span",11),r(15,"*"),t()(),e(16,"div",12)(17,"select",13),M("ngModelChange",function(d){return w(i.newBonus.type,d)||(i.newBonus.type=d),d}),e(18,"option",14),r(19,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043F \u0431\u043E\u043D\u0443\u0441\u0430"),t(),f(20,Je,2,2,"option",15),t(),c(),e(21,"svg",16),l(22,"path",17),t()()(),h(),e(23,"div",9)(24,"label",10),r(25,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0431\u043E\u043D\u0443\u0441\u0430"),t(),e(26,"input",18),M("ngModelChange",function(d){return w(i.newBonus.title,d)||(i.newBonus.title=d),d}),t()(),e(27,"div",9)(28,"label",10),r(29,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),t(),e(30,"textarea",19),M("ngModelChange",function(d){return w(i.newBonus.description,d)||(i.newBonus.description=d),d}),t()(),e(31,"div",20)(32,"div",9)(33,"label",10),r(34,"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435"),t(),e(35,"input",21),M("ngModelChange",function(d){return w(i.newBonus.value,d)||(i.newBonus.value=d),d}),t()(),e(36,"div",9)(37,"label",10),r(38,"\u0415\u0434\u0438\u043D\u0438\u0446\u0430"),t(),e(39,"div",22)(40,"button",23),m("click",function(){return i.newBonus.unit="%"}),e(41,"span",24),r(42,"%"),t(),e(43,"span",25),r(44,"\u041F\u0440\u043E\u0446\u0435\u043D\u0442"),t()(),e(45,"button",23),m("click",function(){return i.newBonus.unit="\u0431\u0430\u043B\u043B\u043E\u0432"}),c(),e(46,"svg",26),l(47,"path",27),t(),h(),e(48,"span",25),r(49,"\u0411\u0430\u043B\u043B\u044B"),t()()()()(),e(50,"div",9)(51,"label",10),r(52,"\u0421\u0440\u043E\u043A \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u0431\u043E\u043D\u0443\u0441\u043E\u0432"),t(),e(53,"div",28)(54,"input",21),M("ngModelChange",function(d){return w(i.newBonus.expirationDays,d)||(i.newBonus.expirationDays=d),d}),t(),e(55,"span",29),r(56,"\u0434\u043D\u0435\u0439"),t()(),e(57,"div",30),r(58,"0 = \u0431\u0435\u0441\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u0431\u043E\u043D\u0443\u0441\u044B"),t()(),e(59,"div",9)(60,"label",10),r(61,"\u0418\u043A\u043E\u043D\u043A\u0430"),t(),e(62,"div",31),f(63,it,10,11,"button",32),t()(),e(64,"button",33),m("click",function(){return i.addNewBonus()}),r(65," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0431\u043E\u043D\u0443\u0441 "),t()()(),e(66,"app-modal",4),m("visibleChange",function(d){return i.isToggleConfirmModalOpen=d}),e(67,"div",7)(68,"div",34)(69,"div",35),f(70,ot,3,0,"svg",36)(71,rt,3,0,"svg",36),t(),e(72,"div",37)(73,"p",38),r(74),t()()(),e(75,"div",39)(76,"app-button",40),m("onClick",function(){return i.cancelToggle()}),r(77," \u041E\u0442\u043C\u0435\u043D\u0430 "),t(),e(78,"app-button",41),m("onClick",function(){return i.confirmToggle()}),r(79),t()()()()),a&2&&(u(2),s("ngIf",i.isLoading),u(),s("ngIf",!i.isLoading),u(2),s("visible",i.isSettingsModalOpen)("title","\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430: "+((i.selectedRule==null?null:i.selectedRule.title)||"")),u(),s("ngIf",i.selectedRule),u(),s("visible",i.isAddModalOpen),u(10),b("ngModel",i.newBonus.type),s("disabled",i.isLoadingPreconfiguredTypes),u(3),s("ngForOf",i.preconfiguredTypes),u(6),b("ngModel",i.newBonus.title),u(4),b("ngModel",i.newBonus.description),u(5),b("ngModel",i.newBonus.value),u(5),x("selected",i.newBonus.unit==="%"),u(5),x("selected",i.newBonus.unit==="\u0431\u0430\u043B\u043B\u043E\u0432"),u(9),b("ngModel",i.newBonus.expirationDays),u(9),s("ngForOf",i.availableIcons),u(),s("disabled",!i.newBonus.title||!i.newBonus.value||!i.newBonus.type),u(2),s("visible",i.isToggleConfirmModalOpen)("title",i.toggleConfirmTitle),u(3),x("enable",i.pendingToggleState)("disable",!i.pendingToggleState),u(),s("ngIf",i.pendingToggleState),u(),s("ngIf",!i.pendingToggleState),u(3),C(i.toggleConfirmDescription),u(4),s("buttonType",i.pendingToggleState?"primary":"danger"),u(),_(" ",i.pendingToggleState?"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C":"\u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C"," "))},dependencies:[T,U,D,J,K,R,ie,oe,ee,te,ne,z,re,I,G,ue,me,ce],styles:['[_nghost-%COMP%]{display:block;height:100%}.page-wrapper[_ngcontent-%COMP%]{min-height:100%;margin:-2rem;padding:2rem;background:linear-gradient(180deg,#f0fdf4,#f8fafc 50% 100%)}.bonus-program[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.config-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.config-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;border:1px solid #e2e8f0;box-shadow:0 4px 6px -1px #0000001a;transition:.3s;position:relative;overflow:hidden;display:flex;flex-direction:column}.config-card[_ngcontent-%COMP%]:hover{border-color:#16a34a;transform:translateY(-3px)}.config-card[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:#cbd5e1;transition:.3s}.config-card.active-config[_ngcontent-%COMP%]:before{background:#16a34a}.config-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.config-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#f1f5f9;border-radius:10px;display:flex;align-items:center;justify-content:center;transition:.3s}.config-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#475569;display:block}.config-card.active-config[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]{background:#dcfce7}.config-card.active-config[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#16a34a}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:48px;height:26px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#cbd5e1;transition:.4s;border-radius:34px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#16a34a}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(21px)}.config-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin-bottom:.5rem;color:#0f172a}.config-desc[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;margin-bottom:1.5rem;min-height:40px;flex-grow:1;line-height:1.5}.config-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:1rem;border-top:1px dashed #e2e8f0;margin-top:auto}.config-values[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.config-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a}.config-value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b;font-weight:500;margin-left:2px}.config-expiration[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.75rem;color:#64748b;font-weight:500}.config-expiration.forever[_ngcontent-%COMP%]{color:#16a34a}.expiration-icon[_ngcontent-%COMP%]{width:12px;height:12px;display:block}.btn-config-card[_ngcontent-%COMP%]{background:transparent;border:1px solid #cbd5e1;color:#0f172a;padding:8px 16px;border-radius:8px;font-weight:600;cursor:pointer;transition:.2s;font-size:.85rem}.btn-config-card[_ngcontent-%COMP%]:hover{border-color:#16a34a;color:#16a34a;background:#dcfce7}.config-card[_ngcontent-%COMP%]:not(.active-config)   .config-value[_ngcontent-%COMP%], .config-card[_ngcontent-%COMP%]:not(.active-config)   .btn-config-card[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;filter:grayscale(1)}.config-card-add[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:.3s;min-height:250px;color:#94a3b8}.config-card-add[_ngcontent-%COMP%]:hover{border-color:#16a34a;color:#16a34a;background:#dcfce7;transform:translateY(-3px)}.add-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin-bottom:12px;display:block}.add-text[_ngcontent-%COMP%]{font-weight:600;font-size:1rem}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-description[_ngcontent-%COMP%]{color:#64748b;font-size:.9rem;margin-bottom:.5rem;line-height:1.5}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.input-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#475569}.form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #cbd5e1;border-radius:10px;font-size:1rem;outline:none;transition:.2s}.form-input[_ngcontent-%COMP%]:focus{border-color:#16a34a;box-shadow:0 0 0 3px #dcfce7}.select-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.form-select[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid #cbd5e1;border-radius:10px;font-size:1rem;outline:none;transition:.2s;background:#fff;appearance:none;cursor:pointer}.form-select[_ngcontent-%COMP%]:focus{border-color:#16a34a;box-shadow:0 0 0 3px #dcfce7}.form-select[_ngcontent-%COMP%]:disabled{background:#f1f5f9;cursor:not-allowed;opacity:.6}.select-arrow[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);width:20px;height:20px;color:#64748b;pointer-events:none}.required-mark[_ngcontent-%COMP%]{color:#ef4444;margin-left:4px}.expiration-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.expiration-input[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.expiration-suffix[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;font-weight:500;white-space:nowrap}.input-hint[_ngcontent-%COMP%]{font-size:.75rem;color:#94a3b8;margin-top:4px}.unit-selector[_ngcontent-%COMP%]{display:flex;gap:6px}.unit-option[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;height:46px;padding:0 12px;border:1px solid #cbd5e1;border-radius:10px;background:#fff;cursor:pointer;transition:all .2s ease}.unit-option[_ngcontent-%COMP%]:hover{border-color:#16a34a;background:#f0fdf4}.unit-option.selected[_ngcontent-%COMP%]{border-color:#16a34a;background:#dcfce7}.unit-icon[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#64748b;transition:color .2s}.unit-option.selected[_ngcontent-%COMP%]   .unit-icon[_ngcontent-%COMP%]{color:#16a34a}.unit-icon-svg[_ngcontent-%COMP%]{width:16px;height:16px;color:#64748b;transition:color .2s;display:block}.unit-option.selected[_ngcontent-%COMP%]   .unit-icon-svg[_ngcontent-%COMP%]{color:#16a34a}.unit-text[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#64748b;transition:color .2s}.unit-option.selected[_ngcontent-%COMP%]   .unit-text[_ngcontent-%COMP%]{color:#16a34a}.form-textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #cbd5e1;border-radius:10px;font-size:1rem;font-family:inherit;outline:none;transition:.2s;resize:vertical;min-height:80px}.form-textarea[_ngcontent-%COMP%]:focus{border-color:#16a34a;box-shadow:0 0 0 3px #dcfce7}.icon-selector[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.icon-option[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid #e2e8f0;border-radius:10px;background:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}.icon-option[_ngcontent-%COMP%]:hover{border-color:#16a34a;background:#f0fdf4}.icon-option.selected[_ngcontent-%COMP%]{border-color:#16a34a;background:#dcfce7}.icon-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#475569;display:block}.icon-option.selected[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#16a34a}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:right;gap:10px;margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]{width:100%;background:#16a34a;color:#fff;padding:14px;border:none;border-radius:12px;font-weight:700;cursor:pointer;font-size:1rem;transition:.2s}.submit-btn[_ngcontent-%COMP%]:hover{background:#14532d}.delete-btn[_ngcontent-%COMP%]{width:100%;background:transparent;color:#dc2626;padding:12px;border:1px solid #fecaca;border-radius:12px;font-weight:600;cursor:pointer;font-size:.9rem;transition:.2s;display:flex;align-items:center;justify-content:center;gap:8px}.delete-btn[_ngcontent-%COMP%]:hover{background:#fef2f2;border-color:#dc2626}.delete-icon[_ngcontent-%COMP%]{width:18px;height:18px;display:block}.submit-btn[_ngcontent-%COMP%]:disabled{background:#cbd5e1;cursor:not-allowed}.toggle-confirm-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;padding:1rem 0}.confirm-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.confirm-icon.enable[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.confirm-icon.disable[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.confirm-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.confirm-description[_ngcontent-%COMP%]{text-align:center}.confirm-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:#475569;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:400px;padding:2rem}@media (max-width: 768px){.page-wrapper[_ngcontent-%COMP%]{margin:-1rem;padding:1rem}.config-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}return o})();export{Lt as BonusProgramPageComponent};
