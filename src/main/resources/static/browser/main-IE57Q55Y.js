import{a as w,b as qe,c as O,d as to}from"./chunk-O4FTPXIA.js";import{a as q,b as It,c as xt,d as Ct,e as G,f as Tt,g as wt,h as st,i as Ot,j as Pt,k as nt,l as Et,m as bt,n as rt,o as at,p as H,q as oo,r as Mt,s as ct,t as _t,u as kt,v as ut,w as $t,x as io}from"./chunk-BQNRS24D.js";import{a as tt}from"./chunk-3B24VZJ2.js";import{a as vt}from"./chunk-BQSGCHPY.js";import{a as We,d as Zt,e as St,f as Ve,i as Ze,j as Ke,k as Kt,l as Xe,m as Je,n as B,o as Ye,p as f,q as Qe,s as yt,u as Q}from"./chunk-KCUNWQN4.js";import{a as eo}from"./chunk-LMI7DRHQ.js";import{$ as dt,Aa as be,Ab as Be,Ba as F,Bb as At,C as z,Ca as D,Cb as Y,Da as X,Fb as Ge,G as ge,Gb as He,H as Ae,Ha as Me,I as Se,Ia as gt,J as ot,Ja as _e,K as mt,L,M as ve,P as M,Qa as ke,R as it,Ra as $e,S as C,T as v,V as ye,Z as Ie,_ as xe,a as l,b as h,ba as Ce,c as Gt,cb as Re,ea as Te,f as ue,fa as we,g as pe,ga as Oe,h as le,i as he,jb as je,k,kb as Le,l as Ht,la as V,m as me,n as I,o as ht,oa as Z,qb as J,rb as Fe,s as Wt,t as b,ta as ft,tb as De,u as E,ub as Ne,v as de,va as Pe,vb as Ue,w as fe,wb as ze,x as U,xa as K,z as Vt,za as Ee}from"./chunk-SR6TZKDI.js";var lt="PERFORM_ACTION",zo="REFRESH",uo="RESET",po="ROLLBACK",lo="COMMIT",ho="SWEEP",mo="TOGGLE_ACTION",Bo="SET_ACTIONS_ACTIVE",fo="JUMP_TO_STATE",go="JUMP_TO_ACTION",ae="IMPORT_STATE",Ao="LOCK_CHANGES",So="PAUSE_RECORDING",et=class{constructor(i,e){if(this.action=i,this.timestamp=e,this.type=lt,typeof i.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Xt=class{constructor(){this.type=zo}},Jt=class{constructor(i){this.timestamp=i,this.type=uo}},Yt=class{constructor(i){this.timestamp=i,this.type=po}},Qt=class{constructor(i){this.timestamp=i,this.type=lo}},qt=class{constructor(){this.type=ho}},te=class{constructor(i){this.id=i,this.type=mo}};var ee=class{constructor(i){this.index=i,this.type=fo}},oe=class{constructor(i){this.actionId=i,this.type=go}},ie=class{constructor(i){this.nextLiftedState=i,this.type=ae}},se=class{constructor(i){this.status=i,this.type=Ao}},ne=class{constructor(i){this.status=i,this.type=So}};var Ft=new it("@ngrx/store-devtools Options"),so=new it("@ngrx/store-devtools Initial Config");function vo(){return null}var Go="NgRx Store DevTools";function Ho(t){let i={maxAge:!1,monitor:vo,actionSanitizer:void 0,stateSanitizer:void 0,name:Go,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,o=e.logOnly?{pause:!0,export:!0,test:!0}:!1,s=e.features||o||i.features;s.import===!0&&(s.import="custom");let a=Object.assign({},i,{features:s},e);if(a.maxAge&&a.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${a.maxAge}`);return a}function no(t,i){return t.filter(e=>i.indexOf(e)<0)}function yo(t){let{computedStates:i,currentStateIndex:e}=t;if(e>=i.length){let{state:s}=i[i.length-1];return s}let{state:o}=i[e];return o}function pt(t){return new et(t,+Date.now())}function Wo(t,i){return Object.keys(i).reduce((e,o)=>{let s=Number(o);return e[s]=Io(t,i[s],s),e},{})}function Io(t,i,e){return h(l({},i),{action:t(i.action,e)})}function Vo(t,i){return i.map((e,o)=>({state:xo(t,e.state,o),error:e.error}))}function xo(t,i,e){return t(i,e)}function Co(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function Zo(t,i,e,o){let s=[],a={},m=[];return t.stagedActionIds.forEach((c,g)=>{let n=t.actionsById[c];n&&(g&&ce(t.computedStates[g],n,i,e,o)||(a[c]=n,s.push(c),m.push(t.computedStates[g])))}),h(l({},t),{stagedActionIds:s,actionsById:a,computedStates:m})}function ce(t,i,e,o,s){let a=e&&!e(t,i.action),m=o&&!i.action.type.match(o.map(g=>ro(g)).join("|")),c=s&&i.action.type.match(s.map(g=>ro(g)).join("|"));return a||m||c}function ro(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function To(t){return{ngZone:t?v(we):null,connectInZone:t}}var Dt=(()=>{class t extends St{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=Ce(t)))(s||t)}})()}static{this.\u0275prov=M({token:t,factory:t.\u0275fac})}}return t})(),Rt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},re=new it("@ngrx/store-devtools Redux Devtools Extension"),wo=(()=>{class t{constructor(e,o,s){this.config=o,this.dispatcher=s,this.zoneConfig=To(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,o){if(this.devtoolsExtension)if(e.type===lt){if(o.isLocked||o.isPaused)return;let s=yo(o);if(Co(this.config)&&ce(s,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?xo(this.config.stateSanitizer,s,o.currentStateIndex):s,m=this.config.actionSanitizer?Io(this.config.actionSanitizer,e,o.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(m,a))}else{let s=h(l({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?Wo(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?Vo(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,s,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Gt(e=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(s=>e.next(s)),o.unsubscribe}):le}createActionStreams(){let e=this.createChangesObservable().pipe(Ae()),o=e.pipe(b(n=>n.type===Rt.START)),s=e.pipe(b(n=>n.type===Rt.STOP)),a=e.pipe(b(n=>n.type===Rt.DISPATCH),I(n=>this.unwrapAction(n.payload)),de(n=>n.type===ae?this.dispatcher.pipe(b(x=>x.type===Kt),me(1e3),fe(1e3),I(()=>n),E(()=>k(n)),U(1)):k(n))),c=e.pipe(b(n=>n.type===Rt.ACTION),I(n=>this.unwrapAction(n.payload))).pipe(mt(s)),g=a.pipe(mt(s));this.start$=o.pipe(mt(s)),this.actions$=this.start$.pipe(ot(()=>c)),this.liftedActions$=this.start$.pipe(ot(()=>g))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let o={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(o.maxAge=e.maxAge),o}sendToReduxDevtools(e){try{e()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}static{this.\u0275fac=function(o){return new(o||t)(C(re),C(Ft),C(Dt))}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac})}}return t})(),Lt={type:Zt},Ko="@ngrx/store-devtools/recompute",Xo={type:Ko};function Oo(t,i,e,o,s){if(o)return{state:e,error:"Interrupted by an error up the chain"};let a=e,m;try{a=t(e,i)}catch(c){m=c.toString(),s.handleError(c)}return{state:a,error:m}}function jt(t,i,e,o,s,a,m,c,g){if(i>=t.length&&t.length===a.length)return t;let n=t.slice(0,i),x=a.length-(g?1:0);for(let r=i;r<x;r++){let d=a[r],P=s[d].action,p=n[r-1],u=p?p.state:o,$=p?p.error:void 0,R=m.indexOf(d)>-1?p:Oo(e,P,u,$,c);n.push(R)}return g&&n.push(t[t.length-1]),n}function Jo(t,i){return{monitorState:i(void 0,{}),nextActionId:1,actionsById:{0:pt(Lt)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Yo(t,i,e,o,s={}){return a=>(m,c)=>{let{monitorState:g,actionsById:n,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:P,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:T}=m||i;m||(n=Object.create(n));function R(y){let S=y,N=r.slice(1,S+1);for(let _=0;_<N.length;_++)if(u[_+1].error){S=_,N=r.slice(1,S+1);break}else delete n[N[_]];d=d.filter(_=>N.indexOf(_)===-1),r=[0,...r.slice(S+1)],P=u[S].state,u=u.slice(S),p=p>S?p-S:0}function j(){n={0:pt(Lt)},x=1,r=[0],d=[],P=u[p].state,p=0,u=[]}let A=0;switch(c.type){case Ao:{$=c.status,A=1/0;break}case So:{T=c.status,T?(r=[...r,x],n[x]=new et({type:"@ngrx/devtools/pause"},+Date.now()),x++,A=r.length-1,u=u.concat(u[u.length-1]),p===r.length-2&&p++,A=1/0):j();break}case uo:{n={0:pt(Lt)},x=1,r=[0],d=[],P=t,p=0,u=[];break}case lo:{j();break}case po:{n={0:pt(Lt)},x=1,r=[0],d=[],p=0,u=[];break}case mo:{let{id:y}=c;d.indexOf(y)===-1?d=[y,...d]:d=d.filter(N=>N!==y),A=r.indexOf(y);break}case Bo:{let{start:y,end:S,active:N}=c,_=[];for(let Bt=y;Bt<S;Bt++)_.push(Bt);N?d=no(d,_):d=[...d,..._],A=r.indexOf(y);break}case fo:{p=c.index,A=1/0;break}case go:{let y=r.indexOf(c.actionId);y!==-1&&(p=y),A=1/0;break}case ho:{r=no(r,d),d=[],p=Math.min(p,r.length-1);break}case lt:{if($)return m||i;if(T||m&&ce(m.computedStates[p],c,s.predicate,s.actionsSafelist,s.actionsBlocklist)){let S=u[u.length-1];u=[...u.slice(0,-1),Oo(a,c.action,S.state,S.error,e)],A=1/0;break}s.maxAge&&r.length===s.maxAge&&R(1),p===r.length-1&&p++;let y=x++;n[y]=c,r=[...r,y],A=r.length-1;break}case ae:{({monitorState:g,actionsById:n,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:P,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:T}=c.nextLiftedState);break}case Zt:{A=0,s.maxAge&&r.length>s.maxAge&&(u=jt(u,A,a,P,n,r,d,e,T),R(r.length-s.maxAge),A=1/0);break}case Kt:{if(u.filter(S=>S.error).length>0)A=0,s.maxAge&&r.length>s.maxAge&&(u=jt(u,A,a,P,n,r,d,e,T),R(r.length-s.maxAge),A=1/0);else{if(!T&&!$){p===r.length-1&&p++;let S=x++;n[S]=new et(c,+Date.now()),r=[...r,S],A=r.length-1,u=jt(u,A,a,P,n,r,d,e,T)}u=u.map(S=>h(l({},S),{state:a(S.state,Xo)})),p=r.length-1,s.maxAge&&r.length>s.maxAge&&R(r.length-s.maxAge),A=1/0}break}default:{A=1/0;break}}return u=jt(u,A,a,P,n,r,d,e,T),g=o(g,c),{monitorState:g,actionsById:n,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:P,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:T}}}var ao=(()=>{class t{constructor(e,o,s,a,m,c,g,n){let x=Jo(g,n.monitor),r=Yo(g,x,c,n.monitor,n),d=Wt(Wt(o.asObservable().pipe(Se(1)),a.actions$).pipe(I(pt)),e,a.liftedActions$).pipe(he(pe)),P=s.pipe(I(r)),p=To(n.connectInZone),u=new ue(1);this.liftedStateSubscription=d.pipe(ve(P),co(p),ge(({state:R},[j,A])=>{let y=A(R,j);return j.type!==lt&&Co(n)&&(y=Zo(y,n.predicate,n.actionsSafelist,n.actionsBlocklist)),a.notify(j,y),{state:y,action:j}},{state:x,action:null})).subscribe(({state:R,action:j})=>{if(u.next(R),j.type===lt){let A=j.action;m.next(A)}}),this.extensionStartSubscription=a.start$.pipe(co(p)).subscribe(()=>{this.refresh()});let $=u.asObservable(),T=$.pipe(I(yo));Object.defineProperty(T,"state",{value:We(T,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=$,this.state=T}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new et(e,+Date.now()))}refresh(){this.dispatch(new Xt)}reset(){this.dispatch(new Jt(+Date.now()))}rollback(){this.dispatch(new Yt(+Date.now()))}commit(){this.dispatch(new Qt(+Date.now()))}sweep(){this.dispatch(new qt)}toggleAction(e){this.dispatch(new te(e))}jumpToAction(e){this.dispatch(new oe(e))}jumpToState(e){this.dispatch(new ee(e))}importState(e){this.dispatch(new ie(e))}lockChanges(e){this.dispatch(new se(e))}pauseRecording(e){this.dispatch(new ne(e))}static{this.\u0275fac=function(o){return new(o||t)(C(Dt),C(St),C(Ze),C(wo),C(Xe),C(Oe),C(Ve),C(Ft))}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac})}}return t})();function co({ngZone:t,connectInZone:i}){return e=>i?new Gt(o=>e.subscribe({next:s=>t.run(()=>o.next(s)),error:s=>t.run(()=>o.error(s)),complete:()=>t.run(()=>o.complete())})):e}var Qo=new it("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function qo(t,i){return!!t||i.monitor!==vo}function ti(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function ei(t){return t.state}function Po(t={}){return ye([wo,Dt,ao,{provide:so,useValue:t},{provide:Qo,deps:[re,Ft],useFactory:qo},{provide:re,useFactory:ti},{provide:Ft,deps:[so],useFactory:Ho},{provide:Je,deps:[ao],useFactory:ei},{provide:Ke,useExisting:Dt}])}function ii(t,i){t&1&&(dt(),F(0,"svg",6),X(1,"circle",8)(2,"path",9),D())}function si(t,i){t&1&&(dt(),F(0,"svg",6),X(1,"circle",8)(2,"path",10),D())}var Eo=(()=>{class t{message="";type="success";duration=3e3;closed=new Te;visible=!1;hiding=!1;timeoutId;ngOnInit(){setTimeout(()=>{this.visible=!0},10),this.duration>0&&(this.timeoutId=window.setTimeout(()=>{this.close()},this.duration))}ngOnDestroy(){this.timeoutId&&clearTimeout(this.timeoutId)}onClose(){this.close()}close(){this.hiding=!0,setTimeout(()=>{this.closed.emit()},300)}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=Z({type:t,selectors:[["app-toast"]],inputs:{message:"message",type:"type",duration:"duration"},outputs:{closed:"closed"},decls:10,vars:9,consts:[[1,"toast"],[1,"toast-content"],[1,"toast-icon"],["viewBox","0 0 24 24","fill","none",4,"ngIf"],[1,"toast-message"],["iconButtonType","ghost","size","small",3,"onClick"],["viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M9 12l2 2 4-4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 9l-6 6M9 9l6 6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(o,s){o&1&&(F(0,"div",0)(1,"div",1)(2,"div",2),ft(3,ii,3,0,"svg",3)(4,si,3,0,"svg",3),D(),F(5,"div",4),ke(6),D(),F(7,"app-icon-button",5),gt("onClick",function(){return s.onClose()}),dt(),F(8,"svg",6),X(9,"path",7),D()()()()),o&2&&(be(s.type),Ee("show",s.visible)("hiding",s.hiding),V(3),K("ngIf",s.type==="success"),V(),K("ngIf",s.type==="error"),V(2),$e(s.message))},dependencies:[J,Le,eo],styles:[".toast[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:300px;max-width:400px;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #00000026;margin-bottom:.75rem;opacity:0;transform:translate(100%);transition:all .3s cubic-bezier(.4,0,.2,1);border-left:4px solid}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.hiding[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.toast.success[_ngcontent-%COMP%]{border-left-color:#16a34a}.toast.error[_ngcontent-%COMP%]{border-left-color:#dc2626}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.toast-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.toast.success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#16a34a}.toast.error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#dc2626}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:.9375rem;line-height:1.5;color:#1f2937;font-weight:500}[_nghost-%COMP%]     app-icon-button{flex-shrink:0}[_nghost-%COMP%]     app-icon-button svg{width:16px;height:16px;color:#64748b}"]})}return t})();function ni(t,i){if(t&1){let e=Me();F(0,"app-toast",2),gt("closed",function(){let s=Ie(e).$implicit,a=_e();return xe(a.removeToast(s.id))}),D()}if(t&2){let e=i.$implicit;K("message",e.message)("type",e.type)("duration",e.duration)}}var bo=(()=>{class t{toastService=v(vt);toasts=[];subscription;ngOnInit(){this.subscription=this.toastService.toasts$.subscribe(e=>{this.toasts=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}removeToast(e){this.toastService.remove(e)}trackByToastId(e,o){return o.id}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=Z({type:t,selectors:[["app-toast-container"]],decls:2,vars:2,consts:[[1,"toast-container"],[3,"message","type","duration","closed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"closed","message","type","duration"]],template:function(o,s){o&1&&(F(0,"div",0),ft(1,ni,1,3,"app-toast",1),D()),o&2&&(V(),K("ngForOf",s.toasts)("ngForTrackBy",s.trackByToastId))},dependencies:[J,je,Eo],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:1.5rem;right:1.5rem;z-index:10000;display:flex;flex-direction:column;align-items:flex-end;pointer-events:none}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 768px){.toast-container[_ngcontent-%COMP%]{top:1rem;right:1rem;left:1rem;align-items:stretch}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{max-width:100%}}"]})}return t})();var Mo=(()=>{class t{title="westwood-frontend";static \u0275fac=function(o){return new(o||t)};static \u0275cmp=Z({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(o,s){o&1&&X(0,"router-outlet")(1,"app-toast-container")},dependencies:[J,Be,bo],encapsulation:2})}return t})();var _o=(t,i)=>{let e=v(Y),o=v(B);return ht([o.select(Q),o.select(yt)]).pipe(b(([s])=>s),U(1),I(([,s])=>s?!0:(e.navigate(["/auth/login"],{queryParams:{returnUrl:i.url}}),!1)))};var ko=()=>{let t=v(Y),i=v(B);return ht([i.select(Q),i.select(yt)]).pipe(b(([e])=>e),U(1),I(([,e])=>e?(t.navigate(["/home"]),!1):!0))};var $o=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"auth",loadChildren:()=>import("./chunk-7XHMKB62.js").then(t=>t.AUTH_ROUTES),canActivate:[ko]},{path:"",loadComponent:()=>import("./chunk-FMVE34JA.js").then(t=>t.MainLayoutWrapperComponent),canActivate:[_o],children:[{path:"home",loadComponent:()=>import("./chunk-FW4HG37Z.js").then(t=>t.HomePageComponent),title:"Home"},{path:"communications",title:"Communications",children:[{path:"",redirectTo:"whatsapp",pathMatch:"full"},{path:"whatsapp",loadComponent:()=>import("./chunk-OZ76AMMN.js").then(t=>t.InvitationPageComponent),title:"WhatsApp"}]},{path:"bonus-program",loadComponent:()=>import("./chunk-CWRIGXDH.js").then(t=>t.BonusProgramPageComponent),title:"Bonus Program"},{path:"bonus-management",loadComponent:()=>import("./chunk-CRGCWXIH.js").then(t=>t.BonusManagementPageComponent),title:"Bonus Management"},{path:"clients",loadComponent:()=>import("./chunk-ABU4RNNX.js").then(t=>t.ClientsPageComponent),title:"Clients"},{path:"clients/:id",loadComponent:()=>import("./chunk-ZT7ASZTI.js").then(t=>t.ProfilePageComponent),title:"Client"},{path:"payments",loadComponent:()=>import("./chunk-4OO5MY6B.js").then(t=>t.PaymentsPageComponent),title:"Payments"},{path:"users",loadComponent:()=>import("./chunk-QCFREJVW.js").then(t=>t.UsersPageComponent),title:"Users"},{path:"users/:id",loadComponent:()=>import("./chunk-HDAF3DP2.js").then(t=>t.UserProfilePageComponent),title:"User"},{path:"profile",loadComponent:()=>import("./chunk-DAAZFKPK.js").then(t=>t.AccountPageComponent),title:"Profile"}]},{path:"**",redirectTo:"/home"}];var Nt={user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,error:null},jo=Qe(Nt,f(q,t=>h(l({},t),{isLoading:!0,error:null})),f(It,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,isInitialized:!0,error:null})),f(xt,t=>h(l({},t),{user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0,error:null})),f(Ct,t=>h(l({},t),{isLoading:!0,error:null})),f(G,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Tt,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i,isAuthenticated:!1,user:null})),f(wt,t=>h(l({},t),{isLoading:!0,error:null})),f(st,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Ot,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(Pt,t=>h(l({},t),{isLoading:!0,error:null})),f(nt,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Et,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(bt,t=>h(l({},t),{isLoading:!0})),f(rt,t=>h(l({},Nt),{isInitialized:!0})),f(at,t=>h(l({},Nt),{isInitialized:!0})),f(H,t=>h(l({},Nt),{isInitialized:!0})),f(oo,t=>h(l({},t),{error:null})),f(Mt,t=>h(l({},t),{isLoading:!0,error:null})),f(ct,t=>h(l({},t),{isLoading:!1,error:null})),f(_t,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(kt,t=>h(l({},t),{isLoading:!0,error:null})),f(ut,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f($t,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(io,(t,{user:i})=>h(l({},t),{user:i})));var Lo={auth:jo};var Ut=(()=>{class t{http;apiUrl=`${tt.apiUrl}/auth`;constructor(e){this.http=e}login(e){return console.log("[AuthService] POST /auth/login",e),this.http.post(`${this.apiUrl}/login`,e)}register(e){return console.log("[AuthService] POST /auth/register",e),this.http.post(`${this.apiUrl}/register`,e)}activate(e){return this.http.post(`${this.apiUrl}/activate`,e)}me(){return this.http.get(`${this.apiUrl}/me`)}refresh(){return this.http.post(`${this.apiUrl}/refresh`,{})}logout(){return this.http.post(`${this.apiUrl}/logout`,{})}forgotPassword(e){return console.log("[AuthService] POST /auth/forgot-password",e),this.http.post(`${this.apiUrl}/forgot-password`,e)}resetPassword(e){return console.log("[AuthService] POST /auth/reset-password",{token:e.token,password:"***"}),this.http.post(`${this.apiUrl}/reset-password`,e)}static \u0275fac=function(o){return new(o||t)(C(De))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Fo=(()=>{class t{actions$=v(qe);authService=v(Ut);router=v(Y);toastService=v(vt);initAuth$=w(()=>this.actions$.pipe(O(q),z(()=>this.authService.me().pipe(I(e=>It({user:e})),E(()=>k(xt()))))));login$=w(()=>this.actions$.pipe(O(Ct),z(({credentials:e})=>this.authService.login(e).pipe(I(o=>G({user:o})),E(o=>k(Tt({error:o.error?.message||o.message||"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C"})))))));loginSuccess$=w(()=>this.actions$.pipe(O(G),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});register$=w(()=>this.actions$.pipe(O(wt),z(({data:e})=>this.authService.register(e).pipe(I(o=>st({user:o})),E(o=>k(Ot({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})))))));registerSuccess$=w(()=>this.actions$.pipe(O(st),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});activateAccount$=w(()=>this.actions$.pipe(O(Pt),z(({data:e})=>this.authService.activate(e).pipe(I(o=>nt({user:o})),E(o=>k(Et({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438"})))))));activateAccountSuccess$=w(()=>this.actions$.pipe(O(nt),L(()=>{this.toastService.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D!")}),Vt(500),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});logout$=w(()=>this.actions$.pipe(O(bt),z(()=>this.authService.logout().pipe(I(()=>rt()),E(e=>k(at({error:e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u044B\u0445\u043E\u0434\u0430"})))))));logoutSuccess$=w(()=>this.actions$.pipe(O(rt,at),L(()=>{this.router.navigate(["/auth/login"])})),{dispatch:!1});forgotPassword$=w(()=>this.actions$.pipe(O(Mt),z(({data:e})=>this.authService.forgotPassword(e).pipe(I(()=>ct()),E(o=>{let s=o.error?.message||o.message||(o.status===404?"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0441 \u0442\u0430\u043A\u0438\u043C email \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D":null)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u043D\u0430 \u0441\u0431\u0440\u043E\u0441 \u043F\u0430\u0440\u043E\u043B\u044F";return k(_t({error:s}))})))));forgotPasswordSuccess$=w(()=>this.actions$.pipe(O(ct),L(()=>{this.toastService.success("\u041F\u0438\u0441\u044C\u043C\u043E \u0434\u043B\u044F \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u0432\u0430\u0448\u0443 \u043F\u043E\u0447\u0442\u0443")})),{dispatch:!1});resetPassword$=w(()=>this.actions$.pipe(O(kt),z(({data:e})=>this.authService.resetPassword(e).pipe(I(o=>ut({user:o})),E(o=>k($t({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"})))))));resetPasswordSuccess$=w(()=>this.actions$.pipe(O(ut),L(()=>{this.toastService.success("\u041F\u0430\u0440\u043E\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D!")}),Vt(500),L(()=>{this.router.navigate(["/home"])})),{dispatch:!1});sessionExpired$=w(()=>this.actions$.pipe(O(H),L(()=>{this.router.navigate(["/auth/login"],{queryParams:{sessionExpired:!0}})})),{dispatch:!1});static \u0275fac=function(o){return new(o||t)};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();var zt=!1,Do=(t,i)=>{let e=v(B),o=v(Ut),s=!1;try{if(t.url.startsWith(tt.apiUrl)&&(s=!0),t.url.includes("/api/v1/")&&(s=!0),t.url.startsWith("http")){let m=new URL(t.url).origin;if(tt.apiUrl.startsWith("http"))try{let c=new URL(tt.apiUrl).origin;m===c&&(s=!0)}catch{}}}catch{(t.url.includes("herokuapp.com")||t.url.includes("westwood"))&&(s=!0)}let a=s?t.clone({withCredentials:!0}):t;return i(a).pipe(E(m=>{if(m.status===401&&s){let c=t.url.includes("/auth/login")||t.url.includes("/auth/register")||t.url.includes("/auth/me")||t.url.includes("/auth/forgot-password")||t.url.includes("/auth/reset-password")||t.url.includes("/auth/activate")||t.url.includes("/auth/refresh");if(!c&&!zt)return zt=!0,console.log("[AuthInterceptor] Access token expired, attempting refresh..."),o.refresh().pipe(ot(g=>(zt=!1,console.log("[AuthInterceptor] Token refreshed successfully, retrying request"),e.dispatch(G({user:g})),i(a))),E(g=>(zt=!1,console.log("[AuthInterceptor] Token refresh failed, session expired"),e.dispatch(H()),Ht(()=>g))));c||e.dispatch(H())}return Ht(()=>m)}))};var No=(()=>{class t{store=v(B);initializeApp(){return new Promise(e=>{this.store.dispatch(q()),this.store.select(Q).pipe(b(o=>o),U(1)).subscribe(()=>{e()})})}static \u0275fac=function(o){return new(o||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Uo=(()=>{class t extends At{title;constructor(e){super(),this.title=e}updateTitle(e){let o=this.buildTitle(e);if(o!==void 0)this.title.setTitle(`Westwood - ${o}`);else{let s=e.root,a=this.getTitleFromRoute(s);this.title.setTitle(`Westwood - ${a}`)}}getTitleFromRoute(e){for(;e.firstChild;)e=e.firstChild;let o=e.routeConfig?.path||"",s={home:"Home",clients:"Clients",payments:"Payments",users:"Users",profile:"Profile","bonus-program":"Bonus Program",communications:"Communications",whatsapp:"WhatsApp",login:"Login",activation:"Activation","forgot-password":"Forgot Password","reset-password":"Reset Password"};if(o.includes(":id")){let a=e.snapshot?.data;if(a&&a.title)return a.title;let m=e.snapshot?.params;if(m&&m.id){if(o.startsWith("clients/"))return"Client";if(o.startsWith("users/"))return"User"}}return s[o]||o.charAt(0).toUpperCase()+o.slice(1)}static \u0275fac=function(o){return new(o||t)(C(ze))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ai(){let t=v(No);return()=>t.initializeApp()}Fe(Mo,{providers:[Ge($o,He({scrollPositionRestoration:"top",anchorScrolling:"enabled"})),Ne(Ue([Do])),Ye(Lo),to([Fo]),Po({maxAge:25,logOnly:!Re(),autoPause:!0,trace:!1,traceLimit:75}),{provide:At,useClass:Uo},{provide:Pe,useFactory:ai,multi:!0}]}).catch(t=>console.error(t));
