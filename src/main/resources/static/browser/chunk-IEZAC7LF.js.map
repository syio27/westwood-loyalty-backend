{
  "version": 3,
  "sources": ["src/app/core/services/analytics.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../../environments/environment';\n\nexport interface MonthlyRevenueResponse {\n  amount: number;\n  changePercentage?: number;\n  period?: string;\n  // Fallback for backward compatibility\n  revenue?: number;\n  changePercent?: number;\n}\n\nexport interface DailyRevenueResponse {\n  amount: number;\n  changePercentage?: number;\n  period?: string;\n  date?: string;\n  // Fallback for backward compatibility\n  revenue?: number;\n  changePercent?: number;\n}\n\nexport interface AverageCheckResponse {\n  amount: number;\n  changePercentage?: number;\n  period?: string;\n  // Fallback for backward compatibility\n  averageCheck?: number;\n  changePercent?: number;\n}\n\nexport interface OverallTotalsResponse {\n  totalPayments: number;\n  totalRevenue: number;\n  totalBonusesGranted: number;\n  totalClients: number;\n}\n\nexport interface DailyTransactionsResponse {\n  count: number;\n  changeAbsolute?: number;\n  date?: string;\n}\n\nexport interface NewClientsResponse {\n  count: number;\n  changeAbsolute: number;\n  type: 'NEW';\n  period: 'DAILY' | 'MONTHLY';\n}\n\nexport interface BonusesAccruedResponse {\n  amount: number;\n  changePercentage?: number;\n  period?: string;\n  // Fallback for backward compatibility\n  count?: number;\n  changePercent?: number;\n}\n\nexport interface DailyRefundsResponse {\n  count: number;\n  changeAbsolute?: number;\n  date?: string;\n}\n\nexport interface ActiveClientsResponse {\n  count: number;\n  changeAbsolute?: number;\n  period?: string;\n}\n\nexport interface ChartDataPoint {\n  day: number;\n  revenue: number;\n  transactionCount: number;\n  bonusesGranted: number;\n  bonusesUsed: number;\n  // Fallback fields for backward compatibility\n  transactions?: number;\n  bonusEarned?: number;\n  bonusUsed?: number;\n}\n\nexport interface MonthlyRevenueChartResponse {\n  dailyData: ChartDataPoint[];\n  year: number;\n  month: number;\n  // Fallback for backward compatibility\n  data?: ChartDataPoint[];\n}\n\nexport interface ClientTotalsResponse {\n  totalPayments: number;\n  totalRevenue: number;\n  totalBonusesGranted: number;\n  totalBonusesUsed: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnalyticsService {\n  private readonly apiUrl = `${environment.apiUrl}/analytics`;\n\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Get monthly revenue\n   * @returns Observable with monthly revenue data\n   */\n  getMonthlyRevenue(): Observable<MonthlyRevenueResponse> {\n    return this.http.get<MonthlyRevenueResponse>(`${this.apiUrl}/revenue/monthly`);\n  }\n\n  /**\n   * Get daily revenue\n   * @returns Observable with daily revenue data\n   */\n  getDailyRevenue(): Observable<DailyRevenueResponse> {\n    return this.http.get<DailyRevenueResponse>(`${this.apiUrl}/revenue/daily`);\n  }\n\n  /**\n   * Get average check for a specific period\n   * @param period - Period type: 'DAILY' or 'MONTHLY'\n   * @returns Observable with average check data\n   */\n  getAverageCheck(period: 'DAILY' | 'MONTHLY' = 'MONTHLY'): Observable<AverageCheckResponse> {\n    const params = new HttpParams().set('period', period);\n    return this.http.get<AverageCheckResponse>(`${this.apiUrl}/average-check`, { params });\n  }\n\n  /**\n   * Get overall totals (total payments, total revenue, total bonuses granted)\n   * @returns Observable with overall totals data\n   */\n  getOverallTotals(): Observable<OverallTotalsResponse> {\n    return this.http.get<OverallTotalsResponse>(`${this.apiUrl}/totals/overall`);\n  }\n\n  /**\n   * Get daily transaction count\n   * @returns Observable with daily transactions data\n   */\n  getDailyTransactions(): Observable<DailyTransactionsResponse> {\n    return this.http.get<DailyTransactionsResponse>(`${this.apiUrl}/transactions/daily`);\n  }\n\n  /**\n   * Get new clients count\n   * @param period - Period type: 'DAILY' or 'MONTHLY'\n   * @returns Observable with new clients data\n   */\n  getNewClients(period: 'DAILY' | 'MONTHLY' = 'DAILY'): Observable<NewClientsResponse> {\n    const params = new HttpParams().set('period', period);\n    return this.http.get<NewClientsResponse>(`${this.apiUrl}/clients/new/daily`, { params });\n  }\n\n  /**\n   * Get bonuses accrued\n   * @param period - Period type: 'DAILY' or 'MONTHLY'\n   * @returns Observable with bonuses accrued data\n   */\n  getBonusesAccrued(period: 'DAILY' | 'MONTHLY' = 'MONTHLY'): Observable<BonusesAccruedResponse> {\n    const params = new HttpParams().set('period', period);\n    return this.http.get<BonusesAccruedResponse>(`${this.apiUrl}/bonuses/accrued`, { params });\n  }\n\n  /**\n   * Get daily refunds count\n   * @returns Observable with daily refunds data\n   */\n  getDailyRefunds(): Observable<DailyRefundsResponse> {\n    return this.http.get<DailyRefundsResponse>(`${this.apiUrl}/refunds/daily`);\n  }\n\n  /**\n   * Get active clients count\n   * @returns Observable with active clients data\n   */\n  getActiveClients(): Observable<ActiveClientsResponse> {\n    return this.http.get<ActiveClientsResponse>(`${this.apiUrl}/clients/active`);\n  }\n\n  /**\n   * Get monthly revenue chart data\n   * @param year - Year (optional, defaults to current year)\n   * @param month - Month 1-12 (optional, defaults to current month)\n   * @returns Observable with chart data\n   */\n  getMonthlyRevenueChart(year?: number, month?: number): Observable<MonthlyRevenueChartResponse> {\n    const now = new Date();\n    const currentYear = year ?? now.getFullYear();\n    const currentMonth = month ?? now.getMonth() + 1;\n    \n    const params = new HttpParams()\n      .set('year', currentYear.toString())\n      .set('month', currentMonth.toString());\n    \n    return this.http.get<MonthlyRevenueChartResponse>(`${this.apiUrl}/revenue/monthly/chart`, { params });\n  }\n  /**\n   * Get client totals for dashboard\n   * @param clientId - Client ID\n   * @returns Observable with client totals data\n  */\n  getClientTotals(clientId: string): Observable<ClientTotalsResponse> {\n    return this.http.get<ClientTotalsResponse>(`${this.apiUrl}/clients/${clientId}/totals`);\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAwGM,IAAO,mBAAP,MAAO,kBAAgB;EAGP;EAFH,SAAS,GAAG,YAAY,MAAM;EAE/C,YAAoB,MAAgB;AAAhB,SAAA,OAAA;EAAmB;;;;;EAMvC,oBAAiB;AACf,WAAO,KAAK,KAAK,IAA4B,GAAG,KAAK,MAAM,kBAAkB;EAC/E;;;;;EAMA,kBAAe;AACb,WAAO,KAAK,KAAK,IAA0B,GAAG,KAAK,MAAM,gBAAgB;EAC3E;;;;;;EAOA,gBAAgB,SAA8B,WAAS;AACrD,UAAM,SAAS,IAAI,WAAU,EAAG,IAAI,UAAU,MAAM;AACpD,WAAO,KAAK,KAAK,IAA0B,GAAG,KAAK,MAAM,kBAAkB,EAAE,OAAM,CAAE;EACvF;;;;;EAMA,mBAAgB;AACd,WAAO,KAAK,KAAK,IAA2B,GAAG,KAAK,MAAM,iBAAiB;EAC7E;;;;;EAMA,uBAAoB;AAClB,WAAO,KAAK,KAAK,IAA+B,GAAG,KAAK,MAAM,qBAAqB;EACrF;;;;;;EAOA,cAAc,SAA8B,SAAO;AACjD,UAAM,SAAS,IAAI,WAAU,EAAG,IAAI,UAAU,MAAM;AACpD,WAAO,KAAK,KAAK,IAAwB,GAAG,KAAK,MAAM,sBAAsB,EAAE,OAAM,CAAE;EACzF;;;;;;EAOA,kBAAkB,SAA8B,WAAS;AACvD,UAAM,SAAS,IAAI,WAAU,EAAG,IAAI,UAAU,MAAM;AACpD,WAAO,KAAK,KAAK,IAA4B,GAAG,KAAK,MAAM,oBAAoB,EAAE,OAAM,CAAE;EAC3F;;;;;EAMA,kBAAe;AACb,WAAO,KAAK,KAAK,IAA0B,GAAG,KAAK,MAAM,gBAAgB;EAC3E;;;;;EAMA,mBAAgB;AACd,WAAO,KAAK,KAAK,IAA2B,GAAG,KAAK,MAAM,iBAAiB;EAC7E;;;;;;;EAQA,uBAAuB,MAAe,OAAc;AAClD,UAAM,MAAM,oBAAI,KAAI;AACpB,UAAM,cAAc,QAAQ,IAAI,YAAW;AAC3C,UAAM,eAAe,SAAS,IAAI,SAAQ,IAAK;AAE/C,UAAM,SAAS,IAAI,WAAU,EAC1B,IAAI,QAAQ,YAAY,SAAQ,CAAE,EAClC,IAAI,SAAS,aAAa,SAAQ,CAAE;AAEvC,WAAO,KAAK,KAAK,IAAiC,GAAG,KAAK,MAAM,0BAA0B,EAAE,OAAM,CAAE;EACtG;;;;;;EAMA,gBAAgB,UAAgB;AAC9B,WAAO,KAAK,KAAK,IAA0B,GAAG,KAAK,MAAM,YAAY,QAAQ,SAAS;EACxF;;qCA3GW,mBAAgB,mBAAA,UAAA,CAAA;EAAA;4EAAhB,mBAAgB,SAAhB,kBAAgB,WAAA,YAFf,OAAM,CAAA;;;sEAEP,kBAAgB,CAAA;UAH5B;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
