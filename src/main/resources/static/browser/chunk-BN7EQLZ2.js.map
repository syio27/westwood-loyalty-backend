{
  "version": 3,
  "sources": ["src/app/core/services/reward-programs.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../../environments/environment';\nimport {\n  RewardProgramType,\n  RewardProgramSlot,\n  CreateDraftResponse,\n  RewardProgramResponse,\n  RewardProgramListItem,\n  SaveCashbackDraftRequest,\n  LaunchCashbackProgramRequest,\n  PagedTieredClientsResponse\n} from '../models/reward-program.model';\n\nconst API = `${environment.apiUrl}/reward-programs`;\n\n@Injectable({ providedIn: 'root' })\nexport class RewardProgramsService {\n\n  constructor(private http: HttpClient) {}\n\n  // ─── Slots & Draft Creation ──────────────────────────────────────\n\n  getSlots(): Observable<RewardProgramSlot[]> {\n    return this.http.get<RewardProgramSlot[]>(`${API}/slots`);\n  }\n\n  createDraft(type: RewardProgramType): Observable<CreateDraftResponse> {\n    return this.http.post<CreateDraftResponse>(`${API}/draft`, { type });\n  }\n\n  // ─── Cashback Draft ──────────────────────────────────────────────\n\n  saveCashbackDraft(uuid: string, data: SaveCashbackDraftRequest): Observable<RewardProgramResponse> {\n    return this.http.put<RewardProgramResponse>(`${API}/${uuid}/cashback`, data);\n  }\n\n  // ─── Get Program ─────────────────────────────────────────────────\n\n  getProgram(uuid: string): Observable<RewardProgramResponse> {\n    return this.http.get<RewardProgramResponse>(`${API}/${uuid}`);\n  }\n\n  getTieredClients(programUuid: string, page = 0, size = 20, tierName?: string): Observable<PagedTieredClientsResponse> {\n    const params: Record<string, string> = { page: String(page), size: String(size) };\n    if (tierName) params['tierName'] = tierName;\n    return this.http.get<PagedTieredClientsResponse>(\n      `${API}/${programUuid}/tiered-clients`,\n      { params }\n    );\n  }\n\n  // ─── List Programs ───────────────────────────────────────────────\n\n  listPrograms(): Observable<RewardProgramListItem[]> {\n    return this.http.get<RewardProgramListItem[]>(`${API}`);\n  }\n\n  // ─── Lifecycle ───────────────────────────────────────────────────\n\n  launchCashbackProgram(uuid: string, data: LaunchCashbackProgramRequest): Observable<RewardProgramResponse> {\n    return this.http.post<RewardProgramResponse>(`${API}/${uuid}/launch`, data);\n  }\n\n  deactivateProgram(uuid: string): Observable<RewardProgramResponse> {\n    return this.http.post<RewardProgramResponse>(`${API}/${uuid}/deactivate`, {});\n  }\n\n  archiveProgram(uuid: string): Observable<RewardProgramResponse> {\n    return this.http.post<RewardProgramResponse>(`${API}/${uuid}/archive`, {});\n  }\n\n  deleteProgram(uuid: string): Observable<void> {\n    return this.http.delete<void>(`${API}/${uuid}`);\n  }\n}\n\n/** URL path segment for route (lowercase). */\nexport function rewardProgramTypeToSlug(type: RewardProgramType): string {\n  return type.toLowerCase();\n}\n\nexport function slugToRewardProgramType(slug: string): RewardProgramType | null {\n  const upper = slug?.toUpperCase();\n  if (upper === 'WELCOME' || upper === 'BIRTHDAY' || upper === 'REFERRAL' || upper === 'CASHBACK') {\n    return upper as RewardProgramType;\n  }\n  return null;\n}\n"],
  "mappings": ";;;;;;;;;;;;AAeA,IAAM,MAAM,GAAG,YAAY,MAAM;AAG3B,IAAO,wBAAP,MAAO,uBAAqB;EAEZ;EAApB,YAAoB,MAAgB;AAAhB,SAAA,OAAA;EAAmB;;EAIvC,WAAQ;AACN,WAAO,KAAK,KAAK,IAAyB,GAAG,GAAG,QAAQ;EAC1D;EAEA,YAAY,MAAuB;AACjC,WAAO,KAAK,KAAK,KAA0B,GAAG,GAAG,UAAU,EAAE,KAAI,CAAE;EACrE;;EAIA,kBAAkB,MAAc,MAA8B;AAC5D,WAAO,KAAK,KAAK,IAA2B,GAAG,GAAG,IAAI,IAAI,aAAa,IAAI;EAC7E;;EAIA,WAAW,MAAY;AACrB,WAAO,KAAK,KAAK,IAA2B,GAAG,GAAG,IAAI,IAAI,EAAE;EAC9D;EAEA,iBAAiB,aAAqB,OAAO,GAAG,OAAO,IAAI,UAAiB;AAC1E,UAAM,SAAiC,EAAE,MAAM,OAAO,IAAI,GAAG,MAAM,OAAO,IAAI,EAAC;AAC/E,QAAI;AAAU,aAAO,UAAU,IAAI;AACnC,WAAO,KAAK,KAAK,IACf,GAAG,GAAG,IAAI,WAAW,mBACrB,EAAE,OAAM,CAAE;EAEd;;EAIA,eAAY;AACV,WAAO,KAAK,KAAK,IAA6B,GAAG,GAAG,EAAE;EACxD;;EAIA,sBAAsB,MAAc,MAAkC;AACpE,WAAO,KAAK,KAAK,KAA4B,GAAG,GAAG,IAAI,IAAI,WAAW,IAAI;EAC5E;EAEA,kBAAkB,MAAY;AAC5B,WAAO,KAAK,KAAK,KAA4B,GAAG,GAAG,IAAI,IAAI,eAAe,CAAA,CAAE;EAC9E;EAEA,eAAe,MAAY;AACzB,WAAO,KAAK,KAAK,KAA4B,GAAG,GAAG,IAAI,IAAI,YAAY,CAAA,CAAE;EAC3E;EAEA,cAAc,MAAY;AACxB,WAAO,KAAK,KAAK,OAAa,GAAG,GAAG,IAAI,IAAI,EAAE;EAChD;;qCAzDW,wBAAqB,mBAAA,UAAA,CAAA;EAAA;4EAArB,wBAAqB,SAArB,uBAAqB,WAAA,YADR,OAAM,CAAA;;;sEACnB,uBAAqB,CAAA;UADjC;WAAW,EAAE,YAAY,OAAM,CAAE;;;AA8D5B,SAAU,wBAAwB,MAAuB;AAC7D,SAAO,KAAK,YAAW;AACzB;",
  "names": []
}
