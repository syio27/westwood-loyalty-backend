import{a as Ae}from"./chunk-UTZWVQ3H.js";import"./chunk-4ZMSAZVT.js";import{a as Ve,b as De}from"./chunk-YBLSDSQH.js";import{a as Le,b as He}from"./chunk-3N3ZBVQK.js";import{a as ne}from"./chunk-BZO4P2NR.js";import{a as te}from"./chunk-LAQDSUVH.js";import{a as ze}from"./chunk-Q2MMBZZQ.js";import"./chunk-3B24VZJ2.js";import{a as _e}from"./chunk-YDS2CTYG.js";import{a as Be}from"./chunk-G445VSQM.js";import{c as xe,d as be,e as we,f as Me,g as ye,h as Te,k as Pe,l as Se,m as ke,n as Oe,o as Ee,t as Fe,u as Ie,v as ee}from"./chunk-EJCKFZHK.js";import{n as he,r as Ce}from"./chunk-WKHSVZ5J.js";import{a as ve}from"./chunk-5EF6AKPJ.js";import{$ as v,Aa as F,Ba as D,Ca as i,Da as a,Ea as g,Fa as L,Ga as H,Ha as se,Ia as S,Ja as x,Ka as p,La as K,Ma as I,Oa as le,Pa as de,Qa as pe,Ra as G,Sa as l,T as W,Ta as C,Ua as k,Va as ce,Xa as U,Ya as $,Z as f,Za as q,_ as h,a as Q,aa as M,b as oe,db as me,ea as z,ja as ae,ka as re,lb as Z,ma as r,mb as B,nb as X,oa as R,ob as J,pa as O,pb as ue,qb as ge,sb as E,ua as _,xa as V,ya as d,za as j,zb as fe}from"./chunk-IGKWEZVA.js";var Qe=["*",[["","cardHeader",""]],[["","cardFooter",""]]],Ke=["*","[cardHeader]","[cardFooter]"];function Ze(o,m){o&1&&se(0)}function Xe(o,m){if(o&1&&(i(0,"h3"),l(1),a()),o&2){let e=p(2);r(),C(e.headerText)}}function Je(o,m){if(o&1&&(i(0,"div",6),_(1,Ze,1,0,"ng-container",7)(2,Xe,2,1,"h3",8),a()),o&2){let e=p(),t=G(6);r(),d("ngTemplateOutlet",t),r(),d("ngIf",!e.header)}}function et(o,m){o&1&&se(0)}function tt(o,m){if(o&1&&(i(0,"div",9),_(1,et,1,0,"ng-container",7),a()),o&2){p();let e=G(8);r(),d("ngTemplateOutlet",e)}}function nt(o,m){o&1&&I(0,1)}function it(o,m){o&1&&I(0,2)}var Ne=(()=>{class o{headerText="";showHeader=!1;footer=!1;showFooter=!1;hoverable=!1;shadow=!0;bordered=!1;header=!1;static \u0275fac=function(t){return new(t||o)};static \u0275cmp=O({type:o,selectors:[["app-card"]],inputs:{headerText:"headerText",showHeader:"showHeader",footer:"footer",showFooter:"showFooter",hoverable:"hoverable",shadow:"shadow",bordered:"bordered"},ngContentSelectors:Ke,decls:9,vars:8,consts:[["headerTemplate",""],["footerTemplate",""],[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body"],["class","card-footer",4,"ngIf"],[1,"card-header"],[4,"ngTemplateOutlet"],[4,"ngIf"],[1,"card-footer"]],template:function(t,n){t&1&&(K(Qe),i(0,"div",2),_(1,Je,3,2,"div",3),i(2,"div",4),I(3),a(),_(4,tt,2,1,"div",5),a(),_(5,nt,1,0,"ng-template",null,0,me)(7,it,1,0,"ng-template",null,1,me)),t&2&&(F("hoverable",n.hoverable)("shadow",n.shadow)("bordered",n.bordered),r(),d("ngIf",n.header||n.showHeader),r(3),d("ngIf",n.footer||n.showFooter))},dependencies:[E,B,ge],styles:[".card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;transition:all .3s ease}.card.shadow[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}.card.bordered[_ngcontent-%COMP%]{border:1px solid #e2e8f0}.card.hoverable[_ngcontent-%COMP%]{cursor:pointer}.card.hoverable[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #e2e8f0;background-color:#f8f9fa}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#1a202c}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #e2e8f0;background-color:#f8f9fa}[_nghost-%COMP%]     [cardHeader]{display:block}[_nghost-%COMP%]     [cardFooter]{display:block}"]})}return o})();var je=["*","*","*","*","*","*","*","*","*","*"];function ot(o,m){if(o&1&&(i(0,"h1"),I(1),a()),o&2){let e=p();D(e.getClasses())}}function at(o,m){if(o&1&&(i(0,"h2"),I(1,1),a()),o&2){let e=p();D(e.getClasses())}}function rt(o,m){if(o&1&&(i(0,"h3"),I(1,2),a()),o&2){let e=p();D(e.getClasses())}}function st(o,m){if(o&1&&(i(0,"h4"),I(1,3),a()),o&2){let e=p();D(e.getClasses())}}function lt(o,m){if(o&1&&(i(0,"h5"),I(1,4),a()),o&2){let e=p();D(e.getClasses())}}function dt(o,m){if(o&1&&(i(0,"h6"),I(1,5),a()),o&2){let e=p();D(e.getClasses())}}function pt(o,m){if(o&1&&(i(0,"p"),I(1,6),a()),o&2){let e=p();D(e.getClasses())}}function ct(o,m){if(o&1&&(i(0,"p"),I(1,7),a()),o&2){let e=p();D(e.getClasses())}}function mt(o,m){if(o&1&&(i(0,"span"),I(1,8),a()),o&2){let e=p();D(e.getClasses())}}function ut(o,m){if(o&1&&(i(0,"span"),I(1,9),a()),o&2){let e=p();D(e.getClasses())}}var We=(()=>{class o{variant="body1";noWrap=!1;bold=!1;medium=!1;muted=!1;getClasses(){let e=[this.variant];return this.noWrap&&e.push("no-wrap"),this.bold&&e.push("bold"),this.medium&&e.push("medium"),this.muted&&e.push("muted"),e.join(" ")}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=O({type:o,selectors:[["app-typography"]],inputs:{variant:"variant",noWrap:"noWrap",bold:"bold",medium:"medium",muted:"muted"},ngContentSelectors:je,decls:11,vars:11,consts:[[3,"ngSwitch"],[3,"class",4,"ngSwitchCase"]],template:function(t,n){t&1&&(K(je),L(0,0),_(1,ot,2,2,"h1",1)(2,at,2,2,"h2",1)(3,rt,2,2,"h3",1)(4,st,2,2,"h4",1)(5,lt,2,2,"h5",1)(6,dt,2,2,"h6",1)(7,pt,2,2,"p",1)(8,ct,2,2,"p",1)(9,mt,2,2,"span",1)(10,ut,2,2,"span",1),H()),t&2&&(d("ngSwitch",n.variant),r(),d("ngSwitchCase","h1"),r(),d("ngSwitchCase","h2"),r(),d("ngSwitchCase","h3"),r(),d("ngSwitchCase","h4"),r(),d("ngSwitchCase","h5"),r(),d("ngSwitchCase","h6"),r(),d("ngSwitchCase","body1"),r(),d("ngSwitchCase","body2"),r(),d("ngSwitchCase","caption"),r(),d("ngSwitchCase","overline"))},dependencies:[E,X,J],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{margin:0;padding:0}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;line-height:1.2}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;line-height:1.3}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;line-height:1.4}[_nghost-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;line-height:1.4}[_nghost-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;line-height:1.5}[_nghost-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;line-height:1.5}[_nghost-%COMP%]   p.body1[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.6}[_nghost-%COMP%]   p.body2[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;line-height:1.6}[_nghost-%COMP%]   span.caption[_ngcontent-%COMP%]{font-size:.75rem;font-weight:400;line-height:1.5}[_nghost-%COMP%]   span.overline[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;line-height:1.5;text-transform:uppercase;letter-spacing:.1em}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bold[_ngcontent-%COMP%]{font-weight:700}.medium[_ngcontent-%COMP%]{font-weight:500}.muted[_ngcontent-%COMP%]{color:#64748b}"]})}return o})();var Re=(()=>{class o{orientation="horizontal";spaced=!1;static \u0275fac=function(t){return new(t||o)};static \u0275cmp=O({type:o,selectors:[["app-divider"]],inputs:{orientation:"orientation",spaced:"spaced"},decls:1,vars:4,consts:[[1,"divider"]],template:function(t,n){t&1&&g(0,"div",0),t&2&&(D(n.orientation),F("spaced",n.spaced))},dependencies:[E],styles:[".divider[_ngcontent-%COMP%]{background-color:#e2e8f0}.divider.horizontal[_ngcontent-%COMP%]{width:100%;height:1px}.divider.vertical[_ngcontent-%COMP%]{height:100%;width:1px}.divider.spaced.horizontal[_ngcontent-%COMP%]{margin:1rem 0}.divider.spaced.vertical[_ngcontent-%COMP%]{margin:0 1rem}"]})}return o})();function gt(o,m){if(o&1&&(v(),i(0,"svg",24),g(1,"path",25),a()),o&2){let e=p();F("read",e.isRead)}}function ft(o,m){if(o&1&&(v(),i(0,"svg",26),g(1,"path",25),a()),o&2){let e=p();F("read",e.isRead)}}function ht(o,m){o&1&&(i(0,"div",27)(1,"div",28),v(),i(2,"svg",5),g(3,"path",29),a()(),M(),i(4,"div",30),l(5,"\u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435"),a(),i(6,"div",31),v(),i(7,"svg",5),g(8,"path",32),a()(),M(),i(9,"div",33),v(),i(10,"svg",5),g(11,"path",34),a()()())}var Ge=(()=>{class o{contactName="";avatarLetter="";message="";time="";status="\u043E\u043D\u043B\u0430\u0439\u043D";dateLabel="\u0421\u0435\u0433\u043E\u0434\u043D\u044F";outgoing=!0;showCheckmarks=!0;delivered=!0;isRead=!0;showInputBar=!0;darkFrame=!1;noShadow=!1;getAvatarLetter(){return this.avatarLetter?this.avatarLetter:this.contactName?this.contactName[0].toUpperCase():"?"}getCurrentTime(){return new Date().toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=O({type:o,selectors:[["app-whatsapp-preview"]],inputs:{contactName:"contactName",avatarLetter:"avatarLetter",message:"message",time:"time",status:"status",dateLabel:"dateLabel",outgoing:"outgoing",showCheckmarks:"showCheckmarks",delivered:"delivered",isRead:"isRead",showInputBar:"showInputBar",darkFrame:"darkFrame",noShadow:"noShadow"},decls:34,vars:15,consts:[[1,"phone-frame"],[1,"phone-notch"],[1,"phone-screen"],[1,"wa-header"],[1,"wa-back"],["viewBox","0 0 24 24","fill","none"],["d","M15 19l-7-7 7-7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"wa-contact"],[1,"wa-avatar"],[1,"wa-info"],[1,"wa-name"],[1,"wa-status"],[1,"wa-actions"],["d","M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"wa-chat"],[1,"wa-date"],[1,"wa-bubble"],[1,"wa-meta"],[1,"wa-time"],["viewBox","0 0 24 24","fill","none","class","wa-check",3,"read",4,"ngIf"],["viewBox","0 0 24 24","fill","none","class","wa-check wa-check-second",3,"read",4,"ngIf"],["class","wa-input-bar",4,"ngIf"],["viewBox","0 0 24 24","fill","none",1,"wa-check"],["d","M5 13l4 4L19 7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["viewBox","0 0 24 24","fill","none",1,"wa-check","wa-check-second"],[1,"wa-input-bar"],[1,"wa-emoji"],["d","M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"wa-input-field"],[1,"wa-attach"],["d","M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"wa-mic"],["d","M19 10v2a7 7 0 01-14 0v-2M12 19v4m-4 0h8M12 1a3 3 0 00-3 3v6a3 3 0 006 0V4a3 3 0 00-3-3z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"]],template:function(t,n){t&1&&(i(0,"div",0),g(1,"div",1),i(2,"div",2)(3,"div",3)(4,"div",4),v(),i(5,"svg",5),g(6,"path",6),a()(),M(),i(7,"div",7)(8,"div",8),l(9),a(),i(10,"div",9)(11,"span",10),l(12),a(),i(13,"span",11),l(14),a()()(),i(15,"div",12),v(),i(16,"svg",5),g(17,"path",13),a(),i(18,"svg",5),g(19,"path",14),a(),i(20,"svg",5),g(21,"path",15),a()()(),M(),i(22,"div",16)(23,"div",17),l(24),a(),i(25,"div",18)(26,"p"),l(27),a(),i(28,"div",19)(29,"span",20),l(30),a(),_(31,gt,2,2,"svg",21)(32,ft,2,2,"svg",22),a()()(),_(33,ht,12,0,"div",23),a()()),t&2&&(F("dark-frame",n.darkFrame)("no-shadow",n.noShadow),r(9),C(n.getAvatarLetter()),r(3),C(n.contactName||"\u041F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044C"),r(2),C(n.status),r(10),C(n.dateLabel),r(),F("incoming",!n.outgoing),r(2),C(n.message||"\u0422\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F..."),r(3),C(n.time||n.getCurrentTime()),r(),d("ngIf",n.outgoing&&n.showCheckmarks),r(),d("ngIf",n.outgoing&&n.showCheckmarks&&n.delivered),r(),d("ngIf",n.showInputBar))},dependencies:[E,B],styles:[`.phone-frame[_ngcontent-%COMP%]{background:#1f2937;border-radius:32px;padding:8px;box-shadow:0 25px 50px -12px #00000040;display:flex;flex-direction:column;min-height:400px}.phone-frame.dark-frame[_ngcontent-%COMP%]{background:#0f172a}.phone-frame.no-shadow[_ngcontent-%COMP%]{box-shadow:none}.phone-notch[_ngcontent-%COMP%]{width:120px;height:24px;background:inherit;margin:0 auto 8px;border-radius:0 0 16px 16px}.phone-screen[_ngcontent-%COMP%]{flex:1;background:#e5ddd5;border-radius:24px;overflow:hidden;display:flex;flex-direction:column}.wa-header[_ngcontent-%COMP%]{background:#075e54;padding:.625rem .75rem;display:flex;align-items:center;gap:.5rem}.wa-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}.wa-contact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;flex:1}.wa-avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:linear-gradient(135deg,#25d366,#128c7e);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.875rem}.wa-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.wa-name[_ngcontent-%COMP%]{color:#fff;font-weight:500;font-size:.9375rem;line-height:1.2}.wa-status[_ngcontent-%COMP%]{color:#ffffffb3;font-size:.75rem}.wa-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.wa-actions[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}.wa-chat[_ngcontent-%COMP%]{flex:1;padding:.75rem;display:flex;flex-direction:column;overflow-y:auto;background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23c5c5c5' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.wa-date[_ngcontent-%COMP%]{text-align:center;font-size:.6875rem;color:#667781;background:#ffffffe6;padding:.25rem .75rem;border-radius:8px;margin:0 auto .75rem;box-shadow:0 1px .5px #0000001a}.wa-bubble[_ngcontent-%COMP%]{background:#dcf8c6;padding:.5rem .625rem;border-radius:8px 8px 0;max-width:85%;margin-left:auto;box-shadow:0 1px .5px #0000001a;position:relative}.wa-bubble.incoming[_ngcontent-%COMP%]{background:#fff;margin-left:0;margin-right:auto;border-radius:8px 8px 8px 0}.wa-bubble[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;line-height:1.4;color:#111b21;white-space:pre-wrap;word-break:break-word}.wa-meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.125rem;margin-top:.125rem}.wa-time[_ngcontent-%COMP%]{font-size:.6875rem;color:#667781}.wa-check[_ngcontent-%COMP%]{width:16px;height:16px;color:#667781;margin-left:-4px}.wa-check.read[_ngcontent-%COMP%]{color:#53bdeb}.wa-check-second[_ngcontent-%COMP%]{margin-left:-12px}.wa-input-bar[_ngcontent-%COMP%]{background:#f0f2f5;padding:.5rem .625rem;display:flex;align-items:center;gap:.5rem}.wa-emoji[_ngcontent-%COMP%], .wa-attach[_ngcontent-%COMP%]{color:#54656f;display:flex;align-items:center;justify-content:center}.wa-emoji[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .wa-attach[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.wa-input-field[_ngcontent-%COMP%]{flex:1;background:#fff;padding:.5rem .875rem;border-radius:8px;font-size:.875rem;color:#667781}.wa-mic[_ngcontent-%COMP%]{width:40px;height:40px;background:#00a884;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.wa-mic[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}`]})}return o})();var Ue=(()=>{class o{recipientEmail="";message="";activationLink="https://westwood.app/activate?token=...";buttonText="Activate Account";expirationDays=7;senderName="Westwood Team";senderEmail="noreply@westwood.app";static \u0275fac=function(t){return new(t||o)};static \u0275cmp=O({type:o,selectors:[["app-email-preview"]],inputs:{recipientEmail:"recipientEmail",message:"message",activationLink:"activationLink",buttonText:"buttonText",expirationDays:"expirationDays",senderName:"senderName",senderEmail:"senderEmail"},decls:52,vars:8,consts:[[1,"email-frame"],[1,"browser-header"],[1,"browser-controls"],[1,"control","close"],[1,"control","minimize"],[1,"control","maximize"],[1,"browser-tabs"],[1,"tab","active"],["viewBox","0 0 24 24","fill","none"],["d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"email-client"],[1,"email-content"],[1,"sender-section"],[1,"sender-avatar"],["cx","12","cy","8","r","4","fill","currentColor"],["d","M4 20c0-4 4-6 8-6s8 2 8 6","fill","currentColor"],[1,"sender-details"],[1,"sender-row"],[1,"sender-name"],[1,"sender-email"],[1,"recipient-row"],[1,"to-label"],[1,"to-value"],["viewBox","0 0 24 24","fill","none",1,"dropdown-icon"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"email-body-wrapper"],[1,"email-template"],[1,"email-banner"],[1,"banner-title"],[1,"email-body-content"],[1,"intro-text"],[1,"cta-container"],[1,"cta-button",3,"href"],[1,"alt-text"],[1,"link-box"],[1,"activation-link",3,"href"],[1,"notice"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),g(3,"span",3)(4,"span",4)(5,"span",5),a(),i(6,"div",6)(7,"div",7),v(),i(8,"svg",8),g(9,"path",9),a(),M(),i(10,"span"),l(11,"\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u0432 Westwood - WestWood Team"),a()()()(),i(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13),v(),i(16,"svg",8),g(17,"circle",14)(18,"path",15),a()(),M(),i(19,"div",16)(20,"div",17)(21,"span",18),l(22),a(),i(23,"span",19),l(24),a()(),i(25,"div",20)(26,"span",21),l(27,"\u043A\u043E\u043C\u0443:"),a(),i(28,"span",22),l(29,"\u043C\u043D\u0435"),a(),v(),i(30,"svg",23),g(31,"path",24),a()()()(),M(),i(32,"div",25)(33,"div",26)(34,"div",27)(35,"h1",28),l(36,"Welcome to Westwood!"),a()(),i(37,"div",29)(38,"div",30),l(39),a(),i(40,"div",31)(41,"a",32),l(42),a()(),i(43,"p",33),l(44,"Or copy and paste this link into your browser:"),a(),i(45,"div",34)(46,"a",35),l(47),a()(),i(48,"p",36)(49,"strong"),l(50,"Important:"),a(),l(51),a()()()()()()()),t&2&&(r(22),C(n.senderName),r(2),k("<",n.senderEmail,">"),r(15),C(n.message||"You have been invited to join Westwood as a Manager. To get started, please activate your account by clicking the button below:"),r(2),d("href",n.activationLink,re),r(),k(" ",n.buttonText||"Activate Account"," "),r(4),d("href",n.activationLink,re),r(),k(" ",n.activationLink||"https://westwood.app/activate?token=..."," "),r(4),k(" This activation link will expire in ",n.expirationDays||7," days. If you didn't request this invitation, please ignore this email. "))},dependencies:[E],styles:[".email-frame[_ngcontent-%COMP%]{background:#1f2937;border-radius:12px;overflow:hidden;box-shadow:0 25px 50px -12px #00000040;display:flex;flex-direction:column;min-height:500px}.browser-header[_ngcontent-%COMP%]{background:#374151;padding:.5rem .75rem;display:flex;align-items:center;gap:1rem}.browser-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.control[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.control.close[_ngcontent-%COMP%]{background:#ef4444}.control.minimize[_ngcontent-%COMP%]{background:#fbbf24}.control.maximize[_ngcontent-%COMP%]{background:#22c55e}.browser-tabs[_ngcontent-%COMP%]{flex:1}.tab[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:#4b5563;padding:.375rem .75rem;border-radius:6px 6px 0 0;font-size:.75rem;color:#e5e7eb;max-width:280px}.tab[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;flex-shrink:0}.tab[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.email-client[_ngcontent-%COMP%]{flex:1;display:flex;background:#fff}.email-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-width:0}.sender-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.875rem;padding:1rem;border-bottom:1px solid #e5e7eb;background:#fff}.sender-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#4caf50,#2e7d32);display:flex;align-items:center;justify-content:center;flex-shrink:0}.sender-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#fff}.sender-details[_ngcontent-%COMP%]{flex:1;min-width:0}.sender-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;flex-wrap:wrap;margin-bottom:.25rem}.sender-name[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:#1f2937}.sender-email[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280}.recipient-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.8125rem;color:#6b7280}.to-label[_ngcontent-%COMP%]{color:#9ca3af}.to-value[_ngcontent-%COMP%]{color:#6b7280}.dropdown-icon[_ngcontent-%COMP%]{width:14px;height:14px;color:#9ca3af}.email-body-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background:#f5f5f5;padding:.5rem}.email-template[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;overflow:hidden}.email-banner[_ngcontent-%COMP%]{background:#4caf50;padding:1.75rem 1.5rem;text-align:center}.banner-title[_ngcontent-%COMP%]{color:#fff;font-size:1.375rem;font-weight:700;margin:0;letter-spacing:-.02em}.email-body-content[_ngcontent-%COMP%]{background:#fff;padding:1.5rem 1.25rem}.intro-text[_ngcontent-%COMP%]{font-size:.875rem;color:#333;line-height:1.6;margin:0 0 1.5rem;white-space:pre-wrap;word-break:break-word}.cta-container[_ngcontent-%COMP%]{text-align:center;margin:1.5rem 0}.cta-button[_ngcontent-%COMP%]{display:inline-block;background:#4caf50;color:#fff;font-size:.875rem;font-weight:600;padding:.75rem 1.5rem;border-radius:6px;text-decoration:none;transition:all .2s ease;box-shadow:0 2px 6px #4caf504d}.cta-button[_ngcontent-%COMP%]:hover{background:#43a047}.alt-text[_ngcontent-%COMP%]{font-size:.875rem;color:#333;margin:1.5rem 0 .75rem}.link-box[_ngcontent-%COMP%]{background:#e8f5e9;border-radius:6px;padding:.75rem;margin-bottom:1.25rem;word-break:break-all}.activation-link[_ngcontent-%COMP%]{color:#1565c0;font-size:.8125rem;text-decoration:underline;line-height:1.5}.notice[_ngcontent-%COMP%]{font-size:.875rem;color:#333;line-height:1.6;margin:0}.notice[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#111}"]})}return o})();var vt=["contentEditable"],Ct=["messageContentEditable"];function xt(o,m){if(o&1){let e=S();i(0,"button",54),x("click",function(n){f(e);let s=p().$implicit,c=p();return h(c.openPreview(s,n))}),v(),i(1,"svg",49),g(2,"path",55)(3,"path",56),a()()}}function bt(o,m){if(o&1){let e=S();i(0,"div",42),x("click",function(){let n=f(e).$implicit,s=p();return h(s.selectTemplate(n))}),i(1,"div",43)(2,"span",44),l(3),a()(),i(4,"p",45),l(5),a(),i(6,"div",46),_(7,xt,4,0,"button",47),i(8,"button",48),x("click",function(n){let s=f(e).$implicit,c=p();return h(c.editTemplate(s,n))}),v(),i(9,"svg",49),g(10,"path",50)(11,"path",51),a()(),M(),i(12,"button",52),x("click",function(n){let s=f(e).$implicit,c=p();return h(c.deleteTemplate(s,n))}),v(),i(13,"svg",49),g(14,"path",53),a()()()()}if(o&2){let e=m.$implicit,t=p();r(3),C(e.name),r(2),C(t.getTemplatePreview(e.content)),r(2),d("ngIf",t.invitationType==="whatsapp")}}function wt(o,m){o&1&&(i(0,"div",57),v(),i(1,"svg",58),g(2,"path",59)(3,"path",60),a(),M(),i(4,"p",61),l(5,"\u041D\u0435\u0442 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439"),a(),i(6,"p",62),l(7,"\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u043F\u0435\u0440\u0432\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u043E\u0439 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438"),a()())}function Mt(o,m){if(o&1){let e=S();i(0,"div",66),x("click",function(){f(e);let n=p(2);return h(n.toggleFormCollapse())}),i(1,"div",67),g(2,"div",68),i(3,"div",69)(4,"span",70),l(5),a(),i(6,"span",71),l(7),a()(),i(8,"button",72),v(),i(9,"svg",49),g(10,"path",23),a()()()()}if(o&2){let e=p(2);r(2),j("background",e.getIconGradient()),d("innerHTML",e.getSafeIconSvg(),ae),r(3),C(e.title),r(2),C(e.getCollapsedPreview()),r(2),F("rotated",!e.isFormCollapsed)}}function yt(o,m){if(o&1){let e=S();i(0,"app-alert",104),x("dismissed",function(){f(e);let n=p(3);return h(n.successMessage="")}),l(1),a()}if(o&2){let e=p(3);d("title","\u0423\u0441\u043F\u0435\u0448\u043D\u043E")("dismissible",!0),r(),k(" ",e.successMessage," ")}}function Tt(o,m){if(o&1){let e=S();i(0,"app-alert",105),x("dismissed",function(){f(e);let n=p(3);return h(n.errorMessage="")}),l(1),a()}if(o&2){let e=p(3);d("title","\u041E\u0448\u0438\u0431\u043A\u0430")("dismissible",!0),r(),k(" ",e.errorMessage," ")}}function Pt(o,m){o&1&&g(0,"app-input",106)}function St(o,m){if(o&1){let e=S();i(0,"button",112),x("click",function(){let n=f(e).$implicit,s=p(4);return h(s.selectMessageVariable(n))}),i(1,"span",113),l(2),a(),i(3,"span",114),l(4),a()()}if(o&2){let e=m.$implicit,t=p(4);F("highlighted",t.highlightedMessageVariableIndex===t.filteredMessageVariables.indexOf(e)),r(2),C(t.getVariableDisplayName(e.name)),r(2),C(e.description)}}function kt(o,m){if(o&1){let e=S();i(0,"div",107)(1,"div",108)(2,"span"),l(3,"\u041F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435"),a(),i(4,"button",109),x("click",function(){f(e);let n=p(3);return h(n.closeMessageVariablesDropdown())}),l(5,"\xD7"),a()(),i(6,"div",110),_(7,St,5,4,"button",111),a()()}if(o&2){let e=p(3);j("top",e.messageDropdownPosition.top,"px")("left",e.messageDropdownPosition.left,"px"),r(7),d("ngForOf",e.filteredMessageVariables)}}function Ot(o,m){o&1&&(v(),i(0,"svg",115),g(1,"path",116)(2,"path",117),a())}function Et(o,m){o&1&&(v(),i(0,"svg",118),g(1,"path",119),a())}function Ft(o,m){if(o&1&&g(0,"app-whatsapp-preview",120),o&2){let e=p(3);d("contactName",e.getPreviewContactName())("avatarLetter",e.getPreviewAvatarLetter())("message",e.getPreviewMessage())("showInputBar",!0)("noShadow",!0)}}function It(o,m){if(o&1&&g(0,"app-email-preview",121),o&2){let e=p(3);d("recipientEmail",e.getPreviewEmail())("message",e.getPreviewMessage())("activationLink","https://westwood.app/activate?token=xxx")("buttonText","Activate Account")("expirationDays",7)("senderEmail","noreply@westwood.app")}}function Vt(o,m){if(o&1){let e=S();i(0,"div",73)(1,"div",74),x("click",function(){f(e);let n=p(2);return h(n.toggleFormCollapse())}),i(2,"div",75),g(3,"div",76),i(4,"div",77)(5,"h2",78),l(6),a(),i(7,"p",79),l(8),a()()(),i(9,"button",80),v(),i(10,"svg",49),g(11,"path",23),a()()(),M(),i(12,"div",81)(13,"app-card",82),_(14,yt,2,3,"app-alert",83)(15,Tt,2,3,"app-alert",84),i(16,"form",85),x("ngSubmit",function(){f(e);let n=p(2);return h(n.onFormSubmit())}),_(17,Pt,1,0,"app-input",86),i(18,"div",87)(19,"div",88)(20,"app-typography",89),l(21),a(),i(22,"app-typography",90),l(23),a()(),i(24,"div",25)(25,"div",91,1),x("input",function(n){f(e);let s=p(2);return h(s.onMessageInput(n))})("keydown",function(n){f(e);let s=p(2);return h(s.onMessageKeydown(n))})("click",function(){f(e);let n=p(2);return h(n.onMessageClick())})("blur",function(n){f(e);let s=p(2);return h(s.onMessageBlur(n))}),a(),_(27,kt,8,5,"div",27),a()(),g(28,"app-divider",92),i(29,"app-button",93)(30,"span",94),L(31,30),_(32,Ot,3,0,"svg",95)(33,Et,2,0,"svg",96),H(),l(34),a()()()(),i(35,"div",97)(36,"div",98),v(),i(37,"svg",99),g(38,"path",55)(39,"path",56),a(),M(),i(40,"h3",100),l(41,"\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440"),a()(),i(42,"p",101),l(43),a(),L(44,30),_(45,Ft,1,5,"app-whatsapp-preview",102)(46,It,1,6,"app-email-preview",103),H(),a()()()}if(o&2){let e=p(2);r(3),j("background",e.getIconGradient()),d("innerHTML",e.getSafeIconSvg(),ae),r(3),C(e.title),r(2),C(e.subtitle),r(5),d("shadow",!0),r(),d("ngIf",e.successMessage),r(),d("ngIf",e.errorMessage),r(),d("formGroup",e.form),r(),d("ngIf",e.invitationType==="email"),r(3),d("medium",!0),r(),k(" ",e.invitationType==="email"?"\u0422\u0435\u043A\u0441\u0442 \u043F\u0438\u0441\u044C\u043C\u0430":"\u0422\u0435\u043A\u0441\u0442 \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u044F"," "),r(),d("muted",!0),r(),ce(" ",e.getMessageLength(),"/",e.invitationType==="email"?"1000":"500"," "),r(),V("data-type",e.invitationType),r(),V("data-type",e.invitationType)("placeholder",(e.invitationType==="email","\u041D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0435 \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435...")),r(2),d("ngIf",e.showMessageVariablesDropdown),r(),d("spaced",!0),r(),d("buttonType",e.invitationType==="email"?"primary":"success")("disabled",e.form.invalid||e.isSending)("loading",e.isSending),r(2),d("ngSwitch",e.invitationType),r(),d("ngSwitchCase","whatsapp"),r(2),k(" ",e.isSending?e.invitationType==="email"?"\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...":"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0435\u043C WhatsApp...":e.invitationType==="email"?"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C Email":"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0432 WhatsApp"," "),r(3),j("color",e.iconColor),r(6),C(e.previewDescription),r(),d("ngSwitch",e.invitationType),r(),d("ngSwitchCase","whatsapp")}}function Dt(o,m){if(o&1&&(i(0,"div",63),_(1,Mt,11,7,"div",64)(2,Vt,47,31,"div",65),a()),o&2){let e=p();r(),d("ngIf",e.isFormCollapsed),r(),d("ngIf",!e.isFormCollapsed)}}function Bt(o,m){o&1&&(i(0,"option",122),l(1,"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0442\u0438\u043F\u043E\u0432..."),a())}function zt(o,m){if(o&1&&(i(0,"option",123),l(1),a()),o&2){let e=m.$implicit;d("value",e.type),r(),k(" ",e.displayName," ")}}function Lt(o,m){if(o&1){let e=S();i(0,"div",15)(1,"label",16),l(2,"\u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430"),a(),i(3,"input",124),q("ngModelChange",function(n){f(e);let s=p();return $(s.newTemplate.subject,n)||(s.newTemplate.subject=n),h(n)}),a()()}if(o&2){let e=p();r(),V("data-type",e.invitationType),r(2),U("ngModel",e.newTemplate.subject),V("data-type",e.invitationType)}}function Ht(o,m){if(o&1){let e=S();i(0,"button",112),x("click",function(){let n=f(e).$implicit,s=p(2);return h(s.selectVariable(n))}),i(1,"span",113),l(2),a(),i(3,"span",114),l(4),a()()}if(o&2){let e=m.$implicit,t=p(2);F("highlighted",t.highlightedVariableIndex===t.filteredVariables.indexOf(e)),r(2),C(t.getVariableDisplayName(e.name)),r(2),C(e.description)}}function At(o,m){if(o&1){let e=S();i(0,"div",107)(1,"div",108)(2,"span"),l(3,"\u041F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435"),a(),i(4,"button",109),x("click",function(){f(e);let n=p();return h(n.closeVariablesDropdown())}),l(5,"\xD7"),a()(),i(6,"div",110),_(7,Ht,5,4,"button",111),a()()}if(o&2){let e=p();j("top",e.dropdownPosition.top,"px")("left",e.dropdownPosition.left,"px"),r(7),d("ngForOf",e.filteredVariables)}}function Nt(o,m){if(o&1&&g(0,"app-whatsapp-preview",125),o&2){let e=p();d("contactName","\u041F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044C")("avatarLetter","\u041F")("message",e.newTemplate.content||"\u0422\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F...")("showInputBar",!0)("noShadow",!0)}}function jt(o,m){if(o&1&&g(0,"app-email-preview",126),o&2){let e=p();d("recipientEmail","email@example.com")("message",e.newTemplate.content||"\u0422\u0435\u043A\u0441\u0442 \u043F\u0438\u0441\u044C\u043C\u0430...")("activationLink","https://westwood.app/activate?token=xxx")("buttonText","Activate Account")("expirationDays",7)("senderEmail","noreply@westwood.app")}}function Wt(o,m){if(o&1&&g(0,"app-whatsapp-preview",125),o&2){let e=p();d("contactName","\u041F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044C")("avatarLetter","\u041F")("message",e.previewTemplate.content)("showInputBar",!0)("noShadow",!0)}}function Rt(o,m){if(o&1){let e=S();i(0,"div",130)(1,"div",131),v(),i(2,"svg",49),g(3,"path",132),a()(),M(),i(4,"h3",133),l(5,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D?"),a(),i(6,"p",134),l(7," \u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D "),i(8,"strong"),l(9),a(),l(10,"?"),g(11,"br"),l(12," \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C. "),a(),i(13,"div",135)(14,"button",136),x("click",function(){f(e);let n=p(2);return h(n.closeDeleteTemplateModal())}),l(15,"\u041E\u0442\u043C\u0435\u043D\u0430"),a(),i(16,"button",137),x("click",function(){f(e);let n=p(2);return h(n.proceedToDeleteTemplateStep2())}),l(17,"\u0414\u0430, \u0443\u0434\u0430\u043B\u0438\u0442\u044C"),a()()()}if(o&2){let e=p(2);r(9),C(e.templateToDelete==null?null:e.templateToDelete.name)}}function Gt(o,m){if(o&1){let e=S();i(0,"div",130)(1,"div",138),v(),i(2,"svg",49),g(3,"path",139),a()(),M(),i(4,"h3",133),l(5,"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435"),a(),i(6,"p",134),l(7," \u0414\u043B\u044F \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E "),i(8,"strong",140),l(9,"\u0443\u0434\u0430\u043B\u0438\u0442\u044C"),a()(),i(10,"input",141),q("ngModelChange",function(n){f(e);let s=p(2);return $(s.deleteTemplateConfirmationText,n)||(s.deleteTemplateConfirmationText=n),h(n)}),x("input",function(){f(e);let n=p(2);return h(n.checkDeleteTemplateConfirmation())})("keydown.enter",function(){f(e);let n=p(2);return h(n.confirmDeleteTemplate())}),a(),i(11,"div",135)(12,"button",136),x("click",function(){f(e);let n=p(2);return h(n.closeDeleteTemplateModal())}),l(13,"\u041E\u0442\u043C\u0435\u043D\u0430"),a(),i(14,"button",142),x("click",function(){f(e);let n=p(2);return h(n.confirmDeleteTemplate())}),l(15," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043D\u0430\u0432\u0441\u0435\u0433\u0434\u0430 "),a()()()}if(o&2){let e=p(2);r(10),U("ngModel",e.deleteTemplateConfirmationText),r(4),d("disabled",!e.isDeleteTemplateConfirmed)}}function Ut(o,m){if(o&1){let e=S();i(0,"div",127),x("click",function(){f(e);let n=p();return h(n.closeDeleteTemplateModal())}),i(1,"div",128),x("click",function(n){return f(e),h(n.stopPropagation())}),_(2,Rt,18,1,"div",129)(3,Gt,16,2,"div",129),a()()}if(o&2){let e=p();r(2),d("ngIf",e.deleteTemplateStep===1),r(),d("ngIf",e.deleteTemplateStep===2)}}var $e=(()=>{class o{sanitizer;contentEditableRef;messageContentEditableRef;invitationType="whatsapp";form;title="\u041F\u0440\u0438\u0433\u043B\u0430\u0441\u0438 \u0434\u0440\u0443\u0433\u0430";subtitle="";iconSvg="";iconColor="#25D366";previewDescription="";messageTemplates=[];isSending=!1;successMessage="";errorMessage="";hideForm=!1;templateTypes=[];templateVariables=[];formSubmit=new z;templateSelected=new z;templateCreated=new z;templateUpdated=new z;templateDeleted=new z;isFormCollapsed=!1;showCreateTemplateModal=!1;showPreviewModal=!1;previewTemplate=null;editingTemplateId=null;showDeleteTemplateModal=!1;deleteTemplateStep=1;deleteTemplateConfirmationText="";isDeleteTemplateConfirmed=!1;templateToDelete=null;newTemplate={id:"",name:"",type:"bonus_accrued",content:"",createdAt:new Date};showVariablesDropdown=!1;highlightedVariableIndex=0;dropdownPosition={top:0,left:0};currentBracePosition=-1;showMessageVariablesDropdown=!1;highlightedMessageVariableIndex=0;messageDropdownPosition={top:0,left:0};currentMessageBracePosition=-1;get availableVariables(){return this.templateVariables.length>0?this.templateVariables:[]}filteredVariables=[];filteredMessageVariables=[];constructor(e){this.sanitizer=e}ngAfterViewInit(){this.contentEditableRef&&this.updateContentEditable()}getSafeIconSvg(){return typeof this.iconSvg=="string"?this.sanitizer.bypassSecurityTrustHtml(this.iconSvg):this.iconSvg||this.sanitizer.bypassSecurityTrustHtml("")}toggleFormCollapse(){this.isFormCollapsed=!this.isFormCollapsed}getCollapsedPreview(){let e=this.form.get("message")?.value||"";return e?e.split(/\s+/).slice(0,8).join(" ")+(e.split(/\s+/).length>8?"...":""):"\u0422\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043D\u0435 \u0432\u0432\u0435\u0434\u0451\u043D"}onFormSubmit(){this.formSubmit.emit()}getVariableDisplayName(e){return e.replace(/[{}]/g,"")}getTemplateTypeLabel(e){return!e||typeof e!="string"?e||"":e.split("_").map(t=>t.charAt(0)+t.slice(1).toLowerCase()).join(" ")}getTemplatePreview(e){return e.split(/\s+/).slice(0,10).join(" ")+(e.split(/\s+/).length>10?"...":"")}selectTemplate(e){this.form.patchValue({message:e.content}),this.invitationType==="email"&&e.subject&&this.form.patchValue({subject:e.subject}),this.templateSelected.emit(e),this.isFormCollapsed=!1,setTimeout(()=>{this.updateMessageContentEditable()},100)}openCreateTemplateModal(){let e=this.templateTypes.length>0?this.templateTypes[0].type:"";this.newTemplate={id:"",name:"",type:e,content:"",subject:this.invitationType==="email"?"":void 0,createdAt:new Date},this.editingTemplateId=null,this.closeVariablesDropdown(),setTimeout(()=>{this.showCreateTemplateModal=!0,setTimeout(()=>{this.updateContentEditable()},100)},0)}closeCreateTemplateModal(){this.showCreateTemplateModal=!1,this.editingTemplateId=null,this.closeVariablesDropdown()}saveTemplate(){if(this.contentEditableRef){let e=this.contentEditableRef.nativeElement;this.newTemplate.content=this.getPlainTextFromElement(e)}if(!(!this.newTemplate.name||!this.newTemplate.content)&&!(this.invitationType==="email"&&!this.newTemplate.subject)){if(this.editingTemplateId){let e=oe(Q({},this.newTemplate),{id:this.editingTemplateId});this.templateUpdated.emit(e)}else{let e=oe(Q({},this.newTemplate),{id:Date.now().toString(),createdAt:new Date});this.templateCreated.emit(e)}this.closeCreateTemplateModal()}}editTemplate(e,t){t.stopPropagation(),this.newTemplate=Q({},e),this.editingTemplateId=e.id,this.showCreateTemplateModal=!0,this.closeVariablesDropdown(),setTimeout(()=>{this.updateContentEditable()},100)}deleteTemplate(e,t){t.stopPropagation(),this.openDeleteTemplateModal(e)}openDeleteTemplateModal(e){this.templateToDelete=e,this.deleteTemplateStep=1,this.deleteTemplateConfirmationText="",this.isDeleteTemplateConfirmed=!1,this.showDeleteTemplateModal=!0}closeDeleteTemplateModal(){this.showDeleteTemplateModal=!1,this.deleteTemplateStep=1,this.deleteTemplateConfirmationText="",this.isDeleteTemplateConfirmed=!1,this.templateToDelete=null}proceedToDeleteTemplateStep2(){this.deleteTemplateStep=2}checkDeleteTemplateConfirmation(){this.isDeleteTemplateConfirmed=this.deleteTemplateConfirmationText.toLowerCase().trim()==="\u0443\u0434\u0430\u043B\u0438\u0442\u044C"}confirmDeleteTemplate(){this.templateToDelete&&this.isDeleteTemplateConfirmed&&(this.templateDeleted.emit(this.templateToDelete.id),this.closeDeleteTemplateModal())}openPreview(e,t){t.stopPropagation(),this.previewTemplate=e,this.showPreviewModal=!0}closePreview(){this.showPreviewModal=!1,this.previewTemplate=null}getPreviewMessage(){return this.form.get("message")?.value||"\u0422\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F..."}getPreviewContactName(){return"\u041F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044C"}getPreviewAvatarLetter(){return"\u041F"}getPreviewEmail(){return"email@example.com"}getIconGradient(){return this.invitationType==="email"?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"linear-gradient(135deg, #25D366 0%, #128C7E 100%)"}formatTimeout=null;isFormatting=!1;lastFormattedContent="";messageFormatTimeout=null;isMessageFormatting=!1;lastFormattedMessageContent="";onContentInput(e){let t=e.target,n=this.getPlainTextFromElement(t);if(this.newTemplate.content=n,this.isFormatting)return;this.formatTimeout&&clearTimeout(this.formatTimeout);let s=window.getSelection();if(s&&s.rangeCount>0){let u=s.getRangeAt(0),w=this.getTextBeforeCursor(t,u),y=w.lastIndexOf("{{");if(y!==-1){let b=w.substring(y+2);if(!b.includes("}}")){this.currentBracePosition=y,this.showVariablesDropdown=!0;let P=b.toLowerCase();this.filteredVariables=this.availableVariables.filter(T=>T.name.toLowerCase().includes(P)||T.description.toLowerCase().includes(P)),this.filteredVariables.length===0&&(this.filteredVariables=[...this.availableVariables]),this.highlightedVariableIndex=0,this.updateDropdownPosition(t,u),this.formatTimeout=setTimeout(()=>this.formatContentWithVariables(t),150);return}}}n.includes("{{")&&!n.match(/\{\{[^}]*$/)||this.closeVariablesDropdown(),n!==this.lastFormattedContent&&(this.formatTimeout=setTimeout(()=>this.formatContentWithVariables(t),200))}onContentKeydown(e){if(this.showVariablesDropdown){if(e.key==="ArrowDown")e.preventDefault(),this.highlightedVariableIndex=Math.min(this.highlightedVariableIndex+1,this.filteredVariables.length-1),this.scrollToHighlightedVariable();else if(e.key==="ArrowUp")e.preventDefault(),this.highlightedVariableIndex=Math.max(this.highlightedVariableIndex-1,0),this.scrollToHighlightedVariable();else if(e.key==="Enter")e.preventDefault(),this.filteredVariables[this.highlightedVariableIndex]&&this.selectVariable(this.filteredVariables[this.highlightedVariableIndex]);else if(e.key==="Escape")e.preventDefault(),this.closeVariablesDropdown();else if(e.key==="}"){let t=e.target,n=this.getPlainTextFromElement(t),s=window.getSelection();if(s&&s.rangeCount>0){let c=s.getRangeAt(0);this.getTextBeforeCursor(t,c).endsWith("}")&&(e.preventDefault(),this.closeVariablesDropdown())}}}}scrollToHighlightedVariable(){setTimeout(()=>{let e=document.querySelector(".variables-dropdown-list"),t=document.querySelector(".variable-option.highlighted");e&&t&&t.scrollIntoView({block:"nearest",behavior:"smooth"})},0)}updateMessageContentEditable(){if(this.messageContentEditableRef){let e=this.messageContentEditableRef.nativeElement;this.form.get("message")?.value||""?(this.isMessageFormatting=!1,this.lastFormattedMessageContent="",this.formatMessageWithVariables(e)):(e.innerHTML="",this.lastFormattedMessageContent="")}}onContentClick(){}onContentBlur(e){let t=e.relatedTarget;t&&!t.closest(".variables-dropdown")&&setTimeout(()=>{document.activeElement!==this.contentEditableRef?.nativeElement&&this.closeVariablesDropdown()},200)}updateDropdownPosition(e,t){let n=t.getBoundingClientRect(),s=e.getBoundingClientRect(),c=e.scrollTop||0,u=e.scrollLeft||0;this.dropdownPosition={top:n.bottom-s.top+c+5,left:n.left-s.left+u}}selectVariable(e){let t=this.contentEditableRef?.nativeElement||document.querySelector(".form-textarea-editable");if(!t)return;let n=window.getSelection();if(!n||n.rangeCount===0)return;let s=n.getRangeAt(0),c=this.getPlainTextFromElement(t),u=this.getTextBeforeCursor(t,s),w=u.lastIndexOf("{{");if(w===-1){this.closeVariablesDropdown();return}let y=this.getCursorPosition(t,s),b=u.substring(w+2),P=e.name.replace(/[{}]/g,""),T=c.substring(0,w+2),N=c.substring(y),ie=T+P+"}}"+N;this.newTemplate.content=ie,this.formatContentWithVariables(t),setTimeout(()=>{let Ye=w+2+e.name.length+2;this.setCursorPosition(t,Ye)},20),this.closeVariablesDropdown()}closeVariablesDropdown(){this.showVariablesDropdown=!1,this.highlightedVariableIndex=0,this.currentBracePosition=-1}getFormattedContent(){return this.newTemplate.content?this.newTemplate.content.replace(/\{(\w+)\}/g,'<span class="variable-tag">{$1}</span>'):""}formatContentWithVariables(e){if(this.isFormatting)return;this.isFormatting=!0;let t=this.newTemplate.content||this.getPlainTextFromElement(e);if(!t){e.innerHTML="",this.lastFormattedContent="",this.isFormatting=!1;return}if(t===this.lastFormattedContent){this.isFormatting=!1;return}let n=window.getSelection(),s=0,c=document.activeElement===e;if(n&&n.rangeCount>0&&c)try{let T=n.getRangeAt(0);s=this.getCursorPosition(e,T)}catch{s=t.length}let u=[],w=0,y=/\{\{([a-zA-Z_][a-zA-Z0-9_]*)\}\}/g,b;for(;(b=y.exec(t))!==null;){if(b.index>w){let T=t.substring(w,b.index);u.push(this.escapeHtml(T))}u.push(`<span class="variable-tag">{{${b[1]}}}</span>`),w=y.lastIndex}w<t.length&&u.push(this.escapeHtml(t.substring(w)));let P=u.length>0?u.join(""):this.escapeHtml(t);e.innerHTML!==P?(e.innerHTML=P,this.lastFormattedContent=t,n&&c&&s>=0?requestAnimationFrame(()=>{document.activeElement===e&&s<=t.length&&this.setCursorPosition(e,s),this.isFormatting=!1}):this.isFormatting=!1):(this.lastFormattedContent=t,this.isFormatting=!1)}getPlainTextFromElement(e){return e.innerText||e.textContent||""}getTextBeforeCursor(e,t){let n=this.getPlainTextFromElement(e),s=this.getCursorPosition(e,t);return n.substring(0,s)}getTextAfterCursor(e,t){let n=this.getPlainTextFromElement(e),s=this.getCursorPosition(e,t);return n.substring(s)}getCursorPosition(e,t){let n=t.cloneRange();n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset);let s=document.createElement("div");return s.appendChild(n.cloneContents()),s.textContent?.length||0}setCursorPosition(e,t){let n=window.getSelection();if(!n)return;document.activeElement!==e&&e.focus();let s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),c=0,u=null,w=0,y;for(;y=s.nextNode();){let b=y.textContent?.length||0;if(c+b>=t){u=y,w=t-c;break}c+=b}if(!u){let b=this.getLastTextNode(e);if(b)u=b,w=b.textContent?.length||0;else{let P=document.createTextNode("");e.appendChild(P),u=P,w=0}}if(u)try{let b=document.createRange(),P=u.textContent?.length||0,T=Math.max(0,Math.min(w,P));b.setStart(u,T),b.collapse(!0),n.removeAllRanges(),n.addRange(b);let N=b.getBoundingClientRect();(N.top<0||N.bottom>window.innerHeight)&&u.parentElement?.scrollIntoView({block:"nearest",behavior:"smooth"})}catch(b){console.warn("Failed to set cursor position:",b),e.focus()}}getLastTextNode(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),n=null,s;for(;s=t.nextNode();)n=s;return n}escapeHtml(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}findTextNodeAtPosition(e,t){let n=0,s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),c;for(;c=s.nextNode();){let u=c.textContent?.length||0;if(n+u>=t)return c;n+=u}return null}getPlainTextContent(){return this.newTemplate.content||""}getPlainTextFromHtml(e){let t=document.createElement("div");return t.innerHTML=e,t.innerText||t.textContent||""}updateContentEditable(){if(this.contentEditableRef){let e=this.contentEditableRef.nativeElement;this.newTemplate.content?(this.isFormatting=!1,this.lastFormattedContent="",this.formatContentWithVariables(e)):(e.innerHTML="",this.lastFormattedContent="")}}getMessageLength(){return this.messageContentEditableRef?this.getPlainTextFromElement(this.messageContentEditableRef.nativeElement).length:this.form.get("message")?.value?.length||0}onMessageInput(e){let t=e.target,n=this.getPlainTextFromElement(t);if(this.form.patchValue({message:n}),this.isMessageFormatting)return;this.messageFormatTimeout&&clearTimeout(this.messageFormatTimeout);let s=window.getSelection();if(s&&s.rangeCount>0){let u=s.getRangeAt(0),w=this.getTextBeforeCursor(t,u),y=w.lastIndexOf("{{");if(y!==-1){let b=w.substring(y+2);if(!b.includes("}}")){this.currentMessageBracePosition=y,this.showMessageVariablesDropdown=!0;let P=b.toLowerCase();this.filteredMessageVariables=this.availableVariables.filter(T=>T.name.toLowerCase().includes(P)||T.description.toLowerCase().includes(P)),this.filteredMessageVariables.length===0&&(this.filteredMessageVariables=[...this.availableVariables]),this.highlightedMessageVariableIndex=0,this.updateMessageDropdownPosition(t,u),this.messageFormatTimeout=setTimeout(()=>this.formatMessageWithVariables(t),150);return}}}n.includes("{{")&&!n.match(/\{\{[^}]*$/)||this.closeMessageVariablesDropdown(),n!==this.lastFormattedMessageContent&&(this.messageFormatTimeout=setTimeout(()=>this.formatMessageWithVariables(t),200))}onMessageKeydown(e){if(this.showMessageVariablesDropdown){if(e.key==="ArrowDown")e.preventDefault(),this.highlightedMessageVariableIndex=Math.min(this.highlightedMessageVariableIndex+1,this.filteredMessageVariables.length-1),this.scrollToHighlightedMessageVariable();else if(e.key==="ArrowUp")e.preventDefault(),this.highlightedMessageVariableIndex=Math.max(this.highlightedMessageVariableIndex-1,0),this.scrollToHighlightedMessageVariable();else if(e.key==="Enter")e.preventDefault(),this.filteredMessageVariables[this.highlightedMessageVariableIndex]&&this.selectMessageVariable(this.filteredMessageVariables[this.highlightedMessageVariableIndex]);else if(e.key==="Escape")e.preventDefault(),this.closeMessageVariablesDropdown();else if(e.key==="}"){let t=e.target,n=window.getSelection();if(n&&n.rangeCount>0){let s=n.getRangeAt(0);this.getTextBeforeCursor(t,s).endsWith("}")&&(e.preventDefault(),this.closeMessageVariablesDropdown())}}}}onMessageClick(){}onMessageBlur(e){let t=e.relatedTarget;t&&!t.closest(".variables-dropdown")&&setTimeout(()=>{document.activeElement!==this.messageContentEditableRef?.nativeElement&&this.closeMessageVariablesDropdown()},200)}updateMessageDropdownPosition(e,t){let n=t.getBoundingClientRect(),s=e.getBoundingClientRect(),c=e.scrollTop||0,u=e.scrollLeft||0;this.messageDropdownPosition={top:n.bottom-s.top+c+5,left:n.left-s.left+u}}selectMessageVariable(e){let t=this.messageContentEditableRef?.nativeElement;if(!t)return;let n=window.getSelection();if(!n||n.rangeCount===0)return;let s=n.getRangeAt(0),c=this.getPlainTextFromElement(t),w=this.getTextBeforeCursor(t,s).lastIndexOf("{{");if(w===-1){this.closeMessageVariablesDropdown();return}let y=this.getCursorPosition(t,s),b=e.name.replace(/[{}]/g,""),P=c.substring(0,w+2),T=c.substring(y),N=P+b+"}}"+T;this.form.patchValue({message:N}),this.formatMessageWithVariables(t),setTimeout(()=>{let ie=w+2+e.name.length+2;this.setCursorPosition(t,ie)},20),this.closeMessageVariablesDropdown()}closeMessageVariablesDropdown(){this.showMessageVariablesDropdown=!1,this.highlightedMessageVariableIndex=0,this.currentMessageBracePosition=-1}formatMessageWithVariables(e){if(this.isMessageFormatting)return;this.isMessageFormatting=!0;let t=this.form.get("message")?.value||this.getPlainTextFromElement(e);if(!t){e.innerHTML="",this.lastFormattedMessageContent="",this.isMessageFormatting=!1;return}if(t===this.lastFormattedMessageContent){this.isMessageFormatting=!1;return}let n=window.getSelection(),s=0,c=document.activeElement===e;if(n&&n.rangeCount>0&&c)try{let T=n.getRangeAt(0);s=this.getCursorPosition(e,T)}catch{s=t.length}let u=[],w=0,y=/\{\{([a-zA-Z_][a-zA-Z0-9_]*)\}\}/g,b;for(;(b=y.exec(t))!==null;){if(b.index>w){let T=t.substring(w,b.index);u.push(this.escapeHtml(T))}u.push(`<span class="variable-tag">{{${b[1]}}}</span>`),w=y.lastIndex}w<t.length&&u.push(this.escapeHtml(t.substring(w)));let P=u.length>0?u.join(""):this.escapeHtml(t);e.innerHTML!==P?(e.innerHTML=P,this.lastFormattedMessageContent=t,n&&c&&s>=0?requestAnimationFrame(()=>{document.activeElement===e&&s<=t.length&&this.setCursorPosition(e,s),this.isMessageFormatting=!1}):this.isMessageFormatting=!1):(this.lastFormattedMessageContent=t,this.isMessageFormatting=!1)}scrollToHighlightedMessageVariable(){setTimeout(()=>{let e=document.querySelector(".variables-dropdown"),t=document.querySelector(".variable-option.highlighted");e&&t&&t.scrollIntoView({block:"nearest",behavior:"smooth"})},0)}static \u0275fac=function(t){return new(t||o)(R(fe))};static \u0275cmp=O({type:o,selectors:[["app-invitation-form"]],viewQuery:function(t,n){if(t&1&&(le(vt,5),le(Ct,5)),t&2){let s;de(s=pe())&&(n.contentEditableRef=s.first),de(s=pe())&&(n.messageContentEditableRef=s.first)}},inputs:{invitationType:"invitationType",form:"form",title:"title",subtitle:"subtitle",iconSvg:"iconSvg",iconColor:"iconColor",previewDescription:"previewDescription",messageTemplates:"messageTemplates",isSending:"isSending",successMessage:"successMessage",errorMessage:"errorMessage",hideForm:"hideForm",templateTypes:"templateTypes",templateVariables:"templateVariables"},outputs:{formSubmit:"formSubmit",templateSelected:"templateSelected",templateCreated:"templateCreated",templateUpdated:"templateUpdated",templateDeleted:"templateDeleted"},decls:57,vars:33,consts:[["contentEditable",""],["messageContentEditable",""],[1,"invitation-form-wrapper"],[1,"templates-section"],[1,"templates-header"],[1,"templates-title"],["buttonType","primary","size","medium",3,"onClick"],["viewBox","0 0 24 24","fill","none",1,"btn-icon"],["d","M12 5v14M5 12h14","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"templates-grid"],["class","template-card",3,"click",4,"ngFor","ngForOf"],["class","template-card empty",4,"ngIf"],["class","collapsible-section",4,"ngIf"],["title","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0432\u0438\u0434 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F","size","large",3,"closed","visibleChange","visible","showCloseButton","showFooter"],[1,"template-form"],[1,"form-group"],[1,"form-label"],["type","text","placeholder","\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: \u041F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435",1,"form-input",3,"ngModelChange","ngModel"],[1,"type-dropdown-wrapper"],[1,"type-dropdown",3,"ngModelChange","ngModel","disabled"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["viewBox","0 0 24 24","fill","none",1,"dropdown-arrow"],["d","M6 9l6 6 6-6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","form-group",4,"ngIf"],[1,"textarea-wrapper"],["contenteditable","true",1,"form-textarea-editable",3,"input","keydown","click","blur"],["class","variables-dropdown",3,"top","left",4,"ngIf"],[1,"char-count"],[1,"preview-box"],[3,"ngSwitch"],[3,"contactName","avatarLetter","message","showInputBar","noShadow",4,"ngSwitchCase"],[3,"recipientEmail","message","activationLink","buttonText","expirationDays","senderEmail",4,"ngSwitchDefault"],["modalFooter",""],[1,"modal-footer"],["buttonType","secondary","size","medium",3,"onClick"],["size","medium",3,"onClick","buttonType","disabled"],["title","\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F",3,"closed","visible","showCloseButton"],[1,"preview-content"],[1,"preview-description"],[3,"contactName","avatarLetter","message","showInputBar","noShadow",4,"ngIf"],["class","delete-modal-overlay",3,"click",4,"ngIf"],[1,"template-card",3,"click"],[1,"template-header"],[1,"template-name"],[1,"template-preview"],[1,"template-actions"],["class","template-action-btn preview-btn","title","\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440",3,"click",4,"ngIf"],["title","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",1,"template-action-btn",3,"click"],["viewBox","0 0 24 24","fill","none"],["d","M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7","stroke","currentColor","stroke-width","1.5"],["d","M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z","stroke","currentColor","stroke-width","1.5"],["title","\u0423\u0434\u0430\u043B\u0438\u0442\u044C",1,"template-action-btn",3,"click"],["d","M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2","stroke","currentColor","stroke-width","1.5"],["title","\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440",1,"template-action-btn","preview-btn",3,"click"],["d","M15 12a3 3 0 11-6 0 3 3 0 016 0z","stroke","currentColor","stroke-width","1.5"],["d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z","stroke","currentColor","stroke-width","1.5"],[1,"template-card","empty"],["viewBox","0 0 24 24","fill","none",1,"empty-icon"],["d","M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z","stroke","currentColor","stroke-width","1.5"],["d","M14 2v6h6M16 13H8M16 17H8M10 9H8","stroke","currentColor","stroke-width","1.5"],[1,"empty-text"],[1,"empty-hint"],[1,"collapsible-section"],["class","collapsed-view",3,"click",4,"ngIf"],["class","expanded-view",4,"ngIf"],[1,"collapsed-view",3,"click"],[1,"collapsed-content"],[1,"collapsed-icon",3,"innerHTML"],[1,"collapsed-info"],[1,"collapsed-title"],[1,"collapsed-preview"],[1,"expand-btn"],[1,"expanded-view"],[1,"view-header",3,"click"],[1,"view-header-content"],[1,"icon-wrapper",3,"innerHTML"],[1,"header-text"],[1,"panel-title"],[1,"panel-subtitle"],[1,"collapse-btn"],[1,"expanded-content"],[1,"left-panel",3,"shadow"],["type","success","class","alert-spacing",3,"title","dismissible","dismissed",4,"ngIf"],["type","error","class","alert-spacing",3,"title","dismissible","dismissed",4,"ngIf"],[1,"form-content",3,"ngSubmit","formGroup"],["id","subject","label","\u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430","type","text","placeholder","\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u0432 Westwood","formControlName","subject","prefix","\u{1F4CB}",4,"ngIf"],[1,"textarea-group"],[1,"label-row"],["variant","body2",3,"medium"],["variant","caption",3,"muted"],["contenteditable","true",1,"message-textarea-editable",3,"input","keydown","click","blur"],[3,"spaced"],["type","submit","size","large",1,"submit-btn",3,"buttonType","disabled","loading"],[1,"btn-content"],["viewBox","0 0 24 24","fill","none","class","wa-icon",4,"ngSwitchCase"],["viewBox","0 0 24 24","fill","none","class","email-icon",4,"ngSwitchDefault"],[1,"preview-section"],[1,"section-title"],["viewBox","0 0 24 24","fill","none",1,"title-icon"],[1,"section-heading"],[1,"section-description"],["class","preview-component",3,"contactName","avatarLetter","message","showInputBar","noShadow",4,"ngSwitchCase"],["class","preview-component",3,"recipientEmail","message","activationLink","buttonText","expirationDays","senderEmail",4,"ngSwitchDefault"],["type","success",1,"alert-spacing",3,"dismissed","title","dismissible"],["type","error",1,"alert-spacing",3,"dismissed","title","dismissible"],["id","subject","label","\u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430","type","text","placeholder","\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u0432 Westwood","formControlName","subject","prefix","\u{1F4CB}"],[1,"variables-dropdown"],[1,"variables-dropdown-header"],["type","button",1,"variables-dropdown-close",3,"click"],[1,"variables-dropdown-list"],["type","button","class","variable-option",3,"highlighted","click",4,"ngFor","ngForOf"],["type","button",1,"variable-option",3,"click"],[1,"variable-name"],[1,"variable-desc"],["viewBox","0 0 24 24","fill","none",1,"wa-icon"],["d","M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z","fill","currentColor"],["d","M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2 22l4.832-1.438A9.955 9.955 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2z","fill","currentColor"],["viewBox","0 0 24 24","fill","none",1,"email-icon"],["d","M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"preview-component",3,"contactName","avatarLetter","message","showInputBar","noShadow"],[1,"preview-component",3,"recipientEmail","message","activationLink","buttonText","expirationDays","senderEmail"],["value",""],[3,"value"],["type","text","placeholder","\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u0432 Westwood",1,"form-input",3,"ngModelChange","ngModel"],[3,"contactName","avatarLetter","message","showInputBar","noShadow"],[3,"recipientEmail","message","activationLink","buttonText","expirationDays","senderEmail"],[1,"delete-modal-overlay",3,"click"],[1,"delete-modal",3,"click"],["class","delete-modal-content",4,"ngIf"],[1,"delete-modal-content"],[1,"delete-modal-icon","warning"],["d","M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"delete-modal-title"],[1,"delete-modal-description"],[1,"delete-modal-actions"],[1,"delete-modal-btn","cancel",3,"click"],[1,"delete-modal-btn","confirm",3,"click"],[1,"delete-modal-icon","danger"],["d","M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14zM10 11v6M14 11v6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"confirm-word"],["type","text","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F",1,"delete-confirm-input",3,"ngModelChange","input","keydown.enter","ngModel"],[1,"delete-modal-btn","delete",3,"click","disabled"]],template:function(t,n){if(t&1){let s=S();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),l(4,"\u0428\u0430\u0431\u043B\u043E\u043D\u044B \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439"),a(),i(5,"app-button",6),x("onClick",function(){return f(s),h(n.openCreateTemplateModal())}),v(),i(6,"svg",7),g(7,"path",8),a(),l(8," \u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0432\u0438\u0434 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F "),a()(),M(),i(9,"div",9),_(10,bt,15,3,"div",10)(11,wt,8,0,"div",11),a()(),_(12,Dt,3,2,"div",12),a(),i(13,"app-modal",13),x("closed",function(){return f(s),h(n.closeCreateTemplateModal())})("visibleChange",function(u){return f(s),h(n.showCreateTemplateModal=u)}),i(14,"div",14)(15,"div",15)(16,"label",16),l(17,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F"),a(),i(18,"input",17),q("ngModelChange",function(u){return f(s),$(n.newTemplate.name,u)||(n.newTemplate.name=u),h(u)}),a()(),i(19,"div",15)(20,"label",16),l(21,"\u0422\u0438\u043F \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F"),a(),i(22,"div",18)(23,"select",19),q("ngModelChange",function(u){return f(s),$(n.newTemplate.type,u)||(n.newTemplate.type=u),h(u)}),_(24,Bt,2,0,"option",20)(25,zt,2,2,"option",21),a(),v(),i(26,"svg",22),g(27,"path",23),a()()(),_(28,Lt,4,3,"div",24),M(),i(29,"div",15)(30,"label",16),l(31,"\u041A\u043E\u043D\u0442\u0435\u043D\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F"),a(),i(32,"div",25)(33,"div",26,0),x("input",function(u){return f(s),h(n.onContentInput(u))})("keydown",function(u){return f(s),h(n.onContentKeydown(u))})("click",function(){return f(s),h(n.onContentClick())})("blur",function(u){return f(s),h(n.onContentBlur(u))}),a(),_(35,At,8,5,"div",27),a(),i(36,"div",28),l(37),a()(),i(38,"div",15)(39,"label",16),l(40,"\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440"),a(),i(41,"div",29),L(42,30),_(43,Nt,1,5,"app-whatsapp-preview",31)(44,jt,1,6,"app-email-preview",32),H(),a()()(),L(45,33),i(46,"div",34)(47,"app-button",35),x("onClick",function(){return f(s),h(n.closeCreateTemplateModal())}),l(48," \u041E\u0442\u043C\u0435\u043D\u0430 "),a(),i(49,"app-button",36),x("onClick",function(){return f(s),h(n.saveTemplate())}),l(50," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D "),a()(),H(),a(),i(51,"app-modal",37),x("closed",function(){return f(s),h(n.closePreview())}),i(52,"div",38)(53,"p",39),l(54,"\u0422\u0430\u043A \u0431\u0443\u0434\u0435\u0442 \u0432\u044B\u0433\u043B\u044F\u0434\u0435\u0442\u044C \u0432\u0430\u0448\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0432 WhatsApp"),a(),_(55,Wt,1,5,"app-whatsapp-preview",40),a()(),_(56,Ut,4,2,"div",41)}t&2&&(r(10),d("ngForOf",n.messageTemplates),r(),d("ngIf",n.messageTemplates.length===0),r(),d("ngIf",!n.hideForm),r(),d("visible",n.showCreateTemplateModal)("showCloseButton",!0)("showFooter",!0),r(3),V("data-type",n.invitationType),r(2),U("ngModel",n.newTemplate.name),V("data-type",n.invitationType),r(2),V("data-type",n.invitationType),r(3),U("ngModel",n.newTemplate.type),d("disabled",n.templateTypes.length===0),V("data-type",n.invitationType),r(),d("ngIf",n.templateTypes.length===0),r(),d("ngForOf",n.templateTypes),r(3),d("ngIf",n.invitationType==="email"),r(2),V("data-type",n.invitationType),r(2),V("data-type",n.invitationType),r(),V("data-type",n.invitationType)("placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043A\u0441\u0442 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F..."),r(2),d("ngIf",n.showVariablesDropdown),r(2),ce("",n.getPlainTextContent().length,"/",n.invitationType==="email"?"1000":"500",""),r(2),V("data-type",n.invitationType),r(2),V("data-type",n.invitationType),r(),d("ngSwitch",n.invitationType),r(),d("ngSwitchCase","whatsapp"),r(6),d("buttonType",n.invitationType==="email"?"primary":"success")("disabled",!n.newTemplate.name||!n.newTemplate.content||n.invitationType==="email"&&!n.newTemplate.subject),r(2),d("visible",n.showPreviewModal)("showCloseButton",!0),r(4),d("ngIf",n.previewTemplate),r(),d("ngIf",n.showDeleteTemplateModal))},dependencies:[E,Z,B,X,J,ue,ee,Te,Oe,Ee,xe,ke,we,Me,Pe,Se,Ie,ye,Ne,De,Be,We,Ve,Re,te,Ge,Ue],styles:['[_nghost-%COMP%]{display:block;width:100%}.collapsible-section[_ngcontent-%COMP%]{background:#fff;border-radius:24px;box-shadow:0 1px 3px #00000014;overflow:hidden;transition:all .3s ease}.collapsed-view[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;cursor:pointer;transition:background .2s}.collapsed-view[_ngcontent-%COMP%]:hover{background:#f8fafc}.collapsed-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.collapsed-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.collapsed-icon[_ngcontent-%COMP%]     svg{width:20px;height:20px;color:#fff}.collapsed-icon[_ngcontent-%COMP%]     svg path{fill:#fff}.collapsed-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem;min-width:0}.collapsed-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1f2937}.collapsed-preview[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.expand-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;cursor:pointer;color:#64748b;display:flex;align-items:center;justify-content:center;transition:transform .2s}.expand-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;transition:transform .2s}.expand-btn[_ngcontent-%COMP%]   svg.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.view-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.25rem 1.5rem;border-bottom:1px solid #f1f5f9;cursor:pointer;transition:background .2s}.view-header[_ngcontent-%COMP%]:hover{background:#f8fafc}.view-header-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1.25rem}.collapse-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;cursor:pointer;color:#64748b;display:flex;align-items:center;justify-content:center}.collapse-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.expanded-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:2rem}.icon-wrapper[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.icon-wrapper[_ngcontent-%COMP%]     svg{width:28px;height:28px;color:#fff}.icon-wrapper[_ngcontent-%COMP%]     svg path{fill:#fff}.header-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.panel-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin:0}.panel-subtitle[_ngcontent-%COMP%]{font-size:.9375rem;color:#64748b;margin:0}.alert-spacing[_ngcontent-%COMP%]{margin-bottom:1.5rem}.left-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:24px!important}[_nghost-%COMP%]     .left-panel .card-body{display:flex;flex-direction:column;flex:1;padding:2rem!important}.form-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:1.25rem}.textarea-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.label-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.message-textarea[_ngcontent-%COMP%]{flex:1;width:100%;min-height:120px;padding:.875rem;border:1px solid #cbd5e1;border-radius:8px;font-size:.9375rem;font-family:inherit;resize:none;transition:all .2s ease;background-color:#fff;color:#1a202c;line-height:1.6}.message-textarea[_ngcontent-%COMP%]:focus{outline:none}.message-textarea[data-type=whatsapp][_ngcontent-%COMP%]:focus{border-color:#25d366;box-shadow:0 0 0 3px #25d36626}.message-textarea[data-type=email][_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f626}.message-textarea[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.message-textarea-editable[_ngcontent-%COMP%]{flex:1;width:100%;min-height:120px;padding:.875rem;border:1px solid #cbd5e1;border-radius:8px;font-size:.9375rem;font-family:inherit;background-color:#fff;color:#1a202c;line-height:1.6;outline:none;white-space:pre-wrap;word-wrap:break-word}.message-textarea-editable[_ngcontent-%COMP%]:empty:before{content:attr(placeholder);color:#94a3b8;pointer-events:none}.message-textarea-editable[_ngcontent-%COMP%]:focus{outline:none}.message-textarea-editable[data-type=whatsapp][_ngcontent-%COMP%]:focus{border-color:#25d366;box-shadow:0 0 0 3px #25d36626}.message-textarea-editable[data-type=email][_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f626}.submit-btn[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .submit-btn button{width:100%;border-radius:12px!important;padding:1rem 1.5rem!important}[_nghost-%COMP%]     .submit-btn button:hover:not(:disabled){transform:translateY(-2px)}.btn-icon[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0;display:block}.wa-icon[_ngcontent-%COMP%], .email-icon[_ngcontent-%COMP%]{width:22px;height:22px}.preview-section[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:1.5rem;box-shadow:0 1px 3px #0000000d;display:flex;flex-direction:column}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.25rem}.title-icon[_ngcontent-%COMP%]{width:22px;height:22px}.section-heading[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin:0}.section-description[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3af;margin:0 0 1.25rem}.preview-component[_ngcontent-%COMP%]{flex:1;display:block}.templates-section[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:1.5rem;box-shadow:0 1px 3px #00000014;margin-bottom:2rem}.templates-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.templates-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0}.templates-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.template-card[_ngcontent-%COMP%]{background:#f8fafc;border:1.5px solid #e2e8f0;border-radius:16px;padding:1.25rem;cursor:pointer;transition:all .2s;position:relative}.template-card[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#25d366;transform:translateY(-2px);box-shadow:0 4px 12px #25d36626}.template-card.empty[_ngcontent-%COMP%]{text-align:center;padding:3rem 1.5rem;cursor:default;border-style:dashed}.template-card.empty[_ngcontent-%COMP%]:hover{transform:none;border-color:#e2e8f0}.template-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.template-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1f2937}.template-preview[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;line-height:1.5;margin:0 0 .75rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.template-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;opacity:0;transition:opacity .2s}.template-card[_ngcontent-%COMP%]:hover   .template-actions[_ngcontent-%COMP%]{opacity:1}.template-action-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:.4rem;cursor:pointer;color:#64748b;display:flex;align-items:center;justify-content:center;transition:all .15s}.template-action-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;color:#1f2937}.template-action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.empty-icon[_ngcontent-%COMP%]{width:48px;height:48px;color:#d1d5db;margin:0 auto 1rem}.empty-text[_ngcontent-%COMP%]{font-size:.9375rem;color:#64748b;margin:0 0 .25rem;font-weight:500}.empty-hint[_ngcontent-%COMP%]{font-size:.8125rem;color:#94a3b8;margin:0}.template-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;padding:.5rem 0}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.form-label[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:#1f2937;display:flex;align-items:center;gap:.5rem}.form-label[_ngcontent-%COMP%]:before{content:"";width:3px;height:16px;border-radius:2px}.form-label[data-type=whatsapp][_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#25d366,#128c7e)}.form-label[data-type=email][_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.form-input[_ngcontent-%COMP%]{padding:.875rem 1.125rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.9375rem;background:#fff;color:#1f2937;transition:all .2s;font-family:inherit}.form-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.form-input[_ngcontent-%COMP%]:focus{outline:none;background:#f0fdf4;box-shadow:0 0 0 4px #25d3661a}.form-input[data-type=whatsapp][_ngcontent-%COMP%]:focus{border-color:#25d366;background:#f0fdf4;box-shadow:0 0 0 4px #25d3661a}.form-input[data-type=email][_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#eff6ff;box-shadow:0 0 0 4px #3b82f61a}.type-dropdown-wrapper[_ngcontent-%COMP%]{position:relative}.type-dropdown[_ngcontent-%COMP%]{width:100%;padding:.875rem 3rem .875rem 1.125rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.9375rem;background:#fff;color:#1f2937;transition:all .2s;font-family:inherit;appearance:none;cursor:pointer}.type-dropdown[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 4px #25d3661a}.type-dropdown[data-type=whatsapp][_ngcontent-%COMP%]:focus{border-color:#25d366;background:#f0fdf4;box-shadow:0 0 0 4px #25d3661a}.type-dropdown[data-type=email][_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#eff6ff;box-shadow:0 0 0 4px #3b82f61a}.type-dropdown[_ngcontent-%COMP%]:hover{border-color:#cbd5e1}.dropdown-arrow[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);width:20px;height:20px;color:#64748b;pointer-events:none;transition:transform .2s}.type-dropdown[data-type=whatsapp][_ngcontent-%COMP%]:focus + .dropdown-arrow[_ngcontent-%COMP%]{color:#25d366}.type-dropdown[data-type=email][_ngcontent-%COMP%]:focus + .dropdown-arrow[_ngcontent-%COMP%]{color:#3b82f6}.textarea-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.form-textarea[_ngcontent-%COMP%]{width:100%;padding:1rem 1.125rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.9375rem;font-family:inherit;resize:vertical;background:#fff;color:#1f2937;line-height:1.6;transition:all .2s;min-height:150px}.form-textarea[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 4px #25d3661a}.form-textarea[data-type=whatsapp][_ngcontent-%COMP%]:focus{border-color:#25d366;background:#f0fdf4;box-shadow:0 0 0 4px #25d3661a}.form-textarea[data-type=email][_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#eff6ff;box-shadow:0 0 0 4px #3b82f61a}.form-textarea-editable[_ngcontent-%COMP%]{width:100%;padding:1rem 1.125rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.9375rem;font-family:inherit;background:#fff;color:#1f2937;line-height:1.6;transition:all .2s;min-height:150px;outline:none;white-space:pre-wrap;word-wrap:break-word}.form-textarea-editable[_ngcontent-%COMP%]:empty:before{content:attr(placeholder);color:#94a3b8;pointer-events:none}.form-textarea-editable[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #25d3661a}.form-textarea-editable[data-type=whatsapp][_ngcontent-%COMP%]:focus{border-color:#25d366;background:#f0fdf4;box-shadow:0 0 0 4px #25d3661a}.form-textarea-editable[data-type=email][_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#eff6ff;box-shadow:0 0 0 4px #3b82f61a}.variable-tag[_ngcontent-%COMP%]{color:#16a34a!important;font-style:italic!important;font-weight:500!important;font-family:Courier New,Monaco,Menlo,Consolas,monospace!important;background:#22c55e14!important;padding:2px 6px!important;border-radius:4px!important;border:1px solid rgba(34,197,94,.2)!important;display:inline!important}[_nghost-%COMP%]     .variable-tag{color:#169ea3!important;font-style:italic!important;font-weight:500!important;font-family:Courier New,Monaco,Menlo,Consolas,monospace!important;background:#169ea333!important;padding:2px 6px!important;border-radius:4px!important;border:1px solid rgba(34,197,94,.2)!important;display:inline!important}.variables-dropdown[_ngcontent-%COMP%]{position:absolute;background:#fff;border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 4px 12px #00000026;z-index:1000;min-width:280px;max-width:400px;max-height:300px;overflow:hidden;margin-top:4px}.variables-dropdown-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:#f8fafc;border-bottom:1px solid #e2e8f0;font-size:.8rem;font-weight:600;color:#64748b}.variables-dropdown-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;color:#94a3b8;cursor:pointer;padding:0;line-height:1;transition:color .15s}.variables-dropdown-close[_ngcontent-%COMP%]:hover{color:#64748b}.variables-dropdown-list[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;padding:4px}.variable-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;width:100%;padding:10px 14px;background:transparent;border:none;text-align:left;cursor:pointer;transition:all .15s;border-radius:8px}.variable-option[_ngcontent-%COMP%]:hover, .variable-option.highlighted[_ngcontent-%COMP%]{background:#f0fdf4}.variable-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#16a34a;font-family:Courier New,monospace}.variable-desc[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.char-count[_ngcontent-%COMP%]{font-size:.75rem;color:#94a3b8;text-align:right;margin-top:.25rem}.preview-box[_ngcontent-%COMP%]{border-radius:16px;padding:1.5rem;max-height:450px;overflow-y:auto}.preview-box[data-type=whatsapp][_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#fff);border:2px solid #dcfce7;box-shadow:0 2px 8px #25d36614}.preview-box[data-type=email][_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#fff);border:2px solid #dbeafe;box-shadow:0 2px 8px #3b82f614}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.875rem;padding:1.25rem 0 0;border-top:2px solid #f1f5f9;margin-top:.5rem}[_nghost-%COMP%]     .modal-footer app-button button{padding:.75rem 1.5rem!important;font-weight:600!important;border-radius:10px!important}@media (max-width: 1024px){.expanded-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.templates-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))}}@media (max-width: 768px){.expanded-content[_ngcontent-%COMP%]{padding:1rem}.templates-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.templates-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}[_nghost-%COMP%]     .left-panel .card-body{padding:1.5rem!important}}.preview-content[_ngcontent-%COMP%]{padding:.5rem 0}.preview-description[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:0 0 1.5rem}.delete-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.delete-modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0003;max-width:420px;width:90%;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.delete-modal-content[_ngcontent-%COMP%]{padding:2rem;display:flex;flex-direction:column;align-items:center;text-align:center}.delete-modal-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:1.25rem}.delete-modal-icon.warning[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.delete-modal-icon.danger[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.delete-modal-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.delete-modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0 0 .75rem}.delete-modal-description[_ngcontent-%COMP%]{font-size:.9rem;color:#6b7280;line-height:1.6;margin:0 0 1.5rem}.delete-modal-description[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1f2937}.confirm-word[_ngcontent-%COMP%]{color:#dc2626;background:#fee2e2;padding:.125rem .5rem;border-radius:4px;font-family:monospace;font-size:.95rem}.delete-confirm-input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:2px solid #e5e7eb;border-radius:10px;font-size:1rem;font-family:inherit;text-align:center;margin-bottom:1.5rem;transition:all .2s ease}.delete-confirm-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.delete-confirm-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.delete-modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;width:100%}.delete-modal-btn[_ngcontent-%COMP%]{flex:1;padding:.875rem 1.5rem;border-radius:10px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:none}.delete-modal-btn.cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.delete-modal-btn.cancel[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}.delete-modal-btn.confirm[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.delete-modal-btn.confirm[_ngcontent-%COMP%]:hover{background:#fde68a;color:#b45309}.delete-modal-btn.delete[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.delete-modal-btn.delete[_ngcontent-%COMP%]:hover:not(:disabled){background:#b91c1c}.delete-modal-btn.delete[_ngcontent-%COMP%]:disabled{background:#fca5a5;cursor:not-allowed}']})}return o})();function $t(o,m){o&1&&(v(),i(0,"svg",11),g(1,"path",18)(2,"path",19),a())}function qt(o,m){o&1&&(v(),i(0,"svg",11),g(1,"path",20)(2,"path",21),a())}function Yt(o,m){if(o&1&&(i(0,"div",3)(1,"div",4),l(2,"\u0422\u0435\u043C\u0430 \u043F\u0438\u0441\u044C\u043C\u0430"),a(),i(3,"div",9),l(4),a()()),o&2){let e=p(2);r(4),C(e.message.subject)}}function Qt(o,m){if(o&1&&(i(0,"div",3)(1,"div",4),l(2,"\u0428\u0430\u0431\u043B\u043E\u043D"),a(),i(3,"div",9)(4,"span",22),l(5),a()()()),o&2){let e=p(2);r(5),C(e.message.templateName)}}function Kt(o,m){if(o&1&&(i(0,"div",3)(1,"div",4),l(2,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u043B"),a(),i(3,"div",9)(4,"div",23),v(),i(5,"svg",11),g(6,"path",24)(7,"circle",25),a(),M(),i(8,"span"),l(9),a()()()()),o&2){let e=p(2);r(9),C(e.message.initiatedByUsername)}}function Zt(o,m){if(o&1&&(i(0,"div",2)(1,"div",3)(2,"div",4),l(3,"\u041F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044C"),a(),i(4,"div",5)(5,"div",6),_(6,$t,3,0,"svg",7)(7,qt,3,0,"svg",7),a(),i(8,"span"),l(9),a()()(),_(10,Yt,5,1,"div",8),i(11,"div",3)(12,"div",4),l(13,"\u0412\u0440\u0435\u043C\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438"),a(),i(14,"div",9)(15,"div",10),v(),i(16,"svg",11),g(17,"circle",12)(18,"path",13),a(),M(),i(19,"span"),l(20),a()()()(),i(21,"div",3)(22,"div",4),l(23,"\u0421\u0442\u0430\u0442\u0443\u0441"),a(),i(24,"div",9)(25,"app-badge",14),l(26),a()()(),_(27,Qt,6,1,"div",8)(28,Kt,10,1,"div",8),i(29,"div",15)(30,"div",4),l(31,"\u0421\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F"),a(),i(32,"div",16)(33,"pre",17),l(34),a()()()()),o&2){let e=p();r(5),F("whatsapp",e.message.type==="whatsapp")("email",e.message.type==="email"),r(),d("ngIf",e.message.type==="whatsapp"),r(),d("ngIf",e.message.type==="email"),r(2),C(e.message.recipient||"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D"),r(),d("ngIf",e.message.type==="email"&&e.message.subject),r(10),C(e.formatDateTime(e.message.sentAt)),r(5),d("badgeType",e.getStatusBadgeType(e.message.status)),r(),k(" ",e.getStatusLabel(e.message.status)," "),r(),d("ngIf",e.message.templateName),r(),d("ngIf",e.message.initiatedByUsername),r(6),C(e.message.message)}}var qe=(()=>{class o{visible=!1;message=null;visibleChange=new z;getModalTitle(){return this.message?this.message.type==="whatsapp"?"\u0414\u0435\u0442\u0430\u043B\u0438 WhatsApp \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F":"\u0414\u0435\u0442\u0430\u043B\u0438 Email \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F":"\u0414\u0435\u0442\u0430\u043B\u0438 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F"}formatDateTime(e){let t=new Date(e),n=t.toLocaleDateString("ru-RU",{day:"2-digit",month:"long",year:"numeric"}),s=t.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"});return`${n} \u0432 ${s}`}getStatusBadgeType(e){switch(e){case"sent":return"success";case"pending":return"warning";case"failed":return"danger";default:return"success"}}getStatusLabel(e){switch(e){case"sent":return"\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E";case"pending":return"\u041E\u0436\u0438\u0434\u0430\u0435\u0442";case"failed":return"\u041E\u0448\u0438\u0431\u043A\u0430";default:return e}}onClose(){this.visibleChange.emit(!1)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=O({type:o,selectors:[["app-message-details-modal"]],inputs:{visible:"visible",message:"message"},outputs:{visibleChange:"visibleChange"},decls:2,vars:4,consts:[[3,"visibleChange","visible","title","showCloseButton"],["class","message-details-content",4,"ngIf"],[1,"message-details-content"],[1,"detail-section"],[1,"detail-label"],[1,"detail-value","recipient-value"],[1,"recipient-icon"],["viewBox","0 0 24 24","fill","none",4,"ngIf"],["class","detail-section",4,"ngIf"],[1,"detail-value"],[1,"time-info"],["viewBox","0 0 24 24","fill","none"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","1.5"],["d","M12 6v6l4 2","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["size","medium",3,"badgeType"],[1,"detail-section","message-section"],[1,"message-content"],[1,"message-text"],["d","M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z","fill","currentColor"],["d","M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2 22l4.832-1.438A9.955 9.955 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2z","fill","currentColor"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M22 6l-10 7L2 6","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"template-badge"],[1,"sender-info"],["d","M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","7","r","4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"]],template:function(t,n){t&1&&(i(0,"app-modal",0),x("visibleChange",function(){return n.onClose()}),_(1,Zt,35,14,"div",1),a()),t&2&&(d("visible",n.visible)("title",n.getModalTitle())("showCloseButton",!0),r(),d("ngIf",n.message))},dependencies:[E,B,te,ne],styles:[".message-details-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:.5rem 0}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.detail-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px}.detail-value[_ngcontent-%COMP%]{font-size:.9375rem;color:#1f2937;font-weight:500}.recipient-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.recipient-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.recipient-icon.whatsapp[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);color:#25d366}.recipient-icon.email[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);color:#3b82f6}.recipient-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.time-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.time-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#64748b}.template-badge[_ngcontent-%COMP%]{display:inline-block;padding:.375rem .75rem;background:#f0fdf4;color:#16a34a;border-radius:8px;font-size:.875rem;font-weight:500}.sender-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.sender-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#64748b;flex-shrink:0}.message-section[_ngcontent-%COMP%]{margin-top:.5rem}.message-content[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:1rem;max-height:400px;overflow-y:auto}.message-text[_ngcontent-%COMP%]{margin:0;font-size:.9375rem;line-height:1.6;color:#1f2937;white-space:pre-wrap;word-wrap:break-word;font-family:inherit}.message-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.message-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.message-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.message-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"]})}return o})();function Xt(o,m){if(o&1&&(i(0,"app-badge",13),l(1),a()),o&2){let e=p();r(),k(" ",e.invitationHistory.length," ")}}function Jt(o,m){o&1&&(i(0,"div",14),v(),i(1,"svg",15),g(2,"path",16),a(),M(),i(3,"p",17),l(4,"\u0412\u044B \u0435\u0449\u0451 \u043D\u0438\u043A\u043E\u0433\u043E \u043D\u0435 \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0430\u043B\u0438"),a()())}function en(o,m){if(o&1&&(i(0,"span",35),l(1),a()),o&2){let e=p().$implicit;r(),k(" ",e.templateName," ")}}function tn(o,m){o&1&&(i(0,"span",36),l(1,"\u2014"),a())}function nn(o,m){if(o&1){let e=S();i(0,"tr")(1,"td")(2,"div",22),v(),i(3,"svg",23),g(4,"path",24),a(),M(),i(5,"span",25),l(6),a()()(),i(7,"td")(8,"span",26),l(9),a()(),i(10,"td"),_(11,en,2,1,"span",27)(12,tn,2,0,"span",28),a(),i(13,"td")(14,"span",29),l(15),a()(),i(16,"td")(17,"app-badge",30),l(18),a()(),i(19,"td")(20,"div",31)(21,"app-icon-button",32),x("onClick",function(){let n=f(e).$implicit,s=p(2);return h(s.openMessageDetails(n))}),v(),i(22,"svg",23),g(23,"path",33)(24,"circle",34),a()()()()()}if(o&2){let e=m.$implicit,t=p(2);r(6),C(t.getSafeClientName(e)),r(3),C(t.formatDate(e.createdAt||e.sentAt)),r(2),d("ngIf",e.templateName),r(),d("ngIf",!e.templateName),r(3),C(e.initiatedByUsername||"\u2014"),r(2),d("badgeType",t.getStatusBadgeType(e.status)),r(),k(" ",t.getStatusLabel(e.status)," ")}}function on(o,m){if(o&1&&(i(0,"app-paginated-table-wrapper",18,0)(2,"div",19)(3,"table",20)(4,"thead")(5,"tr")(6,"th"),l(7,"\u041F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044C"),a(),i(8,"th"),l(9,"\u0412\u0440\u0435\u043C\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438"),a(),i(10,"th"),l(11,"\u0428\u0430\u0431\u043B\u043E\u043D"),a(),i(12,"th"),l(13,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u043B"),a(),i(14,"th"),l(15,"\u0421\u0442\u0430\u0442\u0443\u0441"),a(),i(16,"th"),l(17,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),a()()(),i(18,"tbody"),_(19,nn,25,7,"tr",21),a()()()()),o&2){let e=G(1),t=p();d("paginationEnabled",!0)("data",t.invitationHistory)("defaultPageSize",15),r(19),d("ngForOf",e.paginatedData)}}var si=(()=>{class o{fb;store;user$;invitationForm;isSending=!1;successMessage="";errorMessage="";invitationHistory=[];messageTemplates=[];selectedTemplateId=null;showMessageDetailsModal=!1;selectedMessage=null;isLoading=!1;isLoadingTemplates=!1;templateTypes=[];templateVariables=[];whatsappIconSvg;pageHeaderService=W(ze);messageTemplatesService=W(Le);messagesService=W(He);toastService=W(_e);defaultMessage=`\u041F\u0440\u0438\u0432\u0435\u0442! \u{1F44B}

\u041F\u0440\u0438\u0433\u043B\u0430\u0448\u0430\u044E \u0442\u0435\u0431\u044F \u043F\u0440\u0438\u0441\u043E\u0435\u0434\u0438\u043D\u0438\u0442\u044C\u0441\u044F \u043A Westwood \u2014 \u044D\u0442\u043E \u043E\u0442\u043B\u0438\u0447\u043D\u0430\u044F \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0430 \u0434\u043B\u044F \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044F.

\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0441\u044F \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435:
https://westwood.app/register`;constructor(e,t){this.fb=e,this.store=t,this.user$=this.store.select(Ce),this.invitationForm=this.fb.group({message:[this.defaultMessage,[be.required]]}),this.whatsappIconSvg=`
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" fill="currentColor"/>
        <path d="M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2 22l4.832-1.438A9.955 9.955 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2z" fill="currentColor"/>
      </svg>
    `}ngOnInit(){this.pageHeaderService.setPageHeader("WhatsApp \u043A\u043E\u043C\u043C\u0443\u043D\u0438\u043A\u0430\u0446\u0438\u044F",[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",route:"/home"},{label:"\u041A\u043E\u043C\u043C\u0443\u043D\u0438\u043A\u0430\u0446\u0438\u044F"},{label:"WhatsApp"}]),this.loadHistory(),this.loadTemplates(),this.loadTemplateTypes(),this.loadTemplateVariables()}onSubmit(){if(this.invitationForm.valid){this.isSending=!0,this.errorMessage="",this.successMessage="";let e=this.invitationForm.get("message")?.value||"";setTimeout(()=>{try{let t=this.selectedTemplateId?this.messageTemplates.find(n=>n.id===this.selectedTemplateId):null;this.successMessage="\u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0433\u043E\u0442\u043E\u0432\u043E \u043A \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0435",this.loadHistory(),this.invitationForm.patchValue({message:this.defaultMessage}),this.selectedTemplateId=null}catch{this.errorMessage="\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430"}this.isSending=!1},600)}}onTemplateSelected(e){this.selectedTemplateId=e.id}onTemplateCreated(e){let t={id:e.id,name:e.name,type:e.type,content:e.content,createdAt:e.createdAt?.toISOString()};this.messageTemplatesService.createTemplate({name:t.name,type:t.type,content:t.content}).subscribe({next:n=>{let s=this.mapApiTemplateToFrontend(n);this.messageTemplates.push(s),this.toastService.success("\u0428\u0430\u0431\u043B\u043E\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D")},error:n=>{let s=n.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u0430";this.toastService.error(s)}})}onTemplateUpdated(e){let t={id:e.id,name:e.name,type:e.type,content:e.content};this.messageTemplatesService.updateTemplate(e.id,{name:t.name,type:t.type,content:t.content}).subscribe({next:n=>{let s=this.mapApiTemplateToFrontend(n),c=this.messageTemplates.findIndex(u=>u.id===e.id);c!==-1&&(this.messageTemplates[c]=s),this.toastService.success("\u0428\u0430\u0431\u043B\u043E\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D")},error:n=>{let s=n.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u0430";this.toastService.error(s)}})}onTemplateDeleted(e){this.messageTemplatesService.deleteTemplate(e).subscribe({next:()=>{this.messageTemplates=this.messageTemplates.filter(t=>t.id!==e),this.toastService.success("\u0428\u0430\u0431\u043B\u043E\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D")},error:t=>{let n=t.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u0448\u0430\u0431\u043B\u043E\u043D\u0430";this.toastService.error(n)}})}formatPhone(e){if(!e)return"\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D";let t=e.replace(/[^\d]/g,"");return t.length===11&&t.startsWith("7")?`+7 ${t.slice(1,4)} ${t.slice(4,7)}-${t.slice(7,9)}-${t.slice(9)}`:e}formatDate(e){if(!e)return"\u2014";let t=e instanceof Date?e:new Date(e);if(isNaN(t.getTime()))return"\u2014";let s=new Date().getTime()-t.getTime(),c=Math.floor(s/6e4),u=Math.floor(s/36e5);return c<1?"\u0422\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E":c<60?`${c} \u043C\u0438\u043D \u043D\u0430\u0437\u0430\u0434`:u<24?`${u} \u0447 \u043D\u0430\u0437\u0430\u0434`:t.toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}getStatusBadgeType(e){switch(e){case"sent":return"success";case"pending":return"warning";case"failed":return"danger";default:return"success"}}getStatusLabel(e){switch(e){case"sent":return"\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E";case"pending":return"\u041E\u0436\u0438\u0434\u0430\u0435\u0442";case"failed":return"\u041E\u0448\u0438\u0431\u043A\u0430";default:return e}}getTemplateTypeLabel(e){switch(e){case"bonus_accrued":return"\u041D\u0430\u0447\u0438\u0441\u043B\u0435\u043D\u0438\u0435 \u0431\u043E\u043D\u0443\u0441\u043E\u0432";case"bonus_expiration":return"\u0418\u0441\u0442\u0435\u0447\u0435\u043D\u0438\u0435 \u0431\u043E\u043D\u0443\u0441\u043E\u0432";default:return e}}openMessageDetails(e){let t=this.getSafeClientName(e);this.selectedMessage={id:e.id,type:"whatsapp",recipient:t,message:e.message,sentAt:e.createdAt||e.sentAt,status:e.status,templateName:e.templateName,initiatedByUsername:e.initiatedByUsername},this.showMessageDetailsModal=!0}resendInvitation(e,t){t&&t.stopPropagation(),this.invitationForm.patchValue({message:e.message}),window.scrollTo({top:0,behavior:"smooth"})}loadHistory(){this.isLoading=!0,this.messagesService.getMessagesByChannel("WHATSAPP").subscribe({next:e=>{this.invitationHistory=e.map(t=>this.mapMessageRecordToHistory(t)),this.isLoading=!1},error:e=>{let t=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0441\u0442\u043E\u0440\u0438\u0438 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439";this.toastService.error(t),this.isLoading=!1,this.invitationHistory=[]}})}loadTemplates(){this.isLoadingTemplates=!0,this.messageTemplatesService.getAllTemplates().subscribe({next:e=>{this.messageTemplates=e.map(t=>this.mapApiTemplateToFrontend(t)),this.isLoadingTemplates=!1},error:e=>{let t=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432";this.toastService.error(t),this.isLoadingTemplates=!1,this.messageTemplates=[]}})}mapMessageRecordToHistory(e){return{id:e.id,phone:"",clientName:e.clientName,message:e.messageContent,sentAt:e.sentAt?new Date(e.sentAt):new Date,createdAt:e.createdAt?new Date(e.createdAt):void 0,status:this.mapMessageStatus(e.status),templateId:void 0,templateName:void 0,templateType:void 0,type:"whatsapp",initiatedByUsername:e.initiatedByUsername}}mapApiTemplateToFrontend(e){return{id:e.id,name:e.name,type:e.type,content:e.content,createdAt:e.createdAt?new Date(e.createdAt):new Date}}mapMessageStatus(e){let t=e.toLowerCase();return t==="sent"||t==="delivered"?"sent":t==="pending"||t==="sending"?"pending":t==="failed"||t==="error"?"failed":"sent"}loadTemplateTypes(){this.messageTemplatesService.getTemplateTypes().subscribe({next:e=>{this.templateTypes=e},error:e=>{let t=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u0438\u043F\u043E\u0432 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432";this.toastService.error(t),this.templateTypes=[]}})}loadTemplateVariables(){this.messageTemplatesService.getTemplateVariables().subscribe({next:e=>{this.templateVariables=e.map(t=>({name:`{{${t.name}}}`,description:t.description}))},error:e=>{let t=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0445 \u0448\u0430\u0431\u043B\u043E\u043D\u043E\u0432";this.toastService.error(t),this.templateVariables=[]}})}getSafeClientName(e){let n=(e.clientName??"").replace(/null/gi,"").replace(/\s+/g," ").trim();return n||this.formatPhone(e.phone)}static \u0275fac=function(t){return new(t||o)(R(Fe),R(he))};static \u0275cmp=O({type:o,selectors:[["app-invitation-page"]],decls:14,vars:19,consts:[["paginatedTable",""],[1,"invitation-page"],[3,"formSubmit","templateSelected","templateCreated","templateUpdated","templateDeleted","invitationType","form","title","subtitle","iconSvg","iconColor","previewDescription","messageTemplates","isSending","successMessage","errorMessage","hideForm","templateTypes","templateVariables"],[1,"section-block","history-block"],[1,"section-title"],["viewBox","0 0 24 24","fill","none",1,"title-icon"],["d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"section-heading"],["badgeType","secondary","size","small","class","history-badge",4,"ngIf"],[1,"section-description"],["class","history-empty",4,"ngIf"],[3,"paginationEnabled","data","defaultPageSize",4,"ngIf"],[3,"visibleChange","visible","message"],["badgeType","secondary","size","small",1,"history-badge"],[1,"history-empty"],["viewBox","0 0 24 24","fill","none",1,"empty-icon"],["d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"empty-text"],[3,"paginationEnabled","data","defaultPageSize"],[1,"table-container"],[1,"history-table"],[4,"ngFor","ngForOf"],[1,"recipient-cell"],["viewBox","0 0 24 24","fill","none"],["d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"recipient-value"],[1,"time-value"],["class","template-name",4,"ngIf"],["class","no-template",4,"ngIf"],[1,"sender-value"],["size","small",3,"badgeType"],[1,"actions-cell"],["iconButtonType","ghost","size","small","tooltip","\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u0438",3,"onClick"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","12","r","3","stroke","currentColor","stroke-width","1.5"],[1,"template-name"],[1,"no-template"]],template:function(t,n){t&1&&(i(0,"div",1)(1,"app-invitation-form",2),x("formSubmit",function(){return n.onSubmit()})("templateSelected",function(c){return n.onTemplateSelected(c)})("templateCreated",function(c){return n.onTemplateCreated(c)})("templateUpdated",function(c){return n.onTemplateUpdated(c)})("templateDeleted",function(c){return n.onTemplateDeleted(c)}),a(),i(2,"div",3)(3,"div",4),v(),i(4,"svg",5),g(5,"path",6),a(),M(),i(6,"h3",7),l(7,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F"),a(),_(8,Xt,2,1,"app-badge",8),a(),i(9,"p",9),l(10,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439"),a(),_(11,Jt,5,0,"div",10)(12,on,20,4,"app-paginated-table-wrapper",11),a(),i(13,"app-message-details-modal",12),x("visibleChange",function(c){return n.showMessageDetailsModal=c}),a()()),t&2&&(r(),d("invitationType","whatsapp")("form",n.invitationForm)("title","\u041F\u0440\u0438\u0433\u043B\u0430\u0441\u0438 \u0434\u0440\u0443\u0433\u0430")("subtitle","\u041E\u0442\u043F\u0440\u0430\u0432\u044C \u043F\u0440\u0438\u0433\u043B\u0430\u0448\u0435\u043D\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 WhatsApp")("iconSvg",n.whatsappIconSvg)("iconColor","#25D366")("previewDescription","\u0422\u0430\u043A \u0431\u0443\u0434\u0435\u0442 \u0432\u044B\u0433\u043B\u044F\u0434\u0435\u0442\u044C \u0432\u0430\u0448\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0432 WhatsApp")("messageTemplates",n.messageTemplates)("isSending",n.isSending)("successMessage",n.successMessage)("errorMessage",n.errorMessage)("hideForm",!0)("templateTypes",n.templateTypes)("templateVariables",n.templateVariables),r(7),d("ngIf",n.invitationHistory.length),r(3),d("ngIf",n.invitationHistory.length===0),r(),d("ngIf",n.invitationHistory.length>0),r(),d("visible",n.showMessageDetailsModal)("message",n.selectedMessage))},dependencies:[E,Z,B,ee,ne,ve,$e,qe,Ae],styles:["[_nghost-%COMP%]{display:block;height:100%;margin:-2rem}.invitation-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;min-height:calc(100vh - 64px - 4rem);padding:2rem;background:linear-gradient(180deg,#f0fdf4,#f8fafc 50% 100%)}.section-block[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:1.5rem;box-shadow:0 1px 3px #0000000d}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;margin-bottom:.25rem}.title-icon[_ngcontent-%COMP%]{width:22px;height:22px;color:#25d366}.section-heading[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin:0}.section-description[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3af;margin:0 0 1.25rem}.history-badge[_ngcontent-%COMP%]{margin-left:auto}.history-empty[_ngcontent-%COMP%]{text-align:center;padding:2.5rem 1rem}.empty-icon[_ngcontent-%COMP%]{width:56px;height:56px;color:#d1d5db;margin:0 auto 1rem;display:block}.empty-text[_ngcontent-%COMP%]{font-size:.875rem;color:#9ca3af;margin:0}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px #0000000d}.history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.history-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc}.history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem 1.5rem;text-align:left;font-size:.875rem;font-weight:600;color:#64748b;border-bottom:1px solid #e2e8f0}.history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #f1f5f9}.history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.recipient-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.recipient-cell[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#16a34a;flex-shrink:0}.recipient-value[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:#1f2937}.time-value[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.template-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.375rem .75rem;background:#f0fdf4;color:#16a34a;border-radius:8px;font-size:.875rem;font-weight:500}.template-name[_ngcontent-%COMP%]{font-size:.875rem;color:#475569;font-weight:500}.no-template[_ngcontent-%COMP%]{font-size:.875rem;color:#94a3b8;font-style:italic}.sender-value[_ngcontent-%COMP%]{font-size:.875rem;color:#475569;font-weight:500}.actions-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}@media (max-width: 768px){[_nghost-%COMP%]{margin:-1rem}.invitation-page[_ngcontent-%COMP%]{padding:1rem}}"]})}return o})();export{si as InvitationPageComponent};
