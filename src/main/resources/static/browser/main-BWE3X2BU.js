import{a as w,b as Ye,c as T,d as Qe}from"./chunk-CGUCJOJN.js";import{a as Q,b as yt,c as It,d as xt,e as G,f as Ct,g as wt,h as it,i as Tt,j as Ot,k as nt,l as Et,m as bt,n as st,o as rt,p as V,q as to,r as Pt,s as at,t as _t,u as Mt,v as ct,w as kt,x as eo}from"./chunk-NAUVD23N.js";import{b as vt,d as Y}from"./chunk-D64DWGP3.js";import{a as ut}from"./chunk-3B24VZJ2.js";import{a as St}from"./chunk-TMJHU5AU.js";import{a as Ge,d as Zt,e as At,f as Ve,i as He,j as Ze,k as Wt,l as We,m as Ke,n as B,q as Xe,r as f,s as Je}from"./chunk-KOV5UQCB.js";import{a as qe}from"./chunk-PQPVKKOU.js";import{Aa as F,B as U,Ba as K,Bb as Ue,Cb as Be,F as fe,Fa as Pe,G as ge,Ga as gt,H as Ae,Ha as _e,I as et,J as dt,K as j,L as Se,O as L,Oa as Me,Pa as ke,Q as ot,R as O,S as v,U as ve,Y as ye,Z as Ie,_ as mt,a as l,aa as xe,ab as $e,b as h,c as Bt,da as Ce,ea as we,f as ce,fa as Te,g as ue,h as pe,hb as Re,i as le,ib as je,k as M,ka as H,l as Gt,m as he,n as I,na as Z,o as ht,ob as X,pb as Le,r as Vt,ra as ft,rb as De,s as P,sb as Fe,t as b,ta as Oe,tb as Ne,u as de,v as me,va as W,w as z,xa as Ee,xb as ze,y as Ht,ya as be,yb as J,za as D}from"./chunk-7F5AWDR7.js";var lt="PERFORM_ACTION",Fo="REFRESH",ao="RESET",co="ROLLBACK",uo="COMMIT",po="SWEEP",lo="TOGGLE_ACTION",No="SET_ACTIONS_ACTIVE",ho="JUMP_TO_STATE",mo="JUMP_TO_ACTION",re="IMPORT_STATE",fo="LOCK_CHANGES",go="PAUSE_RECORDING",q=class{constructor(i,e){if(this.action=i,this.timestamp=e,this.type=lt,typeof i.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Kt=class{constructor(){this.type=Fo}},Xt=class{constructor(i){this.timestamp=i,this.type=ao}},Jt=class{constructor(i){this.timestamp=i,this.type=co}},Yt=class{constructor(i){this.timestamp=i,this.type=uo}},Qt=class{constructor(){this.type=po}},qt=class{constructor(i){this.id=i,this.type=lo}};var te=class{constructor(i){this.index=i,this.type=ho}},ee=class{constructor(i){this.actionId=i,this.type=mo}},oe=class{constructor(i){this.nextLiftedState=i,this.type=re}},ie=class{constructor(i){this.status=i,this.type=fo}},ne=class{constructor(i){this.status=i,this.type=go}};var Lt=new ot("@ngrx/store-devtools Options"),oo=new ot("@ngrx/store-devtools Initial Config");function Ao(){return null}var zo="NgRx Store DevTools";function Uo(t){let i={maxAge:!1,monitor:Ao,actionSanitizer:void 0,stateSanitizer:void 0,name:zo,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,o=e.logOnly?{pause:!0,export:!0,test:!0}:!1,n=e.features||o||i.features;n.import===!0&&(n.import="custom");let a=Object.assign({},i,{features:n},e);if(a.maxAge&&a.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${a.maxAge}`);return a}function io(t,i){return t.filter(e=>i.indexOf(e)<0)}function So(t){let{computedStates:i,currentStateIndex:e}=t;if(e>=i.length){let{state:n}=i[i.length-1];return n}let{state:o}=i[e];return o}function pt(t){return new q(t,+Date.now())}function Bo(t,i){return Object.keys(i).reduce((e,o)=>{let n=Number(o);return e[n]=vo(t,i[n],n),e},{})}function vo(t,i,e){return h(l({},i),{action:t(i.action,e)})}function Go(t,i){return i.map((e,o)=>({state:yo(t,e.state,o),error:e.error}))}function yo(t,i,e){return t(i,e)}function Io(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function Vo(t,i,e,o){let n=[],a={},m=[];return t.stagedActionIds.forEach((u,g)=>{let s=t.actionsById[u];s&&(g&&ae(t.computedStates[g],s,i,e,o)||(a[u]=s,n.push(u),m.push(t.computedStates[g])))}),h(l({},t),{stagedActionIds:n,actionsById:a,computedStates:m})}function ae(t,i,e,o,n){let a=e&&!e(t,i.action),m=o&&!i.action.type.match(o.map(g=>no(g)).join("|")),u=n&&i.action.type.match(n.map(g=>no(g)).join("|"));return a||m||u}function no(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xo(t){return{ngZone:t?v(we):null,connectInZone:t}}var Dt=(()=>{class t extends At{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=xe(t)))(n||t)}})()}static{this.\u0275prov=L({token:t,factory:t.\u0275fac})}}return t})(),$t={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},se=new ot("@ngrx/store-devtools Redux Devtools Extension"),Co=(()=>{class t{constructor(e,o,n){this.config=o,this.dispatcher=n,this.zoneConfig=xo(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,o){if(this.devtoolsExtension)if(e.type===lt){if(o.isLocked||o.isPaused)return;let n=So(o);if(Io(this.config)&&ae(n,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?yo(this.config.stateSanitizer,n,o.currentStateIndex):n,m=this.config.actionSanitizer?vo(this.config.actionSanitizer,e,o.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(m,a))}else{let n=h(l({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?Bo(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?Go(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Bt(e=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(n=>e.next(n)),o.unsubscribe}):pe}createActionStreams(){let e=this.createChangesObservable().pipe(ge()),o=e.pipe(P(s=>s.type===$t.START)),n=e.pipe(P(s=>s.type===$t.STOP)),a=e.pipe(P(s=>s.type===$t.DISPATCH),I(s=>this.unwrapAction(s.payload)),de(s=>s.type===re?this.dispatcher.pipe(P(x=>x.type===Wt),he(1e3),me(1e3),I(()=>s),b(()=>M(s)),z(1)):M(s))),u=e.pipe(P(s=>s.type===$t.ACTION),I(s=>this.unwrapAction(s.payload))).pipe(dt(n)),g=a.pipe(dt(n));this.start$=o.pipe(dt(n)),this.actions$=this.start$.pipe(et(()=>u)),this.liftedActions$=this.start$.pipe(et(()=>g))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let o={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(o.maxAge=e.maxAge),o}sendToReduxDevtools(e){try{e()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}static{this.\u0275fac=function(o){return new(o||t)(O(se),O(Lt),O(Dt))}}static{this.\u0275prov=L({token:t,factory:t.\u0275fac})}}return t})(),jt={type:Zt},Ho="@ngrx/store-devtools/recompute",Zo={type:Ho};function wo(t,i,e,o,n){if(o)return{state:e,error:"Interrupted by an error up the chain"};let a=e,m;try{a=t(e,i)}catch(u){m=u.toString(),n.handleError(u)}return{state:a,error:m}}function Rt(t,i,e,o,n,a,m,u,g){if(i>=t.length&&t.length===a.length)return t;let s=t.slice(0,i),x=a.length-(g?1:0);for(let r=i;r<x;r++){let d=a[r],E=n[d].action,p=s[r-1],c=p?p.state:o,k=p?p.error:void 0,$=m.indexOf(d)>-1?p:wo(e,E,c,k,u);s.push($)}return g&&s.push(t[t.length-1]),s}function Wo(t,i){return{monitorState:i(void 0,{}),nextActionId:1,actionsById:{0:pt(jt)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Ko(t,i,e,o,n={}){return a=>(m,u)=>{let{monitorState:g,actionsById:s,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:E,currentStateIndex:p,computedStates:c,isLocked:k,isPaused:C}=m||i;m||(s=Object.create(s));function $(y){let S=y,N=r.slice(1,S+1);for(let _=0;_<N.length;_++)if(c[_+1].error){S=_,N=r.slice(1,S+1);break}else delete s[N[_]];d=d.filter(_=>N.indexOf(_)===-1),r=[0,...r.slice(S+1)],E=c[S].state,c=c.slice(S),p=p>S?p-S:0}function R(){s={0:pt(jt)},x=1,r=[0],d=[],E=c[p].state,p=0,c=[]}let A=0;switch(u.type){case fo:{k=u.status,A=1/0;break}case go:{C=u.status,C?(r=[...r,x],s[x]=new q({type:"@ngrx/devtools/pause"},+Date.now()),x++,A=r.length-1,c=c.concat(c[c.length-1]),p===r.length-2&&p++,A=1/0):R();break}case ao:{s={0:pt(jt)},x=1,r=[0],d=[],E=t,p=0,c=[];break}case uo:{R();break}case co:{s={0:pt(jt)},x=1,r=[0],d=[],p=0,c=[];break}case lo:{let{id:y}=u;d.indexOf(y)===-1?d=[y,...d]:d=d.filter(N=>N!==y),A=r.indexOf(y);break}case No:{let{start:y,end:S,active:N}=u,_=[];for(let Ut=y;Ut<S;Ut++)_.push(Ut);N?d=io(d,_):d=[...d,..._],A=r.indexOf(y);break}case ho:{p=u.index,A=1/0;break}case mo:{let y=r.indexOf(u.actionId);y!==-1&&(p=y),A=1/0;break}case po:{r=io(r,d),d=[],p=Math.min(p,r.length-1);break}case lt:{if(k)return m||i;if(C||m&&ae(m.computedStates[p],u,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let S=c[c.length-1];c=[...c.slice(0,-1),wo(a,u.action,S.state,S.error,e)],A=1/0;break}n.maxAge&&r.length===n.maxAge&&$(1),p===r.length-1&&p++;let y=x++;s[y]=u,r=[...r,y],A=r.length-1;break}case re:{({monitorState:g,actionsById:s,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:E,currentStateIndex:p,computedStates:c,isLocked:k,isPaused:C}=u.nextLiftedState);break}case Zt:{A=0,n.maxAge&&r.length>n.maxAge&&(c=Rt(c,A,a,E,s,r,d,e,C),$(r.length-n.maxAge),A=1/0);break}case Wt:{if(c.filter(S=>S.error).length>0)A=0,n.maxAge&&r.length>n.maxAge&&(c=Rt(c,A,a,E,s,r,d,e,C),$(r.length-n.maxAge),A=1/0);else{if(!C&&!k){p===r.length-1&&p++;let S=x++;s[S]=new q(u,+Date.now()),r=[...r,S],A=r.length-1,c=Rt(c,A,a,E,s,r,d,e,C)}c=c.map(S=>h(l({},S),{state:a(S.state,Zo)})),p=r.length-1,n.maxAge&&r.length>n.maxAge&&$(r.length-n.maxAge),A=1/0}break}default:{A=1/0;break}}return c=Rt(c,A,a,E,s,r,d,e,C),g=o(g,u),{monitorState:g,actionsById:s,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:E,currentStateIndex:p,computedStates:c,isLocked:k,isPaused:C}}}var so=(()=>{class t{constructor(e,o,n,a,m,u,g,s){let x=Wo(g,s.monitor),r=Ko(g,x,u,s.monitor,s),d=Vt(Vt(o.asObservable().pipe(Ae(1)),a.actions$).pipe(I(pt)),e,a.liftedActions$).pipe(le(ue)),E=n.pipe(I(r)),p=xo(s.connectInZone),c=new ce(1);this.liftedStateSubscription=d.pipe(Se(E),ro(p),fe(({state:$},[R,A])=>{let y=A($,R);return R.type!==lt&&Io(s)&&(y=Vo(y,s.predicate,s.actionsSafelist,s.actionsBlocklist)),a.notify(R,y),{state:y,action:R}},{state:x,action:null})).subscribe(({state:$,action:R})=>{if(c.next($),R.type===lt){let A=R.action;m.next(A)}}),this.extensionStartSubscription=a.start$.pipe(ro(p)).subscribe(()=>{this.refresh()});let k=c.asObservable(),C=k.pipe(I(So));Object.defineProperty(C,"state",{value:Ge(C,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=k,this.state=C}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new q(e,+Date.now()))}refresh(){this.dispatch(new Kt)}reset(){this.dispatch(new Xt(+Date.now()))}rollback(){this.dispatch(new Jt(+Date.now()))}commit(){this.dispatch(new Yt(+Date.now()))}sweep(){this.dispatch(new Qt)}toggleAction(e){this.dispatch(new qt(e))}jumpToAction(e){this.dispatch(new ee(e))}jumpToState(e){this.dispatch(new te(e))}importState(e){this.dispatch(new oe(e))}lockChanges(e){this.dispatch(new ie(e))}pauseRecording(e){this.dispatch(new ne(e))}static{this.\u0275fac=function(o){return new(o||t)(O(Dt),O(At),O(He),O(Co),O(We),O(Te),O(Ve),O(Lt))}}static{this.\u0275prov=L({token:t,factory:t.\u0275fac})}}return t})();function ro({ngZone:t,connectInZone:i}){return e=>i?new Bt(o=>e.subscribe({next:n=>t.run(()=>o.next(n)),error:n=>t.run(()=>o.error(n)),complete:()=>t.run(()=>o.complete())})):e}var Xo=new ot("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Jo(t,i){return!!t||i.monitor!==Ao}function Yo(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function Qo(t){return t.state}function To(t={}){return ve([Co,Dt,so,{provide:oo,useValue:t},{provide:Xo,deps:[se,Lt],useFactory:Jo},{provide:se,useFactory:Yo},{provide:Lt,deps:[oo],useFactory:Uo},{provide:Ke,deps:[so],useFactory:Qo},{provide:Ze,useExisting:Dt}])}function ti(t,i){t&1&&(mt(),D(0,"svg",6),K(1,"circle",8)(2,"path",9),F())}function ei(t,i){t&1&&(mt(),D(0,"svg",6),K(1,"circle",8)(2,"path",10),F())}var Oo=(()=>{class t{message="";type="success";duration=3e3;closed=new Ce;visible=!1;hiding=!1;timeoutId;ngOnInit(){setTimeout(()=>{this.visible=!0},10),this.duration>0&&(this.timeoutId=window.setTimeout(()=>{this.close()},this.duration))}ngOnDestroy(){this.timeoutId&&clearTimeout(this.timeoutId)}onClose(){this.close()}close(){this.hiding=!0,setTimeout(()=>{this.closed.emit()},300)}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=Z({type:t,selectors:[["app-toast"]],inputs:{message:"message",type:"type",duration:"duration"},outputs:{closed:"closed"},decls:10,vars:9,consts:[[1,"toast"],[1,"toast-content"],[1,"toast-icon"],["viewBox","0 0 24 24","fill","none",4,"ngIf"],[1,"toast-message"],["iconButtonType","ghost","size","small",3,"onClick"],["viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M9 12l2 2 4-4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 9l-6 6M9 9l6 6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(o,n){o&1&&(D(0,"div",0)(1,"div",1)(2,"div",2),ft(3,ti,3,0,"svg",3)(4,ei,3,0,"svg",3),F(),D(5,"div",4),Me(6),F(),D(7,"app-icon-button",5),gt("onClick",function(){return n.onClose()}),mt(),D(8,"svg",6),K(9,"path",7),F()()()()),o&2&&(be(n.type),Ee("show",n.visible)("hiding",n.hiding),H(3),W("ngIf",n.type==="success"),H(),W("ngIf",n.type==="error"),H(2),ke(n.message))},dependencies:[X,je,qe],styles:[".toast[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:300px;max-width:400px;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #00000026;margin-bottom:.75rem;opacity:0;transform:translate(100%);transition:all .3s cubic-bezier(.4,0,.2,1);border-left:4px solid}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.hiding[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.toast.success[_ngcontent-%COMP%]{border-left-color:#16a34a}.toast.error[_ngcontent-%COMP%]{border-left-color:#dc2626}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.toast-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.toast.success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#16a34a}.toast.error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#dc2626}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:.9375rem;line-height:1.5;color:#1f2937;font-weight:500}[_nghost-%COMP%]     app-icon-button{flex-shrink:0}[_nghost-%COMP%]     app-icon-button svg{width:16px;height:16px;color:#64748b}"]})}return t})();function oi(t,i){if(t&1){let e=Pe();D(0,"app-toast",2),gt("closed",function(){let n=ye(e).$implicit,a=_e();return Ie(a.removeToast(n.id))}),F()}if(t&2){let e=i.$implicit;W("message",e.message)("type",e.type)("duration",e.duration)}}var Eo=(()=>{class t{toastService=v(St);toasts=[];subscription;ngOnInit(){this.subscription=this.toastService.toasts$.subscribe(e=>{this.toasts=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}removeToast(e){this.toastService.remove(e)}trackByToastId(e,o){return o.id}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=Z({type:t,selectors:[["app-toast-container"]],decls:2,vars:2,consts:[[1,"toast-container"],[3,"message","type","duration","closed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"closed","message","type","duration"]],template:function(o,n){o&1&&(D(0,"div",0),ft(1,oi,1,3,"app-toast",1),F()),o&2&&(H(),W("ngForOf",n.toasts)("ngForTrackBy",n.trackByToastId))},dependencies:[X,Re,Oo],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:1.5rem;right:1.5rem;z-index:10000;display:flex;flex-direction:column;align-items:flex-end;pointer-events:none}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 768px){.toast-container[_ngcontent-%COMP%]{top:1rem;right:1rem;left:1rem;align-items:stretch}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{max-width:100%}}"]})}return t})();var bo=(()=>{class t{title="westwood-frontend";static \u0275fac=function(o){return new(o||t)};static \u0275cmp=Z({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(o,n){o&1&&K(0,"router-outlet")(1,"app-toast-container")},dependencies:[X,ze,Eo],encapsulation:2})}return t})();var Po=(t,i)=>{let e=v(J),o=v(B);return ht([o.select(Y),o.select(vt)]).pipe(P(([n])=>n),z(1),I(([,n])=>n?!0:(e.navigate(["/auth/login"],{queryParams:{returnUrl:i.url}}),!1)))};var _o=()=>{let t=v(J),i=v(B);return ht([i.select(Y),i.select(vt)]).pipe(P(([e])=>e),z(1),I(([,e])=>e?(t.navigate(["/home"]),!1):!0))};var Mo=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"auth",loadChildren:()=>import("./chunk-JIAOKQC4.js").then(t=>t.AUTH_ROUTES),canActivate:[_o]},{path:"",loadComponent:()=>import("./chunk-W2NSTRXE.js").then(t=>t.MainLayoutWrapperComponent),canActivate:[Po],children:[{path:"home",loadComponent:()=>import("./chunk-EO47OSMS.js").then(t=>t.HomePageComponent)},{path:"communications",children:[{path:"",redirectTo:"whatsapp",pathMatch:"full"},{path:"whatsapp",loadComponent:()=>import("./chunk-3QOY4I2F.js").then(t=>t.InvitationPageComponent)}]},{path:"bonus-program",loadComponent:()=>import("./chunk-MLUGHMLP.js").then(t=>t.BonusProgramPageComponent)},{path:"clients",loadComponent:()=>import("./chunk-6HJIF75V.js").then(t=>t.ClientsPageComponent)},{path:"clients/:id",loadComponent:()=>import("./chunk-WSPQ2KRU.js").then(t=>t.ProfilePageComponent)},{path:"payments",loadComponent:()=>import("./chunk-NPZFNPEM.js").then(t=>t.PaymentsPageComponent)},{path:"users",loadComponent:()=>import("./chunk-AFWGRYXE.js").then(t=>t.UsersPageComponent)},{path:"users/:id",loadComponent:()=>import("./chunk-OE3BQQ5B.js").then(t=>t.UserProfilePageComponent)},{path:"profile",loadComponent:()=>import("./chunk-P744JCI5.js").then(t=>t.AccountPageComponent)}]},{path:"**",redirectTo:"/home"}];var Ft={user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,error:null},$o=Je(Ft,f(Q,t=>h(l({},t),{isLoading:!0,error:null})),f(yt,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,isInitialized:!0,error:null})),f(It,t=>h(l({},t),{user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0,error:null})),f(xt,t=>h(l({},t),{isLoading:!0,error:null})),f(G,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Ct,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i,isAuthenticated:!1,user:null})),f(wt,t=>h(l({},t),{isLoading:!0,error:null})),f(it,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Tt,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(Ot,t=>h(l({},t),{isLoading:!0,error:null})),f(nt,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Et,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(bt,t=>h(l({},t),{isLoading:!0})),f(st,t=>h(l({},Ft),{isInitialized:!0})),f(rt,t=>h(l({},Ft),{isInitialized:!0})),f(V,t=>h(l({},Ft),{isInitialized:!0})),f(to,t=>h(l({},t),{error:null})),f(Pt,t=>h(l({},t),{isLoading:!0,error:null})),f(at,t=>h(l({},t),{isLoading:!1,error:null})),f(_t,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(Mt,t=>h(l({},t),{isLoading:!0,error:null})),f(ct,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(kt,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(eo,(t,{user:i})=>h(l({},t),{user:i})));var Ro={auth:$o};var Nt=(()=>{class t{http;apiUrl=`${ut.apiUrl}/auth`;constructor(e){this.http=e}login(e){return console.log("[AuthService] POST /auth/login",e),this.http.post(`${this.apiUrl}/login`,e)}register(e){return console.log("[AuthService] POST /auth/register",e),this.http.post(`${this.apiUrl}/register`,e)}activate(e){return this.http.post(`${this.apiUrl}/activate`,e)}me(){return this.http.get(`${this.apiUrl}/me`)}refresh(){return this.http.post(`${this.apiUrl}/refresh`,{})}logout(){return this.http.post(`${this.apiUrl}/logout`,{})}forgotPassword(e){return console.log("[AuthService] POST /auth/forgot-password",e),this.http.post(`${this.apiUrl}/forgot-password`,e)}resetPassword(e){return console.log("[AuthService] POST /auth/reset-password",{token:e.token,password:"***"}),this.http.post(`${this.apiUrl}/reset-password`,e)}static \u0275fac=function(o){return new(o||t)(O(De))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var jo=(()=>{class t{actions$=v(Ye);authService=v(Nt);router=v(J);toastService=v(St);initAuth$=w(()=>this.actions$.pipe(T(Q),U(()=>this.authService.me().pipe(I(e=>yt({user:e})),b(()=>M(It()))))));login$=w(()=>this.actions$.pipe(T(xt),U(({credentials:e})=>this.authService.login(e).pipe(I(o=>G({user:o})),b(o=>M(Ct({error:o.error?.message||o.message||"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C"})))))));loginSuccess$=w(()=>this.actions$.pipe(T(G),j(()=>{this.router.navigate(["/home"])})),{dispatch:!1});register$=w(()=>this.actions$.pipe(T(wt),U(({data:e})=>this.authService.register(e).pipe(I(o=>it({user:o})),b(o=>M(Tt({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})))))));registerSuccess$=w(()=>this.actions$.pipe(T(it),j(()=>{this.router.navigate(["/home"])})),{dispatch:!1});activateAccount$=w(()=>this.actions$.pipe(T(Ot),U(({data:e})=>this.authService.activate(e).pipe(I(o=>nt({user:o})),b(o=>M(Et({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438"})))))));activateAccountSuccess$=w(()=>this.actions$.pipe(T(nt),j(()=>{this.toastService.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D!")}),Ht(500),j(()=>{this.router.navigate(["/home"])})),{dispatch:!1});logout$=w(()=>this.actions$.pipe(T(bt),U(()=>this.authService.logout().pipe(I(()=>st()),b(e=>M(rt({error:e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u044B\u0445\u043E\u0434\u0430"})))))));logoutSuccess$=w(()=>this.actions$.pipe(T(st,rt),j(()=>{this.router.navigate(["/auth/login"])})),{dispatch:!1});forgotPassword$=w(()=>this.actions$.pipe(T(Pt),U(({data:e})=>this.authService.forgotPassword(e).pipe(I(()=>at()),b(o=>{let n=o.error?.message||o.message||(o.status===404?"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0441 \u0442\u0430\u043A\u0438\u043C email \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D":null)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u043D\u0430 \u0441\u0431\u0440\u043E\u0441 \u043F\u0430\u0440\u043E\u043B\u044F";return M(_t({error:n}))})))));forgotPasswordSuccess$=w(()=>this.actions$.pipe(T(at),j(()=>{this.toastService.success("\u041F\u0438\u0441\u044C\u043C\u043E \u0434\u043B\u044F \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u0432\u0430\u0448\u0443 \u043F\u043E\u0447\u0442\u0443")})),{dispatch:!1});resetPassword$=w(()=>this.actions$.pipe(T(Mt),U(({data:e})=>this.authService.resetPassword(e).pipe(I(o=>ct({user:o})),b(o=>M(kt({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"})))))));resetPasswordSuccess$=w(()=>this.actions$.pipe(T(ct),j(()=>{this.toastService.success("\u041F\u0430\u0440\u043E\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D!")}),Ht(500),j(()=>{this.router.navigate(["/home"])})),{dispatch:!1});sessionExpired$=w(()=>this.actions$.pipe(T(V),j(()=>{this.router.navigate(["/auth/login"],{queryParams:{sessionExpired:!0}})})),{dispatch:!1});static \u0275fac=function(o){return new(o||t)};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})();var zt=!1,Lo=(t,i)=>{let e=v(B),o=v(Nt),n=!1;try{if(t.url.startsWith(ut.apiUrl)&&(n=!0),t.url.includes("/api/v1/")&&(n=!0),t.url.startsWith("http")){let m=new URL(t.url).origin,u=new URL(ut.apiUrl).origin;m===u&&(n=!0)}}catch{(t.url.includes("herokuapp.com")||t.url.includes("westwood"))&&(n=!0)}let a=n?t.clone({withCredentials:!0}):t;return i(a).pipe(b(m=>{if(m.status===401&&n){let u=t.url.includes("/auth/login")||t.url.includes("/auth/register")||t.url.includes("/auth/me")||t.url.includes("/auth/forgot-password")||t.url.includes("/auth/reset-password")||t.url.includes("/auth/activate")||t.url.includes("/auth/refresh");if(!u&&!zt)return zt=!0,console.log("[AuthInterceptor] Access token expired, attempting refresh..."),o.refresh().pipe(et(g=>(zt=!1,console.log("[AuthInterceptor] Token refreshed successfully, retrying request"),e.dispatch(G({user:g})),i(a))),b(g=>(zt=!1,console.log("[AuthInterceptor] Token refresh failed, session expired"),e.dispatch(V()),Gt(()=>g))));u||e.dispatch(V())}return Gt(()=>m)}))};var Do=(()=>{class t{store=v(B);initializeApp(){return new Promise(e=>{this.store.dispatch(Q()),this.store.select(Y).pipe(P(o=>o),z(1)).subscribe(()=>{e()})})}static \u0275fac=function(o){return new(o||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ni(){let t=v(Do);return()=>t.initializeApp()}Le(bo,{providers:[Ue(Mo,Be({scrollPositionRestoration:"top",anchorScrolling:"enabled"})),Fe(Ne([Lo])),Xe(Ro),Qe([jo]),To({maxAge:25,logOnly:!$e(),autoPause:!0,trace:!1,traceLimit:75}),{provide:Oe,useFactory:ni,multi:!0}]}).catch(t=>console.error(t));
