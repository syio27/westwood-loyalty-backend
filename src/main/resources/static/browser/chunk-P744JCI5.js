import{a as Q}from"./chunk-TKABTXOR.js";import{a as K}from"./chunk-7HAO4Z2V.js";import{a as X}from"./chunk-KHO44KZO.js";import{a as J}from"./chunk-3B24VZJ2.js";import{a as U}from"./chunk-TMJHU5AU.js";import{c as j,e as R,g as H,t as G,v as q}from"./chunk-2HM6BEQO.js";import{a as W}from"./chunk-PQPVKKOU.js";import{$ as y,Aa as t,Ba as x,Db as L,Fa as h,Ga as b,Ha as d,O as k,Oa as a,Pa as m,Qa as _,R as O,S as M,Ta as C,Ua as w,Va as v,Y as g,Ya as D,Z as f,_ as P,hb as B,ib as V,ka as o,na as I,ob as N,ra as p,rb as F,va as l,xa as T,ya as A,za as n,zb as z}from"./chunk-7F5AWDR7.js";var Y=(()=>{class i{http;apiUrl=`${J.apiUrl}/user/profile`;constructor(e){this.http=e,console.log("[ProfileService] Initialized with API URL:",this.apiUrl)}getProfile(){return console.log("[ProfileService] GET",this.apiUrl),this.http.get(this.apiUrl)}updateProfile(e){return this.http.put(this.apiUrl,e)}changePassword(e){return this.http.put(`${this.apiUrl}/password`,e)}getUserTransactions(){return this.http.get(`${this.apiUrl}/transactions`)}static \u0275fac=function(s){return new(s||i)(O(F))};static \u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var $=i=>["/clients",i];function ee(i,u){i&1&&(n(0,"div",3),x(1,"app-loader"),t())}function te(i,u){if(i&1&&(n(0,"p",58),a(1),t()),i&2){let e=d(2);o(),m(e.profile.phone)}}function ne(i,u){if(i&1){let e=h();n(0,"app-icon-button",59),b("onClick",function(){g(e);let r=d(2);return f(r.startEditPersonal())}),P(),n(1,"svg",60),x(2,"path",61)(3,"path",62),t()()}}function ie(i,u){if(i&1){let e=h();n(0,"div",63)(1,"app-button",64),b("onClick",function(){g(e);let r=d(2);return f(r.cancelEditPersonal())}),a(2," \u041E\u0442\u043C\u0435\u043D\u0430 "),t(),n(3,"app-button",65),b("onClick",function(){g(e);let r=d(2);return f(r.savePersonal())}),a(4," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),t()()}if(i&2){let e=d(2);o(),l("disabled",e.isSavingPersonal),o(2),l("loading",e.isSavingPersonal)}}function oe(i,u){if(i&1&&(n(0,"span",38),a(1),t()),i&2){let e=d(2);o(),m(e.profile.firstName)}}function ae(i,u){if(i&1){let e=h();n(0,"input",66),v("ngModelChange",function(r){g(e);let c=d(2);return w(c.editedPersonal.firstName,r)||(c.editedPersonal.firstName=r),f(r)}),t()}if(i&2){let e=d(2);C("ngModel",e.editedPersonal.firstName)}}function re(i,u){if(i&1&&(n(0,"span",38),a(1),t()),i&2){let e=d(2);o(),m(e.profile.lastName)}}function se(i,u){if(i&1){let e=h();n(0,"input",67),v("ngModelChange",function(r){g(e);let c=d(2);return w(c.editedPersonal.lastName,r)||(c.editedPersonal.lastName=r),f(r)}),t()}if(i&2){let e=d(2);C("ngModel",e.editedPersonal.lastName)}}function de(i,u){if(i&1&&(n(0,"span",38),a(1),t()),i&2){let e=d(2);o(),m(e.profile.email)}}function le(i,u){if(i&1){let e=h();n(0,"input",68),v("ngModelChange",function(r){g(e);let c=d(2);return w(c.editedPersonal.email,r)||(c.editedPersonal.email=r),f(r)}),t()}if(i&2){let e=d(2);C("ngModel",e.editedPersonal.email)}}function ue(i,u){if(i&1&&(n(0,"span",38),a(1),t()),i&2){let e=d(2);o(),m(e.profile.phone||"\u2014")}}function ce(i,u){if(i&1){let e=h();n(0,"input",69),v("ngModelChange",function(r){g(e);let c=d(2);return w(c.editedPersonal.phone,r)||(c.editedPersonal.phone=r),f(r)}),t()}if(i&2){let e=d(2);C("ngModel",e.editedPersonal.phone)}}function pe(i,u){if(i&1){let e=h();n(0,"app-icon-button",70),b("onClick",function(){g(e);let r=d(2);return f(r.startEditPassword())}),P(),n(1,"svg",60),x(2,"path",61)(3,"path",62),t()()}}function me(i,u){if(i&1){let e=h();n(0,"div",63)(1,"app-button",64),b("onClick",function(){g(e);let r=d(2);return f(r.cancelEditPassword())}),a(2," \u041E\u0442\u043C\u0435\u043D\u0430 "),t(),n(3,"app-button",71),b("onClick",function(){g(e);let r=d(2);return f(r.savePassword())}),a(4," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),t()()}if(i&2){let e=d(2);o(),l("disabled",e.isSavingPassword),o(2),l("disabled",!e.isPasswordFormValid())("loading",e.isSavingPassword)}}function ge(i,u){i&1&&(n(0,"div",30)(1,"div",31)(2,"span",32),a(3,"\u041F\u0430\u0440\u043E\u043B\u044C:"),t(),n(4,"span",38),a(5,"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"),t()()())}function fe(i,u){if(i&1&&(n(0,"div",80),a(1),t()),i&2){let e=d(3);o(),_(" ",e.passwordError," ")}}function _e(i,u){i&1&&(n(0,"div",81),a(1," \u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442 "),t())}function xe(i,u){if(i&1){let e=h();n(0,"div",72),p(1,fe,2,1,"div",73),n(2,"div",74)(3,"label",75),a(4,"\u0422\u0435\u043A\u0443\u0449\u0438\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),t(),n(5,"input",76),v("ngModelChange",function(r){g(e);let c=d(2);return w(c.passwordData.currentPassword,r)||(c.passwordData.currentPassword=r),f(r)}),t()(),n(6,"div",74)(7,"label",75),a(8,"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),t(),n(9,"input",77),v("ngModelChange",function(r){g(e);let c=d(2);return w(c.passwordData.newPassword,r)||(c.passwordData.newPassword=r),f(r)}),t()(),n(10,"div",74)(11,"label",75),a(12,"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),t(),n(13,"input",78),v("ngModelChange",function(r){g(e);let c=d(2);return w(c.passwordData.confirmPassword,r)||(c.passwordData.confirmPassword=r),f(r)}),t(),p(14,_e,2,0,"div",79),t()()}if(i&2){let e=d(2);o(),l("ngIf",e.passwordError),o(4),C("ngModel",e.passwordData.currentPassword),o(4),C("ngModel",e.passwordData.newPassword),o(4),C("ngModel",e.passwordData.confirmPassword),o(),l("ngIf",e.passwordData.newPassword&&e.passwordData.confirmPassword&&e.passwordData.newPassword!==e.passwordData.confirmPassword)}}function he(i,u){if(i&1&&(n(0,"app-badge",107),a(1),t()),i&2){let e=d().$implicit,s=d(2);o(),_(" +",s.formatAmount(e.bonusEarned)," ")}}function Pe(i,u){if(i&1&&(n(0,"app-badge",108),a(1),t()),i&2){let e=d().$implicit,s=d(2);o(),_(" -",s.formatAmount(e.bonusUsed)," ")}}function Ce(i,u){i&1&&(n(0,"span",109),a(1,"\u2014"),t())}function we(i,u){if(i&1&&(n(0,"tr",82)(1,"td",83)(2,"span",84),a(3),t()(),n(4,"td",85)(5,"div",86)(6,"div",87),a(7),t(),n(8,"div",88)(9,"a",89)(10,"span",90),a(11),t()(),n(12,"span",91),a(13),t()()()(),n(14,"td",92)(15,"span",93),a(16),t()(),n(17,"td",94)(18,"div",95),p(19,he,2,1,"app-badge",96)(20,Pe,2,1,"app-badge",97)(21,Ce,2,0,"span",98),t()(),n(22,"td",99)(23,"span",100),a(24),t()(),n(25,"td",101)(26,"app-badge",102),a(27),t()(),n(28,"td",103)(29,"div",104)(30,"span",105),a(31),t(),n(32,"span",106),a(33),t()()()()),i&2){let e=u.$implicit,s=d(2);o(3),_("#",e.id,""),o(4),_(" ",s.getInitials(e.clientName)," "),o(2),l("routerLink",D(17,$,e.clientId)),o(2),m(e.clientName),o(2),m(e.clientPhone),o(3),_("",s.formatAmount(e.amount)," \u20B8"),o(3),l("ngIf",e.bonusEarned>0),o(),l("ngIf",e.bonusUsed>0),o(),l("ngIf",e.bonusEarned===0&&e.bonusUsed===0),o(2),A("method-"+e.paymentMethod),o(),_(" ",s.getPaymentMethodLabel(e.paymentMethod)," "),o(2),l("badgeType",e.isRefund?"refund":"payment")("icon",e.isRefund?"refund":"payment"),o(),_(" ",e.isRefund?"\u0412\u043E\u0437\u0432\u0440\u0430\u0442":"\u041E\u043F\u043B\u0430\u0447\u0435\u043D\u043E"," "),o(4),m(e.date),o(2),m(e.time)}}function ve(i,u){i&1&&(n(0,"div",110),P(),n(1,"svg",17),x(2,"path",111)(3,"rect",112)(4,"path",113),t(),y(),n(5,"span"),a(6,"\u041D\u0435\u0442 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439"),t()())}function be(i,u){if(i&1&&(n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8),a(5),t(),x(6,"div",9),t(),n(7,"div",10)(8,"div",11)(9,"h1",12),a(10),t(),n(11,"app-badge",13),a(12),t()(),n(13,"p",14),a(14),t(),p(15,te,2,1,"p",15),n(16,"div",16),P(),n(17,"svg",17),x(18,"path",18)(19,"path",19)(20,"path",20),t(),y(),n(21,"span"),a(22),t()()()()(),n(23,"div",21)(24,"div",22)(25,"div",23)(26,"div",24),P(),n(27,"svg",17),x(28,"path",25)(29,"circle",26),t()(),y(),n(30,"h3",27),a(31,"\u041B\u0438\u0447\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"),t()(),p(32,ne,4,0,"app-icon-button",28)(33,ie,5,2,"div",29),t(),n(34,"div",30)(35,"div",31)(36,"span",32),a(37,"\u0418\u043C\u044F:"),t(),p(38,oe,2,1,"span",33)(39,ae,1,1,"input",34),t(),n(40,"div",31)(41,"span",32),a(42,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F:"),t(),p(43,re,2,1,"span",33)(44,se,1,1,"input",35),t(),n(45,"div",31)(46,"span",32),a(47,"Email:"),t(),p(48,de,2,1,"span",33)(49,le,1,1,"input",36),t(),n(50,"div",31)(51,"span",32),a(52,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D:"),t(),p(53,ue,2,1,"span",33)(54,ce,1,1,"input",37),t(),n(55,"div",31)(56,"span",32),a(57,"\u0420\u043E\u043B\u044C:"),t(),n(58,"span",38),a(59),t()(),n(60,"div",39)(61,"span",32),a(62,"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:"),t(),n(63,"span",38),a(64),t()()()(),n(65,"div",21)(66,"div",22)(67,"div",23)(68,"div",24),P(),n(69,"svg",17),x(70,"rect",40)(71,"path",41),t()(),y(),n(72,"h3",27),a(73,"\u0411\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C"),t()(),p(74,pe,4,0,"app-icon-button",42)(75,me,5,3,"div",29),t(),p(76,ge,6,0,"div",43)(77,xe,15,5,"div",44),t(),n(78,"div",45)(79,"div",22)(80,"div",23)(81,"div",24),P(),n(82,"svg",17),x(83,"path",46),t()(),y(),n(84,"h3",27),a(85,"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0439"),t()()(),n(86,"div",47)(87,"table",48)(88,"thead")(89,"tr")(90,"th",49),a(91,"ID \u043F\u043B\u0430\u0442\u0435\u0436\u0430"),t(),n(92,"th",50),a(93,"\u041A\u043B\u0438\u0435\u043D\u0442"),t(),n(94,"th",51),a(95,"\u0421\u0443\u043C\u043C\u0430"),t(),n(96,"th",52),a(97,"\u0411\u043E\u043D\u0443\u0441\u044B"),t(),n(98,"th",53),a(99,"\u0421\u043F\u043E\u0441\u043E\u0431 \u043E\u043F\u043B\u0430\u0442\u044B"),t(),n(100,"th",54),a(101,"\u0421\u0442\u0430\u0442\u0443\u0441"),t(),n(102,"th",55),a(103,"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F"),t()()(),n(104,"tbody"),p(105,we,34,19,"tr",56),t()(),p(106,ve,7,0,"div",57),t()()()),i&2){let e=d();o(5),_(" ",e.getInitials()," "),o(),T("active",e.profile.active),o(4),m(e.getFullName()),o(),l("badgeType",e.getStatusBadgeType(e.profile.active)),o(),_(" ",e.getStatusLabel(e.profile.active)," "),o(2),m(e.profile.email),o(),l("ngIf",e.profile.phone),o(7),m(e.getRoleLabel(e.profile.roles)),o(10),l("ngIf",!e.isEditingPersonal),o(),l("ngIf",e.isEditingPersonal),o(5),l("ngIf",!e.isEditingPersonal),o(),l("ngIf",e.isEditingPersonal),o(4),l("ngIf",!e.isEditingPersonal),o(),l("ngIf",e.isEditingPersonal),o(4),l("ngIf",!e.isEditingPersonal),o(),l("ngIf",e.isEditingPersonal),o(4),l("ngIf",!e.isEditingPersonal),o(),l("ngIf",e.isEditingPersonal),o(5),m(e.getRoleLabel(e.profile.roles)),o(5),m(e.formatDate(e.profile.createdAt)),o(10),l("ngIf",!e.isEditingPassword),o(),l("ngIf",e.isEditingPassword),o(),l("ngIf",!e.isEditingPassword),o(),l("ngIf",e.isEditingPassword),o(28),l("ngForOf",e.userPayments),o(),l("ngIf",e.userPayments.length===0)}}var je=(()=>{class i{pageHeaderService=M(X);profileService=M(Y);toastService=M(U);profile=null;isLoading=!0;userPayments=[];isEditingPersonal=!1;isSavingPersonal=!1;editedPersonal={firstName:"",lastName:"",email:"",phone:""};isEditingPassword=!1;isSavingPassword=!1;passwordData={currentPassword:"",newPassword:"",confirmPassword:""};passwordError=null;ngOnInit(){this.pageHeaderService.setPageHeader("\u041B\u0438\u0447\u043D\u044B\u0439 \u043A\u0430\u0431\u0438\u043D\u0435\u0442",[{label:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",route:"/home"},{label:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C"}]),this.loadProfile()}loadProfile(){this.isLoading=!0,this.profileService.getProfile().subscribe({next:e=>{console.log("[AccountPage] Profile loaded:",e),console.log("[AccountPage] Profile firstName:",e.firstName),console.log("[AccountPage] Profile lastName:",e.lastName),console.log("[AccountPage] Profile email:",e.email),this.profile=e,this.isLoading=!1,this.loadUserTransactions()},error:e=>{console.error("[AccountPage] Error loading profile:",e);let s=e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043F\u0440\u043E\u0444\u0438\u043B\u044F";this.toastService.error(s),this.isLoading=!1}})}getFullName(){return this.profile?`${this.profile.firstName} ${this.profile.lastName}`:""}getInitials(e){return e?e.split(" ").map(r=>r.charAt(0)).join("").toUpperCase().slice(0,2):this.profile?`${this.profile.firstName.charAt(0)}${this.profile.lastName.charAt(0)}`.toUpperCase():""}getStatusBadgeType(e){return e?"success":"danger"}getStatusLabel(e){return e?"\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439":"\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439"}getRoleLabel(e){return e.includes("ADMIN")?"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440":e.includes("MANAGER")?"\u041C\u0435\u043D\u0435\u0434\u0436\u0435\u0440":"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C"}formatDate(e){return new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}formatAmount(e){return e.toLocaleString("ru-RU")}getPaymentMethodLabel(e){switch(e){case"cash":return"\u041D\u0430\u043B\u0438\u0447\u043D\u044B\u0435";case"card":return"\u041A\u0430\u0440\u0442\u0430";case"online":return"\u041E\u043D\u043B\u0430\u0439\u043D";default:return e}}startEditPersonal(){this.profile&&(this.editedPersonal={firstName:this.profile.firstName,lastName:this.profile.lastName,email:this.profile.email,phone:this.profile.phone||""},this.isEditingPersonal=!0)}savePersonal(){if(!this.profile)return;this.isSavingPersonal=!0;let e={email:this.editedPersonal.email,firstName:this.editedPersonal.firstName,lastName:this.editedPersonal.lastName,phone:this.editedPersonal.phone||void 0};this.profileService.updateProfile(e).subscribe({next:s=>{this.profile=s,this.isEditingPersonal=!1,this.isSavingPersonal=!1,this.toastService.success("\u041F\u0440\u043E\u0444\u0438\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D")},error:s=>{let r=s.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0444\u0438\u043B\u044F";this.toastService.error(r),this.isSavingPersonal=!1}})}cancelEditPersonal(){this.isEditingPersonal=!1,this.editedPersonal={firstName:"",lastName:"",email:"",phone:""}}startEditPassword(){this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""},this.isEditingPassword=!0,this.passwordError=null}savePassword(){if(!this.isPasswordFormValid())return;this.isSavingPassword=!0,this.passwordError=null;let e={currentPassword:this.passwordData.currentPassword,newPassword:this.passwordData.newPassword,confirmPassword:this.passwordData.confirmPassword};this.profileService.changePassword(e).subscribe({next:()=>{this.isEditingPassword=!1,this.isSavingPassword=!1,this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""},this.toastService.success("\u041F\u0430\u0440\u043E\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D")},error:s=>{let r=s.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043C\u0435\u043D\u044B \u043F\u0430\u0440\u043E\u043B\u044F";this.passwordError=r,this.toastService.error(r),this.isSavingPassword=!1}})}cancelEditPassword(){this.isEditingPassword=!1,this.passwordError=null,this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""}}isPasswordFormValid(){return!!(this.passwordData.currentPassword&&this.passwordData.newPassword&&this.passwordData.confirmPassword&&this.passwordData.newPassword===this.passwordData.confirmPassword&&this.passwordData.newPassword.length>=6)}loadUserTransactions(){this.profileService.getUserTransactions().subscribe({next:e=>{console.log("[AccountPage] User transactions loaded:",e),this.userPayments=e.map(s=>this.mapTransactionToPayment(s))},error:e=>{console.error("[AccountPage] Error loading user transactions:",e),this.userPayments=[]}})}mapTransactionToPayment(e){let s=new Date(e.createdAt),r=s.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),c=s.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),S="cash";if(e.paymentMethod){let E=e.paymentMethod.toLowerCase();E.includes("card")||E.includes("\u043A\u0430\u0440\u0442")?S="card":(E.includes("online")||E.includes("\u043E\u043D\u043B\u0430\u0439\u043D"))&&(S="online")}return{id:e.txId.replace(/^PTX-/,""),clientId:e.clientId,clientName:e.clientName,clientPhone:e.clientPhone,amount:e.amount,bonusEarned:e.bonusGranted,bonusUsed:e.bonusUsed,paymentMethod:S,isRefund:e.status==="REFUNDED"||e.refundedPaymentTxId!==null,date:r,time:c}}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=I({type:i,selectors:[["app-account-page"]],decls:3,vars:2,consts:[[1,"page-wrapper"],["class","loading-container",4,"ngIf"],["class","profile-container",4,"ngIf"],[1,"loading-container"],[1,"profile-container"],[1,"profile-header-card"],[1,"profile-header-content"],[1,"avatar-wrapper"],[1,"avatar-large"],[1,"status-indicator"],[1,"profile-main-info"],[1,"name-row"],[1,"profile-name"],["size","medium",3,"badgeType"],[1,"profile-email"],["class","profile-phone",4,"ngIf"],[1,"role-badge"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none"],["d","M12 2L2 7l10 5 10-5-10-5z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M2 17l10 5 10-5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M2 12l10 5 10-5","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"info-card"],[1,"card-header"],[1,"card-header-left"],[1,"card-icon"],["d","M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2","stroke","currentColor","stroke-width","1.5"],["cx","12","cy","7","r","4","stroke","currentColor","stroke-width","1.5"],[1,"card-title"],["iconButtonType","edit","size","large","tooltip","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",3,"onClick",4,"ngIf"],["class","card-actions",4,"ngIf"],[1,"info-content"],[1,"info-row"],[1,"info-label"],["class","info-value",4,"ngIf"],["class","info-input","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F",3,"ngModel","ngModelChange",4,"ngIf"],["class","info-input","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043C\u0438\u043B\u0438\u044E",3,"ngModel","ngModelChange",4,"ngIf"],["class","info-input","type","email","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",3,"ngModel","ngModelChange",4,"ngIf"],["class","info-input","type","tel","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",3,"ngModel","ngModelChange",4,"ngIf"],[1,"info-value"],[1,"info-row","readonly"],["x","3","y","11","width","18","height","11","rx","2","stroke","currentColor","stroke-width","1.5"],["d","M7 11V7a5 5 0 0110 0v4","stroke","currentColor","stroke-width","1.5"],["iconButtonType","edit","size","large","tooltip","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",3,"onClick",4,"ngIf"],["class","info-content",4,"ngIf"],["class","password-form",4,"ngIf"],[1,"activity-card"],["d","M22 12h-4l-3 9L9 3l-3 9H2","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"payments-table-container"],[1,"payments-table"],[1,"th-id"],[1,"th-client"],[1,"th-amount"],[1,"th-bonuses"],[1,"th-method"],[1,"th-status"],[1,"th-date"],["class","payment-row",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"profile-phone"],["iconButtonType","edit","size","large","tooltip","\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",3,"onClick"],["viewBox","0 0 24 24","fill","none"],["d","M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"card-actions"],["buttonType","ghost","size","medium",3,"onClick","disabled"],["buttonType","primary","size","medium",3,"onClick","loading"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F",1,"info-input",3,"ngModelChange","ngModel"],["placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043C\u0438\u043B\u0438\u044E",1,"info-input",3,"ngModelChange","ngModel"],["type","email","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",1,"info-input",3,"ngModelChange","ngModel"],["type","tel","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",1,"info-input",3,"ngModelChange","ngModel"],["iconButtonType","edit","size","large","tooltip","\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",3,"onClick"],["buttonType","primary","size","medium",3,"onClick","disabled","loading"],[1,"password-form"],["class","error-message server-error",4,"ngIf"],[1,"form-group"],[1,"form-label"],["type","password","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043A\u0443\u0449\u0438\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",1,"form-input",3,"ngModelChange","ngModel"],["type","password","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C (\u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432)",1,"form-input",3,"ngModelChange","ngModel"],["type","password","placeholder","\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",1,"form-input",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],[1,"error-message","server-error"],[1,"error-message"],[1,"payment-row"],[1,"td-id"],[1,"payment-id"],[1,"td-client"],[1,"client-cell"],[1,"client-avatar"],[1,"client-info"],[1,"client-name-link",3,"routerLink"],[1,"client-name"],[1,"client-phone"],[1,"td-amount"],[1,"amount-value"],[1,"td-bonuses"],[1,"bonus-info"],["badgeType","bonusGranted","size","medium","icon","star","class","bonus-badge",4,"ngIf"],["badgeType","bonusUsed","size","medium","icon","check","class","bonus-badge",4,"ngIf"],["class","bonus-none",4,"ngIf"],[1,"td-method"],[1,"method-badge"],[1,"td-status"],["size","medium",3,"badgeType","icon"],[1,"td-date"],[1,"date-info"],[1,"date-text"],[1,"time-text"],["badgeType","bonusGranted","size","medium","icon","star",1,"bonus-badge"],["badgeType","bonusUsed","size","medium","icon","check",1,"bonus-badge"],[1,"bonus-none"],[1,"empty-state"],["d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2","stroke","currentColor","stroke-width","1.5"],["x","9","y","3","width","6","height","4","rx","1","stroke","currentColor","stroke-width","1.5"],["d","M9 12h6M9 16h6","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"]],template:function(s,r){s&1&&(n(0,"div",0),p(1,ee,2,0,"div",1)(2,be,107,27,"div",2),t()),s&2&&(o(),l("ngIf",r.isLoading),o(),l("ngIf",r.profile&&!r.isLoading))},dependencies:[N,B,V,G,j,R,H,L,z,K,q,W,Q],styles:[".page-wrapper[_ngcontent-%COMP%]{min-height:100%;margin:-2rem;padding:2rem;background:linear-gradient(180deg,#f0fdf4,#f8fafc 50% 100%)}.loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:400px}.profile-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:1.5rem}.profile-header-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 1px 3px #0000000d}.profile-header-content[_ngcontent-%COMP%]{display:flex;gap:2rem;align-items:flex-start}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.avatar-large[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:20px;background:linear-gradient(135deg,#16a34a,#22c55e);display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;color:#fff}.status-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;width:24px;height:24px;border-radius:50%;background:#94a3b8;border:3px solid white}.status-indicator.active[_ngcontent-%COMP%]{background:#22c55e}.profile-main-info[_ngcontent-%COMP%]{flex:1}.name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem}.profile-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin:0}.profile-email[_ngcontent-%COMP%], .profile-phone[_ngcontent-%COMP%]{font-size:1rem;color:#64748b;margin:.5rem 0}.role-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:#f0fdf4;color:#16a34a;padding:.5rem 1rem;border-radius:12px;font-weight:600;font-size:.9375rem;margin-top:.75rem}.role-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 1px 3px #0000000d}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.card-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.card-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,#f0fdf4,#dcfce7);display:flex;align-items:center;justify-content:center;color:#16a34a}.card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 0;border-bottom:1px solid #f1f5f9}.info-row.readonly[_ngcontent-%COMP%]{opacity:.7}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{font-weight:600;color:#64748b;min-width:150px;font-size:.9375rem}.info-value[_ngcontent-%COMP%]{color:#1f2937;font-size:.9375rem}.info-input[_ngcontent-%COMP%]{flex:1;max-width:300px;padding:.625rem 1rem;border:1.5px solid #e2e8f0;border-radius:10px;font-size:.9375rem;font-family:inherit;background:linear-gradient(to bottom,#fff,#f8fafc);color:#1f2937;font-weight:500;transition:all .2s ease;box-shadow:0 1px 2px #0000000a}.info-input[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;background:linear-gradient(to bottom,#fff,#f1f5f9)}.info-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#22c55e;background:#fff;box-shadow:0 0 0 4px #22c55e1f,0 2px 4px #0000000d}.info-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8;font-weight:400}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#475569}.form-input[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.75rem 1rem;border:1.5px solid #e2e8f0;border-radius:10px;font-size:.9375rem;font-family:inherit;background:linear-gradient(to bottom,#fff,#f8fafc);color:#1f2937;font-weight:500;transition:all .2s ease;box-shadow:0 1px 2px #0000000a}.form-input[_ngcontent-%COMP%]:hover{border-color:#cbd5e1;background:linear-gradient(to bottom,#fff,#f1f5f9)}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#22c55e;background:#fff;box-shadow:0 0 0 4px #22c55e1f,0 2px 4px #0000000d}.form-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8;font-weight:400}.error-message[_ngcontent-%COMP%]{font-size:.8rem;color:#dc2626;margin-top:.25rem}.error-message.server-error[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;margin-bottom:1rem}.activity-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 1px 3px #0000000d}.payments-table-container[_ngcontent-%COMP%]{overflow-x:auto}.payments-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.payments-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc}.payments-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-size:.875rem;font-weight:600;color:#64748b;border-bottom:1px solid #e2e8f0}.payments-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #f1f5f9}.payments-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8fafc}.payment-id[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;color:#64748b;font-size:.875rem}.client-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.client-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#f0fdf4,#dcfce7);display:flex;align-items:center;justify-content:center;font-weight:600;color:#16a34a;font-size:.875rem;flex-shrink:0}.client-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.client-name-link[_ngcontent-%COMP%]{text-decoration:none;color:#1f2937;font-weight:600;font-size:.9375rem;transition:color .2s;cursor:pointer;display:inline-block}.client-name-link[_ngcontent-%COMP%]:hover{color:#16a34a}.client-name-link[_ngcontent-%COMP%]   .client-name[_ngcontent-%COMP%]{cursor:pointer}.client-phone[_ngcontent-%COMP%]{font-size:.8125rem;color:#64748b}.amount-value[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;font-size:.9375rem}.bonus-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.bonus-badge[_ngcontent-%COMP%]{display:inline-block}.bonus-none[_ngcontent-%COMP%]{color:#94a3b8;font-size:.875rem}.method-badge[_ngcontent-%COMP%]{display:inline-block;padding:.375rem .75rem;border-radius:8px;font-size:.8125rem;font-weight:500}.method-cash[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.method-card[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.method-online[_ngcontent-%COMP%]{background:#dcfce7;color:#15803d}.date-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.date-text[_ngcontent-%COMP%]{font-size:.875rem;color:#1f2937;font-weight:500}.time-text[_ngcontent-%COMP%]{font-size:.8125rem;color:#64748b}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;color:#94a3b8;gap:1rem}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9375rem}@media (max-width: 768px){.page-wrapper[_ngcontent-%COMP%]{margin:-1rem;padding:1rem}.profile-header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:1.5rem}.name-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.info-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.info-input[_ngcontent-%COMP%], .form-input[_ngcontent-%COMP%]{max-width:100%}}"]})}return i})();export{je as AccountPageComponent};
