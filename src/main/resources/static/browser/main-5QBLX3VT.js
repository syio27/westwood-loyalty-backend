import{a as T,b as qe,c as b,d as to}from"./chunk-3DEYYAUK.js";import{a as q,b as Tt,c as bt,d as Pt,e as W,f as Ot,g as Et,h as at,i as _t,j as Mt,k as ct,l as kt,m as Rt,n as ut,o as pt,p as H,q as oo,r as $t,s as lt,t as jt,u as Lt,v as ht,w as Ft,x as io}from"./chunk-Q24T5XOA.js";import{a as tt}from"./chunk-3B24VZJ2.js";import{a as It}from"./chunk-T6AS2VJX.js";import{a as We,d as qt,e as xt,f as He,i as Ze,j as Ke,k as te,l as Xe,m as Je,n as G,o as Ye,p as f,q as Qe,s as wt,u as Q}from"./chunk-S62YHFVO.js";import{a as eo}from"./chunk-CVI7F7U7.js";import{$ as St,Aa as ke,Ab as ze,Ba as Re,C as z,Ca as R,Da as D,Ea as X,Eb as Be,Fb as yt,G as xe,Gb as Y,H as Ie,I as we,Ia as Ct,J as ot,Ja as st,Jb as Ge,K as gt,Ka as rt,Kb as Ve,L as F,M as Te,P as _,R as it,S as I,Sa as Yt,T as S,Ta as Qt,V as be,Z as At,_ as vt,a as l,b as h,ba as Pe,c as Zt,ea as Oe,f as fe,fa as Ee,fb as $e,g as ge,ga as _e,h as Ae,i as ve,k,l as Kt,m as Se,ma as B,mb as je,n as y,nb as Le,o as ft,pa as K,s as Xt,t as E,u as O,ua as nt,ub as J,v as Ce,vb as Fe,w as ye,wa as Me,x as U,xb as De,ya as V,yb as Ne,z as Jt,zb as Ue}from"./chunk-SDVY3Z22.js";var dt="PERFORM_ACTION",zo="REFRESH",uo="RESET",po="ROLLBACK",lo="COMMIT",ho="SWEEP",mo="TOGGLE_ACTION",Bo="SET_ACTIONS_ACTIVE",fo="JUMP_TO_STATE",go="JUMP_TO_ACTION",me="IMPORT_STATE",Ao="LOCK_CHANGES",vo="PAUSE_RECORDING",et=class{constructor(i,e){if(this.action=i,this.timestamp=e,this.type=dt,typeof i.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},ee=class{constructor(){this.type=zo}},oe=class{constructor(i){this.timestamp=i,this.type=uo}},ie=class{constructor(i){this.timestamp=i,this.type=po}},ne=class{constructor(i){this.timestamp=i,this.type=lo}},se=class{constructor(){this.type=ho}},re=class{constructor(i){this.id=i,this.type=mo}};var ae=class{constructor(i){this.index=i,this.type=fo}},ce=class{constructor(i){this.actionId=i,this.type=go}},ue=class{constructor(i){this.nextLiftedState=i,this.type=me}},pe=class{constructor(i){this.status=i,this.type=Ao}},le=class{constructor(i){this.status=i,this.type=vo}};var zt=new it("@ngrx/store-devtools Options"),no=new it("@ngrx/store-devtools Initial Config");function So(){return null}var Go="NgRx Store DevTools";function Vo(t){let i={maxAge:!1,monitor:So,actionSanitizer:void 0,stateSanitizer:void 0,name:Go,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,o=e.logOnly?{pause:!0,export:!0,test:!0}:!1,n=e.features||o||i.features;n.import===!0&&(n.import="custom");let a=Object.assign({},i,{features:n},e);if(a.maxAge&&a.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${a.maxAge}`);return a}function so(t,i){return t.filter(e=>i.indexOf(e)<0)}function Co(t){let{computedStates:i,currentStateIndex:e}=t;if(e>=i.length){let{state:n}=i[i.length-1];return n}let{state:o}=i[e];return o}function mt(t){return new et(t,+Date.now())}function Wo(t,i){return Object.keys(i).reduce((e,o)=>{let n=Number(o);return e[n]=yo(t,i[n],n),e},{})}function yo(t,i,e){return h(l({},i),{action:t(i.action,e)})}function Ho(t,i){return i.map((e,o)=>({state:xo(t,e.state,o),error:e.error}))}function xo(t,i,e){return t(i,e)}function Io(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function Zo(t,i,e,o){let n=[],a={},m=[];return t.stagedActionIds.forEach((c,g)=>{let s=t.actionsById[c];s&&(g&&de(t.computedStates[g],s,i,e,o)||(a[c]=s,n.push(c),m.push(t.computedStates[g])))}),h(l({},t),{stagedActionIds:n,actionsById:a,computedStates:m})}function de(t,i,e,o,n){let a=e&&!e(t,i.action),m=o&&!i.action.type.match(o.map(g=>ro(g)).join("|")),c=n&&i.action.type.match(n.map(g=>ro(g)).join("|"));return a||m||c}function ro(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wo(t){return{ngZone:t?S(Ee):null,connectInZone:t}}var Bt=(()=>{class t extends xt{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=Pe(t)))(n||t)}})()}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),Dt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},he=new it("@ngrx/store-devtools Redux Devtools Extension"),To=(()=>{class t{constructor(e,o,n){this.config=o,this.dispatcher=n,this.zoneConfig=wo(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,o){if(this.devtoolsExtension)if(e.type===dt){if(o.isLocked||o.isPaused)return;let n=Co(o);if(Io(this.config)&&de(n,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?xo(this.config.stateSanitizer,n,o.currentStateIndex):n,m=this.config.actionSanitizer?yo(this.config.actionSanitizer,e,o.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(m,a))}else{let n=h(l({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?Wo(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?Ho(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Zt(e=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(n=>e.next(n)),o.unsubscribe}):Ae}createActionStreams(){let e=this.createChangesObservable().pipe(Ie()),o=e.pipe(E(s=>s.type===Dt.START)),n=e.pipe(E(s=>s.type===Dt.STOP)),a=e.pipe(E(s=>s.type===Dt.DISPATCH),y(s=>this.unwrapAction(s.payload)),Ce(s=>s.type===me?this.dispatcher.pipe(E(x=>x.type===te),Se(1e3),ye(1e3),y(()=>s),O(()=>k(s)),U(1)):k(s))),c=e.pipe(E(s=>s.type===Dt.ACTION),y(s=>this.unwrapAction(s.payload))).pipe(gt(n)),g=a.pipe(gt(n));this.start$=o.pipe(gt(n)),this.actions$=this.start$.pipe(ot(()=>c)),this.liftedActions$=this.start$.pipe(ot(()=>g))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let o={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(o.maxAge=e.maxAge),o}sendToReduxDevtools(e){try{e()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}static{this.\u0275fac=function(o){return new(o||t)(I(he),I(zt),I(Bt))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),Ut={type:qt},Ko="@ngrx/store-devtools/recompute",Xo={type:Ko};function bo(t,i,e,o,n){if(o)return{state:e,error:"Interrupted by an error up the chain"};let a=e,m;try{a=t(e,i)}catch(c){m=c.toString(),n.handleError(c)}return{state:a,error:m}}function Nt(t,i,e,o,n,a,m,c,g){if(i>=t.length&&t.length===a.length)return t;let s=t.slice(0,i),x=a.length-(g?1:0);for(let r=i;r<x;r++){let d=a[r],P=n[d].action,p=s[r-1],u=p?p.state:o,$=p?p.error:void 0,j=m.indexOf(d)>-1?p:bo(e,P,u,$,c);s.push(j)}return g&&s.push(t[t.length-1]),s}function Jo(t,i){return{monitorState:i(void 0,{}),nextActionId:1,actionsById:{0:mt(Ut)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Yo(t,i,e,o,n={}){return a=>(m,c)=>{let{monitorState:g,actionsById:s,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:P,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:w}=m||i;m||(s=Object.create(s));function j(C){let v=C,N=r.slice(1,v+1);for(let M=0;M<N.length;M++)if(u[M+1].error){v=M,N=r.slice(1,v+1);break}else delete s[N[M]];d=d.filter(M=>N.indexOf(M)===-1),r=[0,...r.slice(v+1)],P=u[v].state,u=u.slice(v),p=p>v?p-v:0}function L(){s={0:mt(Ut)},x=1,r=[0],d=[],P=u[p].state,p=0,u=[]}let A=0;switch(c.type){case Ao:{$=c.status,A=1/0;break}case vo:{w=c.status,w?(r=[...r,x],s[x]=new et({type:"@ngrx/devtools/pause"},+Date.now()),x++,A=r.length-1,u=u.concat(u[u.length-1]),p===r.length-2&&p++,A=1/0):L();break}case uo:{s={0:mt(Ut)},x=1,r=[0],d=[],P=t,p=0,u=[];break}case lo:{L();break}case po:{s={0:mt(Ut)},x=1,r=[0],d=[],p=0,u=[];break}case mo:{let{id:C}=c;d.indexOf(C)===-1?d=[C,...d]:d=d.filter(N=>N!==C),A=r.indexOf(C);break}case Bo:{let{start:C,end:v,active:N}=c,M=[];for(let Ht=C;Ht<v;Ht++)M.push(Ht);N?d=so(d,M):d=[...d,...M],A=r.indexOf(C);break}case fo:{p=c.index,A=1/0;break}case go:{let C=r.indexOf(c.actionId);C!==-1&&(p=C),A=1/0;break}case ho:{r=so(r,d),d=[],p=Math.min(p,r.length-1);break}case dt:{if($)return m||i;if(w||m&&de(m.computedStates[p],c,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let v=u[u.length-1];u=[...u.slice(0,-1),bo(a,c.action,v.state,v.error,e)],A=1/0;break}n.maxAge&&r.length===n.maxAge&&j(1),p===r.length-1&&p++;let C=x++;s[C]=c,r=[...r,C],A=r.length-1;break}case me:{({monitorState:g,actionsById:s,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:P,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:w}=c.nextLiftedState);break}case qt:{A=0,n.maxAge&&r.length>n.maxAge&&(u=Nt(u,A,a,P,s,r,d,e,w),j(r.length-n.maxAge),A=1/0);break}case te:{if(u.filter(v=>v.error).length>0)A=0,n.maxAge&&r.length>n.maxAge&&(u=Nt(u,A,a,P,s,r,d,e,w),j(r.length-n.maxAge),A=1/0);else{if(!w&&!$){p===r.length-1&&p++;let v=x++;s[v]=new et(c,+Date.now()),r=[...r,v],A=r.length-1,u=Nt(u,A,a,P,s,r,d,e,w)}u=u.map(v=>h(l({},v),{state:a(v.state,Xo)})),p=r.length-1,n.maxAge&&r.length>n.maxAge&&j(r.length-n.maxAge),A=1/0}break}default:{A=1/0;break}}return u=Nt(u,A,a,P,s,r,d,e,w),g=o(g,c),{monitorState:g,actionsById:s,nextActionId:x,stagedActionIds:r,skippedActionIds:d,committedState:P,currentStateIndex:p,computedStates:u,isLocked:$,isPaused:w}}}var ao=(()=>{class t{constructor(e,o,n,a,m,c,g,s){let x=Jo(g,s.monitor),r=Yo(g,x,c,s.monitor,s),d=Xt(Xt(o.asObservable().pipe(we(1)),a.actions$).pipe(y(mt)),e,a.liftedActions$).pipe(ve(ge)),P=n.pipe(y(r)),p=wo(s.connectInZone),u=new fe(1);this.liftedStateSubscription=d.pipe(Te(P),co(p),xe(({state:j},[L,A])=>{let C=A(j,L);return L.type!==dt&&Io(s)&&(C=Zo(C,s.predicate,s.actionsSafelist,s.actionsBlocklist)),a.notify(L,C),{state:C,action:L}},{state:x,action:null})).subscribe(({state:j,action:L})=>{if(u.next(j),L.type===dt){let A=L.action;m.next(A)}}),this.extensionStartSubscription=a.start$.pipe(co(p)).subscribe(()=>{this.refresh()});let $=u.asObservable(),w=$.pipe(y(Co));Object.defineProperty(w,"state",{value:We(w,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=$,this.state=w}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new et(e,+Date.now()))}refresh(){this.dispatch(new ee)}reset(){this.dispatch(new oe(+Date.now()))}rollback(){this.dispatch(new ie(+Date.now()))}commit(){this.dispatch(new ne(+Date.now()))}sweep(){this.dispatch(new se)}toggleAction(e){this.dispatch(new re(e))}jumpToAction(e){this.dispatch(new ce(e))}jumpToState(e){this.dispatch(new ae(e))}importState(e){this.dispatch(new ue(e))}lockChanges(e){this.dispatch(new pe(e))}pauseRecording(e){this.dispatch(new le(e))}static{this.\u0275fac=function(o){return new(o||t)(I(Bt),I(xt),I(Ze),I(To),I(Xe),I(_e),I(He),I(zt))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})();function co({ngZone:t,connectInZone:i}){return e=>i?new Zt(o=>e.subscribe({next:n=>t.run(()=>o.next(n)),error:n=>t.run(()=>o.error(n)),complete:()=>t.run(()=>o.complete())})):e}var Qo=new it("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function qo(t,i){return!!t||i.monitor!==So}function ti(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function ei(t){return t.state}function Po(t={}){return be([To,Bt,ao,{provide:no,useValue:t},{provide:Qo,deps:[he,zt],useFactory:qo},{provide:he,useFactory:ti},{provide:zt,deps:[no],useFactory:Vo},{provide:Je,deps:[ao],useFactory:ei},{provide:Ke,useExisting:Bt}])}function ii(t,i){t&1&&(St(),R(0,"svg",7),X(1,"circle",9)(2,"path",10),D())}function ni(t,i){t&1&&(St(),R(0,"svg",7),X(1,"circle",9)(2,"path",11),D())}function si(t,i){if(t&1){let e=Ct();R(0,"button",12),st("click",function(){At(e);let n=rt();return vt(n.onAction())}),Yt(1),D()}if(t&2){let e=rt();B(),Qt(e.action.label)}}var Oo=(()=>{class t{message="";type="success";duration=3e3;action;closed=new Oe;visible=!1;hiding=!1;timeoutId;ngOnInit(){setTimeout(()=>{this.visible=!0},10),this.duration>0&&(this.timeoutId=window.setTimeout(()=>{this.close()},this.duration))}ngOnDestroy(){this.timeoutId&&clearTimeout(this.timeoutId)}onClose(){this.close()}onAction(){this.action?.callback(),this.close()}close(){this.hiding=!0,setTimeout(()=>{this.closed.emit()},300)}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=K({type:t,selectors:[["app-toast"]],inputs:{message:"message",type:"type",duration:"duration",action:"action"},outputs:{closed:"closed"},decls:11,vars:10,consts:[[1,"toast"],[1,"toast-content"],[1,"toast-icon"],["viewBox","0 0 24 24","fill","none",4,"ngIf"],[1,"toast-message"],["type","button","class","toast-action-btn",3,"click",4,"ngIf"],["iconButtonType","ghost","size","small",3,"onClick"],["viewBox","0 0 24 24","fill","none"],["d","M18 6L6 18M6 6l12 12","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M9 12l2 2 4-4","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 9l-6 6M9 9l6 6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","button",1,"toast-action-btn",3,"click"]],template:function(o,n){o&1&&(R(0,"div",0)(1,"div",1)(2,"div",2),nt(3,ii,3,0,"svg",3)(4,ni,3,0,"svg",3),D(),R(5,"div",4),Yt(6),D(),nt(7,si,2,1,"button",5),R(8,"app-icon-button",6),st("onClick",function(){return n.onClose()}),St(),R(9,"svg",7),X(10,"path",8),D()()()()),o&2&&(Re(n.type),ke("show",n.visible)("hiding",n.hiding),B(3),V("ngIf",n.type==="success"),B(),V("ngIf",n.type==="error"),B(2),Qt(n.message),B(),V("ngIf",n.action))},dependencies:[J,Le,eo],styles:[".toast[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:300px;max-width:400px;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #00000026;margin-bottom:.75rem;opacity:0;transform:translate(100%);transition:all .3s cubic-bezier(.4,0,.2,1);border-left:4px solid}.toast.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.toast.hiding[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}.toast.success[_ngcontent-%COMP%]{border-left-color:#16a34a}.toast.error[_ngcontent-%COMP%]{border-left-color:#dc2626}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;width:100%}.toast-icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.toast-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.toast.success[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#16a34a}.toast.error[_ngcontent-%COMP%]   .toast-icon[_ngcontent-%COMP%]{color:#dc2626}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:.9375rem;line-height:1.5;color:#1f2937;font-weight:500}.toast-action-btn[_ngcontent-%COMP%]{flex-shrink:0;padding:.35rem .6rem;font-size:.8125rem;font-weight:600;color:#16a34a;background:transparent;border:1px solid #16A34A;border-radius:6px;cursor:pointer;transition:background .15s,color .15s}.toast-action-btn[_ngcontent-%COMP%]:hover{background:#16a34a;color:#fff}[_nghost-%COMP%]     app-icon-button{flex-shrink:0}[_nghost-%COMP%]     app-icon-button svg{width:16px;height:16px;color:#64748b}"]})}return t})();function ri(t,i){if(t&1){let e=Ct();R(0,"app-toast",2),st("closed",function(){let n=At(e).$implicit,a=rt();return vt(a.removeToast(n.id))}),D()}if(t&2){let e=i.$implicit;V("message",e.message)("type",e.type)("duration",e.duration)("action",e.action)}}var Eo=(()=>{class t{toastService=S(It);toasts=[];subscription;ngOnInit(){this.subscription=this.toastService.toasts$.subscribe(e=>{this.toasts=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}removeToast(e){this.toastService.remove(e)}trackByToastId(e,o){return o.id}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=K({type:t,selectors:[["app-toast-container"]],decls:2,vars:2,consts:[[1,"toast-container"],[3,"message","type","duration","action","closed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"closed","message","type","duration","action"]],template:function(o,n){o&1&&(R(0,"div",0),nt(1,ri,1,4,"app-toast",1),D()),o&2&&(B(),V("ngForOf",n.toasts)("ngForTrackBy",n.trackByToastId))},dependencies:[J,je,Oo],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:1.5rem;right:1.5rem;z-index:10000;display:flex;flex-direction:column;align-items:flex-end;pointer-events:none}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{pointer-events:auto}@media (max-width: 768px){.toast-container[_ngcontent-%COMP%]{top:1rem;right:1rem;left:1rem;align-items:stretch}.toast-container[_ngcontent-%COMP%]   app-toast[_ngcontent-%COMP%]{max-width:100%}}"]})}return t})();var _o=(()=>{class t{title="westwood-frontend";static \u0275fac=function(o){return new(o||t)};static \u0275cmp=K({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(o,n){o&1&&X(0,"router-outlet")(1,"app-toast-container")},dependencies:[J,Be,Eo],encapsulation:2})}return t})();var Mo=(t,i)=>{let e=S(Y),o=S(G);return ft([o.select(Q),o.select(wt)]).pipe(E(([n])=>n),U(1),y(([,n])=>n?!0:(e.navigate(["/auth/login"],{queryParams:{returnUrl:i.url}}),!1)))};var ko=()=>{let t=S(Y),i=S(G);return ft([i.select(Q),i.select(wt)]).pipe(E(([e])=>e),U(1),y(([,e])=>e?(t.navigate(["/home"]),!1):!0))};var Ro=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"auth",loadChildren:()=>import("./chunk-2NOJMPI5.js").then(t=>t.AUTH_ROUTES),canActivate:[ko]},{path:"",loadComponent:()=>import("./chunk-37X5WJB6.js").then(t=>t.MainLayoutWrapperComponent),canActivate:[Mo],children:[{path:"home",loadComponent:()=>import("./chunk-W6FLYSYK.js").then(t=>t.HomePageComponent),title:"Home"},{path:"bonus-expiring",loadComponent:()=>import("./chunk-EEHO73DH.js").then(t=>t.BonusExpiringPageComponent),title:"Bonus Expiring"},{path:"communications",title:"Communications",children:[{path:"",redirectTo:"whatsapp",pathMatch:"full"},{path:"whatsapp",loadComponent:()=>import("./chunk-AQ6H5ZMR.js").then(t=>t.InvitationPageComponent),title:"WhatsApp"}]},{path:"reports/bonus-types",loadComponent:()=>import("./chunk-TV5RV43X.js").then(t=>t.BonusTypeReportPageComponent),title:"\u041E\u0442\u0447\u0451\u0442 \u043F\u043E \u0442\u0438\u043F\u0430\u043C \u0431\u043E\u043D\u0443\u0441\u043E\u0432"},{path:"bonus-program",children:[{path:"",loadComponent:()=>import("./chunk-72A45IAO.js").then(t=>t.BonusProgramPageComponent),title:"Reward Programs"},{path:"programs",loadComponent:()=>import("./chunk-JYBQJJ4L.js").then(t=>t.ProgramTypesPageComponent),title:"Create Program"},{path:"create/:uuid",loadComponent:()=>import("./chunk-RH6C6Q3T.js").then(t=>t.CreateProgramWizardComponent),title:"Create Program"},{path:"create/:type/:uuid",loadComponent:()=>import("./chunk-KRXANJ37.js").then(t=>t.RewardProgramCreatePageComponent),title:"Create Reward Program"},{path:"configure/:type/:uuid",loadComponent:()=>import("./chunk-GVTKMNFF.js").then(t=>t.RewardProgramConfigurePageComponent),title:"Configure Reward Program"}]},{path:"bonus-management",loadComponent:()=>import("./chunk-53SV2I3W.js").then(t=>t.BonusManagementPageComponent),title:"Bonus Management"},{path:"clients",loadComponent:()=>import("./chunk-FT73Y4XS.js").then(t=>t.ClientsPageComponent),title:"Clients"},{path:"clients/:id",loadComponent:()=>import("./chunk-FBHEGQCM.js").then(t=>t.ProfilePageComponent),title:"Client"},{path:"clients/:id/:section",loadComponent:()=>import("./chunk-FBHEGQCM.js").then(t=>t.ProfilePageComponent),title:"Client"},{path:"payments",loadComponent:()=>import("./chunk-2N25QZOV.js").then(t=>t.PaymentsPageComponent),title:"Payments"},{path:"users",loadComponent:()=>import("./chunk-25B5ZUHR.js").then(t=>t.UsersPageComponent),title:"Users"},{path:"users/:id",loadComponent:()=>import("./chunk-JKPCAGZF.js").then(t=>t.UserProfilePageComponent),title:"User"},{path:"profile",loadComponent:()=>import("./chunk-7LGWZAR3.js").then(t=>t.AccountPageComponent),title:"Profile"}]},{path:"**",redirectTo:"/home"}];var Gt={user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!1,error:null},jo=Qe(Gt,f(q,t=>h(l({},t),{isLoading:!0,error:null})),f(Tt,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,isInitialized:!0,error:null})),f(bt,t=>h(l({},t),{user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0,error:null})),f(Pt,t=>h(l({},t),{isLoading:!0,error:null})),f(W,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Ot,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i,isAuthenticated:!1,user:null})),f(Et,t=>h(l({},t),{isLoading:!0,error:null})),f(at,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(_t,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(Mt,t=>h(l({},t),{isLoading:!0,error:null})),f(ct,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(kt,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(Rt,t=>h(l({},t),{isLoading:!0})),f(ut,t=>h(l({},Gt),{isInitialized:!0})),f(pt,t=>h(l({},Gt),{isInitialized:!0})),f(H,t=>h(l({},Gt),{isInitialized:!0})),f(oo,t=>h(l({},t),{error:null})),f($t,t=>h(l({},t),{isLoading:!0,error:null})),f(lt,t=>h(l({},t),{isLoading:!1,error:null})),f(jt,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(Lt,t=>h(l({},t),{isLoading:!0,error:null})),f(ht,(t,{user:i})=>h(l({},t),{user:i,isAuthenticated:!0,isLoading:!1,error:null})),f(Ft,(t,{error:i})=>h(l({},t),{isLoading:!1,error:i})),f(io,(t,{user:i})=>h(l({},t),{user:i})));var Lo={auth:jo};var Vt=(()=>{class t{http;apiUrl=`${tt.apiUrl}/auth`;constructor(e){this.http=e}login(e){return console.log("[AuthService] POST /auth/login",e),this.http.post(`${this.apiUrl}/login`,e)}register(e){return console.log("[AuthService] POST /auth/register",e),this.http.post(`${this.apiUrl}/register`,e)}activate(e){return this.http.post(`${this.apiUrl}/activate`,e)}me(){return this.http.get(`${this.apiUrl}/me`)}refresh(){return this.http.post(`${this.apiUrl}/refresh`,{})}logout(){return this.http.post(`${this.apiUrl}/logout`,{})}forgotPassword(e){return console.log("[AuthService] POST /auth/forgot-password",e),this.http.post(`${this.apiUrl}/forgot-password`,e)}resetPassword(e){return console.log("[AuthService] POST /auth/reset-password",{token:e.token,password:"***"}),this.http.post(`${this.apiUrl}/reset-password`,e)}static \u0275fac=function(o){return new(o||t)(I(De))};static \u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Fo=(()=>{class t{actions$=S(qe);authService=S(Vt);router=S(Y);toastService=S(It);initAuth$=T(()=>this.actions$.pipe(b(q),z(()=>this.authService.me().pipe(y(e=>Tt({user:e})),O(()=>k(bt()))))));login$=T(()=>this.actions$.pipe(b(Pt),z(({credentials:e})=>this.authService.login(e).pipe(y(o=>W({user:o})),O(o=>k(Ot({error:o.error?.message||o.message||"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C"})))))));loginSuccess$=T(()=>this.actions$.pipe(b(W),F(()=>{this.router.navigate(["/home"])})),{dispatch:!1});register$=T(()=>this.actions$.pipe(b(Et),z(({data:e})=>this.authService.register(e).pipe(y(o=>at({user:o})),O(o=>k(_t({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})))))));registerSuccess$=T(()=>this.actions$.pipe(b(at),F(()=>{this.router.navigate(["/home"])})),{dispatch:!1});activateAccount$=T(()=>this.actions$.pipe(b(Mt),z(({data:e})=>this.authService.activate(e).pipe(y(o=>ct({user:o})),O(o=>k(kt({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u043A\u0442\u0438\u0432\u0430\u0446\u0438\u0438"})))))));activateAccountSuccess$=T(()=>this.actions$.pipe(b(ct),F(()=>{this.toastService.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D!")}),Jt(500),F(()=>{this.router.navigate(["/home"])})),{dispatch:!1});logout$=T(()=>this.actions$.pipe(b(Rt),z(()=>this.authService.logout().pipe(y(()=>ut()),O(e=>k(pt({error:e.error?.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u044B\u0445\u043E\u0434\u0430"})))))));logoutSuccess$=T(()=>this.actions$.pipe(b(ut,pt),F(()=>{this.router.navigate(["/auth/login"])})),{dispatch:!1});forgotPassword$=T(()=>this.actions$.pipe(b($t),z(({data:e})=>this.authService.forgotPassword(e).pipe(y(()=>lt()),O(o=>{let n=o.error?.message||o.message||(o.status===404?"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0441 \u0442\u0430\u043A\u0438\u043C email \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D":null)||"\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0437\u0430\u043F\u0440\u043E\u0441\u0430 \u043D\u0430 \u0441\u0431\u0440\u043E\u0441 \u043F\u0430\u0440\u043E\u043B\u044F";return k(jt({error:n}))})))));forgotPasswordSuccess$=T(()=>this.actions$.pipe(b(lt),F(()=>{this.toastService.success("\u041F\u0438\u0441\u044C\u043C\u043E \u0434\u043B\u044F \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u0432\u0430\u0448\u0443 \u043F\u043E\u0447\u0442\u0443")})),{dispatch:!1});resetPassword$=T(()=>this.actions$.pipe(b(Lt),z(({data:e})=>this.authService.resetPassword(e).pipe(y(o=>ht({user:o})),O(o=>k(Ft({error:o.error?.message||o.message||"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043F\u0430\u0440\u043E\u043B\u044F"})))))));resetPasswordSuccess$=T(()=>this.actions$.pipe(b(ht),F(()=>{this.toastService.success("\u041F\u0430\u0440\u043E\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D!")}),Jt(500),F(()=>{this.router.navigate(["/home"])})),{dispatch:!1});sessionExpired$=T(()=>this.actions$.pipe(b(H),F(()=>{this.router.navigate(["/auth/login"],{queryParams:{sessionExpired:!0}})})),{dispatch:!1});static \u0275fac=function(o){return new(o||t)};static \u0275prov=_({token:t,factory:t.\u0275fac})}return t})();var Wt=!1,Do=(t,i)=>{let e=S(G),o=S(Vt),n=!1;try{if(t.url.startsWith(tt.apiUrl)&&(n=!0),t.url.includes("/api/v1/")&&(n=!0),t.url.startsWith("http")){let m=new URL(t.url).origin;if(tt.apiUrl.startsWith("http"))try{let c=new URL(tt.apiUrl).origin;m===c&&(n=!0)}catch{}}}catch{(t.url.includes("herokuapp.com")||t.url.includes("westwood"))&&(n=!0)}let a=n?t.clone({withCredentials:!0}):t;return i(a).pipe(O(m=>{if(m.status===401&&n){let c=t.url.includes("/auth/login")||t.url.includes("/auth/register")||t.url.includes("/auth/me")||t.url.includes("/auth/forgot-password")||t.url.includes("/auth/reset-password")||t.url.includes("/auth/activate")||t.url.includes("/auth/refresh");if(!c&&!Wt)return Wt=!0,console.log("[AuthInterceptor] Access token expired, attempting refresh..."),o.refresh().pipe(ot(g=>(Wt=!1,console.log("[AuthInterceptor] Token refreshed successfully, retrying request"),e.dispatch(W({user:g})),i(a))),O(g=>(Wt=!1,console.log("[AuthInterceptor] Token refresh failed, session expired"),e.dispatch(H()),Kt(()=>g))));c||e.dispatch(H())}return Kt(()=>m)}))};var No=(()=>{class t{store=S(G);initializeApp(){return new Promise(e=>{this.store.dispatch(q()),this.store.select(Q).pipe(E(o=>o),U(1)).subscribe(()=>{e()})})}static \u0275fac=function(o){return new(o||t)};static \u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Uo=(()=>{class t extends yt{title;constructor(e){super(),this.title=e}updateTitle(e){let o=this.buildTitle(e);if(o!==void 0)this.title.setTitle(`Westwood - ${o}`);else{let n=e.root,a=this.getTitleFromRoute(n);this.title.setTitle(`Westwood - ${a}`)}}getTitleFromRoute(e){for(;e.firstChild;)e=e.firstChild;let o=e.routeConfig?.path||"",n={home:"Home",clients:"Clients",payments:"Payments",users:"Users",profile:"Profile","bonus-program":"Reward Program",communications:"Communications",whatsapp:"WhatsApp",login:"Login",activation:"Activation","forgot-password":"Forgot Password","reset-password":"Reset Password"};if(o.includes(":id")){let a=e.snapshot?.data;if(a&&a.title)return a.title;let m=e.snapshot?.params;if(m&&m.id){if(o.startsWith("clients/"))return"Client";if(o.startsWith("users/"))return"User"}}return n[o]||o.charAt(0).toUpperCase()+o.slice(1)}static \u0275fac=function(o){return new(o||t)(I(ze))};static \u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ci(){let t=S(No);return()=>t.initializeApp()}Fe(_o,{providers:[Ge(Ro,Ve({scrollPositionRestoration:"top",anchorScrolling:"enabled"})),Ne(Ue([Do])),Ye(Lo),to([Fo]),Po({maxAge:25,logOnly:!$e(),autoPause:!0,trace:!1,traceLimit:75}),{provide:yt,useClass:Uo},{provide:Me,useFactory:ci,multi:!0}]}).catch(t=>console.error(t));
