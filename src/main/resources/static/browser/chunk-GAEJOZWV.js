import{a as I}from"./chunk-QHVGAJNP.js";import{c as B,e as k,g as R,t as F,v as A}from"./chunk-NBNKGI3X.js";import{$ as v,Aa as t,Ba as w,Fa as y,Ga as f,Ha as l,Oa as u,Pa as g,Qa as C,Ta as E,Ua as P,Va as O,Y as d,Z as s,_ as b,a as x,b as _,da as p,ib as S,ka as o,na as h,ob as D,ra as M,va as m,za as n}from"./chunk-QQOXS2LP.js";function z(r,T){if(r&1){let e=y();n(0,"div",2)(1,"p",3),u(2," \u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043D\u0443\u0442\u044C \u043F\u043B\u0430\u0442\u0435\u0436? "),t(),n(3,"div",4)(4,"div",5)(5,"span",6),u(6,"ID \u041F\u043B\u0430\u0442\u0435\u0436\u0430:"),t(),n(7,"span",7),u(8),t()(),n(9,"div",5)(10,"span",6),u(11,"\u041A\u043B\u0438\u0435\u043D\u0442:"),t(),n(12,"span",8),u(13),t()(),n(14,"div",5)(15,"span",6),u(16,"\u0421\u0443\u043C\u043C\u0430 \u043F\u043B\u0430\u0442\u0435\u0436\u0430:"),t(),n(17,"span",8),u(18),t()(),n(19,"div",9),b(),n(20,"svg",10),w(21,"path",11)(22,"circle",12),t(),v(),n(23,"div",13)(24,"strong"),u(25,"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!"),t(),u(26," \u0411\u043E\u043D\u0443\u0441\u044B, \u0432\u044B\u0434\u0430\u043D\u043D\u044B\u0435 \u0437\u0430 \u044D\u0442\u043E\u0442 \u043F\u043B\u0430\u0442\u0435\u0436, \u0442\u0430\u043A\u0436\u0435 \u0431\u0443\u0434\u0443\u0442 \u043E\u0442\u043A\u0430\u0447\u0435\u043D\u044B. "),t()(),n(27,"div",14)(28,"span",6),u(29,"\u0411\u043E\u043D\u0443\u0441\u044B \u043A \u043E\u0442\u043A\u0430\u0442\u0443:"),t(),n(30,"span",15),u(31),t()()(),n(32,"div",16)(33,"label",17),u(34,"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0432\u043E\u0437\u0432\u0440\u0430\u0442\u0430 (\u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E)"),t(),n(35,"textarea",18),O("ngModelChange",function(i){d(e);let c=l();return P(c.refundReason,i)||(c.refundReason=i),s(i)}),t()(),n(36,"div",19)(37,"app-button",20),f("onClick",function(){d(e);let i=l();return s(i.onClose())}),u(38," \u041E\u0442\u043C\u0435\u043D\u0430 "),t(),n(39,"app-button",21),f("onClick",function(){d(e);let i=l();return s(i.onConfirm())}),u(40," \u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C \u0432\u043E\u0437\u0432\u0440\u0430\u0442 "),t()()()}if(r&2){let e=l();o(8),g(e.formatPaymentId(e.payment.id)),o(5),g(e.payment.clientName),o(5),C("",e.formatAmount(e.payment.amount)," \u20B8"),o(13),C("",e.formatAmount(e.payment.bonusEarned)," \u20B8"),o(4),E("ngModel",e.refundReason),o(4),m("disabled",e.isProcessing)("loading",e.isProcessing)}}var K=(()=>{class r{visible=!1;payment=null;isProcessing=!1;visibleChange=new p;confirm=new p;refundReason="";onClose(){this.isProcessing||(this.refundReason="",this.visibleChange.emit(!1))}onConfirm(){if(this.payment&&!this.isProcessing){let e=_(x({},this.payment),{refundReason:this.refundReason.trim()||void 0});this.confirm.emit(e)}}formatAmount(e){return e.toLocaleString("ru-RU")}formatPaymentId(e){return`#PAY-${e.padStart(3,"0")}`}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=h({type:r,selectors:[["app-refund-confirmation-modal"]],inputs:{visible:"visible",payment:"payment",isProcessing:"isProcessing"},outputs:{visibleChange:"visibleChange",confirm:"confirm"},decls:2,vars:4,consts:[[3,"visibleChange","visible","title","showCloseButton"],["class","refund-modal-content",4,"ngIf"],[1,"refund-modal-content"],[1,"refund-question"],[1,"refund-info"],[1,"refund-info-item"],[1,"refund-label"],[1,"refund-value","payment-id"],[1,"refund-value"],[1,"refund-warning"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none",1,"warning-icon"],["d","M12 9v4M12 17h.01","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],[1,"warning-text"],[1,"refund-info-item","bonus-info"],[1,"refund-value","bonus-amount"],[1,"refund-reason-section"],[1,"refund-reason-label"],["placeholder","\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043F\u0440\u0438\u0447\u0438\u043D\u0443 \u0432\u043E\u0437\u0432\u0440\u0430\u0442\u0430...","rows","3",1,"refund-reason-input",3,"ngModelChange","ngModel"],["modalFooter","",1,"refund-modal-footer"],["buttonType","ghost",3,"onClick"],["buttonType","danger",3,"onClick","disabled","loading"]],template:function(a,i){a&1&&(n(0,"app-modal",0),f("visibleChange",function(){return i.onClose()}),M(1,z,41,7,"div",1),t()),a&2&&(m("visible",i.visible)("title","\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0432\u043E\u0437\u0432\u0440\u0430\u0442\u0430")("showCloseButton",!0),o(),m("ngIf",i.payment))},dependencies:[D,S,F,B,k,R,I,A],styles:[".refund-modal-content[_ngcontent-%COMP%]{padding:1rem 0}.refund-question[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin-bottom:1.5rem}.refund-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.refund-info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f8fafc;border-radius:8px}.refund-info-item.bonus-info[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca}.refund-label[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;font-weight:500}.refund-value[_ngcontent-%COMP%]{font-size:.875rem;color:#1f2937;font-weight:600}.refund-value.payment-id[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem}.refund-value.bonus-amount[_ngcontent-%COMP%]{color:#dc2626;font-size:1rem}.refund-warning[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1rem;background:#fef3c7;border:1px solid #fde68a;border-radius:8px;align-items:flex-start}.warning-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#d97706;flex-shrink:0;margin-top:2px}.warning-text[_ngcontent-%COMP%]{font-size:.875rem;color:#92400e;line-height:1.5}.warning-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.refund-reason-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.refund-reason-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#475569;margin-bottom:.5rem}.refund-reason-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1.5px solid #e2e8f0;border-radius:8px;font-size:.875rem;font-family:inherit;resize:vertical;min-height:80px;background:#fff;color:#1f2937;line-height:1.5;transition:all .2s ease}.refund-reason-input[_ngcontent-%COMP%]:hover{border-color:#cbd5e1}.refund-reason-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.refund-reason-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.refund-modal-footer[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;margin-top:1.5rem}"]})}return r})();export{K as a};
